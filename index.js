!function t(e,n,r){function i(o,u){if(!n[o]){if(!e[o]){var s="function"==typeof require&&require;if(!u&&s)return s(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var l=n[o]={exports:{}};e[o][0].call(l.exports,function(t){var n=e[o][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e,n){function r(t,e,n,i){var a=e[n];if(a&&(p[a.label]||(p[a.label]={data:{id:a.label,label:h.explode(a.description,20)}}),a.parents))for(var o=0;o<a.parents.length;o++)d>i&&r(t,e,a.parents[o],i+1)}function i(t,e,n,r){var a=e[n];if(a&&a.parents)for(var o=0;o<a.parents.length;o++)g[a.label+","+a.parents[o]]||(g[a.label+","+a.parents[o]]={data:{id:a.label+","+a.parents[o],source:a.parents[o],target:a.label}},d>r&&i(t,e,a.parents[o],r+1))}function a(t,e){var n=u.stylesheet().selector("node").style({content:"data(label)","text-valign":"center","text-outline-width":2,"text-outline-color":"#000",color:"#fff"}).selector("edge").css({"target-arrow-shape":"triangle"});r(a,t,e,0),i(a,t,e,0);var a=u({container:document.getElementById("cy"),style:n,elements:{nodes:f.values(p),edges:f.values(g)}});a.elements().qtip({content:function(t){return console.log(this.data("label")),"<b>"+this.data("id")+"</b><br />"+this.data("label")},position:{my:"top center",at:"bottom center"},style:{classes:"qtip-bootstrap",tip:{width:16,height:8}}});var o=a.makeLayout({name:"dagre",padding:10,randomize:!0,animate:!0,infinite:!0,repulsion:1});o.run()}var o=(t("d3"),t("dagre")),u=t("cytoscape"),s=t("cytoscape-dagre"),l=t("cytoscape-qtip"),c=t("domready"),f=t("underscore"),h=t("./js/util.js"),d=20,p=[],g=[],v=h.getParameterByName("term");v&&$("#term").val(v),c(function(){s(u,o),l(u,$);var t;$.ajax({url:"gene_ontology.json",dataType:"json"}).done(function(e){t=e;var n=$("#term").val();$("#loading").text(""),a(t,n)}),$("form").submit(function(){var e=$("#term").val();return console.log("term="+e),window.location.search="term="+e,a(t,e),!1})})},{"./js/util.js":2,cytoscape:5,"cytoscape-dagre":3,"cytoscape-qtip":4,d3:6,dagre:7,domready:37,underscore:59}],2:[function(t,e,n){e.exports={filter:function(t,e){for(var n,r=[],i=0,a=t.length;a>i;i++)n=t[i],e(n)&&r.push(n);return r},explode:function(t,e){if(t=t.replace(/  +/g," ").replace(/^ /,"").replace(/ $/,""),"undefined"==typeof t)return"";if("undefined"==typeof e&&(e=30),t.length<=e)return t;var n=t.substring(0,e);if(t=t.substring(e)," "!==t.charAt(0)){for(;" "!==n.charAt(n.length-1)&&n.length>0;)t=n.charAt(n.length-1)+t,n=n.substring(0,n.length-1);0==n.length?(n=t.substring(0,e),t=t.substring(e)):n=n.substring(0,n.length-1)}else t=t.substring(1);return n+"\n"+this.explode(t,e)},getParameterByName:function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)"),n=e.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}}},{}],3:[function(t,e,n){!function(){"use strict";var t=function(t,e){function n(t){var e=this.options={};for(var n in i)e[n]=i[n];for(var n in t)e[n]=t[n]}if(t&&e){var r=function(t){return"function"==typeof t},i={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,minLen:function(t){return 1},edgeWeight:function(t){return 1},fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,boundingBox:void 0,ready:function(){},stop:function(){}};n.prototype.run=function(){var t=this.options,n=this,i=t.cy,a=t.eles,o=function(t,e){return r(e)?e.apply(t,[t]):e},u=t.boundingBox||{x1:0,y1:0,w:i.width(),h:i.height()};void 0===u.x2&&(u.x2=u.x1+u.w),void 0===u.w&&(u.w=u.x2-u.x1),void 0===u.y2&&(u.y2=u.y1+u.h),void 0===u.h&&(u.h=u.y2-u.y1);var s=new e.graphlib.Graph({multigraph:!0,compound:!0}),l={},c=function(t,e){null!=e&&(l[t]=e)};c("nodesep",t.nodeSep),c("edgesep",t.edgeSep),c("ranksep",t.rankSep),c("rankdir",t.rankDir),s.setGraph(l),s.setDefaultEdgeLabel(function(){return{}}),s.setDefaultNodeLabel(function(){return{}});for(var f=a.nodes(),h=0;h<f.length;h++){var d=f[h],p=d.boundingBox();s.setNode(d.id(),{width:p.w,height:p.h,name:d.id()})}for(var h=0;h<f.length;h++){var d=f[h];d.isChild()&&s.setParent(d.id(),d.parent().id())}for(var g=a.edges().stdFilter(function(t){return!t.source().isParent()&&!t.target().isParent()}),h=0;h<g.length;h++){var v=g[h];s.setEdge(v.source().id(),v.target().id(),{minlen:o(v,t.minLen),weight:o(v,t.edgeWeight),name:v.id()},v.id())}e.layout(s);for(var m=s.nodes(),h=0;h<m.length;h++){var y=m[h],x=s.node(y);i.getElementById(y).scratch().dagre=x}var b;t.boundingBox?(b={x1:1/0,x2:-(1/0),y1:1/0,y2:-(1/0)},f.forEach(function(t){var e=t.scratch().dagre;b.x1=Math.min(b.x1,e.x),b.x2=Math.max(b.x2,e.x),b.y1=Math.min(b.y1,e.y),b.y2=Math.max(b.y2,e.y)}),b.w=b.x2-b.x1,b.h=b.y2-b.y1):b=u;var w=function(e){if(t.boundingBox){var n=(e.x-b.x1)/b.w,r=(e.y-b.y1)/b.h;return{x:u.x1+n*u.w,y:u.y1+r*u.h}}return e};return f.layoutPositions(n,t,function(){var t=this.scratch().dagre;return w({x:t.x,y:t.y})}),this},t("layout","dagre",n)}};"undefined"!=typeof e&&e.exports&&(e.exports=t),"undefined"!=typeof define&&define.amd&&define("cytoscape-dagre",function(){return t}),"undefined"!=typeof cytoscape&&"undefined"!=typeof dagre&&t(cytoscape,dagre)}()},{}],4:[function(t,e,n){!function(t,n){"use strict";function r(t,e){function n(t,n){var i=t.scratch().qtip,o=e.extend({},n);o.id||(o.id="cy-qtip-target-"+(Date.now()+Math.round(1e4*Math.random()))),i.$domEle||(i.$domEle=r),o.position=o.position||{},o.position.container=o.position.container||e(document.body),o.position.viewport=o.position.viewport||e(document.body),o.position.target=[0,0],o.position.my=o.position.my||"top center",o.position.at=o.position.at||"bottom center";var c=o.position.adjust=o.position.adjust||{};return c.method=c.method||"flip",c.mouse=!1,s(c.cyAdjustToEleBB)&&(c.cyAdjustToEleBB=!0),o.show=o.show||{},s(o.show.event)&&(o.show.event="tap"),o.hide=o.hide||{},o.hide.cyViewport=void 0===o.hide.cyViewport?!0:o.hide.cyViewport,s(o.hide.event)&&(o.hide.event="unfocus"),o.overwrite=!1,o.content&&(a(o.content)||u(o.content)?o.content=l(o.content,t):o.content={text:l(o.content.text,t),title:l(o.content.title,t)}),o}var r=e("<div></div>"),i=250;t("collection","qtip",function(t){var e=this,r=this.cy(),a=r.container();return"api"===t?this.scratch().qtip.api:(e.each(function(e,u){var s=u.scratch(),l=s.qtip=s.qtip||{},f=n(u,t),h=f.position.adjust;l.$domEle.qtip(f);var d=l.api=l.$domEle.qtip("api");l.$domEle.removeData("qtip");var p=function(t){var e=a.getBoundingClientRect(),n=u.renderedPosition()||(t?t.cyRenderedPosition:void 0);if(n&&null!=n.x&&!isNaN(n.x)){if(f.position.adjust.cyAdjustToEleBB&&u.isNode()){var i=(f.position.my.toLowerCase(),f.position.at.toLowerCase()),s=r.zoom(),l=u.outerWidth()*s,c=u.outerHeight()*s;i.match("top")?n.y-=c/2:i.match("bottom")&&(n.y+=c/2),i.match("left")?n.x-=l/2:i.match("right")&&(n.x+=l/2),o(h.x)&&(n.x+=h.x),o(h.y)&&(n.y+=h.y)}d.set("position.adjust.x",e.left+n.x+window.pageXOffset),d.set("position.adjust.y",e.top+n.y+window.pageYOffset)}};p(),u.on(f.show.event,function(t){p(t),d.show()}),u.on(f.hide.event,function(t){d.hide()}),f.hide.cyViewport&&r.on("viewport",c(function(){d.hide()},i,{leading:!0})),f.position.adjust.cyViewport&&r.on("pan zoom",c(function(t){p(t),d.reposition()},i,{trailing:!0}))}),this)}),t("core","qtip",function(t){var e=this,r=e.container();if("api"===t)return this.scratch().qtip.api;var a=e.scratch(),o=a.qtip=a.qtip||{},u=n(e,t);o.$domEle.qtip(u);var s=o.api=o.$domEle.qtip("api");o.$domEle.removeData("qtip");var l=function(t){var e=r.getBoundingClientRect(),n=t.cyRenderedPosition;n&&null!=n.x&&!isNaN(n.x)&&(s.set("position.adjust.x",e.left+n.x+window.pageXOffset),s.set("position.adjust.y",e.top+n.y+window.pageYOffset))};return e.on(u.show.event,function(t){(!u.show.cyBgOnly||u.show.cyBgOnly&&t.cyTarget===e)&&(l(t),s.show())}),e.on(u.hide.event,function(t){(!u.hide.cyBgOnly||u.hide.cyBgOnly&&t.cyTarget===e)&&s.hide()}),u.hide.cyViewport&&e.on("viewport",c(function(){s.hide()},i,{leading:!0})),this})}var i=function(t){return null!=t&&"object"==typeof t},a=function(t){return null!=t&&"function"==typeof t},o=function(t){return null!=t&&"number"==typeof t},u=function(t){return null!=t&&"string"==typeof t},s=function(t){return void 0===t},l=function(t,e){return a(t)?function(n,r){return t.apply(e,[n,r])}:t},c=function(t,e,n){var r,o,u,s,l,c,f,h=0,d=!1,p=!0;if(a(t)){if(e=Math.max(0,e)||0,n===!0){var g=!0;p=!1}else i(n)&&(g=n.leading,d="maxWait"in n&&(Math.max(e,n.maxWait)||0),p="trailing"in n?n.trailing:p);var v=function(){var n=e-(Date.now()-s);if(0>=n){o&&clearTimeout(o);var i=f;o=c=f=void 0,i&&(h=Date.now(),u=t.apply(l,r),c||o||(r=l=null))}else c=setTimeout(v,n)},m=function(){c&&clearTimeout(c),o=c=f=void 0,(p||d!==e)&&(h=Date.now(),u=t.apply(l,r),c||o||(r=l=null))};return function(){if(r=arguments,s=Date.now(),l=this,f=p&&(c||!g),d===!1)var n=g&&!c;else{o||g||(h=s);var i=d-(s-h),a=0>=i;a?(o&&(o=clearTimeout(o)),h=s,u=t.apply(l,r)):o||(o=setTimeout(m,i))}return a&&c?c=clearTimeout(c):c||e===d||(c=setTimeout(v,e)),n&&(a=!0,u=t.apply(l,r)),!a||c||o||(r=l=null),u}}};"undefined"!=typeof e&&e.exports&&(e.exports=r),"undefined"!=typeof define&&define.amd&&define("cytoscape-qtip",function(){return r}),t&&n&&r(n,t)}("undefined"!=typeof jQuery?jQuery:null,"undefined"!=typeof cytoscape?cytoscape:null)},{}],5:[function(require,module,exports){(function(global,__dirname){!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.cytoscape=t()}}(function(){var define,module,exports;return function t(e,n,r){function i(o,u){if(!n[o]){if(!e[o]){var s="function"==typeof require&&require;if(!u&&s)return s(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e,n){"use strict";var r=t("./util"),i=t("./is"),a=t("./promise"),o=function(t,e,n){if(!(this instanceof o))return new o(t,e,n);var a=this._private=r.extend({duration:1e3},e,n);a.target=t,a.style=a.style||a.css,a.started=!1,a.playing=!1,a.hooked=!1,a.applying=!1,a.progress=0,a.completes=[],a.frames=[],a.complete&&i.fn(a.complete)&&a.completes.push(a.complete),this.length=1,this[0]=this},u=o.prototype;r.extend(u,{instanceString:function(){return"animation"},hook:function(){var t=this._private;if(!t.hooked){var e,n=t.target._private.animation;e=t.queue?n.queue:n.current,e.push(this),i.elementOrCollection(t.target)&&t.target.cy().addToAnimationPool(t.target),t.hooked=!0}return this},play:function(){var t=this._private;return 1===t.progress&&(t.progress=0),t.playing=!0,t.started=!1,t.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var t=this._private;return t.applying=!0,t.started=!1,t.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var t=this._private;return t.playing=!1,t.started=!1,this},stop:function(){var t=this._private;return t.playing=!1,t.started=!1,t.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(t){var e=this._private;return void 0===t?e.progress*e.duration:this.progress(t/e.duration)},progress:function(t){var e=this._private,n=e.playing;return void 0===t?e.progress:(n&&this.pause(),e.progress=t,e.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var t=this._private,e=t.playing;e&&this.pause(),t.progress=1-t.progress,t.started=!1;var n=function(e,n){var r=t[e];t[e]=t[n],t[n]=r};n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition");for(var i=0;i<t.style.length;i++){var a=t.style[i],o=a.name,u=t.startStyle[o];t.startStyle[o]=t.startStyle[r.dash2camel(o)]=a,t.style[i]=u}return e&&this.play(),this},promise:function(t){var e,n=this._private;switch(t){case"frame":e=n.frames;break;default:case"complete":case"completed":e=n.completes}return new a(function(t,n){e.push(function(){t()})})}}),u.complete=u.completed,e.exports=o},{"./is":77,"./promise":80,"./util":94}],2:[function(t,e,n){"use strict";var r=t("../../is"),i={aStar:function(t){var e=this;t=t||{};var n=function(t,e,r,i){if(t==e)return i.push(a.getElementById(e)),i;if(e in r){var o=r[e],u=p[e];return i.push(a.getElementById(e)),i.push(a.getElementById(u)),n(t,o,r,i)}},i=function(t,e){if(0!==t.length){for(var n=0,r=e[t[0]],i=1;i<t.length;i++){var a=e[t[i]];r>a&&(r=a,n=i)}return n}},a=this._private.cy;if(null!=t&&null!=t.root){var o=r.string(t.root)?this.filter(t.root)[0]:t.root[0];if(null!=t.goal){var u=r.string(t.goal)?this.filter(t.goal)[0]:t.goal[0];if(null!=t.heuristic&&r.fn(t.heuristic))var s=t.heuristic;else var s=function(){return 0};if(null!=t.weight&&r.fn(t.weight))var l=t.weight;else var l=function(t){return 1};if(null!=t.directed)var c=t.directed;else var c=!1;var f=[],h=[o.id()],d={},p={},g={},v={};g[o.id()]=0,v[o.id()]=s(o);for(var m=this.edges().stdFilter(function(t){return!t.isLoop()}),y=this.nodes(),x=0;h.length>0;){var b=i(h,v),w=a.getElementById(h[b]);if(x++,w.id()==u.id()){var _=n(o.id(),u.id(),d,[]);return _.reverse(),{found:!0,distance:g[w.id()],path:e.spawn(_),steps:x}}f.push(w.id()),h.splice(b,1);var M=w.connectedEdges();c&&(M=M.stdFilter(function(t){return t.data("source")===w.id()})),M=M.intersect(m);for(var k=0;k<M.length;k++){var E=M[k],S=E.connectedNodes().stdFilter(function(t){return t.id()!==w.id()}).intersect(y);if(-1==f.indexOf(S.id())){var N=g[w.id()]+l.apply(E,[E]);-1!=h.indexOf(S.id())?N<g[S.id()]&&(g[S.id()]=N,v[S.id()]=N+s(S),d[S.id()]=w.id()):(g[S.id()]=N,v[S.id()]=N+s(S),h.push(S.id()),d[S.id()]=w.id(),p[S.id()]=E.id())}}}return{found:!1,distance:void 0,path:void 0,steps:x}}}}};e.exports=i},{"../../is":77}],3:[function(t,e,n){"use strict";var r=t("../../is"),i=t("../../util"),a={bellmanFord:function(t){var e=this;if(t=t||{},null!=t.weight&&r.fn(t.weight))var n=t.weight;else var n=function(t){return 1};if(null!=t.directed)var a=t.directed;else var a=!1;if(null!=t.root){if(r.string(t.root))var o=this.filter(t.root)[0];else var o=t.root[0];for(var u=this._private.cy,s=this.edges().stdFilter(function(t){return!t.isLoop()}),l=this.nodes(),c=l.length,f={},h=0;c>h;h++)f[l[h].id()]=h;for(var d=[],p=[],g=[],h=0;c>h;h++)l[h].id()===o.id()?d[h]=0:d[h]=1/0,p[h]=void 0;for(var v=!1,h=1;c>h;h++){v=!1;for(var m=0;m<s.length;m++){var y=f[s[m].source().id()],x=f[s[m].target().id()],b=n.apply(s[m],[s[m]]),w=d[y]+b;if(w<d[x]&&(d[x]=w,p[x]=y,g[x]=s[m],v=!0),!a){var w=d[x]+b;w<d[y]&&(d[y]=w,p[y]=x,g[y]=s[m],v=!0)}}if(!v)break}if(v)for(var m=0;m<s.length;m++){var y=f[s[m].source().id()],x=f[s[m].target().id()],b=n.apply(s[m],[s[m]]);if(d[y]+b<d[x])return i.error("Graph contains a negative weight cycle for Bellman-Ford"),{pathTo:void 0,distanceTo:void 0,hasNegativeWeightCycle:!0}}for(var _=[],h=0;c>h;h++)_.push(l[h].id());var M={distanceTo:function(t){if(r.string(t))var e=u.filter(t)[0].id();else var e=t.id();return d[f[e]]},pathTo:function(t){var n=function(t,e,n,r,i,a){for(;;){if(i.push(u.getElementById(r[n])),i.push(a[n]),e===n)return i;var o=t[n];if("undefined"==typeof o)return;n=o}};if(r.string(t))var i=u.filter(t)[0].id();else var i=t.id();var a=[],s=n(p,f[o.id()],f[i],_,a,g);return null!=s&&s.reverse(),e.spawn(s)},hasNegativeWeightCycle:!1};return M}}};e.exports=a},{"../../is":77,"../../util":94}],4:[function(t,e,n){"use strict";var r=t("../../is"),i={betweennessCentrality:function(t){if(t=t||{},null!=t.weight&&r.fn(t.weight))var e=t.weight,n=!0;else var n=!1;if(null!=t.directed&&r.bool(t.directed))var i=t.directed;else var i=!1;for(var a=function(t,e){t.unshift(e);for(var n=0;g[t[n]]<g[t[n+1]]&&n<t.length-1;n++){var r=t[n];t[n]=t[n+1],t[n+1]=r}},o=this._private.cy,u=this.nodes(),s={},l={},c=0;c<u.length;c++)i?s[u[c].id()]=u[c].outgoers("node"):s[u[c].id()]=u[c].openNeighborhood("node");for(var c=0;c<u.length;c++)l[u[c].id()]=0;for(var f=0;f<u.length;f++){for(var h=[],d={},p={},g={},v=[],c=0;c<u.length;c++)d[u[c].id()]=[],p[u[c].id()]=0,g[u[c].id()]=Number.POSITIVE_INFINITY;for(p[u[f].id()]=1,g[u[f].id()]=0,v.unshift(u[f].id());v.length>0;){var m=v.pop();h.push(m),n?s[m].forEach(function(t){if(o.$("#"+m).edgesTo(t).length>0)var n=o.$("#"+m).edgesTo(t)[0];else var n=t.edgesTo("#"+m)[0];var r=e.apply(n,[n]);g[t.id()]>g[m]+r&&(g[t.id()]=g[m]+r,v.indexOf(t.id())<0?a(v,t.id()):(v.splice(v.indexOf(t.id()),1),a(v,t.id())),p[t.id()]=0,d[t.id()]=[]),g[t.id()]==g[m]+r&&(p[t.id()]=p[t.id()]+p[m],d[t.id()].push(m))}):s[m].forEach(function(t){g[t.id()]==Number.POSITIVE_INFINITY&&(v.unshift(t.id()),g[t.id()]=g[m]+1),g[t.id()]==g[m]+1&&(p[t.id()]=p[t.id()]+p[m],d[t.id()].push(m))})}for(var y={},c=0;c<u.length;c++)y[u[c].id()]=0;for(;h.length>0;){var x=h.pop();d[x].forEach(function(t){y[t]=y[t]+p[t]/p[x]*(1+y[x]),x!=u[f].id()&&(l[x]=l[x]+y[x])})}}var b=0;for(var w in l)b<l[w]&&(b=l[w]);var _={betweenness:function(t){if(r.string(t))var t=o.filter(t)[0].id();else var t=t.id();return l[t]},betweennessNormalized:function(t){if(r.string(t))var t=o.filter(t)[0].id();else var t=t.id();return l[t]/b}};return _.betweennessNormalised=_.betweennessNormalized,_}};i.bc=i.betweennessCentrality,e.exports=i},{"../../is":77}],5:[function(t,e,n){"use strict";var r=t("../../is"),i=t("../../heap"),a=function(t){return t={bfs:t.bfs||!t.dfs,dfs:t.dfs||!t.bfs},function(e,n,i){var a,o,u;r.plainObject(e)&&!r.elementOrCollection(e)&&(a=e,e=a.roots||a.root,n=a.visit,i=a.directed,o=a.std,u=a.thisArg),i=2!==arguments.length||r.fn(n)?i:n,n=r.fn(n)?n:function(){};for(var s,l=this._private.cy,c=e=r.string(e)?this.filter(e):e,f=[],h=[],d={},p={},g={},v=0,m=this.nodes(),y=this.edges(),x=0;x<c.length;x++)c[x].isNode()&&(f.unshift(c[x]),t.bfs&&(g[c[x].id()]=!0,h.push(c[x])),p[c[x].id()]=0);for(;0!==f.length;){var c=t.bfs?f.shift():f.pop();if(t.dfs){if(g[c.id()])continue;g[c.id()]=!0,h.push(c)}var b,w=p[c.id()],_=d[c.id()],M=null==_?void 0:_.connectedNodes().not(c)[0];if(b=o?n.call(u,c,_,M,v++,w):n.call(c,v++,w,c,_,M),b===!0){s=c;break}if(b===!1)break;for(var k=c.connectedEdges(i?function(){return this.data("source")===c.id()}:void 0).intersect(y),x=0;x<k.length;x++){var E=k[x],S=E.connectedNodes(function(){return this.id()!==c.id()}).intersect(m);0===S.length||g[S.id()]||(S=S[0],f.push(S),t.bfs&&(g[S.id()]=!0,h.push(S)),d[S.id()]=E,p[S.id()]=p[c.id()]+1)}}for(var N=[],x=0;x<h.length;x++){var T=h[x],C=d[T.id()];C&&N.push(C),N.push(T)}return{path:l.collection(N,{unique:!0}),found:l.collection(s)}}},o={breadthFirstSearch:a({bfs:!0}),depthFirstSearch:a({dfs:!0}),kruskal:function(t){function e(t){for(var e=0;e<a.length;e++){var n=a[e];if(n.anySame(t))return{eles:n,index:e}}}var n=this.cy();t=r.fn(t)?t:function(){return 1};for(var i=n.collection(n,[]),a=[],o=this.nodes(),u=0;u<o.length;u++)a.push(o[u].collection());for(var s=this.edges(),l=s.toArray().sort(function(e,n){var r=t.call(e,e),i=t.call(n,n);return r-i}),u=0;u<l.length;u++){var c=l[u],f=c.source()[0],h=c.target()[0],d=e(f),p=e(h);d.index!==p.index&&(i=i.add(c),a[d.index]=d.eles.add(p.eles),a.splice(p.index,1))}return o.add(i)},dijkstra:function(t,e,n){var a;r.plainObject(t)&&!r.elementOrCollection(t)&&(a=t,t=a.root,e=a.weight,n=a.directed);var o=this._private.cy;e=r.fn(e)?e:function(){return 1};for(var u=r.string(t)?this.filter(t)[0]:t[0],s={},l={},c={},f=this.edges().filter(function(){return!this.isLoop()}),h=this.nodes(),d=function(t){return s[t.id()]},p=function(t,e){s[t.id()]=e,g.updateItem(t)},g=new i(function(t,e){return d(t)-d(e)}),v=0;v<h.length;v++){var m=h[v];s[m.id()]=m.same(u)?0:1/0,g.push(m)}for(var y=function(t,r){for(var i,a=(n?t.edgesTo(r):t.edgesWith(r)).intersect(f),o=1/0,u=0;u<a.length;u++){var s=a[u],l=e.apply(s,[s]);(o>l||!i)&&(o=l,i=s)}return{edge:i,dist:o}};g.size()>0;){var x=g.pop(),b=d(x),w=x.id();if(c[w]=b,b===Math.Infinite)break;for(var _=x.neighborhood().intersect(h),v=0;v<_.length;v++){var M=_[v],k=M.id(),E=y(x,M),S=b+E.dist;S<d(M)&&(p(M,S),l[k]={node:x,edge:E.edge})}}return{distanceTo:function(t){var e=r.string(t)?h.filter(t)[0]:t[0];return c[e.id()]},pathTo:function(t){var e=r.string(t)?h.filter(t)[0]:t[0],n=[],i=e;if(e.length>0)for(n.unshift(e);l[i.id()];){var a=l[i.id()];n.unshift(a.edge),n.unshift(a.node),i=a.node}return o.collection(n)}}}};o.bfs=o.breadthFirstSearch,o.dfs=o.depthFirstSearch,e.exports=o},{"../../heap":75,"../../is":77}],6:[function(t,e,n){"use strict";var r=t("../../is"),i={closenessCentralityNormalized:function(t){t=t||{};var e=this.cy(),n=t.harmonic;void 0===n&&(n=!0);for(var i={},a=0,o=this.nodes(),u=this.floydWarshall({weight:t.weight,directed:t.directed}),s=0;s<o.length;s++){for(var l=0,c=0;c<o.length;c++)if(s!=c){var f=u.distance(o[s],o[c]);l+=n?1/f:f}n||(l=1/l),l>a&&(a=l),i[o[s].id()]=l}return{closeness:function(t){if(r.string(t))var t=e.filter(t)[0].id();else var t=t.id();return i[t]/a}}},closenessCentrality:function(t){if(t=t||{},null!=t.root){if(r.string(t.root))var e=this.filter(t.root)[0];else var e=t.root[0];if(null!=t.weight&&r.fn(t.weight))var n=t.weight;else var n=function(){return 1};if(null!=t.directed&&r.bool(t.directed))var i=t.directed;else var i=!1;var a=t.harmonic;void 0===a&&(a=!0);for(var o=this.dijkstra({root:e,weight:n,directed:i}),u=0,s=this.nodes(),l=0;l<s.length;l++)if(s[l].id()!=e.id()){var c=o.distanceTo(s[l]);u+=a?1/c:c}return a?u:1/u}}};i.cc=i.closenessCentrality,i.ccn=i.closenessCentralityNormalised=i.closenessCentralityNormalized,e.exports=i},{"../../is":77}],7:[function(t,e,n){"use strict";var r=t("../../is"),i=t("../../util"),a={degreeCentralityNormalized:function(t){t=t||{};var e=this.cy();if(null!=t.directed)var n=t.directed;else var n=!1;var a=this.nodes(),o=a.length;if(n){for(var u={},s={},l=0,c=0,f=0;o>f;f++){var h=a[f],d=this.degreeCentrality(i.extend({},t,{root:h}));l<d.indegree&&(l=d.indegree),c<d.outdegree&&(c=d.outdegree),u[h.id()]=d.indegree,s[h.id()]=d.outdegree}return{indegree:function(t){if(r.string(t))var t=e.filter(t)[0].id();else var t=t.id();return u[t]/l},outdegree:function(t){if(r.string(t))var t=e.filter(t)[0].id();else var t=t.id();return s[t]/c}}}for(var p={},g=0,f=0;o>f;f++){var h=a[f],d=this.degreeCentrality(i.extend({},t,{root:h}));g<d.degree&&(g=d.degree),p[h.id()]=d.degree}return{degree:function(t){if(r.string(t))var t=e.filter(t)[0].id();else var t=t.id();return p[t]/g}}},degreeCentrality:function(t){t=t||{};var e=this;if(null!=t&&null!=t.root){var n=r.string(t.root)?this.filter(t.root)[0]:t.root[0];if(null!=t.weight&&r.fn(t.weight))var i=t.weight;else var i=function(t){return 1};if(null!=t.directed)var a=t.directed;else var a=!1;if(null!=t.alpha&&r.number(t.alpha))var o=t.alpha;else o=0;if(a){for(var u=n.connectedEdges('edge[target = "'+n.id()+'"]').intersection(e),s=n.connectedEdges('edge[source = "'+n.id()+'"]').intersection(e),l=u.length,c=s.length,f=0,h=0,d=0;d<u.length;d++){var p=u[d];f+=i.apply(p,[p])}for(var d=0;d<s.length;d++){var p=s[d];h+=i.apply(p,[p])}return{indegree:Math.pow(l,1-o)*Math.pow(f,o),outdegree:Math.pow(c,1-o)*Math.pow(h,o)}}for(var g=n.connectedEdges().intersection(e),v=g.length,m=0,d=0;d<g.length;d++){var p=g[d];m+=i.apply(p,[p])}return{degree:Math.pow(v,1-o)*Math.pow(m,o)}}}};a.dc=a.degreeCentrality,a.dcn=a.degreeCentralityNormalised=a.degreeCentralityNormalized,e.exports=a},{"../../is":77,"../../util":94}],8:[function(t,e,n){"use strict";var r=t("../../is"),i={floydWarshall:function(t){t=t||{};var e=this.cy();if(null!=t.weight&&r.fn(t.weight))var n=t.weight;else var n=function(t){return 1};if(null!=t.directed)var i=t.directed;else var i=!1;for(var a=this.edges().stdFilter(function(t){return!t.isLoop()}),o=this.nodes(),u=o.length,s={},l=0;u>l;l++)s[o[l].id()]=l;for(var c=[],l=0;u>l;l++){for(var f=new Array(u),h=0;u>h;h++)l==h?f[h]=0:f[h]=1/0;c.push(f)}var d=[],p=[],g=function(t){for(var e=0;u>e;e++){for(var n=new Array(u),r=0;u>r;r++)n[r]=void 0;t.push(n)}};g(d),g(p);for(var l=0;l<a.length;l++){var v=s[a[l].source().id()],m=s[a[l].target().id()],y=n.apply(a[l],[a[l]]);c[v][m]>y&&(c[v][m]=y,d[v][m]=m,p[v][m]=a[l])}if(!i)for(var l=0;l<a.length;l++){var v=s[a[l].target().id()],m=s[a[l].source().id()],y=n.apply(a[l],[a[l]]);c[v][m]>y&&(c[v][m]=y,d[v][m]=m,p[v][m]=a[l])}for(var x=0;u>x;x++)for(var l=0;u>l;l++)for(var h=0;u>h;h++)c[l][x]+c[x][h]<c[l][h]&&(c[l][h]=c[l][x]+c[x][h],d[l][h]=d[l][x]);for(var b=[],l=0;u>l;l++)b.push(o[l].id());var w={distance:function(t,n){if(r.string(t))var i=e.filter(t)[0].id();else var i=t.id();if(r.string(n))var a=e.filter(n)[0].id();else var a=n.id();return c[s[i]][s[a]]},path:function(t,n){var i=function(t,n,r,i,a){if(t===n)return e.getElementById(i[t]);if(void 0!==r[t][n]){for(var o=[e.getElementById(i[t])],u=t;t!==n;){u=t,t=r[t][n];var s=a[u][t];o.push(s),o.push(e.getElementById(i[t]))}return o}};if(r.string(t))var a=e.filter(t)[0].id();else var a=t.id();if(r.string(n))var o=e.filter(n)[0].id();else var o=n.id();var u=i(s[a],s[o],d,b,p);return e.collection(u)}};return w}};e.exports=i},{"../../is":77}],9:[function(t,e,n){"use strict";var r=t("../../util"),i={};[t("./bfs-dfs"),t("./a-star"),t("./floyd-warshall"),t("./bellman-ford"),t("./kerger-stein"),t("./page-rank"),t("./degree-centrality"),t("./closeness-centrality"),t("./betweenness-centrality")].forEach(function(t){r.extend(i,t)}),e.exports=i},{"../../util":94,"./a-star":2,"./bellman-ford":3,"./betweenness-centrality":4,"./bfs-dfs":5,"./closeness-centrality":6,"./degree-centrality":7,"./floyd-warshall":8,"./kerger-stein":10,"./page-rank":11}],10:[function(t,e,n){"use strict";var r=t("../../util"),i={kargerStein:function(t){var e=this;t=t||{};var n=function(t,e,n){for(var r=n[t],i=r[1],a=r[2],o=e[i],u=e[a],s=n.filter(function(t){return e[t[1]]===o&&e[t[2]]===u?!1:e[t[1]]===u&&e[t[2]]===o?!1:!0}),l=0;l<s.length;l++){var c=s[l];c[1]===u?(s[l]=c.slice(0),s[l][1]=o):c[2]===u&&(s[l]=c.slice(0),s[l][2]=o)}for(var l=0;l<e.length;l++)e[l]===u&&(e[l]=o);return s},i=function(t,e,r,a){if(a>=r)return e;var o=Math.floor(Math.random()*e.length),u=n(o,t,e);return i(t,u,r-1,a)},a=this._private.cy,o=this.edges().stdFilter(function(t){return!t.isLoop()}),u=this.nodes(),s=u.length,l=o.length,c=Math.ceil(Math.pow(Math.log(s)/Math.LN2,2)),f=Math.floor(s/Math.sqrt(2));if(2>s)return void r.error("At least 2 nodes are required for Karger-Stein algorithm");for(var h={},d=0;s>d;d++)h[u[d].id()]=d;for(var p=[],d=0;l>d;d++){var g=o[d];p.push([d,h[g.source().id()],h[g.target().id()]])}for(var v,m=1/0,y=[],d=0;s>d;d++)y.push(d);for(var x=0;c>=x;x++){var b=y.slice(0),w=i(b,p,s,f),_=b.slice(0),M=i(b,w,f,2),k=i(_,w,f,2);M.length<=k.length&&M.length<m?(m=M.length,v=[M,b]):k.length<=M.length&&k.length<m&&(m=k.length,v=[k,_])}for(var E=v[0].map(function(t){return o[t[0]]}),S=[],N=[],T=v[1][0],d=0;d<v[1].length;d++){var C=v[1][d];C===T?S.push(u[d]):N.push(u[d])}var D={cut:e.spawn(a,E),partition1:e.spawn(S),partition2:e.spawn(N)};return D}};e.exports=i},{"../../util":94}],11:[function(t,e,n){"use strict";var r=t("../../is"),i={pageRank:function(t){t=t||{};var e=function(t){for(var e=t.length,n=0,r=0;e>r;r++)n+=t[r];for(var r=0;e>r;r++)t[r]=t[r]/n};if(null!=t&&null!=t.dampingFactor)var n=t.dampingFactor;else var n=.8;if(null!=t&&null!=t.precision)var i=t.precision;else var i=1e-6;if(null!=t&&null!=t.iterations)var a=t.iterations;else var a=200;if(null!=t&&null!=t.weight&&r.fn(t.weight))var o=t.weight;else var o=function(t){return 1};for(var u=this._private.cy,s=this.edges().stdFilter(function(t){return!t.isLoop()}),l=this.nodes(),c=l.length,f=s.length,h={},d=0;c>d;d++)h[l[d].id()]=d;for(var p=[],g=[],v=(1-n)/c,d=0;c>d;d++){for(var m=[],y=0;c>y;y++)m.push(0);p.push(m),g.push(0)}for(var d=0;f>d;d++){var x=s[d],b=h[x.source().id()],w=h[x.target().id()],_=o.apply(x,[x]);p[w][b]+=_,g[b]+=_}for(var M=1/c+v,y=0;c>y;y++)if(0===g[y])for(var d=0;c>d;d++)p[d][y]=M;else for(var d=0;c>d;d++)p[d][y]=p[d][y]/g[y]+v;for(var k,E=[],S=[],d=0;c>d;d++)E.push(1),S.push(0);for(var N=0;a>N;N++){for(var T=S.slice(0),d=0;c>d;d++)for(var y=0;c>y;y++)T[d]+=p[d][y]*E[y];e(T),k=E,E=T;for(var C=0,d=0;c>d;d++)C+=Math.pow(k[d]-E[d],2);if(i>C)break}var D={rank:function(t){if(r.string(t))var e=u.filter(t)[0].id();else var e=t.id();return E[h[e]]}};return D}};e.exports=i},{"../../is":77}],12:[function(t,e,n){"use strict";var r=t("../define"),i={animate:r.animate(),animation:r.animation(),animated:r.animated(),clearQueue:r.clearQueue(),delay:r.delay(),delayAnimation:r.delayAnimation(),stop:r.stop()};e.exports=i},{"../define":41}],13:[function(t,e,n){"use strict";var r=t("../util"),i={classes:function(t){t=t.match(/\S+/g)||[];for(var e=this,n=[],i={},a=0;a<t.length;a++){var o=t[a];i[o]=!0}for(var u=0;u<e.length;u++){for(var s=e[u],l=s._private,c=l.classes,f=!1,a=0;a<t.length;a++){var o=t[a],h=c[o];if(!h){f=!0;break}}if(!f)for(var d in c){var h=c[d],p=i[d];if(h&&!p){f=!0;break}}f&&(l.classes=r.copy(i),n.push(s))}return n.length>0&&this.spawn(n).updateStyle().trigger("class"),e},addClass:function(t){return this.toggleClass(t,!0)},hasClass:function(t){var e=this[0];return null!=e&&e._private.classes[t]?!0:!1},toggleClass:function(t,e){for(var n=t.match(/\S+/g)||[],r=this,i=[],a=0,o=r.length;o>a;a++)for(var u=r[a],s=!1,l=0;l<n.length;l++){var c=n[l],f=u._private.classes,h=f[c],d=e||void 0===e&&!h;d?(f[c]=!0,h||s||(i.push(u),s=!0)):(f[c]=!1,h&&!s&&(i.push(u),s=!0))}return i.length>0&&this.spawn(i).updateStyle().trigger("class"),r},removeClass:function(t){return this.toggleClass(t,!1)},flashClass:function(t,e){var n=this;if(null==e)e=250;else if(0===e)return n;return n.addClass(t),setTimeout(function(){n.removeClass(t)},e),n}};e.exports=i},{"../util":94}],14:[function(t,e,n){"use strict";var r={allAre:function(t){return this.filter(t).length===this.length},is:function(t){return this.filter(t).length>0},some:function(t,e){for(var n=0;n<this.length;n++){var r=e?t.apply(e,[this[n],n,this]):t(this[n],n,this);if(r)return!0}return!1},every:function(t,e){for(var n=0;n<this.length;n++){var r=e?t.apply(e,[this[n],n,this]):t(this[n],n,this);if(!r)return!1}return!0},same:function(t){return t=this.cy().collection(t),this.length!==t.length?!1:this.intersect(t).length===this.length},anySame:function(t){return t=this.cy().collection(t),this.intersect(t).length>0},allAreNeighbors:function(t){return t=this.cy().collection(t),this.neighborhood().intersect(t).length===t.length}};r.allAreNeighbours=r.allAreNeighbors,e.exports=r},{}],15:[function(t,e,n){"use strict";var r={parent:function(t){for(var e=[],n=this._private.cy,r=0;r<this.length;r++){var i=this[r],a=n.getElementById(i._private.data.parent);a.size()>0&&e.push(a)}return this.spawn(e,{unique:!0}).filter(t)},parents:function(t){for(var e=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++){var i=n[r];e.push(i)}n=n.parent()}return this.spawn(e,{unique:!0}).filter(t)},commonAncestors:function(t){for(var e,n=0;n<this.length;n++){var r=this[n],i=r.parents();e=e||i,e=e.intersect(i)}return e.filter(t)},orphans:function(t){return this.stdFilter(function(t){return t.isNode()&&t.parent().empty()}).filter(t)},nonorphans:function(t){return this.stdFilter(function(t){return t.isNode()&&t.parent().nonempty()}).filter(t)},children:function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];e=e.concat(r._private.children)}return this.spawn(e,{unique:!0}).filter(t)},siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];return t?0!==t._private.children.length:void 0},isChild:function(){var t=this[0];return t?void 0!==t._private.data.parent&&0!==t.parent().length:void 0},descendants:function(t){function e(t){for(var r=0;r<t.length;r++){var i=t[r];n.push(i),i.children().nonempty()&&e(i.children())}
}var n=[];return e(this.children()),this.spawn(n,{unique:!0}).filter(t)}};r.ancestors=r.parents,e.exports=r},{}],16:[function(t,e,n){"use strict";var r,i,a=t("../define");r=i={data:a.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:a.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:a.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:a.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:a.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:a.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];return t?t._private.data.id:void 0}},r.attr=r.data,r.removeAttr=r.removeData,e.exports=i},{"../define":41}],17:[function(t,e,n){"use strict";function r(t){return function(e){var n=this;if(void 0===e&&(e=!0),0!==n.length&&n.isNode()&&!n.removed()){for(var r=0,i=n[0],a=i._private.edges,o=0;o<a.length;o++){var u=a[o];(e||!u.isLoop())&&(r+=t(i,u))}return r}}}function i(t,e){return function(n){for(var r,i=this.nodes(),a=0;a<i.length;a++){var o=i[a],u=o[t](n);void 0===u||void 0!==r&&!e(u,r)||(r=u)}return r}}var a=t("../util"),o={};a.extend(o,{degree:r(function(t,e){return e.source().same(e.target())?2:1}),indegree:r(function(t,e){return e.target().same(t)?1:0}),outdegree:r(function(t,e){return e.source().same(t)?1:0})}),a.extend(o,{minDegree:i("degree",function(t,e){return e>t}),maxDegree:i("degree",function(t,e){return t>e}),minIndegree:i("indegree",function(t,e){return e>t}),maxIndegree:i("indegree",function(t,e){return t>e}),minOutdegree:i("outdegree",function(t,e){return e>t}),maxOutdegree:i("outdegree",function(t,e){return t>e})}),a.extend(o,{totalDegree:function(t){for(var e=0,n=this.nodes(),r=0;r<n.length;r++)e+=n[r].degree(t);return e}}),e.exports=o},{"../util":94}],18:[function(t,e,n){"use strict";var r,i,a=t("../define"),o=t("../is"),u=t("../util");r=i={position:a.data({field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"rtrigger",allowGetting:!0,validKeys:["x","y"],onSet:function(t){var e=t.updateCompoundBounds();e.rtrigger("position")},canSet:function(t){return!t.locked()&&!t.isParent()}}),silentPosition:a.data({field:"position",bindingEvent:"position",allowBinding:!1,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!1,triggerFnName:"trigger",allowGetting:!0,validKeys:["x","y"],onSet:function(t){t.updateCompoundBounds()},canSet:function(t){return!t.locked()&&!t.isParent()}}),positions:function(t,e){if(o.plainObject(t))this.position(t);else if(o.fn(t)){for(var n=t,r=0;r<this.length;r++){var i=this[r],t=n.apply(i,[r,i]);if(t&&!i.locked()&&!i.isParent()){var a=i._private.position;a.x=t.x,a.y=t.y}}var u=this.updateCompoundBounds(),s=u.length>0?this.add(u):this;e?s.trigger("position"):s.rtrigger("position")}return this},silentPositions:function(t){return this.positions(t,!0)},renderedPosition:function(t,e){var n=this[0],r=this.cy(),i=r.zoom(),a=r.pan(),u=o.plainObject(t)?t:void 0,s=void 0!==u||void 0!==e&&o.string(t);if(n&&n.isNode()){if(!s){var l=n._private.position;return u={x:l.x*i+a.x,y:l.y*i+a.y},void 0===t?u:u[t]}for(var c=0;c<this.length;c++){var n=this[c];void 0!==e?n._private.position[t]=(e-a[t])/i:void 0!==u&&(n._private.position={x:(u.x-a.x)/i,y:(u.y-a.y)/i})}this.rtrigger("position")}else if(!s)return;return this},relativePosition:function(t,e){var n=this[0],r=this.cy(),i=o.plainObject(t)?t:void 0,a=void 0!==i||void 0!==e&&o.string(t),u=r.hasCompoundNodes();if(n&&n.isNode()){if(!a){var s=n._private.position,l=u?n.parent():null,c=l&&l.length>0,f=c;c&&(l=l[0]);var h=f?l._private.position:{x:0,y:0};return i={x:s.x-h.x,y:s.y-h.y},void 0===t?i:i[t]}for(var d=0;d<this.length;d++){var n=this[d],l=u?n.parent():null,c=l&&l.length>0,f=c;c&&(l=l[0]);var h=f?l._private.position:{x:0,y:0};void 0!==e?n._private.position[t]=e+h[t]:void 0!==i&&(n._private.position={x:i.x+h.x,y:i.y+h.y})}this.rtrigger("position")}else if(!a)return;return this},renderedBoundingBox:function(t){var e=this.boundingBox(t),n=this.cy(),r=n.zoom(),i=n.pan(),a=e.x1*r+i.x,o=e.x2*r+i.x,u=e.y1*r+i.y,s=e.y2*r+i.y;return{x1:a,x2:o,y1:u,y2:s,w:o-a,h:s-u}},updateCompoundBounds:function(){function t(t){var e=t.children(),r=t._private.style,i="include"===r["compound-sizing-wrt-labels"].value,a=e.boundingBox({includeLabels:i,includeEdges:!0}),o={top:r["padding-top"].pfValue,bottom:r["padding-bottom"].pfValue,left:r["padding-left"].pfValue,right:r["padding-right"].pfValue},u=t._private.position,s=!1;"auto"===r.width.value&&(t._private.autoWidth=a.w,u.x=(a.x1+a.x2-o.left+o.right)/2,s=!0),"auto"===r.height.value&&(t._private.autoHeight=a.h,u.y=(a.y1+a.y2-o.top+o.bottom)/2,s=!0),s&&n.push(t)}var e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return e.collection();for(var n=[],r=this.parent();r.nonempty();){for(var i=0;i<r.length;i++){var a=r[i];t(a)}r=r.parent()}return this.spawn(n)},boundingBox:function(t){var e=this,n=e._private.cy,r=n._private,i=r.styleEnabled;t=t||u.staticEmptyObject();var a=void 0===t.includeNodes?!0:t.includeNodes,o=void 0===t.includeEdges?!0:t.includeEdges,s=void 0===t.includeLabels?!0:t.includeLabels;i&&r.renderer.recalculateRenderedStyle(this);for(var l=1/0,c=-(1/0),f=1/0,h=-(1/0),d=0;d<e.length;d++){var p,g,v,m,y,x,b=e[d],w=b._private,_=w.style,M=i?w.style.display.value:"element",k="nodes"===w.group,E=!1;if("none"!==M){if(k&&a){E=!0;var S=w.position;y=S.x,x=S.y;var N=b.outerWidth(),T=N/2,C=b.outerHeight(),D=C/2;p=y-T,g=y+T,v=x-D,m=x+D,l=l>p?p:l,c=g>c?g:c,f=f>v?v:f,h=m>h?m:h}else if(b.isEdge()&&o){E=!0;var P=w.source,A=P._private,z=A.position,L=w.target,I=L._private,O=I.position,R=w.rstyle||{},N=0,j=0;if(i&&(N=_.width.pfValue,j=N/2),p=z.x,g=O.x,v=z.y,m=O.y,p>g){var B=p;p=g,g=B}if(v>m){var B=v;v=m,m=B}if(p-=j,g+=j,v-=j,m+=j,l=l>p?p:l,c=g>c?g:c,f=f>v?v:f,h=m>h?m:h,i)for(var q=R.bezierPts||R.linePts||[],F=0;F<q.length;F++){var V=q[F];p=V.x-j,g=V.x+j,v=V.y-j,m=V.y+j,l=l>p?p:l,c=g>c?g:c,f=f>v?v:f,h=m>h?m:h}if(i&&"haystack"===_["curve-style"].strValue){var Y=R.haystackPts;if(p=Y[0].x,v=Y[0].y,g=Y[1].x,m=Y[1].y,p>g){var B=p;p=g,g=B}if(v>m){var B=v;v=m,m=B}l=l>p?p:l,c=g>c?g:c,f=f>v?v:f,h=m>h?m:h}}if(i){var w=b._private,_=w.style,R=w.rstyle,X=_.label.strValue,$=_["font-size"],U=_["text-halign"],H=_["text-valign"],W=R.labelWidth,Z=R.labelHeight,G=R.labelX,K=R.labelY,J=b.isEdge(),Q="autorotate"===_["edge-text-rotation"].strValue;if(s&&X&&$&&null!=Z&&null!=W&&null!=G&&null!=K&&U&&H){var tt,et,nt,rt,it=Z,at=W;if(J){if(tt=G-at/2,et=G+at/2,nt=K-it/2,rt=K+it/2,Q){var ot=w.rscratch.labelAngle,ut=Math.cos(ot),st=Math.sin(ot),lt=function(t,e){return t-=G,e-=K,{x:t*ut-e*st+G,y:t*st+e*ut+K}},ct=lt(tt,nt),ft=lt(tt,rt),ht=lt(et,nt),dt=lt(et,rt);tt=Math.min(ct.x,ft.x,ht.x,dt.x),et=Math.max(ct.x,ft.x,ht.x,dt.x),nt=Math.min(ct.y,ft.y,ht.y,dt.y),rt=Math.max(ct.y,ft.y,ht.y,dt.y)}}else{switch(U.value){case"left":tt=G-at,et=G;break;case"center":tt=G-at/2,et=G+at/2;break;case"right":tt=G,et=G+at}switch(H.value){case"top":nt=K-it,rt=K;break;case"center":nt=K-it/2,rt=K+it/2;break;case"bottom":nt=K,rt=K+it}}l=l>tt?tt:l,c=et>c?et:c,f=f>nt?nt:f,h=rt>h?rt:h}}}}var pt=function(t){return t===1/0||t===-(1/0)?0:t};return l=pt(l),c=pt(c),f=pt(f),h=pt(h),{x1:l,x2:c,y1:f,y2:h,w:c-l,h:h-f}}};var s=function(t){t.uppercaseName=u.capitalize(t.name),t.autoName="auto"+t.uppercaseName,t.labelName="label"+t.uppercaseName,t.outerName="outer"+t.uppercaseName,t.uppercaseOuterName=u.capitalize(t.outerName),r[t.name]=function(){var e=this[0],n=e._private,r=n.cy,i=r._private.styleEnabled;if(e){if(!i)return 1;var a=n.style[t.name];switch(a.strValue){case"auto":return n[t.autoName]||0;case"label":return n.rstyle[t.labelName]||0;default:return a.pfValue}}},r["outer"+t.uppercaseName]=function(){var e=this[0],n=e._private,r=n.cy,i=r._private.styleEnabled;if(e){if(i){var a=n.style,o=e[t.name](),u=a["border-width"].pfValue,s=a[t.paddings[0]].pfValue+a[t.paddings[1]].pfValue;return o+u+s}return 1}},r["rendered"+t.uppercaseName]=function(){var e=this[0];if(e){var n=e[t.name]();return n*this.cy().zoom()}},r["rendered"+t.uppercaseOuterName]=function(){var e=this[0];if(e){var n=e[t.outerName]();return n*this.cy().zoom()}}};s({name:"width",paddings:["padding-left","padding-right"]}),s({name:"height",paddings:["padding-top","padding-bottom"]}),r.modelPosition=r.point=r.position,r.modelPositions=r.points=r.positions,r.renderedPoint=r.renderedPosition,r.relativePoint=r.relativePosition,r.boundingbox=r.boundingBox,r.renderedBoundingbox=r.renderedBoundingBox,e.exports=i},{"../define":41,"../is":77,"../util":94}],19:[function(t,e,n){"use strict";var r=t("../util"),i=t("../is"),a=function(t,e,n){if(!(this instanceof a))return new a(t,e,n);var o=this;if(n=void 0===n||n?!0:!1,void 0===t||void 0===e||!i.core(t))return void r.error("An element must have a core reference and parameters set");var u=e.group;if(null==u&&(u=null!=e.data.source&&null!=e.data.target?"edges":"nodes"),"nodes"!==u&&"edges"!==u)return void r.error("An element must be of type `nodes` or `edges`; you specified `"+u+"`");if(this.length=1,this[0]=this,this._private={cy:t,single:!0,data:e.data||{},position:e.position||{},autoWidth:void 0,autoHeight:void 0,listeners:[],group:u,style:{},rstyle:{},styleCxts:[],removed:!0,selected:e.selected?!0:!1,selectable:void 0===e.selectable?!0:e.selectable?!0:!1,locked:e.locked?!0:!1,grabbed:!1,grabbable:void 0===e.grabbable?!0:e.grabbable?!0:!1,active:!1,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:e.scratch||{},edges:[],children:[]},e.renderedPosition){var s=e.renderedPosition,l=t.pan(),c=t.zoom();this._private.position={x:(s.x-l.x)/c,y:(s.y-l.y)/c}}if(i.string(e.classes))for(var f=e.classes.split(/\s+/),h=0,d=f.length;d>h;h++){var p=f[h];p&&""!==p&&(o._private.classes[p]=!0)}(e.style||e.css)&&t.style().applyBypass(this,e.style||e.css),(void 0===n||n)&&this.restore()};e.exports=a},{"../is":77,"../util":94}],20:[function(t,e,n){"use strict";var r=t("../define"),i={on:r.on(),one:r.on({unbindSelfOnTrigger:!0}),once:r.on({unbindAllBindersOnTrigger:!0}),off:r.off(),trigger:r.trigger(),rtrigger:function(t,e){return 0!==this.length?(this.cy().notify({type:t,collection:this}),this.trigger(t,e),this):void 0}};r.eventAliasesOn(i),e.exports=i},{"../define":41}],21:[function(t,e,n){"use strict";var r=t("../is"),i=t("../selector"),a={nodes:function(t){return this.filter(function(t,e){return e.isNode()}).filter(t)},edges:function(t){return this.filter(function(t,e){return e.isEdge()}).filter(t)},filter:function(t){if(r.fn(t)){for(var e=[],n=0;n<this.length;n++){var a=this[n];t.apply(a,[n,a])&&e.push(a)}return this.spawn(e)}return r.string(t)||r.elementOrCollection(t)?i(t).filter(this):void 0===t?this:this.spawn()},not:function(t){if(t){r.string(t)&&(t=this.filter(t));for(var e=[],n=0;n<this.length;n++){var i=this[n],a=t._private.ids[i.id()];a||e.push(i)}return this.spawn(e)}return this},absoluteComplement:function(){var t=this._private.cy;return t.elements().not(this)},intersect:function(t){if(r.string(t)){var e=t;return this.filter(e)}for(var n=[],i=this,a=t,o=this.length<t.length,u=o?a._private.ids:i._private.ids,s=o?i:a,l=0;l<s.length;l++){var c=s[l]._private.data.id,f=u[c];f&&n.push(f)}return this.spawn(n)},xor:function(t){var e=this._private.cy;r.string(t)&&(t=e.$(t));var n=[],i=this,a=t,o=function(t,e){for(var r=0;r<t.length;r++){var i=t[r],a=i._private.data.id,o=e._private.ids[a];o||n.push(i)}};return o(i,a),o(a,i),this.spawn(n)},diff:function(t){var e=this._private.cy;r.string(t)&&(t=e.$(t));var n=[],i=[],a=[],o=this,u=t,s=function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r],o=i._private.data.id,u=e._private.ids[o];u?a.push(i):n.push(i)}};return s(o,u,n),s(u,o,i),{left:this.spawn(n,{unique:!0}),right:this.spawn(i,{unique:!0}),both:this.spawn(a,{unique:!0})}},add:function(t){var e=this._private.cy;if(!t)return this;if(r.string(t)){var n=t;t=e.elements(n)}for(var i=[],a=0;a<this.length;a++)i.push(this[a]);for(var a=0;a<t.length;a++){var o=!this._private.ids[t[a].id()];o&&i.push(t[a])}return this.spawn(i)},merge:function(t){var e=this._private,n=e.cy;if(!t)return this;if(r.string(t)){var i=t;t=n.elements(i)}for(var a=0;a<t.length;a++){var o=t[a],u=o.id(),s=!e.ids[u];if(s){var l=this.length++;this[l]=o,e.ids[u]=o,e.indexes[u]=l}}return this},unmergeOne:function(t){t=t[0];var e=this._private,n=t.id(),r=e.indexes[n];if(null==r)return this;this[r]=void 0,e.ids[n]=void 0,e.indexes[n]=void 0;var i=r===this.length-1;if(this.length>1&&!i){var a=this.length-1,o=this[a];this[a]=void 0,this[r]=o,e.indexes[o.id()]=r}return this.length--,this},unmerge:function(t){var e=this._private.cy;if(!t)return this;if(r.string(t)){var n=t;t=e.elements(n)}for(var i=0;i<t.length;i++)this.unmergeOne(t[i]);return this},map:function(t,e){for(var n=[],r=this,i=0;i<r.length;i++){var a=r[i],o=e?t.apply(e,[a,i,r]):t(a,i,r);n.push(o)}return n},stdFilter:function(t,e){for(var n=[],r=this,i=0;i<r.length;i++){var a=r[i],o=e?t.apply(e,[a,i,r]):t(a,i,r);o&&n.push(a)}return this.spawn(n)},max:function(t,e){for(var n,r=-(1/0),i=this,a=0;a<i.length;a++){var o=i[a],u=e?t.apply(e,[o,a,i]):t(o,a,i);u>r&&(r=u,n=o)}return{value:r,ele:n}},min:function(t,e){for(var n,r=1/0,i=this,a=0;a<i.length;a++){var o=i[a],u=e?t.apply(e,[o,a,i]):t(o,a,i);r>u&&(r=u,n=o)}return{value:r,ele:n}}},o=a;o.u=o["|"]=o["+"]=o.union=o.or=o.add,o["\\"]=o["!"]=o["-"]=o.difference=o.relativeComplement=o.subtract=o.not,o.n=o["&"]=o["."]=o.and=o.intersection=o.intersect,o["^"]=o["(+)"]=o["(-)"]=o.symmetricDifference=o.symdiff=o.xor,o.fnFilter=o.filterFn=o.stdFilter,o.complement=o.abscomp=o.absoluteComplement,e.exports=a},{"../is":77,"../selector":81}],22:[function(t,e,n){"use strict";var r={isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},isSimple:function(){return this.isEdge()&&this.source().id()!==this.target().id()},group:function(){var t=this[0];return t?t._private.group:void 0}};e.exports=r},{}],23:[function(t,e,n){"use strict";var r=t("../util"),i=t("../is"),a=t("./element"),o={prefix:"ele",id:0,generate:function(t,e,n){var r=(i.element(e)?e._private:e,null!=n?n:this.prefix+this.id);if(t.getElementById(r).empty())this.id++;else for(;!t.getElementById(r).empty();)r=this.prefix+ ++this.id;return r}},u=function(t,e,n){if(!(this instanceof u))return new u(t,e,n);if(void 0===t||!i.core(t))return void r.error("A collection must have a reference to the core");var s={},l={},c=!1;if(e){if(e.length>0&&i.plainObject(e[0])&&!i.element(e[0])){c=!0;for(var f=[],h={},d=0,p=e.length;p>d;d++){var g=e[d];null==g.data&&(g.data={});var v=g.data;if(null==v.id)v.id=o.generate(t,g);else if(0!==t.getElementById(v.id).length||h[v.id])continue;var m=new a(t,g,!1);f.push(m),h[v.id]=!0}e=f}}else e=[];this.length=0;for(var d=0,p=e.length;p>d;d++){var y=e[d];if(y){var x=y._private.data.id;(!n||n.unique&&!s[x])&&(s[x]=y,l[x]=this.length,this[this.length]=y,this.length++)}}this._private={cy:t,ids:s,indexes:l},c&&this.restore()},s=a.prototype=u.prototype;s.instanceString=function(){return"collection"},s.spawn=function(t,e,n){return i.core(t)||(n=e,e=t,t=this.cy()),new u(t,e,n)},s.cy=function(){return this._private.cy},s.element=function(){return this[0]},s.collection=function(){return i.collection(this)?this:new u(this._private.cy,[this])},s.unique=function(){return new u(this._private.cy,this,{unique:!0})},s.getElementById=function(t){var e=this._private.cy,n=this._private.ids[t];return n?n:new u(e)},s.json=function(t){var e=this.element(),n=this.cy();if(null==e&&t)return this;if(null!=e){var a=e._private;if(i.plainObject(t)){n.startBatch(),t.data&&e.data(t.data),t.position&&e.position(t.position);var o=function(n,r,i){var o=t[n];null!=o&&o!==a[n]&&(o?e[r]():e[i]())};return o("removed","remove","restore"),o("selected","select","unselect"),o("selectable","selectify","unselectify"),o("locked","lock","unlock"),o("grabbable","grabify","ungrabify"),null!=t.classes&&e.classes(t.classes),n.endBatch(),this}if(void 0===t){var u={data:r.copy(a.data),position:r.copy(a.position),group:a.group,removed:a.removed,selected:a.selected,selectable:a.selectable,locked:a.locked,grabbable:a.grabbable,classes:null},s=[];for(var l in a.classes)a.classes[l]&&s.push(l);return u.classes=s.join(" "),u}}},s.jsons=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e],r=n.json();t.push(r)}return t},s.clone=function(){for(var t=this.cy(),e=[],n=0;n<this.length;n++){var r=this[n],i=r.json(),o=new a(t,i,!1);e.push(o)}return new u(t,e)},s.copy=s.clone,s.restore=function(t){var e=this,n=[],a=e.cy();void 0===t&&(t=!0);for(var s=[],l=[],c=[],f=0,h=0,d=0,p=e.length;p>d;d++){var g=e[d];g.isNode()?(l.push(g),f++):(c.push(g),h++)}s=l.concat(c);for(var d=0,p=s.length;p>d;d++){var g=s[d];if(g.removed()){var v=g._private,m=v.data;if(void 0===m.id)m.id=o.generate(a,g);else if(i.number(m.id))m.id=""+m.id;else{if(i.emptyString(m.id)||!i.string(m.id)){r.error("Can not create element with invalid string ID `"+m.id+"`");continue}if(0!==a.getElementById(m.id).length){r.error("Can not create second element with ID `"+m.id+"`");continue}}var y=m.id;if(g.isNode()){var x=g,b=v.position;null==b.x&&(b.x=0),null==b.y&&(b.y=0)}if(g.isEdge()){for(var w=g,_=["source","target"],M=_.length,k=!1,E=0;M>E;E++){var S=_[E],N=m[S];i.number(N)&&(N=m[S]=""+m[S]),null==N||""===N?(r.error("Can not create edge `"+y+"` with unspecified "+S),k=!0):a.getElementById(N).empty()&&(r.error("Can not create edge `"+y+"` with nonexistant "+S+" `"+N+"`"),k=!0)}if(k)continue;var T=a.getElementById(m.source),C=a.getElementById(m.target);T._private.edges.push(w),C._private.edges.push(w),w._private.source=T,w._private.target=C}v.ids={},v.ids[y]=g,v.removed=!1,a.addToPool(g),n.push(g)}}for(var d=0;f>d;d++){var x=s[d],m=x._private.data;i.number(m.parent)&&(m.parent=""+m.parent);var D=m.parent,P=null!=D;if(P){var A=a.getElementById(D);if(A.empty())m.parent=void 0;else{for(var z=!1,L=A;!L.empty();){if(x.same(L)){z=!0,m.parent=void 0;break}L=L.parent()}z||(A[0]._private.children.push(x),x._private.parent=A[0],a._private.hasCompoundNodes=!0)}}}if(n=new u(a,n),n.length>0){var I=n.add(n.connectedNodes()).add(n.parent());I.updateStyle(t),t?n.rtrigger("add"):n.trigger("add")}return e},s.removed=function(){var t=this[0];return t&&t._private.removed},s.inside=function(){var t=this[0];return t&&!t._private.removed},s.remove=function(t){function e(t){for(var e=t._private.edges,n=0;n<e.length;n++)r(e[n])}function n(t){for(var e=t._private.children,n=0;n<e.length;n++)r(e[n])}function r(t){var r=c[t.id()];r||(c[t.id()]=!0,t.isNode()?(l.push(t),e(t),n(t)):l.unshift(t))}function i(t,e){for(var n=t._private.edges,r=0;r<n.length;r++){var i=n[r];if(e===i){n.splice(r,1);break}}}function a(t,e){e=e[0],t=t[0];for(var n=t._private.children,r=0;r<n.length;r++)if(n[r][0]===e[0]){n.splice(r,1);break}}var o=this,s=[],l=[],c={},f=o._private.cy;void 0===t&&(t=!0);for(var h=0,d=o.length;d>h;h++){var p=o[h];r(p)}for(var h=0;h<l.length;h++){var p=l[h];if(p._private.removed=!0,f.removeFromPool(p),s.push(p),p.isEdge()){var g=p.source()[0],v=p.target()[0];i(g,p),i(v,p)}else{var m=p.parent();0!==m.length&&a(m,p)}}var y=f._private.elements;f._private.hasCompoundNodes=!1;for(var h=0;h<y.length;h++){var p=y[h];if(p.isParent()){f._private.hasCompoundNodes=!0;break}}var x=new u(this.cy(),s);x.size()>0&&(t&&this.cy().notify({type:"remove",collection:x}),x.trigger("remove"));for(var b={},h=0;h<l.length;h++){var p=l[h],w="nodes"===p._private.group,_=p._private.data.parent;if(w&&void 0!==_&&!b[_]){b[_]=!0;var m=f.getElementById(_);m&&0!==m.length&&!m._private.removed&&0===m.children().length&&m.updateStyle()}}return new u(f,s)},s.move=function(t){var e=this._private.cy;if(void 0!==t.source||void 0!==t.target){var n=t.source,r=t.target,i=e.getElementById(n).length>0,a=e.getElementById(r).length>0;if(i||a){var o=this.jsons();this.remove();for(var u=0;u<o.length;u++){var s=o[u];"edges"===s.group&&(i&&(s.data.source=n),a&&(s.data.target=r))}return e.add(o)}}else if(void 0!==t.parent){var l=t.parent,c=null===l||e.getElementById(l).length>0;if(c){var o=this.jsons(),f=this.descendants(),h=f.merge(f.add(this).connectedEdges());this.remove();for(var u=0;u<this.length;u++){var s=o[u];"nodes"===s.group&&(s.data.parent=null===l?void 0:l)}}return e.add(o).merge(h.restore())}return this},[t("./algorithms"),t("./animation"),t("./class"),t("./comparators"),t("./compounds"),t("./data"),t("./degree"),t("./dimensions"),t("./events"),t("./filter"),t("./group"),t("./index"),t("./iteration"),t("./layout"),t("./style"),t("./switch-functions"),t("./traversing")].forEach(function(t){r.extend(s,t)}),e.exports=u},{"../is":77,"../util":94,"./algorithms":9,"./animation":12,"./class":13,"./comparators":14,"./compounds":15,"./data":16,"./degree":17,"./dimensions":18,"./element":19,"./events":20,"./filter":21,"./group":22,"./index":23,"./iteration":24,"./layout":25,"./style":26,"./switch-functions":27,"./traversing":28}],24:[function(t,e,n){"use strict";var r=t("../is"),i=t("./zsort"),a={each:function(t){if(r.fn(t))for(var e=0;e<this.length;e++){var n=this[e],i=t.apply(n,[e,n]);if(i===!1)break}return this},forEach:function(t,e){if(r.fn(t))for(var n=0;n<this.length;n++){var i=this[n],a=e?t.apply(e,[i,n,this]):t(i,n,this);if(a===!1)break}return this},toArray:function(){for(var t=[],e=0;e<this.length;e++)t.push(this[e]);return t},slice:function(t,e){var n=[],r=this.length;null==e&&(e=r),null==t&&(t=0),0>t&&(t=r+t),0>e&&(e=r+e);for(var i=t;i>=0&&e>i&&r>i;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(t){return this[t]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!r.fn(t))return this;var e=this.toArray().sort(t);return this.spawn(e)},sortByZIndex:function(){return this.sort(i)},zDepth:function(){var t=this[0];if(t){var e=t._private,n=e.group;if("nodes"===n){var r=e.data.parent?t.parents().size():0;return t.isParent()?r:Number.MAX_VALUE}var i=e.source,a=e.target,o=i.zDepth(),u=a.zDepth();return Math.max(o,u,0)}}};e.exports=a},{"../is":77,"./zsort":29}],25:[function(t,e,n){"use strict";var r=t("../is"),i=t("../util"),a={layoutPositions:function(t,e,n){var i=this.nodes(),a=this.cy();if(t.trigger({type:"layoutstart",layout:t}),t.animations=[],e.animate){for(var o=0;o<i.length;o++){var u=i[o],s=o===i.length-1,l=n.call(u,o,u),c=u.position();r.number(c.x)&&r.number(c.y)||u.silentPosition({x:0,y:0});var f=u.animation({position:l,duration:e.animationDuration,easing:e.animationEasing,step:s?function(){e.fit&&a.fit(e.eles,e.padding)}:void 0,complete:s?function(){null!=e.zoom&&a.zoom(e.zoom),e.pan&&a.pan(e.pan),e.fit&&a.fit(e.eles,e.padding),t.one("layoutstop",e.stop),t.trigger({type:"layoutstop",layout:t})}:void 0});t.animations.push(f),f.play()}t.one("layoutready",e.ready),t.trigger({type:"layoutready",layout:t})}else i.positions(n),e.fit&&a.fit(e.eles,e.padding),null!=e.zoom&&a.zoom(e.zoom),e.pan&&a.pan(e.pan),t.one("layoutready",e.ready),t.trigger({type:"layoutready",layout:t}),t.one("layoutstop",e.stop),t.trigger({type:"layoutstop",layout:t});return this},layout:function(t){var e=this.cy();return e.layout(i.extend({},t,{eles:this})),this},makeLayout:function(t){var e=this.cy();return e.makeLayout(i.extend({},t,{eles:this}))}};a.createLayout=a.makeLayout,e.exports=a},{"../is":77,"../util":94}],26:[function(t,e,n){"use strict";var r=t("../is"),i={updateStyle:function(t){var e=this._private.cy;if(!e.styleEnabled())return this;if(e._private.batchingStyle){var n=e._private.batchStyleEles;return n.merge(this),this}var r=e.style();t=t||void 0===t?!0:!1,r.apply(this);var i=this.updateCompoundBounds(),a=i.length>0?this.add(i):this;return t?a.rtrigger("style"):a.trigger("style"),this},updateMappers:function(t){var e=this._private.cy,n=e.style();if(t=t||void 0===t?!0:!1,!e.styleEnabled())return this;n.updateMappers(this);var r=this.updateCompoundBounds(),i=r.length>0?this.add(r):this;return t?i.rtrigger("style"):i.trigger("style"),this},renderedCss:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=this[0];if(n){var r=n.cy().style().getRenderedStyle(n);return void 0===t?r:r[t]}},css:function(t,e){var n=this.cy();if(!n.styleEnabled())return this;var i=!1,a=n.style();if(r.plainObject(t)){var o=t;a.applyBypass(this,o,i);var u=this.updateCompoundBounds(),s=u.length>0?this.add(u):this;s.rtrigger("style")}else if(r.string(t)){if(void 0===e){var l=this[0];return l?a.getStylePropertyValue(l,t):void 0}a.applyBypass(this,t,e,i);var u=this.updateCompoundBounds(),s=u.length>0?this.add(u):this;s.rtrigger("style")}else if(void 0===t){var l=this[0];return l?a.getRawStyle(l):void 0}return this},removeCss:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=!1,r=e.style(),i=this;if(void 0===t)for(var a=0;a<i.length;a++){var o=i[a];r.removeAllBypasses(o,n)}else{t=t.split(/\s+/);for(var a=0;a<i.length;a++){var o=i[a];r.removeBypasses(o,t,n)}}var u=this.updateCompoundBounds(),s=u.length>0?this.add(u):this;return s.rtrigger("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},visible:function(){var t=this.cy();if(!t.styleEnabled())return!0;var e=this[0],n=t.hasCompoundNodes();if(e){var r=e._private.style;if("visible"!==r.visibility.value||"element"!==r.display.value)return!1;if("nodes"===e._private.group){if(!n)return!0;var i=e._private.data.parent?e.parents():null;if(i)for(var a=0;a<i.length;a++){var o=i[a],u=o._private.style,s=u.visibility.value,l=u.display.value;if("visible"!==s||"element"!==l)return!1}return!0}var c=e._private.source,f=e._private.target;return c.visible()&&f.visible()}},hidden:function(){var t=this[0];return t?!t.visible():void 0},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var e=t.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=r.style.opacity.value;if(!e)return i;var a=r.data.parent?n.parents():null;if(a)for(var o=0;o<a.length;o++){var u=a[o],s=u._private.style.opacity.value;i=s*i}return i}},transparent:function(){var t=this.cy();if(!t.styleEnabled())return!1;var e=this[0],n=e.cy().hasCompoundNodes();return e?n?0===e.effectiveOpacity():0===e._private.style.opacity.value:void 0},isFullAutoParent:function(){var t=this.cy();if(!t.styleEnabled())return!1;var e=this[0];if(e){var n="auto"===e._private.style.width.value,r="auto"===e._private.style.height.value;return e.isParent()&&n&&r}},backgrounding:function(){var t=this.cy();if(!t.styleEnabled())return!1;var e=this[0];return e._private.backgrounding?!0:!1}};i.bypass=i.style=i.css,i.renderedStyle=i.renderedCss,i.removeBypass=i.removeStyle=i.removeCss,e.exports=i},{"../is":77}],27:[function(t,e,n){"use strict";function r(t){return function(){var e=arguments,n=[];if(2===e.length){var r=e[0],i=e[1];this.bind(t.event,r,i)}else if(1===e.length){var i=e[0];this.bind(t.event,i)}else if(0===e.length){for(var a=0;a<this.length;a++){var o=this[a],u=!t.ableField||o._private[t.ableField],s=o._private[t.field]!=t.value;if(t.overrideAble){var l=t.overrideAble(o);if(void 0!==l&&(u=l,!l))return this}u&&(o._private[t.field]=t.value,s&&n.push(o))}var c=this.spawn(n);c.updateStyle(),c.trigger(t.event)}return this}}function i(t){a[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var n=t.overrideField(e);if(void 0!==n)return n}return e._private[t.field]}},a[t.on]=r({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),a[t.off]=r({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}var a={};i({field:"locked",overrideField:function(t){return t.cy().autolock()?!0:void 0},on:"lock",off:"unlock"}),i({field:"grabbable",overrideField:function(t){return t.cy().autoungrabify()?!1:void 0},on:"grabify",off:"ungrabify"}),i({field:"selected",ableField:"selectable",overrideAble:function(t){return t.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"}),i({field:"selectable",overrideField:function(t){return t.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"}),a.deselect=a.unselect,a.grabbed=function(){var t=this[0];return t?t._private.grabbed:void 0},i({field:"active",on:"activate",off:"unactivate"}),a.inactive=function(){var t=this[0];return t?!t._private.active:void 0},e.exports=a},{}],28:[function(t,e,n){"use strict";function r(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r],a=i._private[t.attr];a&&n.push(a)}return this.spawn(n,{unique:!0}).filter(e)}}function i(t){return function(e){var n=[],r=this._private.cy,i=t||{};u.string(e)&&(e=r.$(e));for(var a=this._private.ids,o=e._private.ids,s=0;s<e.length;s++)for(var l=e[s]._private.edges,c=0;c<l.length;c++){var f=l[c],h=f._private.data,d=a[h.source]&&o[h.target],p=o[h.source]&&a[h.target],g=d||p;if(g){if(i.thisIs){if("source"===i.thisIs&&!d)continue;if("target"===i.thisIs&&!p)continue}n.push(f)}}return this.spawn(n,{unique:!0})}}function a(t){var e={codirected:!1};return t=o.extend({},e,t),function(e){for(var n=[],r=this.edges(),i=t,a=0;a<r.length;a++)for(var o=r[a],u=o.source()[0],s=u.id(),l=o.target()[0],c=l.id(),f=u._private.edges,h=0;h<f.length;h++){var d=f[h],p=d._private.data,g=p.target,v=p.source,m=g===c&&v===s,y=s===g&&c===v;(i.codirected&&m||!i.codirected&&(m||y))&&n.push(d)}return this.spawn(n,{unique:!0}).filter(e)}}var o=t("../util"),u=t("../is"),s={};o.extend(s,{roots:function(t){for(var e=this,n=[],r=0;r<e.length;r++){var i=e[r];if(i.isNode()){var a=i.connectedEdges(function(){return this.data("target")===i.id()&&this.data("source")!==i.id()}).length>0;a||n.push(i)}}return this.spawn(n,{unique:!0}).filter(t)},leaves:function(t){for(var e=this,n=[],r=0;r<e.length;r++){var i=e[r];if(i.isNode()){var a=i.connectedEdges(function(){return this.data("source")===i.id()&&this.data("target")!==i.id()}).length>0;a||n.push(i)}}return this.spawn(n,{unique:!0}).filter(t)},outgoers:function(t){for(var e=this,n=[],r=0;r<e.length;r++){var i=e[r],a=i.id();if(i.isNode())for(var o=i._private.edges,u=0;u<o.length;u++){var s=o[u],l=s._private.data.source,c=s._private.data.target;l===a&&c!==a&&(n.push(s),n.push(s.target()[0]))}}return this.spawn(n,{unique:!0}).filter(t)},successors:function(t){for(var e=this,n=[],r={};;){var i=e.outgoers();if(0===i.length)break;for(var a=!1,o=0;o<i.length;o++){var u=i[o],s=u.id();r[s]||(r[s]=!0,n.push(u),a=!0)}if(!a)break;e=i}return this.spawn(n,{unique:!0}).filter(t)},incomers:function(t){for(var e=this,n=[],r=0;r<e.length;r++){var i=e[r],a=i.id();if(i.isNode())for(var o=i._private.edges,u=0;u<o.length;u++){var s=o[u],l=s._private.data.source,c=s._private.data.target;c===a&&l!==a&&(n.push(s),n.push(s.source()[0]))}}return this.spawn(n,{unique:!0}).filter(t)},predecessors:function(t){for(var e=this,n=[],r={};;){var i=e.incomers();if(0===i.length)break;for(var a=!1,o=0;o<i.length;o++){var u=i[o],s=u.id();r[s]||(r[s]=!0,n.push(u),a=!0)}if(!a)break;e=i}return this.spawn(n,{unique:!0}).filter(t)}}),o.extend(s,{neighborhood:function(t){for(var e=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],a=i.connectedEdges(),o=0;o<a.length;o++){var u=a[o],s=u._private.source,l=u._private.target,c=i===s?l:s;c.length>0&&e.push(c[0]),e.push(u[0])}return this.spawn(e,{unique:!0}).filter(t)},closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t);
}}),s.neighbourhood=s.neighborhood,s.closedNeighbourhood=s.closedNeighborhood,s.openNeighbourhood=s.openNeighborhood,o.extend(s,{source:function(t){var e,n=this[0];return n&&(e=n._private.source),e&&t?e.filter(t):e},target:function(t){var e,n=this[0];return n&&(e=n._private.target),e&&t?e.filter(t):e},sources:r({attr:"source"}),targets:r({attr:"target"})}),o.extend(s,{edgesWith:i(),edgesTo:i({thisIs:"source"})}),o.extend(s,{connectedEdges:function(t){for(var e=[],n=this,r=0;r<n.length;r++){var i=n[r];if(i.isNode())for(var a=i._private.edges,o=0;o<a.length;o++){var u=a[o];e.push(u)}}return this.spawn(e,{unique:!0}).filter(t)},connectedNodes:function(t){for(var e=[],n=this,r=0;r<n.length;r++){var i=n[r];i.isEdge()&&(e.push(i.source()[0]),e.push(i.target()[0]))}return this.spawn(e,{unique:!0}).filter(t)},parallelEdges:a(),codirectedEdges:a({codirected:!0})}),o.extend(s,{components:function(){var t=this.cy(),e=t.collection(),n=this.nodes(),r=[],i=function(t,r){e.merge(t),n.unmerge(t),r.merge(t)};do{var a=t.collection();r.push(a);var o=n[0];i(o,a),this.bfs({directed:!1,roots:o,visit:function(t,e,n,r,o){i(n,a)}})}while(n.length>0);return r.map(function(t){var e=t.connectedEdges().stdFilter(function(e){return t.anySame(e.source())&&t.anySame(e.target())});return t.union(e)})}}),e.exports=s},{"../is":77,"../util":94}],29:[function(t,e,n){"use strict";var r=function(t,e){var n=t.cy(),r=t._private,i=e._private,a=r.style["z-index"].value-i.style["z-index"].value,o=0,u=0,s=n.hasCompoundNodes(),l="nodes"===r.group,c="edges"===r.group,f="nodes"===i.group,h="edges"===i.group;s&&(o=t.zDepth(),u=e.zDepth());var d=o-u,p=0===d;return p?l&&h?1:c&&f?-1:0===a?r.index-i.index:a:d};e.exports=r},{}],30:[function(t,e,n){"use strict";var r=t("../is"),i=t("../util"),a=t("../collection"),o=t("../collection/element"),u=t("../window"),s=(u?u.document:null,t("../extensions/renderer/null"),{add:function(t){var e,n=this;if(r.elementOrCollection(t)){var u=t;if(u._private.cy===n)e=u.restore();else{for(var s=[],l=0;l<u.length;l++){var c=u[l];s.push(c.json())}e=new a(n,s)}}else if(r.array(t)){var s=t;e=new a(n,s)}else if(r.plainObject(t)&&(r.array(t.nodes)||r.array(t.edges))){for(var f=t,s=[],h=["nodes","edges"],l=0,d=h.length;d>l;l++){var p=h[l],g=f[p];if(r.array(g))for(var v=0,m=g.length;m>v;v++){var y=i.extend({group:p},g[v]);s.push(y)}}e=new a(n,s)}else{var y=t;e=new o(n,y).collection()}return e},remove:function(t){if(r.elementOrCollection(t))t=t;else if(r.string(t)){var e=t;t=this.$(e)}return t.remove()},load:function(t,e,n){var a=this;a.notifications(!1);var o=a.elements();o.length>0&&o.remove(),null!=t&&(r.plainObject(t)||r.array(t))&&a.add(t),a.one("layoutready",function(t){a.notifications(!0),a.trigger(t),a.notify({type:"load",collection:a.elements()}),a.one("load",e),a.trigger("load")}).one("layoutstop",function(){a.one("done",n),a.trigger("done")});var u=i.extend({},a._private.options.layout);return u.eles=a.$(),a.layout(u),this}});e.exports=s},{"../collection":23,"../collection/element":19,"../extensions/renderer/null":73,"../is":77,"../util":94,"../window":100}],31:[function(t,e,n){"use strict";var r=t("../define"),i=t("../util"),a=t("../is"),o={animate:r.animate(),animation:r.animation(),animated:r.animated(),clearQueue:r.clearQueue(),delay:r.delay(),delayAnimation:r.delayAnimation(),stop:r.stop(),addToAnimationPool:function(t){var e=this;e.styleEnabled()&&e._private.aniEles.merge(t)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){function t(){c._private.animationsRunning&&i.requestAnimationFrame(function(n){e(n),t()})}function e(t){function e(e,i){var o=e._private,u=o.animation.current,s=o.animation.queue,l=!1;if(0===u.length){var c=s.shift();c&&u.push(c)}for(var f=function(t){for(var e=t.length-1;e>=0;e--){var n=t[e];n()}t.splice(0,t.length)},h=u.length-1;h>=0;h--){var d=u[h],p=d._private;p.stopped?(u.splice(h,1),p.hooked=!1,p.playing=!1,p.started=!1,f(p.frames)):(p.playing||p.applying)&&(p.playing&&p.applying&&(p.applying=!1),p.started||n(e,d,t),r(e,d,t,i),p.applying&&(p.applying=!1),f(p.frames),d.completed()&&(u.splice(h,1),p.hooked=!1,p.playing=!1,p.started=!1,f(p.completes)),l=!0)}return i||0!==u.length||0!==s.length||a.push(e),l}for(var i=c._private.aniEles,a=[],o=!1,u=0;u<i.length;u++){var s=i[u],l=e(s);o=o||l}var f=e(c,!0);if(o||f){var h;if(i.length>0){var d=i.updateCompoundBounds();h=d.length>0?i.add(d):i}c.notify({type:"draw",collection:h})}i.unmerge(a)}function n(t,e,n){var r=a.core(t),i=!r,o=t,u=c._private.style,s=e._private;if(i){var l=o._private.position;s.startPosition=s.startPosition||{x:l.x,y:l.y},s.startStyle=s.startStyle||u.getValueStyle(o)}if(r){var f=c._private.pan;s.startPan=s.startPan||{x:f.x,y:f.y},s.startZoom=null!=s.startZoom?s.startZoom:c._private.zoom}s.started=!0,s.startTime=n-s.progress*s.duration}function r(t,e,n,r){var i=c._private.style,u=!r,s=t._private,f=e._private,d=f.easing,p=f.startTime;if(!f.easingImpl)if(null==d)f.easingImpl=h.linear;else{var g;if(a.string(d)){var v=i.parse("transition-timing-function",d);g=v.value}else g=d;var m,y;a.string(g)?(m=g,y=[]):(m=g[1],y=g.slice(2).map(function(t){return+t})),y.length>0?("spring"===m&&y.push(f.duration),f.easingImpl=h[m].apply(null,y)):f.easingImpl=h[m]}var x,b=f.easingImpl;if(x=0===f.duration?1:(n-p)/f.duration,f.applying&&(x=f.progress),0>x?x=0:x>1&&(x=1),null==f.delay){var w=f.startPosition,_=f.position,M=s.position;_&&u&&(o(w.x,_.x)&&(M.x=l(w.x,_.x,x,b)),o(w.y,_.y)&&(M.y=l(w.y,_.y,x,b)));var k=f.startPan,E=f.pan,S=s.pan,N=null!=E&&r;N&&(o(k.x,E.x)&&(S.x=l(k.x,E.x,x,b)),o(k.y,E.y)&&(S.y=l(k.y,E.y,x,b)),t.trigger("pan"));var T=f.startZoom,C=f.zoom,D=null!=C&&r;D&&(o(T,C)&&(s.zoom=l(T,C,x,b)),t.trigger("zoom")),(N||D)&&t.trigger("viewport");var P=f.style;if(P&&u)for(var A=0;A<P.length;A++){var z=P[A],m=z.name,L=z,I=f.startStyle[m],O=l(I,L,x,b);i.overrideBypass(t,m,O)}}return a.fn(f.step)&&f.step.apply(t,[n]),f.progress=x,x}function o(t,e){return null==t||null==e?!1:a.number(t)&&a.number(e)?!0:t&&e?!0:!1}function u(t,e,n){var r=1-n,i=n*n;return 3*r*r*n*t+3*r*i*e+i*n}function s(t,e){return function(n,r,i){return n+(r-n)*u(t,e,i)}}function l(t,e,n,r){0>n?n=0:n>1&&(n=1);var i,o;if(i=null!=t.pfValue||null!=t.value?null!=t.pfValue?t.pfValue:t.value:t,o=null!=e.pfValue||null!=e.value?null!=e.pfValue?e.pfValue:e.value:e,a.number(i)&&a.number(o))return r(i,o,n);if(a.array(i)&&a.array(o)){for(var u=[],s=0;s<o.length;s++){var l=i[s],c=o[s];if(null!=l&&null!=c){var f=r(l,c,n);t.roundValue&&(f=Math.round(f)),u.push(f)}else u.push(c)}return u}}var c=this;if(c._private.animationsRunning=!0,c.styleEnabled()){t();var f=function(){function t(t){return-t.tension*t.x-t.friction*t.v}function e(e,n,r){var i={x:e.x+r.dx*n,v:e.v+r.dv*n,tension:e.tension,friction:e.friction};return{dx:i.v,dv:t(i)}}function n(n,r){var i={dx:n.v,dv:t(n)},a=e(n,.5*r,i),o=e(n,.5*r,a),u=e(n,r,o),s=1/6*(i.dx+2*(a.dx+o.dx)+u.dx),l=1/6*(i.dv+2*(a.dv+o.dv)+u.dv);return n.x=n.x+s*r,n.v=n.v+l*r,n}return function r(t,e,i){var a,o,u,s={x:-1,v:0,tension:null,friction:null},l=[0],c=0,f=1e-4,h=.016;for(t=parseFloat(t)||500,e=parseFloat(e)||20,i=i||null,s.tension=t,s.friction=e,a=null!==i,a?(c=r(t,e),o=c/i*h):o=h;;)if(u=n(u||s,o),l.push(1+u.x),c+=16,!(Math.abs(u.x)>f&&Math.abs(u.v)>f))break;return a?function(t){return l[t*(l.length-1)|0]}:c}}(),h={linear:function(t,e,n){return t+(e-t)*n},ease:s(.25,.1,.25,1),"ease-in":s(.42,0,1,1),"ease-out":s(0,0,.58,1),"ease-in-out":s(.42,0,.58,1),"ease-in-sine":s(.47,0,.745,.715),"ease-out-sine":s(.39,.575,.565,1),"ease-in-out-sine":s(.445,.05,.55,.95),"ease-in-quad":s(.55,.085,.68,.53),"ease-out-quad":s(.25,.46,.45,.94),"ease-in-out-quad":s(.455,.03,.515,.955),"ease-in-cubic":s(.55,.055,.675,.19),"ease-out-cubic":s(.215,.61,.355,1),"ease-in-out-cubic":s(.645,.045,.355,1),"ease-in-quart":s(.895,.03,.685,.22),"ease-out-quart":s(.165,.84,.44,1),"ease-in-out-quart":s(.77,0,.175,1),"ease-in-quint":s(.755,.05,.855,.06),"ease-out-quint":s(.23,1,.32,1),"ease-in-out-quint":s(.86,0,.07,1),"ease-in-expo":s(.95,.05,.795,.035),"ease-out-expo":s(.19,1,.22,1),"ease-in-out-expo":s(1,0,0,1),"ease-in-circ":s(.6,.04,.98,.335),"ease-out-circ":s(.075,.82,.165,1),"ease-in-out-circ":s(.785,.135,.15,.86),spring:function(t,e,n){var r=f(t,e,n);return function(t,e,n){return t+(e-t)*r(n)}},"cubic-bezier":function(t,e,n,r){return s(t,e,n,r)}}}}};e.exports=o},{"../define":41,"../is":77,"../util":94}],32:[function(t,e,n){"use strict";var r=t("../define"),i={on:r.on(),one:r.on({unbindSelfOnTrigger:!0}),once:r.on({unbindAllBindersOnTrigger:!0}),off:r.off(),trigger:r.trigger()};r.eventAliasesOn(i),e.exports=i},{"../define":41}],33:[function(t,e,n){"use strict";var r={png:function(t){var e=this._private.renderer;return t=t||{},e.png(t)},jpg:function(t){var e=this._private.renderer;return t=t||{},t.bg=t.bg||"#fff",e.jpg(t)}};r.jpeg=r.jpg,e.exports=r},{}],34:[function(t,e,n){"use strict";var r=t("../window"),i=t("../util"),a=t("../collection"),o=t("../is"),u=t("../promise"),s=t("../define"),l=function(t){if(!(this instanceof l))return new l(t);var e=this;t=i.extend({},t);var n=t.container;n&&!o.htmlElement(n)&&o.htmlElement(n[0])&&(n=n[0]);var s=n?n._cyreg:null;s=s||{},s&&s.cy&&(s.cy.destroy(),s={});var c=s.readies=s.readies||[];n&&(n._cyreg=s),s.cy=e;var f=void 0!==r&&void 0!==n&&!t.headless,h=t;h.layout=i.extend({name:f?"grid":"null"},h.layout),h.renderer=i.extend({name:f?"canvas":"null"},h.renderer);var d=function(t,e,n){return void 0!==e?e:void 0!==n?n:t},p=this._private={container:n,ready:!1,initrender:!1,options:h,elements:[],id2index:{},listeners:[],onRenders:[],aniEles:a(this),scratch:{},layout:null,renderer:null,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:d(!0,h.zoomingEnabled),userZoomingEnabled:d(!0,h.userZoomingEnabled),panningEnabled:d(!0,h.panningEnabled),userPanningEnabled:d(!0,h.userPanningEnabled),boxSelectionEnabled:d(!0,h.boxSelectionEnabled),autolock:d(!1,h.autolock,h.autolockNodes),autoungrabify:d(!1,h.autoungrabify,h.autoungrabifyNodes),autounselectify:d(!1,h.autounselectify),styleEnabled:void 0===h.styleEnabled?f:h.styleEnabled,zoom:o.number(h.zoom)?h.zoom:1,pan:{x:o.plainObject(h.pan)&&o.number(h.pan.x)?h.pan.x:0,y:o.plainObject(h.pan)&&o.number(h.pan.y)?h.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,deferredExecQueue:[]},g=h.selectionType;void 0===g||"additive"!==g&&"single"!==g?p.selectionType="single":p.selectionType=g,o.number(h.minZoom)&&o.number(h.maxZoom)&&h.minZoom<h.maxZoom?(p.minZoom=h.minZoom,p.maxZoom=h.maxZoom):o.number(h.minZoom)&&void 0===h.maxZoom?p.minZoom=h.minZoom:o.number(h.maxZoom)&&void 0===h.minZoom&&(p.maxZoom=h.maxZoom);var v=function(t){for(var e=!1,n=0;n<m.length;n++){var r=m[n];if(o.promise(r)){e=!0;break}}return e?u.all(m).then(t):void t(m)};e.initRenderer(i.extend({hideEdgesOnViewport:h.hideEdgesOnViewport,hideLabelsOnViewport:h.hideLabelsOnViewport,textureOnViewport:h.textureOnViewport,wheelSensitivity:o.number(h.wheelSensitivity)&&h.wheelSensitivity>0?h.wheelSensitivity:1,motionBlur:void 0===h.motionBlur?!0:h.motionBlur,motionBlurOpacity:void 0===h.motionBlurOpacity?.05:h.motionBlurOpacity,pixelRatio:o.number(h.pixelRatio)&&h.pixelRatio>0?h.pixelRatio:void 0,desktopTapThreshold:void 0===h.desktopTapThreshold?4:h.desktopTapThreshold,touchTapThreshold:void 0===h.touchTapThreshold?8:h.touchTapThreshold},h.renderer));var m=[h.style,h.elements];v(function(t){var n=t[0],r=t[1];p.styleEnabled&&e.setStyle(n),h.initrender&&(e.on("initrender",h.initrender),e.on("initrender",function(){p.initrender=!0})),e.load(r,function(){e.startAnimationLoop(),p.ready=!0,o.fn(h.ready)&&e.on("ready",h.ready);for(var t=0;t<c.length;t++){var n=c[t];e.on("ready",n)}s&&(s.readies=[]),e.trigger("ready")},h.done)})},c=l.prototype;i.extend(c,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},ready:function(t){return this.isReady()?this.trigger("ready",[],t):this.on("ready",t),this},initrender:function(){return this._private.initrender},destroy:function(){var t=this;t.stopAnimationLoop(),t.notify({type:"destroy"});var e=t.container();if(e)for(e._cyreg=null;e.childNodes.length>0;)e.removeChild(e.childNodes[0]);return t},getElementById:function(t){var e=this._private.id2index[t];return void 0!==e?this._private.elements[e]:a(this)},selectionType:function(){return this._private.selectionType},hasCompoundNodes:function(){return this._private.hasCompoundNodes},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){for(var e=this._private.elements,n=this._private.id2index,r=0;r<t.length;r++){var i=t[r],a=i._private.data.id,o=n[a],u=void 0!==o;u||(o=e.length,e.push(i),n[a]=o,i._private.index=o)}return this},removeFromPool:function(t){for(var e=this._private.elements,n=this._private.id2index,r=0;r<t.length;r++){var i=t[r],a=i._private.data.id,o=n[a],u=void 0!==o;if(u){this._private.id2index[a]=void 0,e.splice(o,1);for(var s=o;s<e.length;s++){var l=e[s]._private.data.id;n[l]--,e[s]._private.index--}}}},container:function(){return this._private.container},options:function(){return i.copy(this._private.options)},json:function(t){var e=this,n=e._private;if(o.plainObject(t)){if(e.startBatch(),t.elements){var r={},a=function(t,n){for(var a=0;a<t.length;a++){var o=t[a],u=o.data.id,s=e.getElementById(u);r[u]=!0,0!==s.length?s.json(o):n?e.add(i.extend({group:n},o)):e.add(o)}};if(o.array(t.elements))a(t.elements);else for(var u=["nodes","edges"],s=0;s<u.length;s++){var l=u[s],c=t.elements[l];o.array(c)&&a(c,l)}e.elements().stdFilter(function(t){return!r[t.id()]}).remove()}t.style&&e.style(t.style),null!=t.zoom&&t.zoom!==n.zoom&&e.zoom(t.zoom),t.pan&&(t.pan.x!==n.pan.x||t.pan.y!==n.pan.y)&&e.pan(t.pan);for(var f=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify"],s=0;s<f.length;s++){var h=f[s];null!=t[h]&&e[h](t[h])}return e.endBatch(),this}if(void 0===t){var d={};return d.elements={},e.elements().each(function(t,e){var n=e.group();d.elements[n]||(d.elements[n]=[]),d.elements[n].push(e.json())}),this._private.styleEnabled&&(d.style=e.style().json()),d.zoomingEnabled=e._private.zoomingEnabled,d.userZoomingEnabled=e._private.userZoomingEnabled,d.zoom=e._private.zoom,d.minZoom=e._private.minZoom,d.maxZoom=e._private.maxZoom,d.panningEnabled=e._private.panningEnabled,d.userPanningEnabled=e._private.userPanningEnabled,d.pan=i.copy(e._private.pan),d.boxSelectionEnabled=e._private.boxSelectionEnabled,d.renderer=i.copy(e._private.options.renderer),d.hideEdgesOnViewport=e._private.options.hideEdgesOnViewport,d.hideLabelsOnViewport=e._private.options.hideLabelsOnViewport,d.textureOnViewport=e._private.options.textureOnViewport,d.wheelSensitivity=e._private.options.wheelSensitivity,d.motionBlur=e._private.options.motionBlur,d}},scratch:s.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeScratch:s.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0})}),[t("./add-remove"),t("./animation"),t("./events"),t("./export"),t("./layout"),t("./notification"),t("./renderer"),t("./search"),t("./style"),t("./viewport")].forEach(function(t){i.extend(c,t)}),e.exports=l},{"../collection":23,"../define":41,"../is":77,"../promise":80,"../util":94,"../window":100,"./add-remove":30,"./animation":31,"./events":32,"./export":33,"./layout":35,"./notification":36,"./renderer":37,"./search":38,"./style":39,"./viewport":40}],35:[function(t,e,n){"use strict";var r=t("../util"),i=t("../is"),a={layout:function(t){var e=this._private.prevLayout=null==t?this._private.prevLayout:this.makeLayout(t);return e.run(),this},makeLayout:function(t){var e=this;if(null==t)return void r.error("Layout options must be specified to make a layout");if(null==t.name)return void r.error("A `name` must be specified to make a layout");var n=t.name,a=e.extension("layout",n);if(null==a)return void r.error("Can not apply layout: No such layout `"+n+"` found; did you include its JS file?");var o;o=i.string(t.eles)?e.$(t.eles):null!=t.eles?t.eles:e.$();var u=new a(r.extend({},t,{cy:e,eles:o}));return u}};a.createLayout=a.makeLayout,e.exports=a},{"../is":77,"../util":94}],36:[function(t,e,n){"use strict";var r={notify:function(t){var e=this._private;if(e.batchingNotify){var n=e.batchNotifyEles,r=e.batchNotifyTypes;return t.collection&&n.merge(t.collection),void(r.ids[t.type]||r.push(t.type))}if(e.notificationsEnabled){var i=this.renderer();i.notify(t)}},notifications:function(t){var e=this._private;return void 0===t?e.notificationsEnabled:void(e.notificationsEnabled=t?!0:!1)},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},startBatch:function(){var t=this._private;return null==t.batchCount&&(t.batchCount=0),0===t.batchCount&&(t.batchingStyle=t.batchingNotify=!0,t.batchStyleEles=this.collection(),t.batchNotifyEles=this.collection(),t.batchNotifyTypes=[],t.batchNotifyTypes.ids={}),t.batchCount++,this},endBatch:function(){var t=this._private;return t.batchCount--,0===t.batchCount&&(t.batchingStyle=!1,t.batchStyleEles.updateStyle(),t.batchingNotify=!1,this.notify({type:t.batchNotifyTypes,collection:t.batchNotifyEles})),this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var e=this;return this.batch(function(){for(var n in t){var r=t[n],i=e.getElementById(n);i.data(r)}})}};e.exports=r},{}],37:[function(t,e,n){"use strict";var r=t("../util"),i={renderTo:function(t,e,n,r){var i=this._private.renderer;return i.renderTo(t,e,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify({type:"draw"}),this},resize:function(){return this.notify({type:"resize"}),this.trigger("resize"),this},initRenderer:function(t){var e=this,n=e.extension("renderer",t.name);if(null==n)return void r.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",t.name);var i=r.extend({},t,{cy:e}),a=e._private.renderer=new n(i);a.init(i)},triggerOnRender:function(){for(var t=this._private.onRenders,e=0;e<t.length;e++){var n=t[e];n()}return this},onRender:function(t){return this._private.onRenders.push(t),this},offRender:function(t){var e=this._private.onRenders;if(null==t)return this._private.onRenders=[],this;for(var n=0;n<e.length;n++){var r=e[n];if(t===r){e.splice(n,1);break}}return this}};i.invalidateDimensions=i.resize,e.exports=i},{"../util":94}],38:[function(t,e,n){"use strict";var r=t("../is"),i=t("../collection"),a={collection:function(t,e){return r.string(t)?this.$(t):r.elementOrCollection(t)?t.collection():r.array(t)?i(this,t,e):i(this)},nodes:function(t){var e=this.$(function(){return this.isNode()});return t?e.filter(t):e},edges:function(t){var e=this.$(function(){return this.isEdge()});return t?e.filter(t):e},$:function(t){var e=new i(this,this._private.elements);return t?e.filter(t):e}};a.elements=a.filter=a.$,e.exports=a},{"../collection":23,"../is":77}],39:[function(t,e,n){"use strict";var r=t("../is"),i=t("../style"),a={style:function(t){if(t){var e=this.setStyle(t);e.update()}return this._private.style},setStyle:function(t){var e=this._private;return r.stylesheet(t)?e.style=t.generateStyle(this):r.array(t)?e.style=i.fromJson(this,t):r.string(t)?e.style=i.fromString(this,t):e.style=i(this),e.style}};e.exports=a},{"../is":77,"../style":86}],40:[function(t,e,n){"use strict";var r=t("../is"),i={autolock:function(t){return void 0===t?this._private.autolock:(this._private.autolock=t?!0:!1,this)},autoungrabify:function(t){return void 0===t?this._private.autoungrabify:(this._private.autoungrabify=t?!0:!1,this)},autounselectify:function(t){return void 0===t?this._private.autounselectify:(this._private.autounselectify=t?!0:!1,this)},panningEnabled:function(t){return void 0===t?this._private.panningEnabled:(this._private.panningEnabled=t?!0:!1,this)},userPanningEnabled:function(t){return void 0===t?this._private.userPanningEnabled:(this._private.userPanningEnabled=t?!0:!1,this)},zoomingEnabled:function(t){return void 0===t?this._private.zoomingEnabled:(this._private.zoomingEnabled=t?!0:!1,this)},userZoomingEnabled:function(t){return void 0===t?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=t?!0:!1,this)},boxSelectionEnabled:function(t){return void 0===t?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=t?!0:!1,this)},pan:function(){var t,e,n,i,a,o=arguments,u=this._private.pan;switch(o.length){case 0:return u;case 1:if(r.string(o[0]))return t=o[0],u[t];if(r.plainObject(o[0])){if(!this._private.panningEnabled)return this;n=o[0],i=n.x,a=n.y,r.number(i)&&(u.x=i),r.number(a)&&(u.y=a),this.trigger("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;t=o[0],e=o[1],"x"!==t&&"y"!==t||!r.number(e)||(u[t]=e),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},panBy:function(t){var e,n,i,a,o,u=arguments,s=this._private.pan;if(!this._private.panningEnabled)return this;switch(u.length){case 1:r.plainObject(u[0])&&(i=u[0],a=i.x,o=i.y,r.number(a)&&(s.x+=a),r.number(o)&&(s.y+=o),this.trigger("pan viewport"));break;case 2:e=u[0],n=u[1],"x"!==e&&"y"!==e||!r.number(n)||(s[e]+=n),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},fit:function(t,e){var n=this.getFitViewport(t,e);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.trigger("pan zoom viewport"),this.notify({type:"viewport"})}return this},getFitViewport:function(t,e){if(r.number(t)&&void 0===e&&(e=t,t=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var n;if(r.string(t)){var i=t;t=this.$(i)}else if(r.boundingBox(t)){var a=t;n={x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else r.elementOrCollection(t)||(t=this.elements());n=n||t.boundingBox();var o,u=this.width(),s=this.height();if(e=r.number(e)?e:0,!isNaN(u)&&!isNaN(s)&&u>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){o=Math.min((u-2*e)/n.w,(s-2*e)/n.h),o=o>this._private.maxZoom?this._private.maxZoom:o,o=o<this._private.minZoom?this._private.minZoom:o;var l={x:(u-o*(n.x1+n.x2))/2,y:(s-o*(n.y1+n.y2))/2};return{zoom:o,pan:l}}}},minZoom:function(t){return void 0===t?this._private.minZoom:(r.number(t)&&(this._private.minZoom=t),this)},maxZoom:function(t){return void 0===t?this._private.maxZoom:(r.number(t)&&(this._private.maxZoom=t),this)},zoom:function(t){var e,n;if(void 0===t)return this._private.zoom;if(r.number(t))n=t;else if(r.plainObject(t)){if(n=t.level,t.position){var i=t.position,a=this._private.pan,o=this._private.zoom;e={x:i.x*o+a.x,y:i.y*o+a.y}}else t.renderedPosition&&(e=t.renderedPosition);if(e&&!this._private.panningEnabled)return this}if(!this._private.zoomingEnabled)return this;if(!r.number(n)||e&&(!r.number(e.x)||!r.number(e.y)))return this;if(n=n>this._private.maxZoom?this._private.maxZoom:n,n=n<this._private.minZoom?this._private.minZoom:n,e){var u=this._private.pan,s=this._private.zoom,l=n,c={x:-l/s*(e.x-u.x)+e.x,y:-l/s*(e.y-u.y)+e.y};this._private.zoom=n,this._private.pan=c;var f=u.x!==c.x||u.y!==c.y;this.trigger(" zoom "+(f?" pan ":"")+" viewport ")}else this._private.zoom=n,this.trigger("zoom viewport");return this.notify({type:"viewport"}),this},viewport:function(t){var e=this._private,n=!0,i=!0,a=[],o=!1,u=!1;if(!t)return this;if(r.number(t.zoom)||(n=!1),r.plainObject(t.pan)||(i=!1),!n&&!i)return this;if(n){var s=t.zoom;s<e.minZoom||s>e.maxZoom||!e.zoomingEnabled?o=!0:(e.zoom=s,a.push("zoom"))}if(i&&(!o||!t.cancelOnFailedZoom)&&e.panningEnabled){var l=t.pan;r.number(l.x)&&(e.pan.x=l.x,u=!1),r.number(l.y)&&(e.pan.y=l.y,u=!1),u||a.push("pan")}return a.length>0&&(a.push("viewport"),this.trigger(a.join(" ")),this.notify({type:"viewport"})),this},center:function(t){var e=this.getCenterPan(t);return e&&(this._private.pan=e,this.trigger("pan viewport"),this.notify({type:"viewport"})),this},getCenterPan:function(t,e){if(this._private.panningEnabled){if(r.string(t)){var n=t;t=this.elements(n)}else r.elementOrCollection(t)||(t=this.elements());var i=t.boundingBox(),a=this.width(),o=this.height();e=void 0===e?this._private.zoom:e;var u={x:(a-e*(i.x1+i.x2))/2,y:(o-e*(i.y1+i.y2))/2};return u}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},width:function(){var t=this._private.container;return t?t.clientWidth:1},height:function(){var t=this._private.container;return t?t.clientHeight:1},extent:function(){var t=this._private.pan,e=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-t.x)/e,x2:(n.x2-t.x)/e,y1:(n.y1-t.y)/e,y2:(n.y2-t.y)/e};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var t=this.width(),e=this.height();return{x1:0,y1:0,x2:t,y2:e,w:t,h:e}}};i.centre=i.center,i.autolockNodes=i.autolock,i.autoungrabifyNodes=i.autoungrabify,e.exports=i},{"../is":77}],41:[function(t,e,n){"use strict";var r=t("./util"),i=t("./is"),a=t("./selector"),o=t("./promise"),u=t("./event"),s=t("./animation"),l={data:function(t){var e={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,onSet:function(t){},canSet:function(t){return!0}};return t=r.extend({},e,t),function(e,n){var r=t,a=this,o=void 0!==a.length,u=o?a:[a],s=o?a[0]:a;if(i.string(e)){if(r.allowGetting&&void 0===n){var l;return s&&(l=s._private[r.field][e]),l}if(r.allowSetting&&void 0!==n){var c=!r.immutableKeys[e];if(c){for(var f=0,h=u.length;h>f;f++)r.canSet(u[f])&&(u[f]._private[r.field][e]=n);r.updateStyle&&a.updateStyle(),r.onSet(a),r.settingTriggersEvent&&a[r.triggerFnName](r.settingEvent)}}}else if(r.allowSetting&&i.plainObject(e)){var d,p,g=e;for(d in g){p=g[d];var c=!r.immutableKeys[d];if(c)for(var f=0,h=u.length;h>f;f++)r.canSet(u[f])&&(u[f]._private[r.field][d]=p)}r.updateStyle&&a.updateStyle(),r.onSet(a),r.settingTriggersEvent&&a[r.triggerFnName](r.settingEvent)}else if(r.allowBinding&&i.fn(e)){var v=e;a.bind(r.bindingEvent,v)}else if(r.allowGetting&&void 0===e){var l;return s&&(l=s._private[r.field]),l}return a}},removeData:function(t){var e={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return t=r.extend({},e,t),function(e){var n=t,r=this,a=void 0!==r.length,o=a?r:[r];if(i.string(e)){for(var u=e.split(/\s+/),s=u.length,l=0;s>l;l++){var c=u[l];if(!i.emptyString(c)){var f=!n.immutableKeys[c];if(f)for(var h=0,d=o.length;d>h;h++)o[h]._private[n.field][c]=void 0}}n.triggerEvent&&r[n.triggerFnName](n.event)}else if(void 0===e){for(var h=0,d=o.length;d>h;h++){var p=o[h]._private[n.field];for(var c in p){var g=!n.immutableKeys[c];g&&(p[c]=void 0)}}n.triggerEvent&&r[n.triggerFnName](n.event)}return r}},event:{regex:/(\w+)(\.\w+)?/,optionalTypeRegex:/(\w+)?(\.\w+)?/,falseCallback:function(){return!1}},on:function(t){var e={unbindSelfOnTrigger:!1,unbindAllBindersOnTrigger:!1};return t=r.extend({},e,t),function(e,n,r,o){var u=this,s=void 0!==u.length,c=s?u:[u],f=i.string(e),h=t;if(i.plainObject(n)?(o=r,r=n,n=void 0):(i.fn(n)||n===!1)&&(o=n,r=void 0,n=void 0),(i.fn(r)||r===!1)&&(o=r,r=void 0),!i.fn(o)&&o!==!1&&f)return u;if(f){var d={};d[e]=o,e=d}for(var p in e)if(o=e[p],o===!1&&(o=l.event.falseCallback),i.fn(o)){p=p.split(/\s+/);for(var g=0;g<p.length;g++){var v=p[g];if(!i.emptyString(v)){var m=v.match(l.event.regex);if(m)for(var y=m[1],x=m[2]?m[2]:void 0,b={callback:o,data:r,delegated:n?!0:!1,selector:n,selObj:new a(n),type:y,namespace:x,unbindSelfOnTrigger:h.unbindSelfOnTrigger,unbindAllBindersOnTrigger:h.unbindAllBindersOnTrigger,binders:c},w=0;w<c.length;w++){var _=c[w]._private;_.listeners=_.listeners||[],_.listeners.push(b)}}}}return u}},eventAliasesOn:function(t){var e=t;e.addListener=e.listen=e.bind=e.on,e.removeListener=e.unlisten=e.unbind=e.off,e.emit=e.trigger,e.pon=e.promiseOn=function(t,e){var n=this,r=Array.prototype.slice.call(arguments,0);return new o(function(t,e){var i=function(e){n.off.apply(n,o),t(e)},a=r.concat([i]),o=a.concat([]);n.on.apply(n,a)})}},off:function(t){var e={};return t=r.extend({},e,t),function(t,e,n){var r=this,a=void 0!==r.length,o=a?r:[r],u=i.string(t);if(0===arguments.length){for(var s=0;s<o.length;s++)o[s]._private.listeners=[];return r}if((i.fn(e)||e===!1)&&(n=e,e=void 0),u){var c={};c[t]=n,t=c}for(var f in t){n=t[f],n===!1&&(n=l.event.falseCallback),f=f.split(/\s+/);for(var h=0;h<f.length;h++){var d=f[h];if(!i.emptyString(d)){var p=d.match(l.event.optionalTypeRegex);if(p)for(var g=p[1]?p[1]:void 0,v=p[2]?p[2]:void 0,s=0;s<o.length;s++)for(var m=o[s]._private.listeners=o[s]._private.listeners||[],y=0;y<m.length;y++){var x=m[y],b=!v||v===x.namespace,w=!g||x.type===g,_=!n||n===x.callback,M=b&&w&&_;M&&(m.splice(y,1),y--)}}}}return r}},trigger:function(t){var e={};return t=r.extend({},e,t),function(e,n,r){var a=this,o=void 0!==a.length,s=o?a:[a],c=i.string(e),f=i.plainObject(e),h=i.event(e),d=this._private.cy||(i.core(this)?this:null),p=d?d.hasCompoundNodes():!1;if(c){var g=e.split(/\s+/);e=[];for(var v=0;v<g.length;v++){var m=g[v];if(!i.emptyString(m)){var y=m.match(l.event.regex),x=y[1],b=y[2]?y[2]:void 0;e.push({type:x,namespace:b})}}}else if(f){var w=e;e=[w]}n?i.array(n)||(n=[n]):n=[];for(var v=0;v<e.length;v++)for(var _=e[v],M=0;M<s.length;M++){var m,k=s[M],E=k._private.listeners=k._private.listeners||[],S=i.element(k),N=S||t.layout;if(h?(m=_,m.cyTarget=m.cyTarget||k,m.cy=m.cy||d):m=new u(_,{cyTarget:k,cy:d,namespace:_.namespace}),_.layout&&(m.layout=_.layout),t.layout&&(m.layout=k),m.cyPosition){var T=m.cyPosition,C=d.zoom(),D=d.pan();m.cyRenderedPosition={x:T.x*C+D.x,y:T.y*C+D.y}}r&&(E=[{namespace:m.namespace,type:m.type,callback:r}]);for(var P=0;P<E.length;P++){var A=E[P],z=!A.namespace||A.namespace===m.namespace,L=A.type===m.type,I=A.delegated?k!==m.cyTarget&&i.element(m.cyTarget)&&A.selObj.matches(m.cyTarget):!0,O=z&&L&&I;if(O){var R=[m];if(R=R.concat(n),A.data?m.data=A.data:m.data=void 0,(A.unbindSelfOnTrigger||A.unbindAllBindersOnTrigger)&&(E.splice(P,1),P--),A.unbindAllBindersOnTrigger)for(var j=A.binders,B=0;B<j.length;B++){var q=j[B];if(q&&q!==k)for(var F=q._private.listeners,V=0;V<F.length;V++){var Y=F[V];Y===A&&(F.splice(V,1),V--)}}var X=A.delegated?m.cyTarget:k,$=A.callback.apply(X,R);($===!1||m.isPropagationStopped())&&(N=!1,$===!1&&(m.stopPropagation(),m.preventDefault()))}}if(N){var U=p?k._private.parent:null,H=null!=U&&0!==U.length;H?(U=U[0],U.trigger(m)):d.trigger(m)}}return a}},animated:function(t){var e={};return t=r.extend({},e,t),function(){var t=this,e=void 0!==t.length,n=e?t:[t],r=this._private.cy||this;if(!r.styleEnabled())return!1;var i=n[0];return i?i._private.animation.current.length>0:void 0}},clearQueue:function(t){var e={};return t=r.extend({},e,t),function(){var t=this,e=void 0!==t.length,n=e?t:[t],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var i=0;i<n.length;i++){var a=n[i];a._private.animation.queue=[]}return this}},delay:function(t){var e={};return t=r.extend({},e,t),function(t,e){var n=this._private.cy||this;return n.styleEnabled()?this.animate({delay:t,duration:t,complete:e}):this}},delayAnimation:function(t){var e={};return t=r.extend({},e,t),function(t,e){var n=this._private.cy||this;return n.styleEnabled()?this.animation({delay:t,duration:t,complete:e}):this}},animation:function(t){var e={};return t=r.extend({},e,t),function(t,e){var n=this,i=void 0!==n.length,a=i?n:[n],o=this._private.cy||this,u=!i,l=!u;if(!o.styleEnabled())return this;var c=o.style();switch(t=r.extend({},t,e),void 0===t.duration&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}var f=!0;if(t)for(var h in t){f=!1;break}if(f)return new s(a[0],t);if(l&&(t.style=c.getPropsList(t.style||t.css),t.css=void 0),t.renderedPosition&&l){var d=t.renderedPosition,p=o.pan(),g=o.zoom();t.position={x:(d.x-p.x)/g,y:(d.y-p.y)/g}}if(t.panBy&&u){var v=t.panBy,m=o.pan();t.pan={x:m.x+v.x,
y:m.y+v.y}}var y=t.center||t.centre;if(y&&u){var x=o.getCenterPan(y.eles,t.zoom);x&&(t.pan=x)}if(t.fit&&u){var b=t.fit,w=o.getFitViewport(b.eles||b.boundingBox,b.padding);w&&(t.pan=w.pan,t.zoom=w.zoom)}return new s(a[0],t)}},animate:function(t){var e={};return t=r.extend({},e,t),function(t,e){var n=this,i=void 0!==n.length,a=i?n:[n],o=this._private.cy||this;if(!o.styleEnabled())return this;e&&(t=r.extend({},t,e));for(var u=0;u<a.length;u++){var s=a[u],l=s.animated()&&(void 0===t.queue||t.queue),c=s.animation(t,l?{queue:!0}:void 0);c.play()}return this}},stop:function(t){var e={};return t=r.extend({},e,t),function(t,e){var n=this,r=void 0!==n.length,i=r?n:[n],a=this._private.cy||this;if(!a.styleEnabled())return this;for(var o=0;o<i.length;o++){for(var u=i[o],s=u._private,l=s.animation.current,c=0;c<l.length;c++){var f=l[c],h=f._private;e&&(h.duration=0)}t&&(s.animation.queue=[]),e||(s.animation.current=[])}return a.notify({collection:this,type:"draw"}),this}}};e.exports=l},{"./animation":1,"./event":42,"./is":77,"./promise":80,"./selector":81,"./util":94}],42:[function(t,e,n){"use strict";function r(){return!1}function i(){return!0}var a=function(t,e){return this instanceof a?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?i:r):this.type=t,e&&(this.type=void 0!==e.type?e.type:this.type,this.cy=e.cy,this.cyTarget=e.cyTarget,this.cyPosition=e.cyPosition,this.cyRenderedPosition=e.cyRenderedPosition,this.namespace=e.namespace,this.layout=e.layout,this.data=e.data,this.message=e.message),void(this.timeStamp=t&&t.timeStamp||Date.now())):new a(t,e)};a.prototype={instanceString:function(){return"event"},preventDefault:function(){this.isDefaultPrevented=i;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=i;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()},isDefaultPrevented:r,isPropagationStopped:r,isImmediatePropagationStopped:r},e.exports=a},{}],43:[function(t,e,n){"use strict";function r(t,e,n){var r=n;if("core"===t)c.prototype[e]=n;else if("collection"===t)l.prototype[e]=n;else if("layout"===t){for(var a=function(t){this.options=t,n.call(this,t),h.plainObject(this._private)||(this._private={}),this._private.cy=t.cy,this._private.listeners=[]},o=a.prototype=Object.create(n.prototype),f=[],p=0;p<f.length;p++){var g=f[p];o[g]=o[g]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this}),o.stop||(o.stop=function(){var t=this.options;if(t&&t.animate)for(var e=this.animations,n=0;n<e.length;n++)e[n].stop();return this.trigger("layoutstop"),this}),o.destroy||(o.destroy=function(){return this}),o.on=s.on({layout:!0}),o.one=s.on({layout:!0,unbindSelfOnTrigger:!0}),o.once=s.on({layout:!0,unbindAllBindersOnTrigger:!0}),o.off=s.off({layout:!0}),o.trigger=s.trigger({layout:!0}),s.eventAliasesOn(o),r=a}else if("renderer"===t&&"null"!==e&&"base"!==e){var v=i("renderer","base").prototype,m=n.prototype;for(var y in v){var x=v[y],b=null!=m[y];if(b)return void u.error("Can not register renderer `"+e+"` since it overrides `"+y+"` in its prototype");m[y]=x}v.clientFunctions.forEach(function(t){m[t]=m[t]||function(){u.error("Renderer does not implement `renderer."+t+"()` on its prototype")}})}return u.setMap({map:d,keys:[t,e],value:r})}function i(t,e){return u.getMap({map:d,keys:[t,e]})}function a(t,e,n,r,i){return u.setMap({map:p,keys:[t,e,n,r],value:i})}function o(t,e,n,r){return u.getMap({map:p,keys:[t,e,n,r]})}var u=t("./util"),s=t("./define"),l=t("./collection"),c=t("./core"),f=t("./extensions"),h=t("./is"),d={},p={},g=function(){return 2===arguments.length?i.apply(null,arguments):3===arguments.length?r.apply(null,arguments):4===arguments.length?o.apply(null,arguments):5===arguments.length?a.apply(null,arguments):void u.error("Invalid extension access syntax")};c.prototype.extension=g,f.forEach(function(t){t.extensions.forEach(function(e){r(t.type,e.name,e.impl)})}),e.exports=g},{"./collection":23,"./core":34,"./define":41,"./extensions":44,"./is":77,"./util":94}],44:[function(t,e,n){"use strict";e.exports=[{type:"layout",extensions:t("./layout")},{type:"renderer",extensions:t("./renderer")}]},{"./layout":50,"./renderer":72}],45:[function(t,e,n){"use strict";function r(t){this.options=i.extend({},u,t)}var i=t("../../util"),a=t("../../math"),o=t("../../is"),u={fit:!0,directed:!1,padding:30,circle:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,roots:void 0,maximalAdjustments:0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){var t,e=this.options,n=e,r=e.cy,i=n.eles,u=i.nodes().not(":parent"),s=i,l=a.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(o.elementOrCollection(n.roots))t=n.roots;else if(o.array(n.roots)){for(var c=[],f=0;f<n.roots.length;f++){var h=n.roots[f],d=r.getElementById(h);c.push(d)}t=r.collection(c)}else if(o.string(n.roots))t=r.$(n.roots);else if(n.directed)t=u.roots();else{for(var p=[],g=u;g.length>0;){var v=r.collection();i.bfs({roots:g[0],visit:function(t,e,n,r,i){v=v.add(n)},directed:!1}),g=g.not(v),p.push(v)}t=r.collection();for(var f=0;f<p.length;f++){var m=p[f],y=m.maxDegree(!1),x=m.filter(function(){return this.degree(!1)===y});t=t.add(x)}}var b=[],w={},_={},M={},k={},E={};s.bfs({roots:t,directed:n.directed,visit:function(t,e,n,r,i){var a=this[0],o=a.id();if(b[e]||(b[e]=[]),b[e].push(a),w[o]=!0,_[o]=e,M[o]=i,k[o]=r,i){var u=i.id(),s=E[u]=E[u]||[];s.push(n)}}});for(var S=[],f=0;f<u.length;f++){var d=u[f];w[d.id()]||S.push(d)}for(var N=3*S.length,T=0;0!==S.length&&N>T;){for(var C=S.shift(),D=C.neighborhood().nodes(),P=!1,f=0;f<D.length;f++){var A=_[D[f].id()];if(void 0!==A){b[A].push(C),P=!0;break}}P||S.push(C),T++}for(;0!==S.length;){var C=S.shift(),P=!1;P||(0===b.length&&b.push([]),b[0].push(C))}var z=function(){for(var t=0;t<b.length;t++)for(var e=b[t],n=0;n<e.length;n++){var r=e[n];r._private.scratch.breadthfirst={depth:t,index:n}}};z();for(var L=function(t){for(var e,n=t.connectedEdges(function(){return this.data("target")===t.id()}),r=t._private.scratch.breadthfirst,i=0,a=0;a<n.length;a++){var o=n[a],u=o.source()[0],s=u._private.scratch.breadthfirst;r.depth<=s.depth&&i<s.depth&&(i=s.depth,e=u)}return e},I=0;I<n.maximalAdjustments;I++){for(var O=b.length,R=[],f=0;O>f;f++)for(var A=b[f],j=A.length,B=0;j>B;B++){var d=A[B],q=d._private.scratch.breadthfirst,F=L(d);F&&(q.intEle=F,R.push(d))}for(var f=0;f<R.length;f++){var d=R[f],q=d._private.scratch.breadthfirst,F=q.intEle,V=F._private.scratch.breadthfirst;b[q.depth].splice(q.index,1);for(var Y=V.depth+1;Y>b.length-1;)b.push([]);b[Y].push(d),q.depth=Y,q.index=b[Y].length-1}z()}var X=0;if(n.avoidOverlap){for(var f=0;f<u.length;f++){var $=u[f],U=$.boundingBox(),H=U.w,W=U.h;X=Math.max(X,H,W)}X*=n.spacingFactor}for(var Z={},G=function(t){if(Z[t.id()])return Z[t.id()];for(var e=t._private.scratch.breadthfirst.depth,n=t.neighborhood().nodes().not(":parent"),r=0,i=0,a=0;a<n.length;a++){var o=n[a],u=o._private.scratch.breadthfirst,s=u.index,l=u.depth,c=b[l].length;(e>l||0===e)&&(r+=s/c,i++)}return i=Math.max(1,i),r/=i,0===i&&(r=void 0),Z[t.id()]=r,r},K=function(t,e){var n=G(t),r=G(e);return n-r},J=0;3>J;J++){for(var f=0;f<b.length;f++)b[f]=b[f].sort(K);z()}for(var Q=0,f=0;f<b.length;f++)Q=Math.max(b[f].length,Q);for(var tt={x:l.x1+l.w/2,y:l.x1+l.h/2},et=function(t,e){var r=t._private.scratch.breadthfirst,i=r.depth,a=r.index,o=b[i].length,u=Math.max(l.w/(o+1),X),s=Math.max(l.h/(b.length+1),X),c=Math.min(l.w/2/b.length,l.h/2/b.length);if(c=Math.max(c,X),n.circle){if(n.circle){var f=c*i+c-(b.length>0&&b[0].length<=3?c/2:0),h=2*Math.PI/b[i].length*a;return 0===i&&1===b[0].length&&(f=1),{x:tt.x+f*Math.cos(h),y:tt.y+f*Math.sin(h)}}return{x:tt.x+(a+1-(o+1)/2)*u,y:(i+1)*s}}var d={x:tt.x+(a+1-(o+1)/2)*u,y:(i+1)*s};return e?d:d},nt={},f=b.length-1;f>=0;f--)for(var A=b[f],B=0;B<A.length;B++){var C=A[B];nt[C.id()]=et(C,f===b.length-1)}return u.layoutPositions(this,n,function(){return nt[this.id()]}),this},e.exports=r},{"../../is":77,"../../math":79,"../../util":94}],46:[function(t,e,n){"use strict";function r(t){this.options=i.extend({},u,t)}var i=t("../../util"),a=t("../../math"),o=t("../../is"),u={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,u=r.nodes().not(":parent");e.sort&&(u=u.sort(e.sort));for(var s,l=a.makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),c={x:l.x1+l.w/2,y:l.y1+l.h/2},f=void 0===e.sweep?2*Math.PI-2*Math.PI/u.length:e.sweep,h=f/Math.max(1,u.length-1),d=0,p=0;p<u.length;p++){var g=u[p],v=g.boundingBox(),m=v.w,y=v.h;d=Math.max(d,m,y)}if(s=o.number(e.radius)?e.radius:u.length<=1?0:Math.min(l.h,l.w)/2-d,u.length>1&&e.avoidOverlap){d*=1.75;var x=Math.cos(h)-Math.cos(0),b=Math.sin(h)-Math.sin(0),w=Math.sqrt(d*d/(x*x+b*b));s=Math.max(w,s)}var _=function(t,n){var r=e.startAngle+t*h*(i?1:-1),a=s*Math.cos(r),o=s*Math.sin(r),u={x:c.x+a,y:c.y+o};return u};return u.layoutPositions(this,e,_),this},e.exports=r},{"../../is":77,"../../math":79,"../../util":94}],47:[function(t,e,n){"use strict";function r(t){this.options=i.extend({},o,t)}var i=t("../../util"),a=t("../../math"),o={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,height:void 0,width:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){for(var t=this.options,e=t,n=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,r=t.cy,i=e.eles,o=i.nodes().not(":parent"),u=a.makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s={x:u.x1+u.w/2,y:u.y1+u.h/2},l=[],c=e.startAngle,f=0,h=0;h<o.length;h++){var d,p=o[h];d=e.concentric.apply(p,[p]),l.push({value:d,node:p}),p._private.scratch.concentric=d}o.updateStyle();for(var h=0;h<o.length;h++){var p=o[h],g=p.boundingBox();f=Math.max(f,g.w,g.h)}l.sort(function(t,e){return e.value-t.value});for(var v=e.levelWidth(o),m=[[]],y=m[0],h=0;h<l.length;h++){var x=l[h];if(y.length>0){var b=Math.abs(y[0].value-x.value);b>=v&&(y=[],m.push(y))}y.push(x)}var w=f+e.minNodeSpacing;if(!e.avoidOverlap){var _=m.length>0&&m[0].length>1,M=Math.min(u.w,u.h)/2-w,k=M/(m.length+_?1:0);w=Math.min(w,k)}for(var E=0,h=0;h<m.length;h++){var S=m[h],N=void 0===e.sweep?2*Math.PI-2*Math.PI/S.length:e.sweep,T=S.dTheta=N/Math.max(1,S.length-1);if(S.length>1&&e.avoidOverlap){var C=Math.cos(T)-Math.cos(0),D=Math.sin(T)-Math.sin(0),P=Math.sqrt(w*w/(C*C+D*D));E=Math.max(P,E)}S.r=E,E+=w}if(e.equidistant){for(var A=0,E=0,h=0;h<m.length;h++){var S=m[h],z=S.r-E;A=Math.max(A,z)}E=0;for(var h=0;h<m.length;h++){var S=m[h];0===h&&(E=S.r),S.r=E,E+=A}}for(var L={},h=0;h<m.length;h++)for(var S=m[h],T=S.dTheta,E=S.r,I=0;I<S.length;I++){var x=S[I],c=e.startAngle+(n?1:-1)*T*I,O={x:s.x+E*Math.cos(c),y:s.y+E*Math.sin(c)};L[x.node.id()]=O}return o.layoutPositions(this,e,function(){var t=this.id();return L[t]}),this},e.exports=r},{"../../math":79,"../../util":94}],48:[function(t,e,n){"use strict";function r(t){this.options=a.extend({},l,t),this.options.layout=this}var i,a=t("../../util"),o=t("../../math"),u=t("../../thread"),s=t("../../is"),l={ready:function(){},stop:function(){},animate:!0,animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,componentSpacing:100,nodeRepulsion:function(t){return 4e5},nodeOverlap:10,idealEdgeLength:function(t){return 10},edgeElasticity:function(t){return 100},nestingFactor:5,gravity:80,numIter:1e3,initialTemp:200,coolingFactor:.95,minTemp:1,useMultitasking:!0};r.prototype.run=function(){var t=this.options,e=t.cy,n=this,r=this.thread;(!r||r.stopped())&&(r=this.thread=u({disabled:!t.useMultitasking})),n.stopped=!1,n.trigger({type:"layoutstart",layout:n}),i=!0===t.debug?!0:!1;var o=c(e,n,t);i&&d(o),p(o,e);var s=Date.now(),l=!1,f=function(n){n=n||{},l||!n.force&&Date.now()-s<t.animationThreshold||(l=!0,a.requestAnimationFrame(function(){g(o,e,t),!0===t.fit&&e.fit(t.padding),l=!1,n.next&&n.next()}))};r.on("message",function(t){var e=t.message;o.layoutNodes=e,f()}),r.pass({layoutInfo:o,options:{animate:t.animate,refresh:t.refresh,componentSpacing:t.componentSpacing,nodeOverlap:t.nodeOverlap,nestingFactor:t.nestingFactor,gravity:t.gravity,numIter:t.numIter,initialTemp:t.initialTemp,coolingFactor:t.coolingFactor,minTemp:t.minTemp}}).run(function(t){var e,n=t.layoutInfo,r=t.options,i=!1,a=function(t,e,n){o(t,e),c(t,e),f(t,e),h(t,e),d(t,e)},o=function(t,e){for(var n=0;n<t.graphSet.length;n++)for(var r=t.graphSet[n],i=r.length,a=0;i>a;a++)for(var o=t.layoutNodes[t.idToIndex[r[a]]],s=a+1;i>s;s++){var l=t.layoutNodes[t.idToIndex[r[s]]];u(o,l,t,e)}},u=function(t,e,n,r){var i=t.cmptId,a=e.cmptId;if(i===a||n.isCompound){var o=e.positionX-t.positionX,u=e.positionY-t.positionY;if(0!==o||0!==u){var c=s(t,e,o,u);if(c>0)var f=r.nodeOverlap*c,h=Math.sqrt(o*o+u*u),d=f*o/h,p=f*u/h;else var g=l(t,o,u),v=l(e,-1*o,-1*u),m=v.x-g.x,y=v.y-g.y,x=m*m+y*y,h=Math.sqrt(x),f=(t.nodeRepulsion+e.nodeRepulsion)/x,d=f*m/h,p=f*y/h;t.isLocked||(t.offsetX-=d,t.offsetY-=p),e.isLocked||(e.offsetX+=d,e.offsetY+=p)}}},s=function(t,e,n,r){if(n>0)var i=t.maxX-e.minX;else var i=e.maxX-t.minX;if(r>0)var a=t.maxY-e.minY;else var a=e.maxY-t.minY;return i>=0&&a>=0?Math.sqrt(i*i+a*a):0},l=function(t,e,n){var r=t.positionX,i=t.positionY,a=t.height||1,o=t.width||1,u=n/e,s=a/o,l={};do{if(0===e&&n>0){l.x=r,l.y=i+a/2;break}if(0===e&&0>n){l.x=r,l.y=i+a/2;break}if(e>0&&u>=-1*s&&s>=u){l.x=r+o/2,l.y=i+o*n/2/e;break}if(0>e&&u>=-1*s&&s>=u){l.x=r-o/2,l.y=i-o*n/2/e;break}if(n>0&&(-1*s>=u||u>=s)){l.x=r+a*e/2/n,l.y=i+a/2;break}if(0>n&&(-1*s>=u||u>=s)){l.x=r-a*e/2/n,l.y=i-a/2;break}}while(!1);return l},c=function(t,e){for(var n=0;n<t.edgeSize;n++){var r=t.layoutEdges[n],i=t.idToIndex[r.sourceId],a=t.layoutNodes[i],o=t.idToIndex[r.targetId],u=t.layoutNodes[o],s=u.positionX-a.positionX,c=u.positionY-a.positionY;if(0===s&&0===c)return;var f=l(a,s,c),h=l(u,-1*s,-1*c),d=h.x-f.x,p=h.y-f.y,g=Math.sqrt(d*d+p*p),v=Math.pow(r.idealLength-g,2)/r.elasticity;if(0!==g)var m=v*d/g,y=v*p/g;else var m=0,y=0;a.isLocked||(a.offsetX+=m,a.offsetY+=y),u.isLocked||(u.offsetX-=m,u.offsetY-=y)}},f=function(t,e){for(var n=1,r=0;r<t.graphSet.length;r++){var i=t.graphSet[r],a=i.length;if(0===r)var o=t.clientHeight/2,u=t.clientWidth/2;else var s=t.layoutNodes[t.idToIndex[i[0]]],l=t.layoutNodes[t.idToIndex[s.parentId]],o=l.positionX,u=l.positionY;for(var c=0;a>c;c++){var f=t.layoutNodes[t.idToIndex[i[c]]];if(!f.isLocked){var h=o-f.positionX,d=u-f.positionY,p=Math.sqrt(h*h+d*d);if(p>n){var g=e.gravity*h/p,v=e.gravity*d/p;f.offsetX+=g,f.offsetY+=v}}}}},h=function(t,e){var n=[],r=0,i=-1;for(n.push.apply(n,t.graphSet[0]),i+=t.graphSet[0].length;i>=r;){var a=n[r++],o=t.idToIndex[a],u=t.layoutNodes[o],s=u.children;if(0<s.length&&!u.isLocked){for(var l=u.offsetX,c=u.offsetY,f=0;f<s.length;f++){var h=t.layoutNodes[t.idToIndex[s[f]]];h.offsetX+=l,h.offsetY+=c,n[++i]=s[f]}u.offsetX=0,u.offsetY=0}}},d=function(t,e){for(var n=0;n<t.nodeSize;n++){var r=t.layoutNodes[n];0<r.children.length&&(r.maxX=void 0,r.minX=void 0,r.maxY=void 0,r.minY=void 0)}for(var n=0;n<t.nodeSize;n++){var r=t.layoutNodes[n];if(!(0<r.children.length||r.isLocked)){var i=p(r.offsetX,r.offsetY,t.temperature);r.positionX+=i.x,r.positionY+=i.y,r.offsetX=0,r.offsetY=0,r.minX=r.positionX-r.width,r.maxX=r.positionX+r.width,r.minY=r.positionY-r.height,r.maxY=r.positionY+r.height,g(r,t)}}for(var n=0;n<t.nodeSize;n++){var r=t.layoutNodes[n];0<r.children.length&&!r.isLocked&&(r.positionX=(r.maxX+r.minX)/2,r.positionY=(r.maxY+r.minY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY)}},p=function(t,e,n){var r=Math.sqrt(t*t+e*e);if(r>n)var i={x:n*t/r,y:n*e/r};else var i={x:t,y:e};return i},g=function(t,e){var n=t.parentId;if(null!=n){var r=e.layoutNodes[e.idToIndex[n]],i=!1;return(null==r.maxX||t.maxX+r.padRight>r.maxX)&&(r.maxX=t.maxX+r.padRight,i=!0),(null==r.minX||t.minX-r.padLeft<r.minX)&&(r.minX=t.minX-r.padLeft,i=!0),(null==r.maxY||t.maxY+r.padBottom>r.maxY)&&(r.maxY=t.maxY+r.padBottom,i=!0),(null==r.minY||t.minY-r.padTop<r.minY)&&(r.minY=t.minY-r.padTop,i=!0),i?g(r,e):void 0}},v=function(t,e){for(var r=n.layoutNodes,i=[],a=0;a<r.length;a++){var o=r[a],u=o.cmptId,s=i[u]=i[u]||[];s.push(o)}for(var l=0,a=0;a<i.length;a++){var c=i[a];c.x1=1/0,c.x2=-(1/0),c.y1=1/0,c.y2=-(1/0);for(var f=0;f<c.length;f++){var h=c[f];c.x1=Math.min(c.x1,h.positionX-h.width/2),c.x2=Math.max(c.x2,h.positionX+h.width/2),c.y1=Math.min(c.y1,h.positionY-h.height/2),c.y2=Math.max(c.y2,h.positionY+h.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,l+=c.w*c.h}i.sort(function(t,e){return e.w*e.h-t.w*t.h});for(var d=0,p=0,g=0,v=0,m=Math.sqrt(l)*n.clientWidth/n.clientHeight,a=0;a<i.length;a++){for(var c=i[a],f=0;f<c.length;f++){var h=c[f];h.isLocked||(h.positionX+=d,h.positionY+=p)}d+=c.w+e.componentSpacing,g+=c.w+e.componentSpacing,v=Math.max(v,c.h),g>m&&(p+=v+e.componentSpacing,d=0,g=0,v=0)}},m=function(t){return i?!1:(a(n,r,t),n.temperature=n.temperature*r.coolingFactor,n.temperature<r.minTemp?!1:!0)},y=0;do{for(var x=0;x<r.refresh&&y<r.numIter;){var e=m(y);if(!e)break;x++,y++}r.animate&&broadcast(n.layoutNodes)}while(e&&y+1<r.numIter);return v(n,r),n}).then(function(t){o.layoutNodes=t.layoutNodes,r.stop(),h()});var h=function(){f({force:!0,next:function(){n.one("layoutstop",t.stop),n.trigger({type:"layoutstop",layout:n})}})};return this},r.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.trigger("layoutstop"),this},r.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var c=function(t,e,n){for(var r=n.eles.edges(),i=n.eles.nodes(),a={isCompound:t.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:t.width(),clientHeight:t.width(),boundingBox:o.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()})},u=n.eles.components(),l={},c=0;c<u.length;c++)for(var h=u[c],d=0;d<h.length;d++){var p=h[d];l[p.id()]=c}for(var c=0;c<a.nodeSize;c++){var g=i[c],v=g.boundingBox(),m={};m.isLocked=g.locked(),m.id=g.data("id"),m.parentId=g.data("parent"),m.cmptId=l[g.id()],m.children=[],m.positionX=g.position("x"),m.positionY=g.position("y"),m.offsetX=0,m.offsetY=0,m.height=v.w,m.width=v.h,m.maxX=m.positionX+m.width/2,m.minX=m.positionX-m.width/2,m.maxY=m.positionY+m.height/2,m.minY=m.positionY-m.height/2,m.padLeft=parseFloat(g.style("padding-left")),m.padRight=parseFloat(g.style("padding-right")),m.padTop=parseFloat(g.style("padding-top")),m.padBottom=parseFloat(g.style("padding-bottom")),m.nodeRepulsion=s.fn(n.nodeRepulsion)?n.nodeRepulsion.call(g,g):n.nodeRepulsion,a.layoutNodes.push(m),a.idToIndex[m.id]=c}for(var y=[],x=0,b=-1,w=[],c=0;c<a.nodeSize;c++){var g=a.layoutNodes[c],_=g.parentId;null!=_?a.layoutNodes[a.idToIndex[_]].children.push(g.id):(y[++b]=g.id,w.push(g.id))}for(a.graphSet.push(w);b>=x;){var M=y[x++],k=a.idToIndex[M],p=a.layoutNodes[k],E=p.children;if(E.length>0){a.graphSet.push(E);for(var c=0;c<E.length;c++)y[++b]=E[c]}}for(var c=0;c<a.graphSet.length;c++)for(var S=a.graphSet[c],d=0;d<S.length;d++){var N=a.idToIndex[S[d]];a.indexToGraph[N]=c}for(var c=0;c<a.edgeSize;c++){var T=r[c],C={};C.id=T.data("id"),C.sourceId=T.data("source"),C.targetId=T.data("target");var D=s.fn(n.idealEdgeLength)?n.idealEdgeLength.call(T,T):n.idealEdgeLength,P=s.fn(n.edgeElasticity)?n.edgeElasticity.call(T,T):n.edgeElasticity,A=a.idToIndex[C.sourceId],z=a.idToIndex[C.targetId],L=a.indexToGraph[A],I=a.indexToGraph[z];if(L!=I){for(var O=f(C.sourceId,C.targetId,a),R=a.graphSet[O],j=0,m=a.layoutNodes[A];-1===R.indexOf(m.id);)m=a.layoutNodes[a.idToIndex[m.parentId]],j++;for(m=a.layoutNodes[z];-1===R.indexOf(m.id);)m=a.layoutNodes[a.idToIndex[m.parentId]],j++;D*=j*n.nestingFactor}C.idealLength=D,C.elasticity=P,a.layoutEdges.push(C)}return a},f=function(t,e,n){var r=h(t,e,0,n);return 2>r.count?0:r.graph},h=function(t,e,n,r){var i=r.graphSet[n];if(-1<i.indexOf(t)&&-1<i.indexOf(e))return{count:2,graph:n};for(var a=0,o=0;o<i.length;o++){var u=i[o],s=r.idToIndex[u],l=r.layoutNodes[s].children;if(0!==l.length){var c=r.indexToGraph[r.idToIndex[l[0]]],f=h(t,e,c,r);if(0!==f.count){if(1!==f.count)return f;if(a++,2===a)break}}}return{count:a,graph:n}},d=function(t){if(i){console.debug("layoutNodes:");for(var e=0;e<t.nodeSize;e++){var n=t.layoutNodes[e],r="\nindex: "+e+"\nId: "+n.id+"\nChildren: "+n.children.toString()+"\nparentId: "+n.parentId+"\npositionX: "+n.positionX+"\npositionY: "+n.positionY+"\nOffsetX: "+n.offsetX+"\nOffsetY: "+n.offsetY+"\npadLeft: "+n.padLeft+"\npadRight: "+n.padRight+"\npadTop: "+n.padTop+"\npadBottom: "+n.padBottom;console.debug(r)}console.debug("idToIndex");for(var e in t.idToIndex)console.debug("Id: "+e+"\nIndex: "+t.idToIndex[e]);console.debug("Graph Set");for(var a=t.graphSet,e=0;e<a.length;e++)console.debug("Set : "+e+": "+a[e].toString());for(var r="IndexToGraph",e=0;e<t.indexToGraph.length;e++)r+="\nIndex : "+e+" Graph: "+t.indexToGraph[e];console.debug(r),r="Layout Edges";for(var e=0;e<t.layoutEdges.length;e++){var o=t.layoutEdges[e];r+="\nEdge Index: "+e+" ID: "+o.id+" SouceID: "+o.sourceId+" TargetId: "+o.targetId+" Ideal Length: "+o.idealLength}console.debug(r),r="nodeSize: "+t.nodeSize,r+="\nedgeSize: "+t.edgeSize,r+="\ntemperature: "+t.temperature,console.debug(r)}},p=function(t,e){for(var n=t.clientWidth,r=t.clientHeight,i=0;i<t.nodeSize;i++){var a=t.layoutNodes[i];0!==a.children.length||a.isLocked||(a.positionX=Math.random()*n,a.positionY=Math.random()*r)}},g=function(t,e,n){var r=n.layout,i=n.eles.nodes(),a=t.boundingBox,o={x1:1/0,x2:-(1/0),y1:1/0,y2:-(1/0)};n.boundingBox&&(i.forEach(function(e){var n=t.layoutNodes[t.idToIndex[e.data("id")]];o.x1=Math.min(o.x1,n.positionX),o.x2=Math.max(o.x2,n.positionX),o.y1=Math.min(o.y1,n.positionY),o.y2=Math.max(o.y2,n.positionY)}),o.w=o.x2-o.x1,o.h=o.y2-o.y1),i.positions(function(e,r){var i=t.layoutNodes[t.idToIndex[r.data("id")]];if(n.boundingBox){var u=(i.positionX-o.x1)/o.w,s=(i.positionY-o.y1)/o.h;return{x:a.x1+u*a.w,y:a.y1+s*a.h}}return{x:i.positionX,y:i.positionY}}),!0!==t.ready&&(t.ready=!0,r.one("layoutready",n.ready),r.trigger({type:"layoutready",layout:this}))};e.exports=r},{"../../is":77,"../../math":79,"../../thread":92,"../../util":94}],49:[function(t,e,n){"use strict";function r(t){this.options=i.extend({},o,t)}var i=t("../../util"),a=t("../../math"),o={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=r.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var o=a.makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===o.h||0===o.w)i.layoutPositions(this,e,function(){return{x:o.x1,y:o.y1}});else{var u=i.size(),s=Math.sqrt(u*o.h/o.w),l=Math.round(s),c=Math.round(o.w/o.h*s),f=function(t){if(null==t)return Math.min(l,c);var e=Math.min(l,c);e==l?l=t:c=t},h=function(t){if(null==t)return Math.max(l,c);var e=Math.max(l,c);e==l?l=t:c=t},d=e.rows,p=null!=e.cols?e.cols:e.columns;if(null!=d&&null!=p)l=d,c=p;else if(null!=d&&null==p)l=d,c=Math.ceil(u/l);else if(null==d&&null!=p)c=p,l=Math.ceil(u/c);else if(c*l>u){var g=f(),v=h();(g-1)*v>=u?f(g-1):(v-1)*g>=u&&h(v-1)}else for(;u>c*l;){var g=f(),v=h();(v+1)*g>=u?h(v+1):f(g+1)}var m=o.w/c,y=o.h/l;if(e.condense&&(m=0,y=0),e.avoidOverlap)for(var x=0;x<i.length;x++){var b=i[x],w=b._private.position;(null==w.x||null==w.y)&&(w.x=0,w.y=0);var _=b.boundingBox(),M=e.avoidOverlapPadding,k=_.w+M,E=_.h+M;m=Math.max(m,k),y=Math.max(y,E)}for(var S={},N=function(t,e){return S["c-"+t+"-"+e]?!0:!1},T=function(t,e){S["c-"+t+"-"+e]=!0},C=0,D=0,P=function(){D++,D>=c&&(D=0,C++)},A={},x=0;x<i.length;x++){var b=i[x],z=e.position(b);if(z&&(void 0!==z.row||void 0!==z.col)){var w={row:z.row,col:z.col};if(void 0===w.col)for(w.col=0;N(w.row,w.col);)w.col++;else if(void 0===w.row)for(w.row=0;N(w.row,w.col);)w.row++;A[b.id()]=w,T(w.row,w.col)}}var L=function(t,e){var n,r;if(e.locked()||e.isFullAutoParent())return!1;var i=A[e.id()];if(i)n=i.col*m+m/2+o.x1,r=i.row*y+y/2+o.y1;else{for(;N(C,D);)P();n=D*m+m/2+o.x1,r=C*y+y/2+o.y1,T(C,D),P()}return{x:n,y:r}};i.layoutPositions(this,e,L)}return this},e.exports=r},{"../../math":79,"../../util":94}],50:[function(t,e,n){"use strict";e.exports=[{name:"breadthfirst",impl:t("./breadthfirst")},{name:"circle",impl:t("./circle")},{name:"concentric",impl:t("./concentric")},{name:"cose",impl:t("./cose")},{name:"grid",impl:t("./grid")},{name:"null",impl:t("./null")},{name:"preset",impl:t("./preset")},{name:"random",impl:t("./random")}]},{"./breadthfirst":45,"./circle":46,"./concentric":47,"./cose":48,"./grid":49,"./null":51,"./preset":52,"./random":53}],51:[function(t,e,n){"use strict";function r(t){this.options=i.extend({},a,t)}var i=t("../../util"),a={ready:function(){},stop:function(){}};r.prototype.run=function(){var t=this.options,e=t.eles,n=this;t.cy;return n.trigger("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),n.one("layoutready",t.ready),n.trigger("layoutready"),n.one("layoutstop",t.stop),n.trigger("layoutstop"),this},r.prototype.stop=function(){return this},e.exports=r},{"../../util":94}],52:[function(t,e,n){"use strict";function r(t){this.options=i.extend({},o,t)}var i=t("../../util"),a=t("../../is"),o={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){function t(t){if(null==e.positions)return null;if(i)return e.positions.apply(t,[t]);var n=e.positions[t._private.data.id];return null==n?null:n}var e=this.options,n=e.eles,r=n.nodes(),i=a.fn(e.positions);return r.layoutPositions(this,e,function(e,n){var r=t(n);return n.locked()||null==r?!1:r}),this},e.exports=r},{"../../is":77,"../../util":94}],53:[function(t,e,n){"use strict";function r(t){this.options=i.extend({},o,t)}var i=t("../../util"),a=t("../../math"),o={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){var t=this.options,e=t.cy,n=t.eles,r=n.nodes().not(":parent"),i=a.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),o=function(t,e){return{x:i.x1+Math.round(Math.random()*i.w),y:i.y1+Math.round(Math.random()*i.h)}};return r.layoutPositions(this,t,o),this},e.exports=r},{"../../math":79,"../../util":94}],54:[function(t,e,n){"use strict";var r=t("../../../math"),i=t("../../../is"),a=t("../../../util"),o={};o.arrowShapeHeight=.3,o.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,n=function(t,e,n,r,i,a){var o=i.x-n/2-a,u=i.x+n/2+a,s=i.y-n/2-a,l=i.y+n/2+a,c=t>=o&&u>=t&&e>=s&&l>=e;return c},o=function(t,e,n,r,i){var a=t*Math.cos(r)-e*Math.sin(r),o=t*Math.sin(r)+e*Math.cos(r),u=a*n,s=o*n,l=u+i.x,c=s+i.y;return{x:l,y:c}},u=function(t,e,n,r){for(var i=[],a=0;a<t.length;a+=2){var u=t[a],s=t[a+1];i.push(o(u,s,e,n,r))}return i},s=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r.x,r.y)}return e},l=function(o,l){i.string(l)&&(l=t[l]),t[o]=a.extend({name:o,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(t,e,n,i,a,o){var l=s(u(this.points,n+2*o,i,a)),c=r.pointInsidePolygonPoints(t,e,l);return c},roughCollide:n,draw:function(t,n,r,i){var a=u(this.points,n,r,i);e.arrowShapeImpl("polygon")(t,a)},spacing:function(t){return 0},gap:function(t){return 2*t._private.style.width.pfValue}},l)};l("none",{collide:a.falsify,roughCollide:a.falsify,draw:a.noop,spacing:a.zeroify,gap:a.zeroify}),l("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),l("arrow","triangle"),l("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(t,n,r,i){var a=u(this.points,n,r,i),s=this.controlPoint,l=o(s[0],s[1],n,r,i);e.arrowShapeImpl(this.name)(t,a,l)},gap:function(t){return t._private.style.width.pfValue}}),l("triangle-tee",{points:[-.15,-.3,0,0,.15,-.3,-.15,-.3],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(t,e,n,i,a,o){var l=s(u(this.points,n+2*o,i,a)),c=s(u(this.pointsTee,n+2*o,i,a)),f=r.pointInsidePolygonPoints(t,e,l)||r.pointInsidePolygonPoints(t,e,c);return f},draw:function(t,n,r,i){var a=u(this.points,n,r,i),o=u(this.pointsTee,n,r,i);e.arrowShapeImpl(this.name)(t,a,o)}}),l("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(t){return t._private.style.width.pfValue}}),l("half-triangle-overshot",{points:[0,-.25,-.5,-.25,.5,.25],leavePathOpen:!0,matchEdgeWidth:!0}),l("circle",{radius:.15,collide:function(t,e,n,r,i,a){var o=i,u=Math.pow(o.x-t,2)+Math.pow(o.y-e,2)<=Math.pow((n+2*a)*this.radius,2);return u},draw:function(t,n,r,i){e.arrowShapeImpl(this.name)(t,i.x,i.y,this.radius*n)},spacing:function(t){return e.getArrowWidth(t._private.style.width.pfValue)*this.radius}}),l("inhibitor",{points:[-.25,0,-.25,-.1,.25,-.1,.25,0],spacing:function(t){return 1},gap:function(t){return 1}}),l("tee","inhibitor"),l("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),l("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(t){return t._private.style.width.pfValue}})},e.exports=o},{"../../../is":77,"../../../math":79,"../../../util":94}],55:[function(t,e,n){"use strict";var r={},i=function(t){t.eleEache=null},a=function(t){return t.eleEache||(t.eleEache={nodes:t.cy.nodes(),edges:t.cy.edges()}),t.eleEache};r.getCachedElements=function(){return a(this)},r.getCachedNodes=function(){return a(this).nodes},r.getCachedEdges=function(){return a(this).edges},r.updateElementsCache=function(){var t=this;return i(t),a(t)},e.exports=r},{}],56:[function(t,e,n){"use strict";function r(t,e){var n=function(t,e,n,r){return i.qbezierAt(t,e,n,r)},r=t._private,a=r.rstyle.bezierPts;a.push({x:n(e[0],e[2],e[4],.05),y:n(e[1],e[3],e[5],.05)}),a.push({x:n(e[0],e[2],e[4],.25),y:n(e[1],e[3],e[5],.25)}),a.push({x:n(e[0],e[2],e[4],.4),y:n(e[1],e[3],e[5],.4)}),a.push({x:n(e[0],e[2],e[4],.5),y:n(e[1],e[3],e[5],.5)}),a.push({x:n(e[0],e[2],e[4],.6),y:n(e[1],e[3],e[5],.6)}),a.push({x:n(e[0],e[2],e[4],.75),y:n(e[1],e[3],e[5],.75)}),a.push({x:n(e[0],e[2],e[4],.95),y:n(e[1],e[3],e[5],.95)})}var i=t("../../../math"),a=t("../../../is"),o=t("../../../collection/zsort"),u={};u.projectIntoViewport=function(t,e){var n=this.findContainerClientCoords(),r=n[0],i=n[1],a=t-r,o=e-i;return a-=this.cy.pan().x,o-=this.cy.pan().y,a/=this.cy.zoom(),o/=this.cy.zoom(),[a,o]},u.findContainerClientCoords=function(){var t=this.container,e=this.containerBB=this.containerBB||t.getBoundingClientRect();return[e.left,e.top,e.right-e.left,e.bottom-e.top]},u.invalidateContainerClientCoordsCache=function(){this.containerBB=null},u.findNearestElement=function(t,e,n,r){function a(r){var i=r._private;if("no"!==i.style.events.strValue){var a=r.outerWidth()+2*g,o=r.outerHeight()+2*g,u=a/2,c=o/2,h=i.position;if(h.x-u<=t&&t<=h.x+u&&h.y-c<=e&&e<=h.y+c){var d=!n||r.visible()&&!r.transparent();if(n&&!d)return;var p=l.nodeShapes[s.getNodeShape(r)];p.checkPoint(t,e,0,a,o,h.x,h.y)&&f.push(r)}}}function o(r){var o=r._private;if("no"!==o.style.events.strValue){var u,c,h=o.rscratch,g=o.style,v=g.width.pfValue/2+p,m=v*v,y=2*v,x=o.source,b=o.target,w=!1,_=function(){if(void 0!==c)return c;if(!n)return c=!0,!0;var t=r.visible()&&!r.transparent();return t?(c=!0,!0):(c=!1,!1)};if("segments"===h.edgeType||"straight"===h.edgeType||"haystack"===h.edgeType)for(var M=h.allpts,k=0;k+3<M.length;k+=2)(w=i.inLineVicinity(t,e,M[k],M[k+1],M[k+2],M[k+3],y))&&_()&&m>(u=i.sqDistanceToFiniteLine(t,e,M[k],M[k+1],M[k+2],M[k+3]))&&f.push(r);else if("bezier"===h.edgeType||"multibezier"===h.edgeType||"self"===h.edgeType||"compound"===h.edgeType)for(var M=h.allpts,k=0;k+5<h.allpts.length;k+=4)(w=i.inBezierVicinity(t,e,M[k],M[k+1],M[k+2],M[k+3],M[k+4],M[k+5],y))&&_()&&m>(u=i.sqDistanceToQuadraticBezier(t,e,M[k],M[k+1],M[k+2],M[k+3],M[k+4],M[k+5]))&&f.push(r);
if(w&&_()&&0===f.length||f[f.length-1]!==r)for(var x=x||o.source,b=b||o.target,E=g.width.pfValue,S=s.getArrowWidth(E),N=[{name:"source",x:h.arrowStartX,y:h.arrowStartY,angle:h.srcArrowAngle},{name:"target",x:h.arrowEndX,y:h.arrowEndY,angle:h.tgtArrowAngle},{name:"mid-source",x:h.midX,y:h.midY,angle:h.midsrcArrowAngle},{name:"mid-target",x:h.midX,y:h.midY,angle:h.midtgtArrowAngle}],k=0;k<N.length;k++){var T=N[k],C=l.arrowShapes[g[T.name+"-arrow-shape"].value];if(C.roughCollide(t,e,S,T.angle,{x:T.x,y:T.y},p)&&C.collide(t,e,S,T.angle,{x:T.x,y:T.y},p)){f.push(r);break}}d&&f.length>0&&f[f.length-1]===r&&(a(x),a(b))}}function u(n){var r=n._private,a=v;if("no"!==r.style["text-events"].strValue)if("edges"===r.group&&"autorotate"===r.style["edge-text-rotation"].strValue){var o=r.rstyle,u=o.labelWidth+2*a,s=o.labelHeight+2*a,l=o.labelX,c=o.labelY,h=r.rscratch.labelAngle,d=Math.cos(h),p=Math.sin(h),g=function(t,e){return t-=l,e-=c,{x:t*d-e*p+l,y:t*p+e*d+c}},m=l-u/2,y=l+u/2,x=c-s/2,b=c+s/2,w=g(m,x),_=g(m,b),M=g(y,x),k=g(y,b),E=[w.x,w.y,M.x,M.y,k.x,k.y,_.x,_.y];i.pointInsidePolygonPoints(t,e,E)&&f.push(n)}else{var S=n.boundingBox({includeLabels:!0,includeNodes:!1,includeEdges:!1});S.x1-=a,S.y1-=a,S.x2+=a,S.y2+=a,S.w=S.x2-S.x1,S.h=S.y2-S.y1,i.inBoundingBox(S,t,e)&&f.push(n)}}for(var s=this,l=this,c=l.getCachedZSortedEles(),f=[],h=l.cy.zoom(),d=l.cy.hasCompoundNodes(),p=(r?24:8)/h,g=(r?8:2)/h,v=(r?8:2)/h,m=c.length-1;m>=0;m--){var y=c[m],x=y._private;if(f.length>0)break;"nodes"===x.group?a(y):o(y),u(y)}return f.length>0?f[f.length-1]:null},u.getAllInBox=function(t,e,n,r){var a=this.getCachedNodes(),o=this.getCachedEdges(),u=[],s=Math.min(t,n),l=Math.max(t,n),c=Math.min(e,r),f=Math.max(e,r);t=s,n=l,e=c,r=f;for(var h=i.makeBoundingBox({x1:t,y1:e,x2:n,y2:r}),d=0;d<a.length;d++){var p=a[d],g=p.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});i.boundingBoxesIntersect(h,g)&&u.push(a[d])}for(var v=0;v<o.length;v++){var m=o[v],y=m._private,x=y.rscratch;if((null==x.startX||null==x.startY||i.inBoundingBox(h,x.startX,x.startY))&&(null==x.endX||null==x.endY||i.inBoundingBox(h,x.endX,x.endY)))if("bezier"===x.edgeType||"multibezier"===x.edgeType||"self"===x.edgeType||"compound"===x.edgeType||"segments"===x.edgeType||"haystack"===x.edgeType){for(var b=y.rstyle.bezierPts||y.rstyle.linePts||y.rstyle.haystackPts,w=!0,d=0;d<b.length;d++)if(!i.pointInBoundingBox(h,b[d])){w=!1;break}w&&u.push(m)}else("haystack"===x.edgeType||"straight"===x.edgeType)&&u.push(m)}return u},u.getNodeShape=function(t){var e=this,n=t._private.style,r=n.shape.value;if(t.isParent())return"rectangle"===r||"roundrectangle"===r?r:"rectangle";if("polygon"===r){var i=n["shape-polygon-points"].value;return e.nodeShapes.makePolygon(i).name}return r},u.updateCachedZSortedEles=function(){this.getCachedZSortedEles(!0)},u.getCachedZSortedEles=function(t){var e=this.lastZOrderCachedNodes,n=this.lastZOrderCachedEdges,r=this.getCachedNodes(),i=this.getCachedEdges(),a=[];if(!t&&e&&n&&e===r&&n===i)a=this.cachedZSortedEles;else{for(var u=0;u<r.length;u++){var s=r[u];(s.animated()||s.visible()&&!s.transparent())&&a.push(s)}for(var u=0;u<i.length;u++){var l=i[u];(l.animated()||l.visible()&&!l.transparent())&&a.push(l)}a.sort(o),this.cachedZSortedEles=a}return this.lastZOrderCachedNodes=r,this.lastZOrderCachedEdges=i,a},u.projectLines=function(t){var e=t._private,n=e.rscratch,i=n.edgeType;if("multibezier"===i||"bezier"===i||"self"===i||"compound"===i)for(var a=(e.rstyle.bezierPts=[],0);a+5<n.allpts.length;a+=4)r(t,n.allpts.slice(a,a+6));else if("segments"===i)for(var o=e.rstyle.linePts=[],a=0;a+1<n.allpts.length;a+=2)o.push({x:n.allpts[a],y:n.allpts[a+1]});else if("haystack"===i){var u=n.haystackPts;e.rstyle.haystackPts=[{x:u[0],y:u[1]},{x:u[2],y:u[3]}]}},u.projectBezier=u.projectLines,u.recalculateNodeLabelProjection=function(t){var e=t._private.style.label.strValue;if(e&&!e.match(/^\s+$/)){var n,r,i=t.outerWidth(),a=t.outerHeight(),o=t._private.position,u=t._private.style["text-halign"].strValue,s=t._private.style["text-valign"].strValue,l=t._private.rscratch,c=t._private.rstyle;switch(u){case"left":n=o.x-i/2;break;case"right":n=o.x+i/2;break;default:n=o.x}switch(s){case"top":r=o.y-a/2;break;case"bottom":r=o.y+a/2;break;default:r=o.y}l.labelX=n,l.labelY=r,c.labelX=n,c.labelY=r,this.applyLabelDimensions(t)}},u.recalculateEdgeLabelProjection=function(t){var e=t._private.style.label.strValue;if(e&&!e.match(/^\s+$/)){var n,r,i=t._private,a=i.rscratch,o=i.rstyle;n=a.midX,r=a.midY,a.labelX=n,a.labelY=r,o.labelX=n,o.labelY=r,this.applyLabelDimensions(t)}},u.applyLabelDimensions=function(t){var e=t._private.rscratch,n=t._private.rstyle,r=this.getLabelText(t),i=this.calculateLabelDimensions(t,r);n.labelWidth=i.width,e.labelWidth=i.width,n.labelHeight=i.height,e.labelHeight=i.height},u.getLabelText=function(t){var e=t._private.style,n=t._private.style.label.strValue,r=e["text-transform"].value,i=t._private.rscratch;if("none"==r||("uppercase"==r?n=n.toUpperCase():"lowercase"==r&&(n=n.toLowerCase())),"wrap"===e["text-wrap"].value){if(i.labelWrapKey===i.labelKey)return i.labelWrapCachedText;for(var a=n.split("\n"),o=e["text-max-width"].pfValue,u=[],s=0;s<a.length;s++){var l=a[s],c=this.calculateLabelDimensions(t,l,"line="+l),f=c.width;if(f>o){for(var h=l.split(/\s+/),d="",p=0;p<h.length;p++){var g=h[p],v=0===d.length?g:d+" "+g,m=this.calculateLabelDimensions(t,v,"testLine="+v),y=m.width;o>=y?d+=g+" ":(u.push(d),d=g+" ")}d.match(/^\s+$/)||u.push(d)}else u.push(l)}i.labelWrapCachedLines=u,i.labelWrapCachedText=n=u.join("\n"),i.labelWrapKey=i.labelKey}return n},u.calculateLabelDimensions=function(t,e,n){var r=this,i=t._private.style,a=i["font-style"].strValue,o=i["font-size"].pfValue+"px",u=i["font-family"].strValue,s=i["font-weight"].strValue,l=t._private.labelKey;n&&(l+="$@$"+n);var c=r.labelDimCache||(r.labelDimCache={});if(c[l])return c[l];var f=this.labelCalcDiv;f||(f=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(f));var h=f.style;return h.fontFamily=u,h.fontStyle=a,h.fontSize=o,h.fontWeight=s,h.position="absolute",h.left="-9999px",h.top="-9999px",h.zIndex="-1",h.visibility="hidden",h.pointerEvents="none",h.padding="0",h.lineHeight="1","wrap"===i["text-wrap"].value?h.whiteSpace="pre":h.whiteSpace="normal",f.textContent=e,c[l]={width:f.clientWidth,height:f.clientHeight},c[l]},u.recalculateRenderedStyle=function(t){for(var e=[],n=[],r={},i=0;i<t.length;i++){var a=t[i],o=a._private,u=o.style,s=o.rscratch,l=o.rstyle,c=o.data.id,f=null!=s.boundingBoxKey&&o.boundingBoxKey===s.boundingBoxKey,h=null!=s.labelKey&&o.labelKey===s.labelKey,d=f&&h;if("nodes"===o.group){var p=o.position,g=null!=l.nodeX&&null!=l.nodeY&&p.x===l.nodeX&&p.y===l.nodeY,v=null!=l.nodeW&&l.nodeW===u.width.pfValue,m=null!=l.nodeH&&l.nodeH===u.height.pfValue;g&&d&&v&&m||n.push(a),l.nodeX=p.x,l.nodeY=p.y,l.nodeW=u.width.pfValue,l.nodeH=u.height.pfValue}else{var y=o.source._private.position,x=o.target._private.position,b=null!=l.srcX&&null!=l.srcY&&y.x===l.srcX&&y.y===l.srcY,w=null!=l.tgtX&&null!=l.tgtY&&x.x===l.tgtX&&x.y===l.tgtY,_=b&&w;if(!_||!d)if("bezier"===s.edgeType||"straight"===s.edgeType||"self"===s.edgeType||"compound"===s.edgeType){if(!r[c]){e.push(a),r[c]=!0;for(var M=a.parallelEdges(),i=0;i<M.length;i++){var k=M[i],E=k._private.data.id;r[E]||(e.push(k),r[E]=!0)}}}else e.push(a);l.srcX=y.x,l.srcY=y.y,l.tgtX=x.x,l.tgtY=x.y}s.boundingBoxKey=o.boundingBoxKey,s.labelKey=o.labelKey}this.recalculateEdgeProjections(e),this.recalculateLabelProjections(n,e)},u.recalculateLabelProjections=function(t,e){for(var n=0;n<t.length;n++)this.recalculateNodeLabelProjection(t[n]);for(var n=0;n<e.length;n++)this.recalculateEdgeLabelProjection(e[n])},u.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)},u.findEdgeControlPoints=function(t){if(t&&0!==t.length){for(var e,n=this,r=n.cy,o=r.hasCompoundNodes(),u={},s=[],l=[],c=[],f=0;f<t.length;f++){var h=t[f],d=h._private,p=d.data,g=d.style,v=g["curve-style"].value,m="unbundled-bezier"===v||"segments"===v;if("none"!==g.display.value)if("autorotate"===g["edge-text-rotation"].strValue&&c.push(h),"haystack"!==v){var y=p.source,x=p.target;e=y>x?x+"$-$"+y:y+"$-$"+x,m&&(e="unbundled$-$"+p.id),null==u[e]&&(u[e]=[],s.push(e)),u[e].push(h),m&&(u[e].hasUnbundled=!0)}else l.push(h)}for(var b,w,_,M,k,E,S,N,T,C,D,P,A,z,L=0;L<s.length;L++){e=s[L];var I=u[e];if(I.sort(function(t,e){return t._private.index-e._private.index}),b=I[0]._private.source,w=I[0]._private.target,_=b._private,M=w._private,_.data.id>M.data.id){var O=b;b=w,w=O}if(k=_.position,E=M.position,S=b.outerWidth(),N=b.outerHeight(),T=w.outerWidth(),C=w.outerHeight(),D=n.nodeShapes[this.getNodeShape(b)],P=n.nodeShapes[this.getNodeShape(w)],z=!1,I.length>1&&b!==w||I.hasUnbundled){var R=D.intersectLine(k.x,k.y,S,N,E.x,E.y,0),j=P.intersectLine(E.x,E.y,T,C,k.x,k.y,0),B={x1:R[0],x2:j[0],y1:R[1],y2:j[1]},q=j[1]-R[1],F=j[0]-R[0],V=Math.sqrt(F*F+q*q),Y={x:F,y:q},X={x:Y.x/V,y:Y.y/V};A={x:-X.y,y:X.x},(P.checkPoint(R[0],R[1],0,T,C,E.x,E.y)||D.checkPoint(j[0],j[1],0,S,N,k.x,k.y))&&(A={},z=!0)}for(var h,$,U,f=0;f<I.length;f++){h=I[f],$=h._private,U=$.rscratch;var H=U.lastEdgeIndex,W=f,Z=U.lastNumEdges,G=I.length,K=$.style,g=K,v=K["curve-style"].value,J=K["control-point-distances"],Q=K["control-point-weights"],tt=J&&Q?Math.min(J.value.length,Q.value.length):1,et=K["control-point-step-size"].pfValue,nt=void 0!==J?J.pfValue[0]:void 0,rt=Q.value[0],m="unbundled-bezier"===v||"segments"===v,it=$.source!==b;it&&m&&(nt*=-1);var at=U.lastSrcCtlPtX,ot=k.x,ut=U.lastSrcCtlPtY,st=k.y,lt=U.lastSrcCtlPtW,ct=b.outerWidth(),ft=U.lastSrcCtlPtH,ht=b.outerHeight(),dt=U.lastTgtCtlPtX,pt=E.x,gt=U.lastTgtCtlPtY,vt=E.y,mt=U.lastTgtCtlPtW,yt=w.outerWidth(),xt=U.lastTgtCtlPtH,bt=w.outerHeight(),wt=U.lastW,_t=K["control-point-step-size"].pfValue;if(z?U.badBezier=!0:U.badBezier=!1,at!==ot||ut!==st||lt!==ct||ft!==ht||dt!==pt||gt!==vt||mt!==yt||xt!==bt||wt!==_t||!(H===W&&Z===G||m)){if(U.lastSrcCtlPtX=ot,U.lastSrcCtlPtY=st,U.lastSrcCtlPtW=ct,U.lastSrcCtlPtH=ht,U.lastTgtCtlPtX=pt,U.lastTgtCtlPtY=vt,U.lastTgtCtlPtW=yt,U.lastTgtCtlPtH=bt,U.lastEdgeIndex=W,U.lastNumEdges=G,U.lastWidth=_t,b===w){U.edgeType="self";var Mt=f,kt=et;m&&(Mt=0,kt=nt),U.ctrlpts=[k.x,k.y-(1+Math.pow(N,1.12)/100)*kt*(Mt/3+1),k.x-(1+Math.pow(S,1.12)/100)*kt*(Mt/3+1),k.y]}else if(o&&(b.isParent()||b.isChild()||w.isParent()||w.isChild())&&(b.parents().anySame(w)||w.parents().anySame(b))){U.edgeType="compound",U.badBezier=!1;var Mt=f,kt=et;m&&(Mt=0,kt=nt);var Et=50,St={x:k.x-S/2,y:k.y-N/2},Nt={x:E.x-T/2,y:E.y-C/2},Tt={x:Math.min(St.x,Nt.x),y:Math.min(St.y,Nt.y)},Ct=.5,Dt=Math.max(Ct,Math.log(.01*S)),Pt=Math.max(Ct,Math.log(.01*T));U.ctrlpts=[Tt.x,Tt.y-(1+Math.pow(Et,1.12)/100)*kt*(Mt/3+1)*Dt,Tt.x-(1+Math.pow(Et,1.12)/100)*kt*(Mt/3+1)*Pt,Tt.y]}else if("segments"===v){U.edgeType="segments",U.segpts=[];for(var At=K["segment-weights"].pfValue,zt=K["segment-distances"].pfValue,Lt=Math.min(At.length,zt.length),It=0;Lt>It;It++){var Ot=At[It],Rt=zt[It],jt=1-Ot,Bt=Ot,qt={x:B.x1*jt+B.x2*Bt,y:B.y1*jt+B.y2*Bt};U.segpts.push(qt.x+A.x*Rt,qt.y+A.y*Rt)}}else if(I.length%2!==1||f!==Math.floor(I.length/2)||m){var Ft=m;U.edgeType=Ft?"multibezier":"bezier",U.ctrlpts=[];for(var Vt=0;tt>Vt;Vt++){var Yt,Xt=(.5-I.length/2+f)*et,$t=i.signum(Xt);Ft&&(nt=J?J.pfValue[Vt]:et,rt=Q.value[Vt]),Yt=m?nt:void 0!==nt?$t*nt:void 0;var Ut=void 0!==Yt?Yt:Xt,jt=!it||m?1-rt:rt,Bt=!it||m?rt:1-rt,qt={x:B.x1*jt+B.x2*Bt,y:B.y1*jt+B.y2*Bt};U.ctrlpts.push(qt.x+A.x*Ut,qt.y+A.y*Ut)}}else U.edgeType="straight";this.findEndpoints(h);var Ht=!a.number(U.startX)||!a.number(U.startY),Wt=!a.number(U.arrowStartX)||!a.number(U.arrowStartY),Zt=!a.number(U.endX)||!a.number(U.endY),Gt=!a.number(U.arrowEndX)||!a.number(U.arrowEndY),Kt=3,Jt=this.getArrowWidth(K.width.pfValue)*this.arrowShapeHeight,Qt=Kt*Jt;if("bezier"===U.edgeType){var te=i.distance({x:U.ctrlpts[0],y:U.ctrlpts[1]},{x:U.startX,y:U.startY}),ee=Qt>te,ne=i.distance({x:U.ctrlpts[0],y:U.ctrlpts[1]},{x:U.endX,y:U.endY}),re=Qt>ne,ie=!1;if(Ht||Wt||ee){ie=!0;var ae={x:U.ctrlpts[0]-k.x,y:U.ctrlpts[1]-k.y},oe=Math.sqrt(ae.x*ae.x+ae.y*ae.y),ue={x:ae.x/oe,y:ae.y/oe},se=Math.max(S,N),le={x:U.ctrlpts[0]+2*ue.x*se,y:U.ctrlpts[1]+2*ue.y*se},ce=D.intersectLine(k.x,k.y,S,N,le.x,le.y,0);ee?(U.ctrlpts[0]=U.ctrlpts[0]+ue.x*(Qt-te),U.ctrlpts[1]=U.ctrlpts[1]+ue.y*(Qt-te)):(U.ctrlpts[0]=ce[0]+ue.x*Qt,U.ctrlpts[1]=ce[1]+ue.y*Qt)}if(Zt||Gt||re){ie=!0;var ae={x:U.ctrlpts[0]-E.x,y:U.ctrlpts[1]-E.y},oe=Math.sqrt(ae.x*ae.x+ae.y*ae.y),ue={x:ae.x/oe,y:ae.y/oe},se=Math.max(S,N),le={x:U.ctrlpts[0]+2*ue.x*se,y:U.ctrlpts[1]+2*ue.y*se},fe=P.intersectLine(E.x,E.y,T,C,le.x,le.y,0);re?(U.ctrlpts[0]=U.ctrlpts[0]+ue.x*(Qt-ne),U.ctrlpts[1]=U.ctrlpts[1]+ue.y*(Qt-ne)):(U.ctrlpts[0]=fe[0]+ue.x*Qt,U.ctrlpts[1]=fe[1]+ue.y*Qt)}ie&&this.findEndpoints(h)}if("multibezier"===U.edgeType||"bezier"===U.edgeType||"self"===U.edgeType||"compound"===U.edgeType){U.allpts=[],U.allpts.push(U.startX,U.startY);for(var Vt=0;Vt+1<U.ctrlpts.length;Vt+=2)U.allpts.push(U.ctrlpts[Vt],U.ctrlpts[Vt+1]),Vt+3<U.ctrlpts.length&&U.allpts.push((U.ctrlpts[Vt]+U.ctrlpts[Vt+2])/2,(U.ctrlpts[Vt+1]+U.ctrlpts[Vt+3])/2);U.allpts.push(U.endX,U.endY);var he,de;"bezier"===U.edgeType?(U.midX=i.qbezierAt(U.arrowStartX,U.ctrlpts[0],U.arrowEndX,.5),U.midY=i.qbezierAt(U.arrowStartY,U.ctrlpts[1],U.arrowEndY,.5)):U.ctrlpts.length/2%2===0?(he=U.allpts.length/2-1,U.midX=U.allpts[he],U.midY=U.allpts[he+1]):(he=U.allpts.length/2-3,de=.5,U.midX=i.qbezierAt(U.allpts[he],U.allpts[he+2],U.allpts[he+4],de),U.midY=i.qbezierAt(U.allpts[he+1],U.allpts[he+3],U.allpts[he+5],de))}else if("straight"===U.edgeType)U.allpts=[U.startX,U.startY,U.endX,U.endY],U.midX=(U.arrowStartX+U.arrowEndX)/2,U.midY=(U.arrowStartY+U.arrowEndY)/2;else if("segments"===U.edgeType)if(U.allpts=[],U.allpts.push(U.startX,U.startY),U.allpts.push.apply(U.allpts,U.segpts),U.allpts.push(U.endX,U.endY),U.segpts.length%4===0){var pe=U.segpts.length/2,ge=pe-2;U.midX=(U.segpts[ge]+U.segpts[pe])/2,U.midY=(U.segpts[ge+1]+U.segpts[pe+1])/2}else{var ge=U.segpts.length/2-1;U.midX=U.segpts[ge],U.midY=U.segpts[ge+1]}this.projectLines(h),this.calculateArrowAngles(h),this.recalculateEdgeLabelProjection(h)}}}for(var f=0;f<l.length;f++){var h=l[f],d=h._private,g=d.style,ve=d.rscratch,U=ve;if(!ve.haystack){var me=2*Math.random()*Math.PI;ve.source={x:Math.cos(me),y:Math.sin(me)};var me=2*Math.random()*Math.PI;ve.target={x:Math.cos(me),y:Math.sin(me)}}var b=d.source,w=d.target,k=b._private.position,E=w._private.position,S=b.width(),T=w.width(),N=b.height(),C=w.height(),se=g["haystack-radius"].value,ye=se/2;U.haystackPts=U.allpts=[U.source.x*S*ye+k.x,U.source.y*N*ye+k.y,U.target.x*T*ye+E.x,U.target.y*C*ye+E.y],U.midX=(U.allpts[0]+U.allpts[2])/2,U.midY=(U.allpts[1]+U.allpts[3])/2,ve.edgeType="haystack",ve.haystack=!0,this.projectLines(h),this.calculateArrowAngles(h),this.recalculateEdgeLabelProjection(h)}for(var f=0;f<c.length;f++){var h=c[f],U=h._private.rscratch;U.labelAngle=Math.atan(U.midDispY/U.midDispX)}return u}};var s=function(t,e){return Math.atan2(e,t)-Math.PI/2};u.calculateArrowAngles=function(t){var e,n,r,a,o,u,l=t._private.rscratch,c="haystack"===l.edgeType,f="multibezier"===l.edgeType,h="segments"===l.edgeType,d="compound"===l.edgeType,p="self"===l.edgeType,g=t.source().position(),v=t.target().position();c?(r=l.haystackPts[0],a=l.haystackPts[1],o=l.haystackPts[2],u=l.haystackPts[3]):(r=l.arrowStartX,a=l.arrowStartY,o=l.arrowEndX,u=l.arrowEndY),e=g.x-r,n=g.y-a,l.srcArrowAngle=s(e,n);var m=l.midX,y=l.midY;if(c&&(m=(r+o)/2,y=(a+u)/2),e=o-r,n=u-a,p)e=-1,n=1;else if(h){var x=l.allpts;if(x.length/2%2===0){var b=x.length/2,w=b-2;e=x[b]-x[w],n=x[b+1]-x[w+1]}else{var b=x.length/2-1,w=b-2,_=b+2;e=x[b]-x[w],n=x[b+1]-x[w+1]}}else if(f||d){var M,k,E,S,x=l.allpts,N=l.ctrlpts;if(N.length/2%2===0){var T=x.length/2-1,C=T+2,D=C+2;M=i.qbezierAt(x[T],x[C],x[D],0),k=i.qbezierAt(x[T+1],x[C+1],x[D+1],0),E=i.qbezierAt(x[T],x[C],x[D],1e-4),S=i.qbezierAt(x[T+1],x[C+1],x[D+1],1e-4)}else{var C=x.length/2-1,T=C-2,D=C+2;M=i.qbezierAt(x[T],x[C],x[D],.4999),k=i.qbezierAt(x[T+1],x[C+1],x[D+1],.4999),E=i.qbezierAt(x[T],x[C],x[D],.5),S=i.qbezierAt(x[T+1],x[C+1],x[D+1],.5)}e=E-M,n=S-k}if(l.midtgtArrowAngle=s(e,n),l.midDispX=e,l.midDispY=n,e*=-1,n*=-1,h){var x=l.allpts;if(x.length/2%2===0);else{var b=x.length/2-1,_=b+2;e=-(x[_]-x[b]),n=-(x[_+1]-x[b+1])}}l.midsrcArrowAngle=s(e,n),e=v.x-o,n=v.y-u,l.tgtArrowAngle=s(e,n)},u.findEndpoints=function(t){var e,n,r,o=this,u=t.source()[0],s=t.target()[0],l=u._private,c=s._private,f=l.position,h=c.position,d=t._private.style["target-arrow-shape"].value,p=t._private.style["source-arrow-shape"].value,g=t._private.rscratch,v=g.edgeType,m="bezier"===v||"multibezier"===v||"self"===v||"compound"===v,y="bezier"!==v,x="straight"===v||"segments"===v,b="segments"===v;if(m){var w=[g.ctrlpts[0],g.ctrlpts[1]],_=y?[g.ctrlpts[g.ctrlpts.length-2],g.ctrlpts[g.ctrlpts.length-1]]:w;n=_,r=w}else if(x){var M=b?g.segpts.slice(0,2):[h.x,h.y],k=b?g.segpts.slice(g.segpts.length-2):[f.x,f.y];n=k,r=M}e=o.nodeShapes[this.getNodeShape(s)].intersectLine(h.x,h.y,s.outerWidth(),s.outerHeight(),n[0],n[1],0);var E=i.shortenIntersection(e,n,o.arrowShapes[d].spacing(t)),S=i.shortenIntersection(e,n,o.arrowShapes[d].gap(t));g.endX=S[0],g.endY=S[1],g.arrowEndX=E[0],g.arrowEndY=E[1],e=o.nodeShapes[this.getNodeShape(u)].intersectLine(f.x,f.y,u.outerWidth(),u.outerHeight(),r[0],r[1],0);var N=i.shortenIntersection(e,r,o.arrowShapes[p].spacing(t)),T=i.shortenIntersection(e,r,o.arrowShapes[p].gap(t));g.startX=T[0],g.startY=T[1],g.arrowStartX=N[0],g.arrowStartY=N[1],x&&(a.number(g.startX)&&a.number(g.startY)&&a.number(g.endX)&&a.number(g.endY)?g.badLine=!1:g.badLine=!0)},u.getArrowWidth=u.getArrowHeight=function(t){var e=this.arrowWidthCache=this.arrowWidthCache||{},n=e[t];return n?n:(n=Math.max(Math.pow(13.37*t,.9),29),e[t]=n,n)},e.exports=u},{"../../../collection/zsort":29,"../../../is":77,"../../../math":79}],57:[function(t,e,n){"use strict";var r={};r.getCachedImage=function(t,e){var n=this,r=n.imageCache=n.imageCache||{};if(r[t]&&r[t].image)return r[t].image;var i=r[t]=r[t]||{},a=i.image=new Image;return a.addEventListener("load",e),a.src=t,a},e.exports=r},{}],58:[function(t,e,n){"use strict";var r=t("../../../is"),i=t("../../../util"),a=function(){},o=a,u=o.prototype;u.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],u.init=function(t){var e=this;e.options=t,e.cy=t.cy,e.container=t.cy.container(),e.selection=[void 0,void 0,void 0,void 0,0],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.hideLabelsOnViewport=t.hideLabelsOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=t.pixelRatio,e.motionBlur=!0,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.registerNodeShapes(),e.registerArrowShapes(),e.load()},u.notify=function(t){var e,n=this;e=r.array(t.type)?t.type:[t.type];for(var i=0;i<e.length;i++){var a=e[i];switch(a){case"destroy":return void n.destroy();case"add":case"remove":case"load":n.updateElementsCache();break;case"viewport":n.redrawHint("select",!0);break;case"style":n.updateCachedZSortedEles()}("load"===a||"resize"===a)&&(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container))}n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()},u.destroy=function(){this.destroyed=!0,this.cy.stopAnimationLoop();for(var t=0;t<this.bindings.length;t++){var e=this.bindings[t],n=e;n.target.removeEventListener(n.event,n.handler,n.useCapture)}if(this.removeObserver&&this.removeObserver.disconnect(),this.labelCalcDiv)try{document.body.removeChild(this.labelCalcDiv)}catch(r){}},[t("./arrow-shapes"),t("./cached-eles"),t("./coord-ele-math"),t("./images"),t("./load-listeners"),t("./node-shapes"),t("./redraw")].forEach(function(t){i.extend(u,t)}),e.exports=o},{"../../../is":77,"../../../util":94,"./arrow-shapes":54,"./cached-eles":55,"./coord-ele-math":56,"./images":57,"./load-listeners":59,"./node-shapes":60,"./redraw":61}],59:[function(t,e,n){"use strict";var r=t("../../../is"),i=t("../../../util"),a=t("../../../event"),o=t("../../../collection"),u={};u.registerBinding=function(t,e,n,r){this.bindings.push({target:t,event:e,handler:n,useCapture:r}),t.addEventListener(e,n,r)},u.nodeIsDraggable=function(t){return 0!==t._private.style.opacity.value&&"visible"==t._private.style.visibility.value&&"element"==t._private.style.display.value&&!t.locked()&&t.grabbable()?!0:!1},u.load=function(){var t=this,e=function(e,n,r,o){null==e&&(e=t.cy);for(var u=0;u<n.length;u++){var s=n[u],l=a(r,i.extend({type:s},o));e.trigger(l)}},n=function(t){return t.shiftKey||t.metaKey||t.ctrlKey},u=function(e){var n;if(e.addToList&&t.cy.hasCompoundNodes()){if(!e.addToList.hasId){e.addToList.hasId={};for(var r=0;r<e.addToList.length;r++){var i=e.addToList[r];e.addToList.hasId[i.id()]=!0}}n=e.addToList.hasId}return n||{}},s=function(t,e){if(t._private.cy.hasCompoundNodes()&&(null!=e.inDragLayer||null!=e.addToList))for(var n=u(e),r=t.descendants(),i=0;i<r.size();i++){var a=r[i],o=a._private;e.inDragLayer&&(o.rscratch.inDragLayer=!0),e.addToList&&!n[a.id()]&&(e.addToList.push(a),n[a.id()]=!0,o.grabbed=!0);for(var s=o.edges,l=0;e.inDragLayer&&l<s.length;l++)s[l]._private.rscratch.inDragLayer=!0}},l=function(t,e){var n=t._private,r=u(e);e.inDragLayer&&(n.rscratch.inDragLayer=!0),e.addToList&&!r[t.id()]&&(e.addToList.push(t),r[t.id()]=!0,n.grabbed=!0);for(var i=n.edges,a=0;e.inDragLayer&&a<i.length;a++)i[a]._private.rscratch.inDragLayer=!0;s(t,e),f(t,{inDragLayer:e.inDragLayer})},c=function(t){if(t)for(var e=0;e<t.length;e++){var n=t[e]._private;if("nodes"===n.group){n.rscratch.inDragLayer=!1,n.grabbed=!1;for(var r=n.edges,i=0;i<r.length;i++)r[i]._private.rscratch.inDragLayer=!1;f(t[e],{inDragLayer:!1})}else"edges"===n.group&&(n.rscratch.inDragLayer=!1)}},f=function(t,e){if(null!=e.inDragLayer||null!=e.addToList){var n=t;if(t._private.cy.hasCompoundNodes()){for(;n.parent().nonempty();)n=n.parent()[0];if(n!=t){for(var r=n.descendants().merge(n).unmerge(t).unmerge(t.descendants()),i=r.connectedEdges(),a=u(e),o=0;o<r.size();o++)void 0!==e.inDragLayer&&(r[o]._private.rscratch.inDragLayer=e.inDragLayer),e.addToList&&!a[r[o].id()]&&(e.addToList.push(r[o]),a[r[o].id()]=!0,r[o]._private.grabbed=!0);for(var s=0;void 0!==e.inDragLayer&&s<i.length;s++)i[s]._private.rscratch.inDragLayer=e.inDragLayer}}}};"undefined"!=typeof MutationObserver?(t.removeObserver=new MutationObserver(function(e){for(var n=0;n<e.length;n++){var r=e[n],i=r.removedNodes;if(i)for(var a=0;a<i.length;a++){var o=i[a];if(o===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(e){t.destroy()}),t.registerBinding(window,"resize",i.debounce(function(e){t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container),t.redrawHint("eles",!0),t.redraw()},100));for(var h=function(e){t.registerBinding(e,"scroll",function(e){t.invalidateContainerClientCoordsCache()})},d=t.cy.container();h(d),d.parentNode;)d=d.parentNode;t.registerBinding(t.container,"contextmenu",function(t){t.preventDefault()});var p=function(){return 0!==t.selection[4]};t.registerBinding(t.container,"mousedown",function(n){n.preventDefault(),t.hoverData.capture=!0,t.hoverData.which=n.which;var r=t.cy,i=t.projectIntoViewport(n.clientX,n.clientY),o=t.selection,u=t.findNearestElement(i[0],i[1],!0,!1),s=t.dragData.possibleDragElements;t.hoverData.mdownPos=i;var c=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var e=t.hoverData.down;e?e.trigger(a(n,{type:"taphold",cyPosition:{x:i[0],y:i[1]}})):r.trigger(a(n,{type:"taphold",cyPosition:{x:i[0],y:i[1]}}))}},t.tapholdDuration)};if(3==n.which){t.hoverData.cxtStarted=!0;var f=a(n,{type:"cxttapstart",cyPosition:{x:i[0],y:i[1]}});u?(u.activate(),u.trigger(f),t.hoverData.down=u):r.trigger(f),t.hoverData.downTime=(new Date).getTime(),t.hoverData.cxtDragged=!1}else if(1==n.which){if(u&&u.activate(),null!=u&&t.nodeIsDraggable(u)){var h=a(n,{type:"grab",cyPosition:{x:i[0],y:i[1]}});if(u.isNode()&&!u.selected())s=t.dragData.possibleDragElements=[],l(u,{addToList:s}),u.trigger(h);else if(u.isNode()&&u.selected()){s=t.dragData.possibleDragElements=[];for(var d=r.$(function(){return this.isNode()&&this.selected()}),p=0;p<d.length;p++)t.nodeIsDraggable(d[p])&&l(d[p],{addToList:s});u.trigger(h)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=u,t.hoverData.downTime=(new Date).getTime(),e(u,["mousedown","tapstart","vmousedown"],n,{cyPosition:{x:i[0],y:i[1]}}),null==u?(o[4]=1,t.data.bgActivePosistion={x:i[0],y:i[1]},t.redrawHint("select",!0),t.redraw()):u.isEdge()&&(o[4]=1),c()}o[0]=o[2]=i[0],o[1]=o[3]=i[1]},!1),t.registerBinding(window,"mousemove",function(i){var u=!1,s=t.hoverData.capture;if(!s){var c=t.findContainerClientCoords();if(!(i.clientX>c[0]&&i.clientX<c[0]+t.canvasWidth&&i.clientY>c[1]&&i.clientY<c[1]+t.canvasHeight))return;for(var f=t.container,h=i.target,d=h.parentNode,p=!1;d;){if(d===f){p=!0;break}d=d.parentNode}if(!p)return}var g=t.cy,v=g.zoom(),m=t.projectIntoViewport(i.clientX,i.clientY),y=t.selection,x=null;t.hoverData.draggingEles||(x=t.findNearestElement(m[0],m[1],!0,!1));var b=t.hoverData.last,w=t.hoverData.down,_=[m[0]-y[2],m[1]-y[3]],M=t.dragData.possibleDragElements,k=y[2]-y[0],E=k*k,S=y[3]-y[1],N=S*S,T=E+N,C=T*v*v,D=n(i);t.hoverData.tapholdCancelled=!0;var P=function(){var e=t.hoverData.dragDelta=t.hoverData.dragDelta||[];0===e.length?(e.push(_[0]),e.push(_[1])):(e[0]+=_[0],e[1]+=_[1])};if(u=!0,e(x,["mousemove","vmousemove","tapdrag"],i,{cyPosition:{x:m[0],y:m[1]}}),3===t.hoverData.which){var A=a(i,{type:"cxtdrag",cyPosition:{x:m[0],y:m[1]}});w?w.trigger(A):g.trigger(A),t.hoverData.cxtDragged=!0,t.hoverData.cxtOver&&x===t.hoverData.cxtOver||(t.hoverData.cxtOver&&t.hoverData.cxtOver.trigger(a(i,{type:"cxtdragout",cyPosition:{x:m[0],y:m[1]}})),t.hoverData.cxtOver=x,x&&x.trigger(a(i,{type:"cxtdragover",cyPosition:{x:m[0],y:m[1]}})))}else if(t.hoverData.dragging){if(u=!0,g.panningEnabled()&&g.userPanningEnabled()){var z;if(t.hoverData.justStartedPan){var L=t.hoverData.mdownPos;z={x:(m[0]-L[0])*v,y:(m[1]-L[1])*v},t.hoverData.justStartedPan=!1}else z={x:_[0]*v,y:_[1]*v};g.panBy(z),t.hoverData.dragged=!0}m=t.projectIntoViewport(i.clientX,i.clientY)}else if(1!=y[4]||null!=w&&!w.isEdge()){if(w&&w.isEdge()&&w.active()&&w.unactivate(),x!=b&&(b&&e(b,["mouseout","tapdragout"],i,{cyPosition:{x:m[0],y:m[1]}}),x&&e(x,["mouseover","tapdragover"],i,{cyPosition:{x:m[0],y:m[1]}}),t.hoverData.last=x),w&&w.isNode()&&t.nodeIsDraggable(w))if(C>=t.desktopTapThreshold2){var I=!t.dragData.didDrag;I&&t.redrawHint("eles",!0),t.dragData.didDrag=!0;for(var O=[],R=0;R<M.length;R++){var j=M[R];if(t.hoverData.draggingEles||l(j,{inDragLayer:!0}),j.isNode()&&t.nodeIsDraggable(j)&&j.grabbed()){var B=j._private.position;if(O.push(j),r.number(_[0])&&r.number(_[1])){var q=!j.isParent();if(q&&(B.x+=_[0],B.y+=_[1]),I){var F=t.hoverData.dragDelta;q&&r.number(F[0])&&r.number(F[1])&&(B.x+=F[0],B.y+=F[1])}}}}t.hoverData.draggingEles=!0;var V=o(g,O);V.updateCompoundBounds(),V.trigger("position drag"),t.redrawHint("drag",!0),t.redraw()}else P();u=!0}else t.hoverData.dragging||!g.boxSelectionEnabled()||!D&&g.panningEnabled()&&g.userPanningEnabled()?!t.hoverData.selecting&&g.panningEnabled()&&g.userPanningEnabled()&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,y[4]=0,t.data.bgActivePosistion={x:m[0],y:m[1]},t.redrawHint("select",!0),t.redraw()):(t.data.bgActivePosistion=void 0,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()),w&&w.isEdge()&&w.active()&&w.unactivate();return y[2]=m[0],y[3]=m[1],u?(i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault(),!1):void 0},!1),t.registerBinding(window,"mouseup",function(r){var i=t.hoverData.capture;if(i){t.hoverData.capture=!1;var u=t.cy,s=t.projectIntoViewport(r.clientX,r.clientY),l=t.selection,f=t.findNearestElement(s[0],s[1],!0,!1),h=t.dragData.possibleDragElements,d=t.hoverData.down,p=n(r);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,d&&d.unactivate(),3===t.hoverData.which){var g=a(r,{type:"cxttapend",cyPosition:{x:s[0],y:s[1]}});if(d?d.trigger(g):u.trigger(g),!t.hoverData.cxtDragged){var v=a(r,{type:"cxttap",cyPosition:{x:s[0],y:s[1]}});d?d.trigger(v):u.trigger(v)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(1===t.hoverData.which){if(null!=d||t.dragData.didDrag||t.hoverData.selecting||t.hoverData.dragged||n(r)||(u.$(function(){return this.selected()}).unselect(),h.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=h=[]),e(f,["mouseup","tapend","vmouseup"],r,{cyPosition:{x:s[0],y:s[1]}}),t.dragData.didDrag||t.hoverData.dragged||e(f,["click","tap","vclick"],r,{cyPosition:{x:s[0],y:s[1]}}),f!=d||t.dragData.didDrag||t.hoverData.selecting||null!=f&&f._private.selectable&&(t.hoverData.dragging||("additive"===u.selectionType()||p?f.selected()?f.unselect():f.select():p||(u.$(":selected").unmerge(f).unselect(),f.select())),t.redrawHint("eles",!0)),t.hoverData.selecting){var m=[],y=t.getAllInBox(l[0],l[1],l[2],l[3]);t.redrawHint("select",!0),y.length>0&&t.redrawHint("eles",!0);for(var x=0;x<y.length;x++)y[x]._private.selectable&&m.push(y[x]);var b=o(u,m);"additive"===u.selectionType()?b.select():(p||u.$(":selected").unmerge(b).unselect(),b.select()),t.redraw()}t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),l[4]||(t.redrawHint("drag",!0),t.redrawHint("eles",!0),c(h),d&&d.trigger("free"))}l[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[]}},!1);var g=function(e){if(!t.scrollingPage){var n=t.cy,r=t.projectIntoViewport(e.clientX,e.clientY),i=[r[0]*n.zoom()+n.pan().x,r[1]*n.zoom()+n.pan().y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||p())return void e.preventDefault();if(n.panningEnabled()&&n.userPanningEnabled()&&n.zoomingEnabled()&&n.userZoomingEnabled()){e.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var a=e.deltaY/-250||e.wheelDeltaY/1e3||e.wheelDelta/1e3;a*=t.wheelSensitivity;var o=1===e.deltaMode;o&&(a*=33),n.zoom({level:n.zoom()*Math.pow(10,a),renderedPosition:{x:i[0],y:i[1]}})}}};t.registerBinding(t.container,"wheel",g,!0),t.registerBinding(window,"scroll",function(e){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"mouseout",function(e){var n=t.projectIntoViewport(e.clientX,e.clientY);t.cy.trigger(a(e,{type:"mouseout",cyPosition:{x:n[0],y:n[1]}}))},!1),t.registerBinding(t.container,"mouseover",function(e){var n=t.projectIntoViewport(e.clientX,e.clientY);t.cy.trigger(a(e,{type:"mouseover",cyPosition:{
x:n[0],y:n[1]}}))},!1);var v,m,y,x,b,w,_,M,k,E,S,N,T,C,D=function(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))},P=function(t,e,n,r){return(n-t)*(n-t)+(r-e)*(r-e)};t.registerBinding(t.container,"touchstart",C=function(n){t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var r=t.cy,i=t.getCachedNodes(),o=t.getCachedEdges(),u=t.touchData.now,s=t.touchData.earlier;if(n.touches[0]){var c=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);u[0]=c[0],u[1]=c[1]}if(n.touches[1]){var c=t.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);u[2]=c[0],u[3]=c[1]}if(n.touches[2]){var c=t.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);u[4]=c[0],u[5]=c[1]}if(n.touches[1]){var f=function(t){for(var e=0;e<t.length;e++)t[e]._private.grabbed=!1,t[e]._private.rscratch.inDragLayer=!1,t[e].active()&&t[e].unactivate()};f(i),f(o);var h=t.findContainerClientCoords();k=h[0],E=h[1],S=h[2],N=h[3],v=n.touches[0].clientX-k,m=n.touches[0].clientY-E,y=n.touches[1].clientX-k,x=n.touches[1].clientY-E,T=v>=0&&S>=v&&y>=0&&S>=y&&m>=0&&N>=m&&x>=0&&N>=x;var d=r.pan(),p=r.zoom();b=D(v,m,y,x),w=P(v,m,y,x),_=[(v+y)/2,(m+x)/2],M=[(_[0]-d.x)/p,(_[1]-d.y)/p];var g=200,C=g*g;if(C>w&&!n.touches[2]){var A=t.findNearestElement(u[0],u[1],!0,!0),z=t.findNearestElement(u[2],u[3],!0,!0);return A&&A.isNode()?(A.activate().trigger(a(n,{type:"cxttapstart",cyPosition:{x:u[0],y:u[1]}})),t.touchData.start=A):z&&z.isNode()?(z.activate().trigger(a(n,{type:"cxttapstart",cyPosition:{x:u[0],y:u[1]}})),t.touchData.start=z):(r.trigger(a(n,{type:"cxttapstart",cyPosition:{x:u[0],y:u[1]}})),t.touchData.start=null),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,void t.redraw()}}if(n.touches[2]);else if(n.touches[1]);else if(n.touches[0]){var L=t.findNearestElement(u[0],u[1],!0,!0);if(null!=L&&(L.activate(),t.touchData.start=L,L.isNode()&&t.nodeIsDraggable(L))){var I=t.dragData.touchDragEles=[];if(t.redrawHint("eles",!0),t.redrawHint("drag",!0),L.selected())for(var O=r.$(function(){return this.isNode()&&this.selected()}),R=0;R<O.length;R++){var j=O[R];t.nodeIsDraggable(j)&&l(j,{addToList:I})}else l(L,{addToList:I});L.trigger(a(n,{type:"grab",cyPosition:{x:u[0],y:u[1]}}))}e(L,["touchstart","tapstart","vmousedown"],n,{cyPosition:{x:u[0],y:u[1]}}),null==L&&(t.data.bgActivePosistion={x:c[0],y:c[1]},t.redrawHint("select",!0),t.redraw());for(var B=0;B<u.length;B++)s[B]=u[B],t.touchData.startPosition[B]=u[B];t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved!==!1||t.pinching||t.touchData.selecting||(e(t.touchData.start,["taphold"],n,{cyPosition:{x:u[0],y:u[1]}}),t.touchData.start||r.$(":selected").unselect())},t.tapholdDuration)}},!1);var A;t.registerBinding(window,"touchmove",A=function(n){var i=t.selection,u=t.touchData.capture,s=t.cy,c=t.touchData.now,f=t.touchData.earlier,h=s.zoom();if(n.touches[0]){var d=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);c[0]=d[0],c[1]=d[1]}if(n.touches[1]){var d=t.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);c[2]=d[0],c[3]=d[1]}if(n.touches[2]){var d=t.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);c[4]=d[0],c[5]=d[1]}for(var p=[],g=0;g<c.length;g++)p[g]=c[g]-f[g];var _=t.touchData.startPosition,S=c[0]-_[0],N=S*S,C=c[1]-_[1],A=C*C,z=N+A,L=z*h*h;if(u&&t.touchData.cxt){n.preventDefault();var I=n.touches[0].clientX-k,O=n.touches[0].clientY-E,R=n.touches[1].clientX-k,j=n.touches[1].clientY-E,B=P(I,O,R,j),q=B/w,F=150,V=F*F,Y=1.5,X=Y*Y;if(q>=X||B>=V){t.touchData.cxt=!1,t.touchData.start&&(t.touchData.start.unactivate(),t.touchData.start=null),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var $=a(n,{type:"cxttapend",cyPosition:{x:c[0],y:c[1]}});t.touchData.start?t.touchData.start.trigger($):s.trigger($)}}if(u&&t.touchData.cxt){var $=a(n,{type:"cxtdrag",cyPosition:{x:c[0],y:c[1]}});t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.trigger($):s.trigger($),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var U=t.findNearestElement(c[0],c[1],!0,!0);t.touchData.cxtOver&&U===t.touchData.cxtOver||(t.touchData.cxtOver&&t.touchData.cxtOver.trigger(a(n,{type:"cxtdragout",cyPosition:{x:c[0],y:c[1]}})),t.touchData.cxtOver=U,U&&U.trigger(a(n,{type:"cxtdragover",cyPosition:{x:c[0],y:c[1]}})))}else if(u&&n.touches[2]&&s.boxSelectionEnabled())n.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting=!0,t.redrawHint("select",!0),i&&0!==i.length&&void 0!==i[0]?(i[2]=(c[0]+c[2]+c[4])/3,i[3]=(c[1]+c[3]+c[5])/3):(i[0]=(c[0]+c[2]+c[4])/3,i[1]=(c[1]+c[3]+c[5])/3,i[2]=(c[0]+c[2]+c[4])/3+1,i[3]=(c[1]+c[3]+c[5])/3+1),i[4]=1,t.touchData.selecting=!0,t.redraw();else if(u&&n.touches[1]&&s.zoomingEnabled()&&s.panningEnabled()&&s.userZoomingEnabled()&&s.userPanningEnabled()){n.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var H=t.dragData.touchDragEles;if(H){t.redrawHint("drag",!0);for(var W=0;W<H.length;W++)H[W]._private.grabbed=!1,H[W]._private.rscratch.inDragLayer=!1}var I=n.touches[0].clientX-k,O=n.touches[0].clientY-E,R=n.touches[1].clientX-k,j=n.touches[1].clientY-E,Z=D(I,O,R,j),G=Z/b;if(1!=G&&T){var K=I-v,J=O-m,Q=R-y,tt=j-x,et=(K+Q)/2,nt=(J+tt)/2,rt=s.zoom(),it=rt*G,at=s.pan(),ot=M[0]*rt+at.x,ut=M[1]*rt+at.y,st={x:-it/rt*(ot-at.x-et)+ot,y:-it/rt*(ut-at.y-nt)+ut};if(t.touchData.start){var H=t.dragData.touchDragEles;if(H)for(var W=0;W<H.length;W++){var lt=H[W]._private;lt.grabbed=!1,lt.rscratch.inDragLayer=!1}var ct=t.touchData.start._private;ct.active=!1,ct.grabbed=!1,ct.rscratch.inDragLayer=!1,t.redrawHint("drag",!0),t.touchData.start.trigger("free").trigger("unactivate")}s.viewport({zoom:it,pan:st,cancelOnFailedZoom:!0}),b=Z,v=I,m=O,y=R,x=j,t.pinching=!0}if(n.touches[0]){var d=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);c[0]=d[0],c[1]=d[1]}if(n.touches[1]){var d=t.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);c[2]=d[0],c[3]=d[1]}if(n.touches[2]){var d=t.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);c[4]=d[0],c[5]=d[1]}}else if(n.touches[0]){var ft=t.touchData.start,ht=t.touchData.last,U=U||t.findNearestElement(c[0],c[1],!0,!0);if(null!=ft&&n.preventDefault(),null!=ft&&"nodes"==ft._private.group&&t.nodeIsDraggable(ft))if(L>=t.touchTapThreshold2){for(var H=t.dragData.touchDragEles,dt=!t.dragData.didDrag,pt=0;pt<H.length;pt++){var gt=H[pt];if(dt&&l(gt,{inDragLayer:!0}),t.nodeIsDraggable(gt)&&gt.isNode()&&gt.grabbed()){t.dragData.didDrag=!0;var vt=gt._private.position,mt=!gt.isParent();if(mt&&r.number(p[0])&&r.number(p[1])&&(vt.x+=p[0],vt.y+=p[1]),dt){t.redrawHint("eles",!0);var yt=t.touchData.dragDelta;mt&&r.number(yt[0])&&r.number(yt[1])&&(vt.x+=yt[0],vt.y+=yt[1])}}}var xt=o(s,H);xt.updateCompoundBounds(),xt.trigger("position drag"),t.hoverData.draggingEles=!0,t.redrawHint("drag",!0),t.touchData.startPosition[0]==f[0]&&t.touchData.startPosition[1]==f[1]&&t.redrawHint("eles",!0),t.redraw()}else{var yt=t.touchData.dragDelta=t.touchData.dragDelta||[];0===yt.length?(yt.push(p[0]),yt.push(p[1])):(yt[0]+=p[0],yt[1]+=p[1])}e(ft||U,["touchmove","tapdrag","vmousemove"],n,{cyPosition:{x:c[0],y:c[1]}}),U!=ht&&(ht&&ht.trigger(a(n,{type:"tapdragout",cyPosition:{x:c[0],y:c[1]}})),U&&U.trigger(a(n,{type:"tapdragover",cyPosition:{x:c[0],y:c[1]}}))),t.touchData.last=U;for(var W=0;W<c.length;W++)c[W]&&t.touchData.startPosition[W]&&L>t.touchTapThreshold2&&(t.touchData.singleTouchMoved=!0);if(u&&(null==ft||ft.isEdge())&&s.panningEnabled()&&s.userPanningEnabled()){n.preventDefault(),t.swipePanning?s.panBy({x:p[0]*h,y:p[1]*h}):L>=t.touchTapThreshold2&&(t.swipePanning=!0,s.panBy({x:S*h,y:C*h}),ft&&(ft.unactivate(),t.data.bgActivePosistion||(t.data.bgActivePosistion={x:c[0],y:c[1]}),t.redrawHint("select",!0),t.touchData.start=null));var d=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);c[0]=d[0],c[1]=d[1]}}for(var g=0;g<c.length;g++)f[g]=c[g]},!1);var z;t.registerBinding(window,"touchcancel",z=function(e){var n=t.touchData.start;t.touchData.capture=!1,n&&n.unactivate()});var L;if(t.registerBinding(window,"touchend",L=function(n){var r=t.touchData.start,i=t.touchData.capture;if(i){t.touchData.capture=!1,n.preventDefault();var u=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var s=t.cy,l=s.zoom(),f=t.touchData.now,h=t.touchData.earlier;if(n.touches[0]){var d=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);f[0]=d[0],f[1]=d[1]}if(n.touches[1]){var d=t.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);f[2]=d[0],f[3]=d[1]}if(n.touches[2]){var d=t.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);f[4]=d[0],f[5]=d[1]}r&&r.unactivate();var p;if(t.touchData.cxt){if(p=a(n,{type:"cxttapend",cyPosition:{x:f[0],y:f[1]}}),r?r.trigger(p):s.trigger(p),!t.touchData.cxtDragged){var g=a(n,{type:"cxttap",cyPosition:{x:f[0],y:f[1]}});r?r.trigger(g):s.trigger(g)}return t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,void t.redraw()}if(!n.touches[2]&&s.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var v=[],m=t.getAllInBox(u[0],u[1],u[2],u[3]);u[0]=void 0,u[1]=void 0,u[2]=void 0,u[3]=void 0,u[4]=0,t.redrawHint("select",!0);for(var y=0;y<m.length;y++)m[y]._private.selectable&&v.push(m[y]);var x=o(s,v);x.select(),x.length>0?t.redrawHint("eles",!0):t.redraw()}var b=!1;if(null!=r&&(r._private.active=!1,b=!0,r.unactivate()),n.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(n.touches[1]);else if(n.touches[0]);else if(!n.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var w=t.dragData.touchDragEles;if(null!=r){var _=r._private.grabbed;c(w),t.redrawHint("drag",!0),t.redrawHint("eles",!0),_&&r.trigger("free"),e(r,["touchend","tapend","vmouseup"],n,{cyPosition:{x:f[0],y:f[1]}}),r.unactivate(),t.touchData.start=null}else{var M=t.findNearestElement(f[0],f[1],!0,!0);e(M,["touchend","tapend","vmouseup"],n,{cyPosition:{x:f[0],y:f[1]}})}var k=t.touchData.startPosition[0]-f[0],E=k*k,S=t.touchData.startPosition[1]-f[1],N=S*S,T=E+N,C=T*l*l;null!=r&&!t.dragData.didDrag&&r._private.selectable&&C<t.touchTapThreshold2&&!t.pinching&&("single"===s.selectionType()?(s.$(":selected").unmerge(r).unselect(),r.select()):r.selected()?r.unselect():r.select(),b=!0,t.redrawHint("eles",!0)),t.touchData.singleTouchMoved||e(r,["tap","vclick"],n,{cyPosition:{x:f[0],y:f[1]}}),t.touchData.singleTouchMoved=!0}for(var D=0;D<f.length;D++)h[D]=f[D];t.dragData.didDrag=!1,0===n.touches.length&&(t.touchData.dragDelta=[]),b&&r&&r.updateStyle(!1),n.touches.length<2&&(t.pinching=!1,t.redrawHint("eles",!0),t.redraw())}},!1),"undefined"==typeof TouchEvent){var I=[],O=function(t){return{clientX:t.clientX,clientY:t.clientY,force:1,identifier:t.pointerId,pageX:t.pageX,pageY:t.pageY,radiusX:t.width/2,radiusY:t.height/2,screenX:t.screenX,screenY:t.screenY,target:t.target}},R=function(t){return{event:t,touch:O(t)}},j=function(t){I.push(R(t))},B=function(t){for(var e=0;e<I.length;e++){var n=I[e];if(n.event.pointerId===t.pointerId)return void I.splice(e,1)}},q=function(t){var e=I.filter(function(e){return e.event.pointerId===t.pointerId})[0];e.event=t,e.touch=O(t)},F=function(t){t.touches=I.map(function(t){return t.touch})},V=function(t){return"mouse"===t.pointerType||4===t.pointerType};t.registerBinding(t.container,"pointerdown",function(t){V(t)||(t.preventDefault(),j(t),F(t),C(t))}),t.registerBinding(t.container,"pointerup",function(t){V(t)||(B(t),F(t),L(t))}),t.registerBinding(t.container,"pointercancel",function(t){V(t)||(B(t),F(t),z(t))}),t.registerBinding(t.container,"pointermove",function(t){V(t)||(t.preventDefault(),q(t),F(t),A(t))})}},e.exports=u},{"../../../collection":23,"../../../event":42,"../../../is":77,"../../../util":94}],60:[function(t,e,n){"use strict";var r=t("../../../math"),i={};i.registerNodeShapes=function(){function t(t,i){return e[t]={name:t,points:i,draw:function(t,e,r,i,a){n.nodeShapeImpl("polygon")(t,e,r,i,a,this.points)},intersectLine:function(t,e,n,i,a,o,u){return r.polygonIntersectLine(a,o,this.points,t,e,n/2,i/2,u)},checkPoint:function(n,i,a,o,u,s,l){return r.pointInsidePolygon(n,i,e[t].points,s,l,o,u,[0,-1],a)}}}var e=this.nodeShapes={},n=this;e.ellipse={name:"ellipse",draw:function(t,e,r,i,a){n.nodeShapeImpl(this.name)(t,e,r,i,a)},intersectLine:function(t,e,n,i,a,o,u){return r.intersectLineEllipse(a,o,t,e,n/2+u,i/2+u)},checkPoint:function(t,e,n,r,i,a,o){return t-=a,e-=o,t/=r/2+n,e/=i/2+n,1>=t*t+e*e}},t("triangle",r.generateUnitNgonPointsFitToSquare(3,0)),t("square",r.generateUnitNgonPointsFitToSquare(4,0)),e.rectangle=e.square,e.roundrectangle={name:"roundrectangle",points:r.generateUnitNgonPointsFitToSquare(4,0),draw:function(t,e,r,i,a){n.nodeShapeImpl(this.name)(t,e,r,i,a)},intersectLine:function(t,e,n,i,a,o,u){return r.roundRectangleIntersectLine(a,o,t,e,n,i,u)},checkPoint:function(t,e,n,i,a,o,u){var s=r.getRoundRectangleRadius(i,a);if(r.pointInsidePolygon(t,e,this.points,o,u,i,a-2*s,[0,-1],n))return!0;if(r.pointInsidePolygon(t,e,this.points,o,u,i-2*s,a,[0,-1],n))return!0;var l=function(t,e,n,r,i,a,o){return t-=n,e-=r,t/=i/2+o,e/=a/2+o,1>=t*t+e*e};return l(t,e,o-i/2+s,u-a/2+s,2*s,2*s,n)?!0:l(t,e,o+i/2-s,u-a/2+s,2*s,2*s,n)?!0:l(t,e,o+i/2-s,u+a/2-s,2*s,2*s,n)?!0:l(t,e,o-i/2+s,u+a/2-s,2*s,2*s,n)?!0:!1}},t("diamond",[0,1,1,0,0,-1,-1,0]),t("pentagon",r.generateUnitNgonPointsFitToSquare(5,0)),t("hexagon",r.generateUnitNgonPointsFitToSquare(6,0)),t("heptagon",r.generateUnitNgonPointsFitToSquare(7,0)),t("octagon",r.generateUnitNgonPointsFitToSquare(8,0));var i=new Array(20),a=r.generateUnitNgonPoints(5,0),o=r.generateUnitNgonPoints(5,Math.PI/5),u=.5*(3-Math.sqrt(5));u*=1.57;for(var s=0;s<o.length/2;s++)o[2*s]*=u,o[2*s+1]*=u;for(var s=0;5>s;s++)i[4*s]=a[2*s],i[4*s+1]=a[2*s+1],i[4*s+2]=o[2*s],i[4*s+3]=o[2*s+1];i=r.fitPolygonToSquare(i),t("star",i),t("vee",[-1,-1,0,-.333,1,-1,0,1]),t("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),e.makePolygon=function(n){var r,i=n.join("$"),a="polygon-"+i;return(r=e[a])?r:t(a,n)}},e.exports=i},{"../../../math":79}],61:[function(t,e,n){"use strict";var r=t("../../../util"),i={};i.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};var a=1e3/60,o=1e3;i.redraw=function(t){t=t||r.staticEmptyObject();var e=this,n=t.forcedContext;void 0===e.averageRedrawTime&&(e.averageRedrawTime=0),void 0===e.lastRedrawTime&&(e.lastRedrawTime=0);var i=e.lastRedrawTime;i=a>i?a:i,i=o>i?i:o,void 0===e.lastDrawTime&&(e.lastDrawTime=0);var u=Date.now(),s=u-e.lastDrawTime,l=s>=i;return n||l?(e.requestedFrame=!0,void(e.renderOptions=t)):void(e.skipFrame=!0)},i.startRenderLoop=function(){var t=this;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var e=function(){if(!t.destroyed){if(t.requestedFrame&&!t.skipFrame){var n=r.performanceNow();t.render(t.renderOptions);var i=t.lastRedrawTime=r.performanceNow();void 0===t.averageRedrawTime&&(t.averageRedrawTime=i-n),void 0===t.redrawCount&&(t.redrawCount=0),t.redrawCount++,void 0===t.redrawTotalTime&&(t.redrawTotalTime=0);var a=i-n;t.redrawTotalTime+=a,t.lastRedrawTime=a,t.averageRedrawTime=t.averageRedrawTime/2+a/2,t.requestedFrame=!1}t.skipFrame=!1,r.requestAnimationFrame(e)}};r.requestAnimationFrame(e)}},e.exports=i},{"../../../util":94}],62:[function(t,e,n){"use strict";var r,i={};i.arrowShapeImpl=function(t){return(r||(r={polygon:function(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.lineTo(r.x,r.y)}},"triangle-backcurve":function(t,e,n){for(var r,i=0;i<e.length;i++){var a=e[i];0===i&&(r=a),t.lineTo(a.x,a.y)}t.quadraticCurveTo(n.x,n.y,r.x,r.y)},"triangle-tee":function(t,e,n){for(var r=e,i=0;i<r.length;i++){var a=r[i];t.lineTo(a.x,a.y)}var o=n,u=n[0];t.moveTo(u.x,u.y);for(var i=0;i<o.length;i++){var a=o[i];t.lineTo(a.x,a.y)}},circle:function(t,e,n,r){t.arc(e,n,r,0,2*Math.PI,!1)}}))[t]},e.exports=i},{}],63:[function(t,e,n){"use strict";var r={};r.drawEdge=function(t,e,n){var r=e._private.rscratch,i=this.usePaths();if(!(r.badBezier||r.badLine||isNaN(r.allpts[0]))){var a=e._private.style;if(!(a.width.pfValue<=0)){var o=a["overlay-padding"].pfValue,u=a["overlay-opacity"].value,s=a["overlay-color"].value;if(n){if(0===u)return;this.strokeStyle(t,s[0],s[1],s[2],u),t.lineCap="round","self"!=r.edgeType||i||(t.lineCap="butt")}else{var l=a["line-color"].value;this.strokeStyle(t,l[0],l[1],l[2],a.opacity.value),t.lineCap="butt"}var c=a.width.pfValue+(n?2*o:0),f=n?"solid":a["line-style"].value;t.lineWidth=c;var h=a["shadow-blur"].pfValue,d=a["shadow-opacity"].value,p=a["shadow-color"].value,g=a["shadow-offset-x"].pfValue,v=a["shadow-offset-y"].pfValue;this.shadowStyle(t,p,n?0:d,h,g,v),this.drawEdgePath(e,t,r.allpts,f,c),this.drawArrowheads(t,e,n),this.shadowStyle(t,"transparent",0)}}},r.drawEdgePath=function(t,e,n,r,i){var a,o=t._private.rscratch,u=e,s=!1,l=this.usePaths();if(l){var c=n.join("$"),f=o.pathCacheKey&&o.pathCacheKey===c;f?(a=e=o.pathCache,s=!0):(a=e=new Path2D,o.pathCacheKey=c,o.pathCache=a)}if(u.setLineDash)switch(r){case"dotted":u.setLineDash([1,1]);break;case"dashed":u.setLineDash([6,3]);break;case"solid":u.setLineDash([])}if(!s)switch(e.beginPath&&e.beginPath(),e.moveTo(n[0],n[1]),o.edgeType){case"bezier":case"self":case"compound":case"multibezier":if(!o.badBezier)for(var h=2;h+3<n.length;h+=4)e.quadraticCurveTo(n[h],n[h+1],n[h+2],n[h+3]);break;case"straight":case"segments":case"haystack":if(!o.badLine)for(var h=2;h+1<n.length;h+=2)e.lineTo(n[h],n[h+1])}e=u,l?e.stroke(a):e.stroke(),e.setLineDash&&e.setLineDash([])},r.drawArrowheads=function(t,e,n){if(!n){var r=e._private.rscratch,i="haystack"===r.edgeType;i||this.drawArrowhead(t,e,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle),this.drawArrowhead(t,e,"mid-target",r.midX,r.midY,r.midtgtArrowAngle),this.drawArrowhead(t,e,"mid-source",r.midX,r.midY,r.midsrcArrowAngle),i||this.drawArrowhead(t,e,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle)}},r.drawArrowhead=function(t,e,n,r,i,a){if(!(isNaN(r)||null==r||isNaN(i)||null==i||isNaN(a)||null==a)){var o=this,u=e._private.style,s=u[n+"-arrow-shape"].value;if("none"!==s){var l=t.globalCompositeOperation,c="hollow"===u[n+"-arrow-fill"].value?"both":"filled",f=u[n+"-arrow-fill"].value;"half-triangle-overshot"===s&&(f="hollow",c="hollow"),(1!==u.opacity.value||"hollow"===f)&&(t.globalCompositeOperation="destination-out",o.fillStyle(t,255,255,255,1),o.strokeStyle(t,255,255,255,1),o.drawArrowShape(e,n,t,c,u.width.pfValue,u[n+"-arrow-shape"].value,r,i,a),t.globalCompositeOperation=l);var h=u[n+"-arrow-color"].value;o.fillStyle(t,h[0],h[1],h[2],u.opacity.value),o.strokeStyle(t,h[0],h[1],h[2],u.opacity.value),o.drawArrowShape(e,n,t,f,u.width.pfValue,u[n+"-arrow-shape"].value,r,i,a)}}},r.drawArrowShape=function(t,e,n,r,i,a,o,u,s){var l,c=this,f=this.usePaths(),h=t._private.rscratch,d=!1,p=n,g={x:o,y:u},v=this.getArrowWidth(i),m=c.arrowShapes[a];if(f){var y=v+"$"+a+"$"+s+"$"+o+"$"+u;h.arrowPathCacheKey=h.arrowPathCacheKey||{},h.arrowPathCache=h.arrowPathCache||{};var x=h.arrowPathCacheKey[e]===y;x?(l=n=h.arrowPathCache[e],d=!0):(l=n=new Path2D,h.arrowPathCacheKey[e]=y,h.arrowPathCache[e]=l)}n.beginPath&&n.beginPath(),d||m.draw(n,v,s,g),!m.leavePathOpen&&n.closePath&&n.closePath(),n=p,("filled"===r||"both"===r)&&(f?n.fill(l):n.fill()),("hollow"===r||"both"===r)&&(n.lineWidth=m.matchEdgeWidth?i:1,n.lineJoin="miter",f?n.stroke(l):n.stroke())},e.exports=r},{}],64:[function(t,e,n){"use strict";var r={};r.safeDrawImage=function(t,e,n,r,i,a,o,u,s,l){var c=this;try{t.drawImage(e,n,r,i,a,o,u,s,l)}catch(f){c.data.canvasNeedsRedraw[c.NODE]=!0,c.data.canvasNeedsRedraw[c.DRAG]=!0,c.drawingImage=!0,c.redraw()}},r.drawInscribedImage=function(t,e,n){var r=this,i=n._private.position.x,a=n._private.position.y,o=n._private.style,u=o["background-fit"].value,s=o["background-position-x"],l=o["background-position-y"],c=o["background-repeat"].value,f=n.width(),h=n.height(),d=n._private.rscratch,p=o["background-clip"].value,g="node"===p,v=o["background-image-opacity"].value,m=e.width||e.cachedW,y=e.height||e.cachedH;(null==m||null==y)&&(document.body.appendChild(e),m=e.cachedW=e.width||e.offsetWidth,y=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var x=m,b=y,w=o["background-width"];"auto"!==w.value&&(x="%"===w.units?w.value/100*f:w.pfValue);var _=o["background-height"];if("auto"!==_.value&&(b="%"===_.units?_.value/100*h:_.pfValue),0!==x&&0!==b){if("contain"===u){var M=Math.min(f/x,h/b);x*=M,b*=M}else if("cover"===u){var M=Math.max(f/x,h/b);x*=M,b*=M}var k=i-f/2;k+="%"===s.units?(f-x)*s.value/100:s.pfValue;var E=a-h/2;E+="%"===l.units?(h-b)*l.value/100:l.pfValue,d.pathCache&&(k-=i,E-=a,i=0,a=0);var S=t.globalAlpha;if(t.globalAlpha=v,"no-repeat"===c)g&&(t.save(),d.pathCache?t.clip(d.pathCache):(r.nodeShapes[r.getNodeShape(n)].draw(t,i,a,f,h),t.clip())),r.safeDrawImage(t,e,0,0,m,y,k,E,x,b),g&&t.restore();else{var N=t.createPattern(e,c);t.fillStyle=N,r.nodeShapes[r.getNodeShape(n)].draw(t,i,a,f,h),t.translate(k,E),t.fill(),t.translate(-k,-E)}t.globalAlpha=S}},e.exports=r},{}],65:[function(t,e,n){"use strict";function r(t,e,n,r,i,a){var a=a||5;t.beginPath(),t.moveTo(e+a,n),t.lineTo(e+r-a,n),t.quadraticCurveTo(e+r,n,e+r,n+a),t.lineTo(e+r,n+i-a),t.quadraticCurveTo(e+r,n+i,e+r-a,n+i),t.lineTo(e+a,n+i),t.quadraticCurveTo(e,n+i,e,n+i-a),t.lineTo(e,n+a),t.quadraticCurveTo(e,n,e+a,n),t.closePath(),t.fill()}var i=t("../../../is"),a={};a.drawEdgeText=function(t,e){var n=e._private.style.label.strValue;if(n&&!n.match(/^\s+$/)&&(!this.hideEdgesOnViewport||!(this.dragData.didDrag||this.pinching||this.hoverData.dragging||this.data.wheel||this.swipePanning))){var r=e._private.style["font-size"].pfValue*e.cy().zoom(),a=e._private.style["min-zoomed-font-size"].pfValue;if(!(a>r)){t.textAlign="center",t.textBaseline="middle";var o=e._private.rscratch;if(i.number(o.labelX)&&i.number(o.labelY)){var u,s=e._private.style,l="autorotate"===s["edge-text-rotation"].strValue;l?(u=o.labelAngle,t.translate(o.labelX,o.labelY),t.rotate(u),this.drawText(t,e,0,0),t.rotate(-u),t.translate(-o.labelX,-o.labelY)):this.drawText(t,e,o.labelX,o.labelY)}}}},a.drawNodeText=function(t,e){var n=e._private.style.label.strValue;if(n&&!n.match(/^\s+$/)){var r=e._private.style["font-size"].pfValue*e.cy().zoom(),a=e._private.style["min-zoomed-font-size"].pfValue;if(!(a>r)){var o=e._private.style["text-halign"].strValue,u=e._private.style["text-valign"].strValue,s=e._private.rscratch;if(i.number(s.labelX)&&i.number(s.labelY)){switch(o){case"left":t.textAlign="right";break;case"right":t.textAlign="left";break;default:t.textAlign="center"}switch(u){case"top":t.textBaseline="bottom";break;case"bottom":t.textBaseline="top";break;default:t.textBaseline="middle"}this.drawText(t,e,s.labelX,s.labelY)}}}},a.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if(e=this.fontCaches[n],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e},a.setupTextStyle=function(t,e){var n=e.effectiveOpacity(),r=e._private.style,i=r["font-style"].strValue,a=r["font-size"].pfValue+"px",o=r["font-family"].strValue,u=r["font-weight"].strValue,s=r["text-opacity"].value*r.opacity.value*n,l=r["text-outline-opacity"].value*s,c=r.color.value,f=r["text-outline-color"].value,h=r["text-shadow-blur"].pfValue,d=r["text-shadow-opacity"].value,p=r["text-shadow-color"].value,g=r["text-shadow-offset-x"].pfValue,v=r["text-shadow-offset-y"].pfValue,m=e._private.fontKey,y=this.getFontCache(t);y.key!==m&&(t.font=i+" "+u+" "+a+" "+o,y.key=m);var x=this.getLabelText(e);return t.lineJoin="round",this.fillStyle(t,c[0],c[1],c[2],s),this.strokeStyle(t,f[0],f[1],f[2],l),this.shadowStyle(t,p,d,h,g,v),x},a.drawText=function(t,e,n,i){var a=e._private,o=a.style,u=a.rstyle,s=a.rscratch,l=e.effectiveOpacity();if(0!==l&&0!==o["text-opacity"].value){var c=this.setupTextStyle(t,e),f=o["text-halign"].value,h=o["text-valign"].value;if(e.isEdge()&&(f="center",h="center"),e.isNode()){var d=o["padding-left"].pfValue,p=o["padding-right"].pfValue,g=o["padding-top"].pfValue,v=o["padding-bottom"].pfValue;n+=d/2,n-=p/2,i+=g/2,i-=v/2}if(null!=c&&!isNaN(n)&&!isNaN(i)){var m=o["text-background-opacity"].value,y=o["text-border-opacity"].value,x=o["text-border-width"].pfValue;if(m>0||x>0&&y>0){var b=4+x/2;e.isNode()&&("top"===h?i-=b:"bottom"===h&&(i+=b),"left"===f?n-=b:"right"===f&&(n+=b));var w=u.labelWidth,_=u.labelHeight,M=n;f&&("center"==f?M-=w/2:"left"==f&&(M-=w));var k=i;if(e.isNode()?"top"==h?k-=_:"center"==h&&(k-=_/2):k-=_/2,"autorotate"===o["edge-text-rotation"].strValue?(i=0,w+=4,M=n-w/2,k=i-_/2):(M-=b,k-=b,_+=2*b,w+=2*b),m>0){var E=t.fillStyle,S=o["text-background-color"].value;t.fillStyle="rgba("+S[0]+","+S[1]+","+S[2]+","+m*l+")";var N=o["text-background-shape"].strValue;"roundrectangle"==N?r(t,M,k,w,_,2):t.fillRect(M,k,w,_),t.fillStyle=E}if(x>0&&y>0){var T=t.strokeStyle,C=t.lineWidth,D=o["text-border-color"].value,P=o["text-border-style"].value;if(t.strokeStyle="rgba("+D[0]+","+D[1]+","+D[2]+","+y*l+")",t.lineWidth=x,t.setLineDash)switch(P){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=x/4,t.setLineDash([]);break;case"solid":t.setLineDash([])}if(t.strokeRect(M,k,w,_),"double"===P){var A=x/2;t.strokeRect(M+A,k+A,w-2*A,_-2*A)}t.setLineDash&&t.setLineDash([]),t.lineWidth=C,t.strokeStyle=T}}var z=2*o["text-outline-width"].pfValue;if(z>0&&(t.lineWidth=z),"wrap"===o["text-wrap"].value){var L=s.labelWrapCachedLines,I=u.labelHeight/L.length;switch(h){case"top":i-=(L.length-1)*I;break;case"bottom":break;default:case"center":i-=(L.length-1)*I/2}for(var O=0;O<L.length;O++)z>0&&t.strokeText(L[O],n,i),t.fillText(L[O],n,i),i+=I}else z>0&&t.strokeText(c,n,i),t.fillText(c,n,i);this.shadowStyle(t,"transparent",0)}}},e.exports=a},{"../../../is":77}],66:[function(t,e,n){"use strict";var r=t("../../../is"),i={};i.drawNode=function(t,e,n){var i,a,o=this,u=e._private.style,s=e._private.rscratch,l=e._private,c=l.position;if(r.number(c.x)&&r.number(c.y)){var f,h=this.usePaths(),d=t,p=!1,g=u["overlay-padding"].pfValue,v=u["overlay-opacity"].value,m=u["overlay-color"].value;if(!n||0!==v){var y=e.effectiveOpacity();if(0!==y)if(i=e.width()+u["padding-left"].pfValue+u["padding-right"].pfValue,a=e.height()+u["padding-top"].pfValue+u["padding-bottom"].pfValue,t.lineWidth=u["border-width"].pfValue,void 0!==n&&n)v>0&&(this.fillStyle(t,m[0],m[1],m[2],v),o.nodeShapes.roundrectangle.draw(t,e._private.position.x,e._private.position.y,i+2*g,a+2*g),t.fill());else{var x,b=u["background-image"].value[2]||u["background-image"].value[1];if(void 0!==b){x=this.getCachedImage(b,function(){o.data.canvasNeedsRedraw[o.NODE]=!0,o.data.canvasNeedsRedraw[o.DRAG]=!0,o.drawingImage=!0,o.redraw()});var w=l.backgrounding;l.backgrounding=!x.complete,w!==l.backgrounding&&e.updateStyle(!1)}var _=u["background-color"].value,M=u["border-color"].value,k=u["border-style"].value;this.fillStyle(t,_[0],_[1],_[2],u["background-opacity"].value*y),this.strokeStyle(t,M[0],M[1],M[2],u["border-opacity"].value*y);var E=u["shadow-blur"].pfValue,S=u["shadow-opacity"].value,N=u["shadow-color"].value,T=u["shadow-offset-x"].pfValue,C=u["shadow-offset-y"].pfValue;if(this.shadowStyle(t,N,S,E,T,C),t.lineJoin="miter",t.setLineDash)switch(k){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([])}var D=u.shape.strValue;if(h){var P=D+"$"+i+"$"+a;t.translate(c.x,c.y),s.pathCacheKey===P?(f=t=s.pathCache,p=!0):(f=t=new Path2D,s.pathCacheKey=P,s.pathCache=f)}if(!p){var A=c;h&&(A={x:0,y:0}),o.nodeShapes[this.getNodeShape(e)].draw(t,A.x,A.y,i,a)}t=d,h?t.fill(f):t.fill(),this.shadowStyle(t,"transparent",0),void 0!==b&&x.complete&&this.drawInscribedImage(t,x,e);var z=u["background-blacken"].value,L=u["border-width"].pfValue;if(this.hasPie(e)&&(this.drawPie(t,e,y),(0!==z||0!==L)&&(h||o.nodeShapes[this.getNodeShape(e)].draw(t,c.x,c.y,i,a))),z>0?(this.fillStyle(t,0,0,0,z),h?t.fill(f):t.fill()):0>z&&(this.fillStyle(t,255,255,255,-z),h?t.fill(f):t.fill()),L>0&&(h?t.stroke(f):t.stroke(),"double"===k)){t.lineWidth=u["border-width"].pfValue/3;var I=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",h?t.stroke(f):t.stroke(),t.globalCompositeOperation=I}h&&t.translate(-c.x,-c.y),t.setLineDash&&t.setLineDash([])}}}},i.hasPie=function(t){return t=t[0],t._private.hasPie},i.drawPie=function(t,e,n){e=e[0];var r=e._private,i=e.cy().style(),a=r.style,o=a["pie-size"],u=e.width(),s=e.height(),l=r.position.x,c=r.position.y,f=Math.min(u,s)/2,h=0,d=this.usePaths();d&&(l=0,c=0),"%"===o.units?f=f*o.value/100:void 0!==o.pfValue&&(f=o.pfValue/2);for(var p=1;p<=i.pieBackgroundN;p++){var g=a["pie-"+p+"-background-size"].value,v=a["pie-"+p+"-background-color"].value,m=a["pie-"+p+"-background-opacity"].value*n,y=g/100;y+h>1&&(y=1-h);var x=1.5*Math.PI+2*Math.PI*h,b=2*Math.PI*y,w=x+b;0===g||h>=1||h+y>1||(t.beginPath(),t.moveTo(l,c),t.arc(l,c,f,x,w),t.closePath(),this.fillStyle(t,v[0],v[1],v[2],m),t.fill(),h+=y)}},e.exports=i},{"../../../is":77}],67:[function(t,e,n){"use strict";var r={},i=t("../../../util"),a=t("../../../math"),o=100;r.getPixelRatio=function(){var t=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e},r.paintCache=function(t){for(var e,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if(e=n[i],e.context===t){r=!1;break}return r&&(e={context:t},n.push(e)),e},r.fillStyle=function(t,e,n,r,i){t.fillStyle="rgba("+e+","+n+","+r+","+i+")"},r.strokeStyle=function(t,e,n,r,i){t.strokeStyle="rgba("+e+","+n+","+r+","+i+")"},r.shadowStyle=function(t,e,n,r,i,a){var o=this.cy.zoom(),u=this.paintCache(t);(0!==u.shadowOpacity||0!==n)&&(u.shadowOpacity=n,n>0?(t.shadowBlur=r*o,t.shadowColor="rgba("+e[0]+","+e[1]+","+e[2]+","+n+")",t.shadowOffsetX=i*o,t.shadowOffsetY=a*o):(t.shadowBlur=0,t.shadowColor="transparent"))},r.matchCanvasSize=function(t){var e=this,n=e.data,r=t.clientWidth,i=t.clientHeight,a=e.getPixelRatio(),o=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(a=o);var u,s=r*a,l=i*a;if(s!==e.canvasWidth||l!==e.canvasHeight){e.fontCaches=null;var c=n.canvasContainer;c.style.width=r+"px",c.style.height=i+"px";for(var f=0;f<e.CANVAS_LAYERS;f++)u=n.canvases[f],(u.width!==s||u.height!==l)&&(u.width=s,u.height=l,u.style.width=r+"px",u.style.height=i+"px");for(var f=0;f<e.BUFFER_COUNT;f++)u=n.bufferCanvases[f],(u.width!==s||u.height!==l)&&(u.width=s,u.height=l,u.style.width=r+"px",u.style.height=i+"px");e.textureMult=1,1>=a&&(u=n.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,u.width=s*e.textureMult,u.height=l*e.textureMult),e.canvasWidth=s,e.canvasHeight=l}},r.renderTo=function(t,e,n,r){this.render({forcedContext:t,forcedZoom:e,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},r.render=function(t){function e(t,e,n,r,i){var a=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",h.fillStyle(t,255,255,255,h.motionBlurTransparency),t.fillRect(e,n,r,i),t.globalCompositeOperation=a}function n(t,n){var r,i,a,o;h.clearingMotionBlur||t!==g.bufferContexts[h.MOTIONBLUR_BUFFER_NODE]&&t!==g.bufferContexts[h.MOTIONBLUR_BUFFER_DRAG]?(r=C,i=N,a=h.canvasWidth,o=h.canvasHeight):(r={x:T.x*x,y:T.y*x},i=S*x,a=h.canvasWidth*x,o=h.canvasHeight*x),t.setTransform(1,0,0,1,0,0),"motionBlur"===n?e(t,0,0,a,o):u||void 0!==n&&!n||t.clearRect(0,0,a,o),s||(t.translate(r.x,r.y),t.scale(i,i)),f&&t.translate(f.x,f.y),c&&t.scale(c,c)}function r(t,e){for(var n=t.eles,r=0;r<n.length;r++){var i=n[r];i.isNode()?(h.drawNode(e,i),V||h.drawNodeText(e,i),h.drawNode(e,i,!0)):F||(h.drawEdge(e,i),
V||h.drawEdgeText(e,i),h.drawEdge(e,i,!0))}}t=t||i.staticEmptyObject();var u=t.forcedContext,s=t.drawAllLayers,l=t.drawOnlyNodeLayer,c=t.forcedZoom,f=t.forcedPan,h=this,d=void 0===t.forcedPxRatio?this.getPixelRatio():t.forcedPxRatio,p=h.cy,g=h.data,v=g.canvasNeedsRedraw,m=h.textureOnViewport&&!u&&(h.pinching||h.hoverData.dragging||h.swipePanning||h.data.wheelZooming),y=void 0!==t.motionBlur?t.motionBlur:h.motionBlur,x=h.motionBlurPxRatio,b=p.hasCompoundNodes(),w=h.hoverData.draggingEles,_=h.hoverData.selecting||h.touchData.selecting?!0:!1;y=y&&!u&&h.motionBlurEnabled&&!_;var M=y;u||(h.prevPxRatio!==d&&(h.invalidateContainerClientCoordsCache(),h.matchCanvasSize(h.container),h.redrawHint("eles",!0),h.redrawHint("drag",!0)),h.prevPxRatio=d),!u&&h.motionBlurTimeout&&clearTimeout(h.motionBlurTimeout),y&&(null==h.mbFrames&&(h.mbFrames=0),h.drawingImage||h.mbFrames++,h.mbFrames<3&&(M=!1),h.mbFrames>h.minMbLowQualFrames&&(h.motionBlurPxRatio=h.mbPxRBlurry)),h.clearingMotionBlur&&(h.motionBlurPxRatio=1),h.textureDrawLastFrame&&!m&&(v[h.NODE]=!0,v[h.SELECT_BOX]=!0);var k=h.getCachedEdges(),E=p.style()._private.coreStyle,S=p.zoom(),N=void 0!==c?c:S,T=p.pan(),C={x:T.x,y:T.y},D={zoom:S,pan:{x:T.x,y:T.y}},P=h.prevViewport,A=void 0===P||D.zoom!==P.zoom||D.pan.x!==P.pan.x||D.pan.y!==P.pan.y;A||w&&!b||(h.motionBlurPxRatio=1),f&&(C=f),N*=d,C.x*=d,C.y*=d;var z={drag:{nodes:[],edges:[],eles:[]},nondrag:{nodes:[],edges:[],eles:[]}};if(m||(h.textureDrawLastFrame=!1),m){h.textureDrawLastFrame=!0;var L;if(!h.textureCache){h.textureCache={},L=h.textureCache.bb=p.elements().boundingBox(),h.textureCache.texture=h.data.bufferCanvases[h.TEXTURE_BUFFER];var I=h.data.bufferContexts[h.TEXTURE_BUFFER];I.setTransform(1,0,0,1,0,0),I.clearRect(0,0,h.canvasWidth*h.textureMult,h.canvasHeight*h.textureMult),h.render({forcedContext:I,drawOnlyNodeLayer:!0,forcedPxRatio:d*h.textureMult});var D=h.textureCache.viewport={zoom:p.zoom(),pan:p.pan(),width:h.canvasWidth,height:h.canvasHeight};D.mpan={x:(0-D.pan.x)/D.zoom,y:(0-D.pan.y)/D.zoom}}v[h.DRAG]=!1,v[h.NODE]=!1;var O=g.contexts[h.NODE],R=h.textureCache.texture,D=h.textureCache.viewport;L=h.textureCache.bb,O.setTransform(1,0,0,1,0,0),y?e(O,0,0,D.width,D.height):O.clearRect(0,0,D.width,D.height);var j=E["outside-texture-bg-color"].value,B=E["outside-texture-bg-opacity"].value;h.fillStyle(O,j[0],j[1],j[2],B),O.fillRect(0,0,D.width,D.height);var S=p.zoom();n(O,!1),O.clearRect(D.mpan.x,D.mpan.y,D.width/D.zoom/d,D.height/D.zoom/d),O.drawImage(R,D.mpan.x,D.mpan.y,D.width/D.zoom/d,D.height/D.zoom/d)}else h.textureOnViewport&&!u&&(h.textureCache=null);var q=h.pinching||h.hoverData.dragging||h.swipePanning||h.data.wheelZooming||h.hoverData.draggingEles,F=h.hideEdgesOnViewport&&q,V=h.hideLabelsOnViewport&&q;if(v[h.DRAG]||v[h.NODE]||s||l){F||h.findEdgeControlPoints(k);for(var Y=h.getCachedZSortedEles(),X=p.extent(),$=0;$<Y.length;$++){var U,H=Y[$],L=u?null:H.boundingBox(),W=u?!0:a.boundingBoxesIntersect(X,L);W&&(U=H._private.rscratch.inDragLayer?z.drag:z.nondrag,U.eles.push(H))}}var Z=[];if(Z[h.NODE]=!v[h.NODE]&&y&&!h.clearedForMotionBlur[h.NODE]||h.clearingMotionBlur,Z[h.NODE]&&(h.clearedForMotionBlur[h.NODE]=!0),Z[h.DRAG]=!v[h.DRAG]&&y&&!h.clearedForMotionBlur[h.DRAG]||h.clearingMotionBlur,Z[h.DRAG]&&(h.clearedForMotionBlur[h.DRAG]=!0),v[h.NODE]||s||l||Z[h.NODE]){var G=y&&!Z[h.NODE]&&1!==x,O=u||(G?h.data.bufferContexts[h.MOTIONBLUR_BUFFER_NODE]:g.contexts[h.NODE]),K=y&&!G?"motionBlur":void 0;n(O,K),r(z.nondrag,O),s||y||(v[h.NODE]=!1)}if(!l&&(v[h.DRAG]||s||Z[h.DRAG])){var G=y&&!Z[h.DRAG]&&1!==x,O=u||(G?h.data.bufferContexts[h.MOTIONBLUR_BUFFER_DRAG]:g.contexts[h.DRAG]);n(O,y&&!G?"motionBlur":void 0),r(z.drag,O),s||y||(v[h.DRAG]=!1)}if(h.showFps||!l&&v[h.SELECT_BOX]&&!s){var O=u||g.contexts[h.SELECT_BOX];if(n(O),1==h.selection[4]&&(h.hoverData.selecting||h.touchData.selecting)){var S=h.cy.zoom(),J=E["selection-box-border-width"].value/S;O.lineWidth=J,O.fillStyle="rgba("+E["selection-box-color"].value[0]+","+E["selection-box-color"].value[1]+","+E["selection-box-color"].value[2]+","+E["selection-box-opacity"].value+")",O.fillRect(h.selection[0],h.selection[1],h.selection[2]-h.selection[0],h.selection[3]-h.selection[1]),J>0&&(O.strokeStyle="rgba("+E["selection-box-border-color"].value[0]+","+E["selection-box-border-color"].value[1]+","+E["selection-box-border-color"].value[2]+","+E["selection-box-opacity"].value+")",O.strokeRect(h.selection[0],h.selection[1],h.selection[2]-h.selection[0],h.selection[3]-h.selection[1]))}if(g.bgActivePosistion&&!h.hoverData.selecting){var S=h.cy.zoom(),Q=g.bgActivePosistion;O.fillStyle="rgba("+E["active-bg-color"].value[0]+","+E["active-bg-color"].value[1]+","+E["active-bg-color"].value[2]+","+E["active-bg-opacity"].value+")",O.beginPath(),O.arc(Q.x,Q.y,E["active-bg-size"].pfValue/S,0,2*Math.PI),O.fill()}var tt=h.lastRedrawTime;if(h.showFps&&tt){tt=Math.round(tt);var et=Math.round(1e3/tt);O.setTransform(1,0,0,1,0,0),O.fillStyle="rgba(255, 0, 0, 0.75)",O.strokeStyle="rgba(255, 0, 0, 0.75)",O.lineWidth=1,O.fillText("1 frame = "+tt+" ms = "+et+" fps",0,20);var nt=60;O.strokeRect(0,30,250,20),O.fillRect(0,30,250*Math.min(et/nt,1),20)}s||(v[h.SELECT_BOX]=!1)}if(y&&1!==x){var rt=g.contexts[h.NODE],it=h.data.bufferCanvases[h.MOTIONBLUR_BUFFER_NODE],at=g.contexts[h.DRAG],ot=h.data.bufferCanvases[h.MOTIONBLUR_BUFFER_DRAG],ut=function(t,n,r){t.setTransform(1,0,0,1,0,0),r||!M?t.clearRect(0,0,h.canvasWidth,h.canvasHeight):e(t,0,0,h.canvasWidth,h.canvasHeight);var i=x;t.drawImage(n,0,0,h.canvasWidth*i,h.canvasHeight*i,0,0,h.canvasWidth,h.canvasHeight)};(v[h.NODE]||Z[h.NODE])&&(ut(rt,it,Z[h.NODE]),v[h.NODE]=!1),(v[h.DRAG]||Z[h.DRAG])&&(ut(at,ot,Z[h.DRAG]),v[h.DRAG]=!1)}h.prevViewport=D,h.clearingMotionBlur&&(h.clearingMotionBlur=!1,h.motionBlurCleared=!0,h.motionBlur=!0),y&&(h.motionBlurTimeout=setTimeout(function(){h.motionBlurTimeout=null,h.clearedForMotionBlur[h.NODE]=!1,h.clearedForMotionBlur[h.DRAG]=!1,h.motionBlur=!1,h.clearingMotionBlur=!m,h.mbFrames=0,v[h.NODE]=!0,v[h.DRAG]=!0,h.redraw()},o)),h.drawingImage=!1,u||h.initrender||(h.initrender=!0,p.trigger("initrender")),u||p.triggerOnRender()},e.exports=r},{"../../../math":79,"../../../util":94}],68:[function(t,e,n){"use strict";var r=t("../../../math"),i={};i.drawPolygonPath=function(t,e,n,r,i,a){var o=r/2,u=i/2;t.beginPath&&t.beginPath(),t.moveTo(e+o*a[0],n+u*a[1]);for(var s=1;s<a.length/2;s++)t.lineTo(e+o*a[2*s],n+u*a[2*s+1]);t.closePath()},i.drawRoundRectanglePath=function(t,e,n,i,a,o){var u=i/2,s=a/2,l=r.getRoundRectangleRadius(i,a);t.beginPath&&t.beginPath(),t.moveTo(e,n-s),t.arcTo(e+u,n-s,e+u,n,l),t.arcTo(e+u,n+s,e,n+s,l),t.arcTo(e-u,n+s,e-u,n,l),t.arcTo(e-u,n-s,e,n-s,l),t.lineTo(e,n-s),t.closePath()};for(var a=Math.sin(0),o=Math.cos(0),u={},s={},l=Math.PI/40,c=0*Math.PI;c<2*Math.PI;c+=l)u[c]=Math.sin(c),s[c]=Math.cos(c);i.drawEllipsePath=function(t,e,n,r,i){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,n,r/2,i/2,0,0,2*Math.PI);else for(var c,f,h=r/2,d=i/2,p=0*Math.PI;p<2*Math.PI;p+=l)c=e-h*u[p]*a+h*s[p]*o,f=n+d*s[p]*a+d*u[p]*o,0===p?t.moveTo(c,f):t.lineTo(c,f);t.closePath()},e.exports=i},{"../../../math":79}],69:[function(t,e,n){"use strict";var r=t("../../../is"),i={};i.createBuffer=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,[n,n.getContext("2d")]},i.bufferCanvasImage=function(t){var e=this.cy,n=e.elements().boundingBox(),i=t.full?Math.ceil(n.w):this.container.clientWidth,a=t.full?Math.ceil(n.h):this.container.clientHeight,o=1;if(void 0!==t.scale)i*=t.scale,a*=t.scale,o=t.scale;else if(r.number(t.maxWidth)||r.number(t.maxHeight)){var u=1/0,s=1/0;r.number(t.maxWidth)&&(u=o*t.maxWidth/i),r.number(t.maxHeight)&&(s=o*t.maxHeight/a),o=Math.min(u,s),i*=o,a*=o}var l=document.createElement("canvas");l.width=i,l.height=a,l.style.width=i+"px",l.style.height=a+"px";var c=l.getContext("2d");if(i>0&&a>0)if(c.clearRect(0,0,i,a),t.bg&&(c.fillStyle=t.bg,c.rect(0,0,i,a),c.fill()),c.globalCompositeOperation="source-over",t.full)this.render({forcedContext:c,drawAllLayers:!0,forcedZoom:o,forcedPan:{x:-n.x1*o,y:-n.y1*o},forcedPxRatio:1});else{var f=e.pan(),h={x:f.x*o,y:f.y*o},d=e.zoom()*o;this.render({forcedContext:c,drawAllLayers:!0,forcedZoom:d,forcedPan:h,forcedPxRatio:1})}return l},i.png=function(t){return this.bufferCanvasImage(t).toDataURL("image/png")},i.jpg=function(t){return this.bufferCanvasImage(t).toDataURL("image/jpeg")},e.exports=i},{"../../../is":77}],70:[function(t,e,n){"use strict";function r(t){var e=this;e.data={canvases:new Array(u.CANVAS_LAYERS),contexts:new Array(u.CANVAS_LAYERS),canvasNeedsRedraw:new Array(u.CANVAS_LAYERS),bufferCanvases:new Array(u.BUFFER_COUNT),bufferContexts:new Array(u.CANVAS_LAYERS)},e.data.canvasContainer=document.createElement("div");var n=e.data.canvasContainer.style;e.data.canvasContainer.setAttribute("style","-webkit-tap-highlight-color: rgba(0,0,0,0);"),n.position="relative",n.zIndex="0",n.overflow="hidden";var r=t.cy.container();r.appendChild(e.data.canvasContainer),r.setAttribute("style",(r.getAttribute("style")||"")+"-webkit-tap-highlight-color: rgba(0,0,0,0);");for(var i=0;i<u.CANVAS_LAYERS;i++){var o=e.data.canvases[i]=document.createElement("canvas");e.data.contexts[i]=o.getContext("2d"),o.setAttribute("style","-webkit-user-select: none; -moz-user-select: -moz-none; user-select: none; -webkit-tap-highlight-color: rgba(0,0,0,0); outline-style: none;"+(a.ms()?" -ms-touch-action: none; touch-action: none; ":"")),o.style.position="absolute",o.setAttribute("data-id","layer"+i),o.style.zIndex=String(u.CANVAS_LAYERS-i),e.data.canvasContainer.appendChild(o),e.data.canvasNeedsRedraw[i]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[u.NODE].setAttribute("data-id","layer"+u.NODE+"-node"),e.data.canvases[u.SELECT_BOX].setAttribute("data-id","layer"+u.SELECT_BOX+"-selectbox"),e.data.canvases[u.DRAG].setAttribute("data-id","layer"+u.DRAG+"-drag");for(var i=0;i<u.BUFFER_COUNT;i++)e.data.bufferCanvases[i]=document.createElement("canvas"),e.data.bufferContexts[i]=e.data.bufferCanvases[i].getContext("2d"),e.data.bufferCanvases[i].style.position="absolute",e.data.bufferCanvases[i].setAttribute("data-id","buffer"+i),e.data.bufferCanvases[i].style.zIndex=String(-i-1),e.data.bufferCanvases[i].style.visibility="hidden";e.pathsEnabled=!0}var i=t("../../../util"),a=t("../../../is"),o=r,u=r.prototype;u.CANVAS_LAYERS=3,u.SELECT_BOX=0,u.DRAG=1,u.NODE=2,u.BUFFER_COUNT=3,u.TEXTURE_BUFFER=0,u.MOTIONBLUR_BUFFER_NODE=1,u.MOTIONBLUR_BUFFER_DRAG=2,u.redrawHint=function(t,e){var n=this;switch(t){case"eles":n.data.canvasNeedsRedraw[u.NODE]=e;break;case"drag":n.data.canvasNeedsRedraw[u.DRAG]=e;break;case"select":n.data.canvasNeedsRedraw[u.SELECT_BOX]=e}};var s="undefined"!=typeof Path2D;u.path2dEnabled=function(t){return void 0===t?this.pathsEnabled:void(this.pathsEnabled=t?!0:!1)},u.usePaths=function(){return s&&this.pathsEnabled},[t("./arrow-shapes"),t("./drawing-edges"),t("./drawing-images"),t("./drawing-label-text"),t("./drawing-nodes"),t("./drawing-redraw"),t("./drawing-shapes"),t("./export-image"),t("./node-shapes")].forEach(function(t){i.extend(u,t)}),e.exports=o},{"../../../is":77,"../../../util":94,"./arrow-shapes":62,"./drawing-edges":63,"./drawing-images":64,"./drawing-label-text":65,"./drawing-nodes":66,"./drawing-redraw":67,"./drawing-shapes":68,"./export-image":69,"./node-shapes":71}],71:[function(t,e,n){"use strict";var r,i={};i.nodeShapeImpl=function(t){var e=this;return(r||(r={ellipse:function(t,n,r,i,a){e.drawEllipsePath(t,n,r,i,a)},polygon:function(t,n,r,i,a,o){e.drawPolygonPath(t,n,r,i,a,o)},roundrectangle:function(t,n,r,i,a){e.drawRoundRectanglePath(t,n,r,i,a,10)}}))[t]},e.exports=i},{}],72:[function(t,e,n){"use strict";e.exports=[{name:"null",impl:t("./null")},{name:"base",impl:t("./base")},{name:"canvas",impl:t("./canvas")}]},{"./base":58,"./canvas":70,"./null":73}],73:[function(t,e,n){"use strict";function r(t){this.options=t,this.notifications=0}var i=function(){};r.prototype={recalculateRenderedStyle:i,notify:function(){this.notifications++},init:i},e.exports=r},{}],74:[function(t,e,n){"use strict";var r=t("./is"),i=t("./util"),a=t("./thread"),o=t("./promise"),u=t("./define"),s=function(e){if(!(this instanceof s))return new s(e);this._private={pass:[]};var n=4;if(r.number(e),"undefined"!=typeof navigator&&null!=navigator.hardwareConcurrency)e=navigator.hardwareConcurrency;else try{e=t("os").cpus().length}catch(i){e=n}for(var o=0;e>o;o++)this[o]=new a;this.length=e},l=s.prototype;i.extend(l,{instanceString:function(){return"fabric"},require:function(t,e){for(var n=0;n<this.length;n++){var r=this[n];r.require(t,e)}return this},random:function(){var t=Math.round((this.length-1)*Math.random()),e=this[t];return e},run:function(t){var e=this._private.pass.shift();return this.random().pass(e).run(t)},message:function(t){return this.random().message(t)},broadcast:function(t){for(var e=0;e<this.length;e++){var n=this[e];n.message(t)}return this},stop:function(){for(var t=0;t<this.length;t++){var e=this[t];e.stop()}return this},pass:function(t){var e=this._private.pass;if(!r.array(t))throw"Only arrays may be used with fabric.pass()";return e.push(t),this},spreadSize:function(){var t=Math.ceil(this._private.pass[0].length/this.length);return t=Math.max(1,t)},spread:function(t){for(var e=this,n=e._private,r=e.spreadSize(),i=n.pass.shift().concat([]),a=[],u=0;u<this.length;u++){var s=this[u],l=i.splice(0,r),c=s.pass(l).run(t);a.push(c);var f=0===i.length;if(f)break}return o.all(a).then(function(t){for(var e=[],n=0,r=0;r<t.length;r++)for(var i=t[r],a=0;a<i.length;a++){var o=i[a];e[n++]=o}return e})},map:function(t){var e=this;return e.require(t,"_$_$_fabmap"),e.spread(function(t){var e=[],n=resolve;resolve=function(t){e.push(t)};for(var r=0;r<t.length;r++){var i=e.length,a=_$_$_fabmap(t[r]),o=i===e.length;o&&e.push(a)}return resolve=n,e})},filter:function(t){var e=this._private,n=e.pass[0];return this.map(t).then(function(t){for(var e=[],r=0;r<n.length;r++){var i=n[r],a=t[r];a&&e.push(i)}return e})},sort:function(t){var e=this,n=this._private.pass[0].length,r=this.spreadSize();return t=t||function(t,e){return e>t?-1:t>e?1:0},e.require(t,"_$_$_cmp"),e.spread(function(t){var e=t.sort(_$_$_cmp);resolve(e)}).then(function(e){for(var i=function(r,i,a){i=Math.min(i,n),a=Math.min(a,n);for(var o=r,u=i,s=[],l=o;a>l;l++){var c=e[r],f=e[i];u>r&&(i>=a||t(c,f)<=0)?(s.push(c),r++):(s.push(f),i++)}for(var l=0;l<s.length;l++){var h=o+l;e[h]=s[l]}},a=r;n>a;a*=2)for(var o=0;n>o;o+=2*a)i(o,o+a,o+2*a);return e})}});var c=function(t){return t=t||{},function(e,n){var r=this._private.pass.shift();return this.random().pass(r)[t.threadFn](e,n)}};i.extend(l,{randomMap:c({threadFn:"map"}),reduce:c({threadFn:"reduce"}),reduceRight:c({threadFn:"reduceRight"})});var f=l;f.promise=f.run,f.terminate=f.halt=f.stop,f.include=f.require,i.extend(l,{on:u.on(),one:u.on({unbindSelfOnTrigger:!0}),off:u.off(),trigger:u.trigger()}),u.eventAliasesOn(l),e.exports=s},{"./define":41,"./is":77,"./promise":80,"./thread":92,"./util":94,os:void 0}],75:[function(t,e,n){"use strict";(function(){var t,r,i,a,o,u,s,l,c,f,h,d,p,g,v;i=Math.floor,f=Math.min,r=function(t,e){return e>t?-1:t>e?1:0},c=function(t,e,n,a,o){var u;if(null==n&&(n=0),null==o&&(o=r),0>n)throw new Error("lo must be non-negative");for(null==a&&(a=t.length);a>n;)u=i((n+a)/2),o(e,t[u])<0?a=u:n=u+1;return[].splice.apply(t,[n,n-n].concat(e)),e},u=function(t,e,n){return null==n&&(n=r),t.push(e),g(t,0,t.length-1,n)},o=function(t,e){var n,i;return null==e&&(e=r),n=t.pop(),t.length?(i=t[0],t[0]=n,v(t,0,e)):i=n,i},l=function(t,e,n){var i;return null==n&&(n=r),i=t[0],t[0]=e,v(t,0,n),i},s=function(t,e,n){var i;return null==n&&(n=r),t.length&&n(t[0],e)<0&&(i=[t[0],e],e=i[0],t[0]=i[1],v(t,0,n)),e},a=function(t,e){var n,a,o,u,s,l;for(null==e&&(e=r),u=function(){l=[];for(var e=0,n=i(t.length/2);n>=0?n>e:e>n;n>=0?e++:e--)l.push(e);return l}.apply(this).reverse(),s=[],a=0,o=u.length;o>a;a++)n=u[a],s.push(v(t,n,e));return s},p=function(t,e,n){var i;return null==n&&(n=r),i=t.indexOf(e),-1!==i?(g(t,0,i,n),v(t,i,n)):void 0},h=function(t,e,n){var i,o,u,l,c;if(null==n&&(n=r),o=t.slice(0,e),!o.length)return o;for(a(o,n),c=t.slice(e),u=0,l=c.length;l>u;u++)i=c[u],s(o,i,n);return o.sort(n).reverse()},d=function(t,e,n){var i,u,s,l,h,d,p,g,v,m;if(null==n&&(n=r),10*e<=t.length){if(l=t.slice(0,e).sort(n),!l.length)return l;for(s=l[l.length-1],g=t.slice(e),h=0,p=g.length;p>h;h++)i=g[h],n(i,s)<0&&(c(l,i,0,null,n),l.pop(),s=l[l.length-1]);return l}for(a(t,n),m=[],u=d=0,v=f(e,t.length);v>=0?v>d:d>v;u=v>=0?++d:--d)m.push(o(t,n));return m},g=function(t,e,n,i){var a,o,u;for(null==i&&(i=r),a=t[n];n>e&&(u=n-1>>1,o=t[u],i(a,o)<0);)t[n]=o,n=u;return t[n]=a},v=function(t,e,n){var i,a,o,u,s;for(null==n&&(n=r),a=t.length,s=e,o=t[e],i=2*e+1;a>i;)u=i+1,a>u&&!(n(t[i],t[u])<0)&&(i=u),t[e]=t[i],e=i,i=2*e+1;return t[e]=o,g(t,s,e,n)},t=function(){function t(t){this.cmp=null!=t?t:r,this.nodes=[]}return t.push=u,t.pop=o,t.replace=l,t.pushpop=s,t.heapify=a,t.updateItem=p,t.nlargest=h,t.nsmallest=d,t.prototype.push=function(t){return u(this.nodes,t,this.cmp)},t.prototype.pop=function(){return o(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return l(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return s(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return a(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return p(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return e=new t,e.nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),function(t,r){return"function"==typeof define&&define.amd?define([],r):"object"==typeof n?e.exports=r():t.Heap=r()}(this,function(){return t})}).call(this)},{}],76:[function(t,e,n){"use strict";var r=t("./window"),i=t("./is"),a=t("./core"),o=t("./extension"),u=t("./jquery-plugin"),s=t("./stylesheet"),l=t("./thread"),c=t("./fabric"),f=function(t){return void 0===t&&(t={}),i.plainObject(t)?new a(t):i.string(t)?o.apply(o,arguments):void 0};f.version="2.6.4",r&&r.jQuery&&u(r.jQuery,f),f.registerJquery=function(t){u(t,f)},f.stylesheet=f.Stylesheet=s,f.thread=f.Thread=l,f.fabric=f.Fabric=c,e.exports=f},{"./core":34,"./extension":43,"./fabric":74,"./is":77,"./jquery-plugin":78,"./stylesheet":91,"./thread":92,"./window":100}],77:[function(t,e,n){"use strict";var r=t("./window"),i=r?r.navigator:null,a="string",o=typeof{},u="function",s=typeof HTMLElement,l=function(t){return t&&t.instanceString&&c.fn(t.instanceString)?t.instanceString():null},c={defined:function(t){return null!=t},string:function(t){return null!=t&&typeof t==a},fn:function(t){return null!=t&&typeof t===u},array:function(t){return Array.isArray?Array.isArray(t):null!=t&&t instanceof Array},plainObject:function(t){return null!=t&&typeof t===o&&!c.array(t)&&t.constructor===Object},object:function(t){return null!=t&&typeof t===o},number:function(t){return null!=t&&"number"==typeof t&&!isNaN(t)},integer:function(t){return c.number(t)&&Math.floor(t)===t},bool:function(t){return null!=t&&typeof t==typeof!0},htmlElement:function(t){return"undefined"===s?void 0:null!=t&&t instanceof HTMLElement},elementOrCollection:function(t){return c.element(t)||c.collection(t)},element:function(t){return"collection"===l(t)&&t._private.single},collection:function(t){return"collection"===l(t)&&!t._private.single},core:function(t){return"core"===l(t)},style:function(t){return"style"===l(t)},stylesheet:function(t){return"stylesheet"===l(t)},event:function(t){return"event"===l(t)},thread:function(t){return"thread"===l(t)},fabric:function(t){return"fabric"===l(t)},emptyString:function(t){return t?c.string(t)&&(""===t||t.match(/^\s+$/))?!0:!1:!0},nonemptyString:function(t){return t&&c.string(t)&&""!==t&&!t.match(/^\s+$/)?!0:!1},domElement:function(t){return"undefined"==typeof HTMLElement?!1:t instanceof HTMLElement},boundingBox:function(t){return c.plainObject(t)&&c.number(t.x1)&&c.number(t.x2)&&c.number(t.y1)&&c.number(t.y2)},promise:function(t){return c.object(t)&&c.fn(t.then)},touch:function(){return r&&("ontouchstart"in r||r.DocumentTouch&&document instanceof DocumentTouch)},gecko:function(){return"undefined"!=typeof InstallTrigger||"MozAppearance"in document.documentElement.style},webkit:function(){return"undefined"!=typeof webkitURL||"WebkitAppearance"in document.documentElement.style},chromium:function(){return"undefined"!=typeof chrome},khtml:function(){return i&&i.vendor.match(/kde/i)},khtmlEtc:function(){return c.khtml()||c.webkit()||c.chromium()},ms:function(){return i&&i.userAgent.match(/msie|trident|edge/i)},windows:function(){return i&&i.appVersion.match(/Win/i)},mac:function(){return i&&i.appVersion.match(/Mac/i)},linux:function(){return i&&i.appVersion.match(/Linux/i)},unix:function(){return i&&i.appVersion.match(/X11/i)}};e.exports=c},{"./window":100}],78:[function(t,e,n){"use strict";var r=t("./is"),i=function(t){var e=t[0]._cyreg=t[0]._cyreg||{};return e},a=function(t,e){t&&(t.fn.cytoscape||(t.fn.cytoscape=function(n){var a=t(this);if("get"===n)return i(a).cy;if(r.fn(n)){var o=n,u=i(a).cy;if(u&&u.isReady())u.trigger("ready",[],o);else{var s=i(a),l=s.readies=s.readies||[];l.push(o)}}else if(r.plainObject(n))return a.each(function(){var r=t.extend({},n,{container:t(this)[0]});e(r)})},t.cytoscape=e,null==t.fn.cy&&null==t.cy&&(t.fn.cy=t.fn.cytoscape,t.cy=t.cytoscape)))};e.exports=a},{"./is":77}],79:[function(t,e,n){"use strict";var r={};r.signum=function(t){return t>0?1:0>t?-1:0},r.distance=function(t,e){return Math.sqrt(r.sqDistance(t,e))},r.sqDistance=function(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},r.qbezierAt=function(t,e,n,r){return(1-r)*(1-r)*t+2*(1-r)*r*e+r*r*n},r.qbezierPtAt=function(t,e,n,i){return{x:r.qbezierAt(t.x,e.x,n.x,i),y:r.qbezierAt(t.y,e.y,n.y,i)}},r.makeBoundingBox=function(t){if(null!=t.x1&&null!=t.y1){if(null!=t.x2&&null!=t.y2&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(null!=t.w&&null!=t.h&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},r.boundingBoxesIntersect=function(t,e){return t.x1>e.x2?!1:e.x1>t.x2?!1:t.x2<e.x1?!1:e.x2<t.x1?!1:t.y2<e.y1?!1:e.y2<t.y1?!1:t.y1>e.y2?!1:e.y1>t.y2?!1:!0},r.inBoundingBox=function(t,e,n){return t.x1<=e&&e<=t.x2&&t.y1<=n&&n<=t.y2},r.pointInBoundingBox=function(t,e){return this.inBoundingBox(t,e.x,e.y)},r.roundRectangleIntersectLine=function(t,e,n,r,i,a,o){var u,s=this.getRoundRectangleRadius(i,a),l=i/2,c=a/2,f=n-l+s-o,h=r-c-o,d=n+l-s+o,p=h;if(u=this.finiteLinesIntersect(t,e,n,r,f,h,d,p,!1),u.length>0)return u;var g=n+l+o,v=r-c+s-o,m=g,y=r+c-s+o;if(u=this.finiteLinesIntersect(t,e,n,r,g,v,m,y,!1),u.length>0)return u;var x=n-l+s-o,b=r+c+o,w=n+l-s+o,_=b;if(u=this.finiteLinesIntersect(t,e,n,r,x,b,w,_,!1),u.length>0)return u;var M=n-l-o,k=r-c+s-o,E=M,S=r+c-s+o;if(u=this.finiteLinesIntersect(t,e,n,r,M,k,E,S,!1),u.length>0)return u;var N,T=n-l+s,C=r-c+s;if(N=this.intersectLineCircle(t,e,n,r,T,C,s+o),N.length>0&&N[0]<=T&&N[1]<=C)return[N[0],N[1]];var D=n+l-s,P=r-c+s;if(N=this.intersectLineCircle(t,e,n,r,D,P,s+o),N.length>0&&N[0]>=D&&N[1]<=P)return[N[0],N[1]];var A=n+l-s,z=r+c-s;if(N=this.intersectLineCircle(t,e,n,r,A,z,s+o),N.length>0&&N[0]>=A&&N[1]>=z)return[N[0],N[1]];var L=n-l+s,I=r+c-s;return N=this.intersectLineCircle(t,e,n,r,L,I,s+o),N.length>0&&N[0]<=L&&N[1]>=I?[N[0],N[1]]:[]},r.inLineVicinity=function(t,e,n,r,i,a,o){var u=o,s=Math.min(n,i),l=Math.max(n,i),c=Math.min(r,a),f=Math.max(r,a);return t>=s-u&&l+u>=t&&e>=c-u&&f+u>=e},r.inBezierVicinity=function(t,e,n,r,i,a,o,u,s){var l={x1:Math.min(n,o,i)-s,x2:Math.max(n,o,i)+s,y1:Math.min(r,u,a)-s,y2:Math.max(r,u,a)+s};return t<l.x1||t>l.x2||e<l.y1||e>l.y2?!1:!0},r.solveCubic=function(t,e,n,r,i){e/=t,n/=t,r/=t;var a,o,u,s,l,c,f,h;return o=(3*n-e*e)/9,u=-(27*r)+e*(9*n-2*(e*e)),u/=54,a=o*o*o+u*u,i[1]=0,f=e/3,a>0?(l=u+Math.sqrt(a),l=0>l?-Math.pow(-l,1/3):Math.pow(l,1/3),c=u-Math.sqrt(a),c=0>c?-Math.pow(-c,1/3):Math.pow(c,1/3),i[0]=-f+l+c,f+=(l+c)/2,i[4]=i[2]=-f,f=Math.sqrt(3)*(-c+l)/2,i[3]=f,void(i[5]=-f)):(i[5]=i[3]=0,0===a?(h=0>u?-Math.pow(-u,1/3):Math.pow(u,1/3),i[0]=-f+2*h,void(i[4]=i[2]=-(h+f))):(o=-o,s=o*o*o,s=Math.acos(u/Math.sqrt(s)),h=2*Math.sqrt(o),i[0]=-f+h*Math.cos(s/3),i[2]=-f+h*Math.cos((s+2*Math.PI)/3),void(i[4]=-f+h*Math.cos((s+4*Math.PI)/3))))},r.sqDistanceToQuadraticBezier=function(t,e,n,r,i,a,o,u){var s=1*n*n-4*n*i+2*n*o+4*i*i-4*i*o+o*o+r*r-4*r*a+2*r*u+4*a*a-4*a*u+u*u,l=9*n*i-3*n*n-3*n*o-6*i*i+3*i*o+9*r*a-3*r*r-3*r*u-6*a*a+3*a*u,c=3*n*n-6*n*i+n*o-n*t+2*i*i+2*i*t-o*t+3*r*r-6*r*a+r*u-r*e+2*a*a+2*a*e-u*e,f=1*n*i-n*n+n*t-i*t+r*a-r*r+r*e-a*e,h=[];this.solveCubic(s,l,c,f,h);for(var d=1e-7,p=[],g=0;6>g;g+=2)Math.abs(h[g+1])<d&&h[g]>=0&&h[g]<=1&&p.push(h[g]);p.push(1),p.push(0);for(var v,m,y,x,b=-1,w=0;w<p.length;w++)m=Math.pow(1-p[w],2)*n+2*(1-p[w])*p[w]*i+p[w]*p[w]*o,y=Math.pow(1-p[w],2)*r+2*(1-p[w])*p[w]*a+p[w]*p[w]*u,x=Math.pow(m-t,2)+Math.pow(y-e,2),b>=0?b>x&&(b=x,v=p[w]):(b=x,v=p[w]);return b},r.sqDistanceToFiniteLine=function(t,e,n,r,i,a){var o=[t-n,e-r],u=[i-n,a-r],s=u[0]*u[0]+u[1]*u[1],l=o[0]*o[0]+o[1]*o[1],c=o[0]*u[0]+o[1]*u[1],f=c*c/s;return 0>c?l:f>s?(t-i)*(t-i)+(e-a)*(e-a):l-f},r.pointInsidePolygonPoints=function(t,e,n){for(var r,i,a,o,u,s=0,l=0,c=0;c<n.length/2;c++)if(r=n[2*c],i=n[2*c+1],c+1<n.length/2?(a=n[2*(c+1)],o=n[2*(c+1)+1]):(a=n[2*(c+1-n.length/2)],o=n[2*(c+1-n.length/2)+1]),r==t&&a==t);else{if(!(r>=t&&t>=a||t>=r&&a>=t))continue;u=(t-r)/(a-r)*(o-i)+i,u>e&&s++,e>u&&l++}return s%2===0?!1:!0},r.pointInsidePolygon=function(t,e,n,i,a,o,u,s,l){var c,f=new Array(n.length);null!=s[0]?(c=Math.atan(s[1]/s[0]),s[0]<0?c+=Math.PI/2:c=-c-Math.PI/2):c=s;for(var h=Math.cos(-c),d=Math.sin(-c),p=0;p<f.length/2;p++)f[2*p]=o/2*(n[2*p]*h-n[2*p+1]*d),f[2*p+1]=u/2*(n[2*p+1]*h+n[2*p]*d),f[2*p]+=i,f[2*p+1]+=a;var g;if(l>0){var v=this.expandPolygon(f,-l);g=this.joinLines(v)}else g=f;return r.pointInsidePolygonPoints(t,e,g)},r.joinLines=function(t){for(var e,n,r,i,a,o,u,s,l=new Array(t.length/2),c=0;c<t.length/4;c++){e=t[4*c],n=t[4*c+1],r=t[4*c+2],i=t[4*c+3],c<t.length/4-1?(a=t[4*(c+1)],o=t[4*(c+1)+1],u=t[4*(c+1)+2],s=t[4*(c+1)+3]):(a=t[0],o=t[1],u=t[2],s=t[3]);var f=this.finiteLinesIntersect(e,n,r,i,a,o,u,s,!0);l[2*c]=f[0],l[2*c+1]=f[1]}return l},r.expandPolygon=function(t,e){for(var n,r,i,a,o=new Array(2*t.length),u=0;u<t.length/2;u++){n=t[2*u],r=t[2*u+1],u<t.length/2-1?(i=t[2*(u+1)],a=t[2*(u+1)+1]):(i=t[0],a=t[1]);var s=a-r,l=-(i-n),c=Math.sqrt(s*s+l*l),f=s/c,h=l/c;o[4*u]=n+f*e,o[4*u+1]=r+h*e,o[4*u+2]=i+f*e,o[4*u+3]=a+h*e}return o},r.intersectLineEllipse=function(t,e,n,r,i,a){var o=n-t,u=r-e;o/=i,u/=a;var s=Math.sqrt(o*o+u*u),l=s-1;if(0>l)return[];var c=l/s;return[(n-t)*c+t,(r-e)*c+e]},r.intersectLineCircle=function(t,e,n,r,i,a,o){var u=[n-t,r-e],s=[i,a],l=[t-i,e-a],c=u[0]*u[0]+u[1]*u[1],f=2*(l[0]*u[0]+l[1]*u[1]),s=l[0]*l[0]+l[1]*l[1]-o*o,h=f*f-4*c*s;if(0>h)return[];var d=(-f+Math.sqrt(h))/(2*c),p=(-f-Math.sqrt(h))/(2*c),g=Math.min(d,p),v=Math.max(d,p),m=[];if(g>=0&&1>=g&&m.push(g),v>=0&&1>=v&&m.push(v),0===m.length)return[];var y=m[0]*u[0]+t,x=m[0]*u[1]+e;if(m.length>1){if(m[0]==m[1])return[y,x];var b=m[1]*u[0]+t,w=m[1]*u[1]+e;return[y,x,b,w]}return[y,x]},r.findCircleNearPoint=function(t,e,n,r,i){var a=r-t,o=i-e,u=Math.sqrt(a*a+o*o),s=a/u,l=o/u;return[t+s*n,e+l*n]},r.findMaxSqDistanceToOrigin=function(t){for(var e,n=1e-6,r=0;r<t.length/2;r++)e=t[2*r]*t[2*r]+t[2*r+1]*t[2*r+1],e>n&&(n=e);return n},r.finiteLinesIntersect=function(t,e,n,r,i,a,o,u,s){var l=(o-i)*(e-a)-(u-a)*(t-i),c=(n-t)*(e-a)-(r-e)*(t-i),f=(u-a)*(n-t)-(o-i)*(r-e);if(0!==f){var h=l/f,d=c/f;return h>=0&&1>=h&&d>=0&&1>=d?[t+h*(n-t),e+h*(r-e)]:s?[t+h*(n-t),e+h*(r-e)]:[]}return 0===l||0===c?[t,n,o].sort()[1]===o?[o,u]:[t,n,i].sort()[1]===i?[i,a]:[i,o,n].sort()[1]===n?[n,r]:[]:[]},r.polygonIntersectLine=function(t,e,n,i,a,o,u,s){for(var l,c=[],f=new Array(n.length),h=0;h<f.length/2;h++)f[2*h]=n[2*h]*o+i,f[2*h+1]=n[2*h+1]*u+a;var d;if(s>0){var p=r.expandPolygon(f,-s);d=r.joinLines(p)}else d=f;for(var g,v,m,y,h=0;h<d.length/2;h++)g=d[2*h],v=d[2*h+1],h<d.length/2-1?(m=d[2*(h+1)],y=d[2*(h+1)+1]):(m=d[0],y=d[1]),l=this.finiteLinesIntersect(t,e,i,a,g,v,m,y),0!==l.length&&c.push(l[0],l[1]);return c},r.shortenIntersection=function(t,e,n){var r=[t[0]-e[0],t[1]-e[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=(i-n)/i;return 0>a&&(a=1e-5),[e[0]+a*r[0],e[1]+a*r[1]]},r.generateUnitNgonPointsFitToSquare=function(t,e){var n=r.generateUnitNgonPoints(t,e);return n=r.fitPolygonToSquare(n)},r.fitPolygonToSquare=function(t){for(var e,n,r=t.length/2,i=1/0,a=1/0,o=-(1/0),u=-(1/0),s=0;r>s;s++)e=t[2*s],n=t[2*s+1],i=Math.min(i,e),o=Math.max(o,e),a=Math.min(a,n),u=Math.max(u,n);for(var l=2/(o-i),c=2/(u-a),s=0;r>s;s++)e=t[2*s]=t[2*s]*l,n=t[2*s+1]=t[2*s+1]*c,i=Math.min(i,e),o=Math.max(o,e),a=Math.min(a,n),u=Math.max(u,n);if(-1>a)for(var s=0;r>s;s++)n=t[2*s+1]=t[2*s+1]+(-1-a);return t},r.generateUnitNgonPoints=function(t,e){var n=1/t*2*Math.PI,r=t%2===0?Math.PI/2+n/2:Math.PI/2;r+=e;for(var i,a,o,u=new Array(2*t),s=0;t>s;s++)i=s*n+r,a=u[2*s]=Math.cos(i),o=u[2*s+1]=Math.sin(-i);return u},r.getRoundRectangleRadius=function(t,e){return Math.min(t/4,e/4,8)},e.exports=r},{}],80:[function(t,e,n){"use strict";var r=0,i=1,a=2,o=function(t){return this instanceof o?(this.id="Thenable/1.0.7",this.state=r,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},void("function"==typeof t&&t.call(this,this.fulfill.bind(this),this.reject.bind(this)))):new o(t)};o.prototype={fulfill:function(t){return u(this,i,"fulfillValue",t)},reject:function(t){return u(this,a,"rejectReason",t)},then:function(t,e){var n=this,r=new o;return n.onFulfilled.push(c(t,r,"fulfill")),n.onRejected.push(c(e,r,"reject")),s(n),r.proxy}};var u=function(t,e,n,i){return t.state===r&&(t.state=e,t[n]=i,s(t)),t},s=function(t){t.state===i?l(t,"onFulfilled",t.fulfillValue):t.state===a&&l(t,"onRejected",t.rejectReason)},l=function(t,e,n){if(0!==t[e].length){var r=t[e];t[e]=[];var i=function(){for(var t=0;t<r.length;t++)r[t](n)};"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},c=function(t,e,n){return function(r){if("function"!=typeof t)e[n].call(e,r);else{var i;try{i=t(r)}catch(a){return void e.reject(a)}f(e,i)}}},f=function(t,e){if(t===e||t.proxy===e)return void t.reject(new TypeError("cannot resolve promise with itself"));var n;if("object"==typeof e&&null!==e||"function"==typeof e)try{n=e.then}catch(r){return void t.reject(r)}if("function"!=typeof n)t.fulfill(e);else{var i=!1;try{n.call(e,function(n){i||(i=!0,n===e?t.reject(new TypeError("circular thenable chain")):f(t,n))},function(e){i||(i=!0,t.reject(e))})}catch(r){i||t.reject(r)}}},h="undefined"==typeof h?o:h;h.all=h.all||function(t){return new h(function(e,n){for(var r=new Array(t.length),i=0,a=function(n,a){r[n]=a,i++,i===t.length&&e(r)},o=0;o<t.length;o++)!function(e){var r=t[e],i=null!=r.then;if(i)r.then(function(t){a(e,t)},function(t){n(t)});else{var o=r;a(e,o)}}(o)})},e.exports=h},{}],81:[function(t,e,n){"use strict";var r=t("./is"),i=t("./util"),a=function(t,e){if(!(this instanceof a))return new a(t,e);void 0===e&&void 0!==t&&(e=t,t=void 0);var n=this;if(n._private={selectorText:null,invalid:!0},!e||r.string(e)&&e.match(/^\s*$/))null==t?n.length=0:(n[0]=s(),n[0].group=t,n.length=1);else if(r.elementOrCollection(e)){var o=e.collection();n[0]=s(),n[0].collection=o,n.length=1}else if(r.fn(e))n[0]=s(),n[0].filter=e,n.length=1;else{if(!r.string(e))return void i.error("A selector must be created from a string; found "+e);var u=null,s=function(){return{classes:[],colonSelectors:[],data:[],
group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}},l={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])+"|'+"'(?:\\\\'|[^'])+'",number:i.regex.number,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$"};l.variable="(?:[\\w-]|(?:\\\\"+l.metaChar+"))+",l.value=l.string+"|"+l.number,l.className=l.variable,l.id=l.variable;for(var c=function(t){return t.replace(new RegExp("\\\\("+l.metaChar+")","g"),function(t,e,n,r){return e})},f=l.comparatorOp.split("|"),h=0;h<f.length;h++){var d=f[h];l.comparatorOp+="|@"+d}for(var f=l.comparatorOp.split("|"),h=0;h<f.length;h++){var d=f[h];d.indexOf("!")>=0||"="!==d&&(l.comparatorOp+="|\\!"+d)}var p=[{name:"group",query:!0,regex:"(node|edge|\\*)",populate:function(t){this.group="*"==t?t:t+"s"}},{name:"state",query:!0,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:transparent|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:orphan|:nonorphan|:parent|:child|:loop|:simple|:active|:inactive|:touch|:backgrounding|:nonbackgrounding)",populate:function(t){this.colonSelectors.push(t)}},{name:"id",query:!0,regex:"\\#("+l.id+")",populate:function(t){this.ids.push(c(t))}},{name:"className",query:!0,regex:"\\.("+l.className+")",populate:function(t){this.classes.push(c(t))}},{name:"dataExists",query:!0,regex:"\\[\\s*("+l.variable+")\\s*\\]",populate:function(t){this.data.push({field:c(t)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+l.variable+")\\s*("+l.comparatorOp+")\\s*("+l.value+")\\s*\\]",populate:function(t,e,n){var r=null!=new RegExp("^"+l.string+"$").exec(n);n=r?n.substring(1,n.length-1):parseFloat(n),this.data.push({field:c(t),operator:e,value:n})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+l.boolOp+")\\s*("+l.variable+")\\s*\\]",populate:function(t,e){this.data.push({field:c(e),operator:t})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+l.meta+")\\s*("+l.comparatorOp+")\\s*("+l.number+")\\s*\\]\\]",populate:function(t,e,n){this.meta.push({field:c(t),operator:e,value:parseFloat(n)})}},{name:"nextQuery",separator:!0,regex:l.separator,populate:function(){n[++h]=s(),u=null}},{name:"child",separator:!0,regex:l.child,populate:function(){var t=s();t.parent=this,t.subject=u,n[h]=t}},{name:"descendant",separator:!0,regex:l.descendant,populate:function(){var t=s();t.ancestor=this,t.subject=u,n[h]=t}},{name:"subject",modifier:!0,regex:l.subject,populate:function(){return null!=u&&this.subject!=this?(i.error("Redefinition of subject in selector `"+e+"`"),!1):(u=this,void(this.subject=this))}}];n._private.selectorText=e;var g=e,h=0,v=function(t){for(var e,n,i,a=0;a<p.length;a++){var o=p[a],u=o.name;if(!r.fn(t)||t(u,o)){var s=g.match(new RegExp("^"+o.regex));if(null!=s){n=s,e=o,i=u;var l=s[0];g=g.substring(l.length);break}}}return{expr:e,match:n,name:i}},m=function(){var t=g.match(/^\s+/);if(t){var e=t[0];g=g.substring(e.length)}};for(n[0]=s(),m();;){var y=v();if(null==y.expr)return void i.error("The selector `"+e+"`is invalid");for(var x=[],b=1;b<y.match.length;b++)x.push(y.match[b]);var w=y.expr.populate.apply(n[h],x);if(w===!1)return;if(g.match(/^\s*$/))break}n.length=h+1;for(var b=0;b<n.length;b++){var _=n[b];if(null!=_.subject){for(;_.subject!=_;)if(null!=_.parent){var M=_.parent,k=_;k.parent=null,M.child=k,_=M}else{if(null==_.ancestor){i.error("When adjusting references for the selector `"+_+"`, neither parent nor ancestor was found");break}var E=_.ancestor,S=_;S.ancestor=null,E.descendant=S,_=E}n[b]=_.subject}}if(null!=t)for(var b=0;b<n.length;b++){if(null!=n[b].group&&n[b].group!=t)return void i.error("Group `"+n[b].group+"` conflicts with implicit group `"+t+"` in selector `"+e+"`");n[b].group=t}}n._private.invalid=!1},o=a.prototype;o.size=function(){return this.length},o.eq=function(t){return this[t]};var u=function(t,e){if(null!=t.group&&"*"!=t.group&&t.group!=e._private.group)return!1;for(var n=e.cy(),i=!0,a=0;a<t.colonSelectors.length;a++){var o=t.colonSelectors[a];switch(o){case":selected":i=e.selected();break;case":unselected":i=!e.selected();break;case":selectable":i=e.selectable();break;case":unselectable":i=!e.selectable();break;case":locked":i=e.locked();break;case":unlocked":i=!e.locked();break;case":visible":i=e.visible();break;case":hidden":i=!e.visible();break;case":transparent":i=e.transparent();break;case":grabbed":i=e.grabbed();break;case":free":i=!e.grabbed();break;case":removed":i=e.removed();break;case":inside":i=!e.removed();break;case":grabbable":i=e.grabbable();break;case":ungrabbable":i=!e.grabbable();break;case":animated":i=e.animated();break;case":unanimated":i=!e.animated();break;case":parent":i=e.isNode()&&e.children().nonempty();break;case":child":case":nonorphan":i=e.isNode()&&e.parent().nonempty();break;case":orphan":i=e.isNode()&&e.parent().empty();break;case":loop":i=e.isEdge()&&e.data("source")===e.data("target");break;case":simple":i=e.isEdge()&&e.data("source")!==e.data("target");break;case":active":i=e.active();break;case":inactive":i=!e.active();break;case":touch":i=r.touch();break;case":backgrounding":i=e.backgrounding();break;case":nonbackgrounding":i=!e.backgrounding()}if(!i)break}if(!i)return!1;for(var s=!0,a=0;a<t.ids.length;a++){var l=t.ids[a],c=e._private.data.id;if(s=s&&l==c,!s)break}if(!s)return!1;for(var f=!0,a=0;a<t.classes.length;a++){var h=t.classes[a];if(f=f&&e.hasClass(h),!f)break}if(!f)return!1;var d=function(e){for(var n=!0,i=0;i<t[e.name].length;i++){var a,o=t[e.name][i],u=o.operator,s=o.value,l=o.field;if(null!=u&&null!=s){var c=e.fieldValue(l),f=r.string(c)||r.number(c)?""+c:"",h=""+s,d=!1;u.indexOf("@")>=0&&(f=f.toLowerCase(),h=h.toLowerCase(),u=u.replace("@",""),d=!0);var p=!1,g=!1;switch(u.indexOf("!")>=0&&(u=u.replace("!",""),p=!0),d&&(s=h.toLowerCase(),c=f.toLowerCase()),u){case"*=":a=f.search(h)>=0;break;case"$=":a=null!=new RegExp(h+"$").exec(f);break;case"^=":a=null!=new RegExp("^"+h).exec(f);break;case"=":a=c===s;break;case"!=":a=c!==s;break;case">":a=p?s>=c:c>s,g=!0;break;case">=":a=p?s>c:c>=s,g=!0;break;case"<":a=p?c>=s:s>c,g=!0;break;case"<=":a=p?c>s:s>=c,g=!0;break;default:a=!1}}else if(null!=u)switch(u){case"?":a=e.fieldTruthy(l);break;case"!":a=!e.fieldTruthy(l);break;case"^":a=e.fieldUndefined(l)}else a=!e.fieldUndefined(l);if(p&&!g&&(a=!a,g=!0),!a){n=!1;break}}return n},p=d({name:"data",fieldValue:function(t){return e._private.data[t]},fieldRef:function(t){return"element._private.data."+t},fieldUndefined:function(t){return void 0===e._private.data[t]},fieldTruthy:function(t){return e._private.data[t]?!0:!1}});if(!p)return!1;var g=d({name:"meta",fieldValue:function(t){return e[t]()},fieldRef:function(t){return"element."+t+"()"},fieldUndefined:function(t){return null==e[t]()},fieldTruthy:function(t){return e[t]()?!0:!1}});if(!g)return!1;if(null!=t.collection){var v=null!=t.collection._private.ids[e.id()];if(!v)return!1}if(null!=t.filter&&0===e.collection().filter(t.filter).size())return!1;var m=function(t,e){if(null!=t){var r=!1;if(!n.hasCompoundNodes())return!1;e=e();for(var i=0;i<e.length;i++)if(u(t,e[i])){r=!0;break}return r}return!0};return m(t.parent,function(){return e.parent()})&&m(t.ancestor,function(){return e.parents()})&&m(t.child,function(){return e.children()})&&m(t.descendant,function(){return e.descendants()})?!0:!1};o.filter=function(t){var e=this,n=t.cy();if(e._private.invalid)return n.collection();var r=function(t,n){for(var r=0;r<e.length;r++){var i=e[r];if(u(i,n))return!0}return!1};null==e._private.selectorText&&(r=function(){return!0});var i=t.filter(r);return i},o.matches=function(t){var e=this;if(e._private.invalid)return!1;for(var n=0;n<e.length;n++){var r=e[n];if(u(r,t))return!0}return!1},o.toString=o.selector=function(){for(var t="",e=function(t,e){return r.string(t)?e?'"'+t+'"':t:""},n=function(t){var r="";t.subject===t&&(r+="$");var a=e(t.group);r+=a.substring(0,a.length-1);for(var o=0;o<t.data.length;o++){var u=t.data[o];r+=u.value?"["+u.field+e(u.operator)+e(u.value,!0)+"]":"["+e(u.operator)+u.field+"]"}for(var o=0;o<t.meta.length;o++){var s=t.meta[o];r+="[["+s.field+e(s.operator)+e(s.value,!0)+"]]"}for(var o=0;o<t.colonSelectors.length;o++){var l=t.colonSelectors[i];r+=l}for(var o=0;o<t.ids.length;o++){var l="#"+t.ids[i];r+=l}for(var o=0;o<t.classes.length;o++){var l="."+t.classes[o];r+=l}return null!=t.parent&&(r=n(t.parent)+" > "+r),null!=t.ancestor&&(r=n(t.ancestor)+" "+r),null!=t.child&&(r+=" > "+n(t.child)),null!=t.descendant&&(r+=" "+n(t.descendant)),r},i=0;i<this.length;i++){var a=this[i];t+=n(a),this.length>1&&i<this.length-1&&(t+=", ")}return t},e.exports=a},{"./is":77,"./util":94}],82:[function(t,e,n){"use strict";var r=t("../util"),i=t("../is"),a={};a.apply=function(t){var e=this;e._private.newStyle&&(this._private.contextStyles={},this._private.propDiffs={});for(var n=0;n<t.length;n++){var r=t[n],i=e.getContextMeta(r),a=e.getContextStyle(i),o=e.applyContextStyle(i,a,r);e.updateTransitions(r,o.diffProps),e.updateStyleHints(r)}e._private.newStyle=!1},a.getPropertiesDiff=function(t,e){var n=this,r=n._private.propDiffs=n._private.propDiffs||{},i=t+"-"+e,a=r[i];if(a)return a;for(var o=[],u={},s=0;s<n.length;s++){var l=n[s],c="t"===t[s],f="t"===e[s],h=c!==f,d=l.mappedProperties.length>0;if(h||d){var p;h&&d?p=l.properties:h?p=l.properties:d&&(p=l.mappedProperties);for(var g=0;g<p.length;g++){for(var v=p[g],m=v.name,y=!1,x=s+1;x<n.length;x++){var b=n[x],w="t"===e[x];if(w&&(y=null!=b.properties[v.name]))break}u[m]||y||(u[m]=!0,o.push(m))}}}return r[i]=o,o},a.getContextMeta=function(t){var e,n=this,r="",i=t._private.styleCxtKey||"";n._private.newStyle&&(i="");for(var a=0;a<n.length;a++){var o=n[a],u=o.selector&&o.selector.matches(t);r+=u?"t":"f"}return e=n.getPropertiesDiff(i,r),t._private.styleCxtKey=r,{key:r,diffPropNames:e}},a.getContextStyle=function(t){var e=t.key,n=this,r=this._private.contextStyles=this._private.contextStyles||{};if(r[e])return r[e];for(var i={_private:{key:e}},a=0;a<n.length;a++){var o=n[a],u="t"===e[a];if(u)for(var s=0;s<o.properties.length;s++){var l=o.properties[s],c=i[l.name]=l;c.context=o}}return r[e]=i,i},a.applyContextStyle=function(t,e,n){for(var r=this,i=t.diffPropNames,a={},o=0;o<i.length;o++){var u=i[o],s=e[u],l=n._private.style[u];if(s&&l!==s){var c=a[u]={prev:l};r.applyParsedProperty(n,s),c.next=n._private.style[u],c.next&&c.next.bypass&&(c.next=c.next.bypassed)}}return{diffProps:a}},a.updateStyleHints=function(t){var e=t._private,n=this,r=e.style;if(!t.removed()){var i=!1;if("nodes"===e.group&&n._private.hasPie)for(var a=1;a<=n.pieBackgroundN;a++){var o=e.style["pie-"+a+"-background-size"].value;if(o>0){i=!0;break}}e.hasPie=i;var u=r["text-transform"].strValue,s=r.label.strValue,l=r["font-style"].strValue,o=r["font-size"].pfValue+"px",c=r["font-family"].strValue,f=r["font-weight"].strValue,h=r["text-valign"].strValue,d=r["text-valign"].strValue,p=r["text-outline-width"].pfValue,g=r["text-wrap"].strValue,v=r["text-max-width"].pfValue;e.labelKey=l+"$"+o+"$"+c+"$"+f+"$"+s+"$"+u+"$"+h+"$"+d+"$"+p+"$"+g+"$"+v,e.fontKey=l+"$"+f+"$"+o+"$"+c;var m=r.width.pfValue,y=r.height.pfValue,x=r["border-width"].pfValue;if(e.boundingBoxKey=m+"$"+y+"$"+x,"edges"===t._private.group){var b=r["control-point-step-size"].pfValue,w=r["control-point-distances"]?r["control-point-distances"].pfValue.join("_"):void 0,_=r["control-point-weights"].value.join("_"),M=r["curve-style"].strValue,k=r["segment-distances"]?r["segment-distances"].pfValue.join("_"):void 0,E=r["segment-weights"].value.join("_");e.boundingBoxKey+="$"+b+"$"+w+"$"+_+"$"+k+"$"+E+"$"+M}e.styleKey=Date.now()}},a.applyParsedProperty=function(t,e){var n,a,o=this,u=e,s=t._private.style,l=o.types,c=o.properties[u.name].type,f=u.bypass,h=s[u.name],d=h&&h.bypass,p=t._private;if(("height"===e.name||"width"===e.name)&&t.isNode()){if("auto"===e.value&&!t.isParent())return!1;"auto"!==e.value&&t.isParent()&&(u=e=this.parse(e.name,"auto",f))}if(f&&u.deleteBypass){var g=s[u.name];return g?g.bypass&&g.bypassed?(s[u.name]=g.bypassed,!0):!1:!0}var v=function(){r.error("Do not assign mappings to elements without corresponding data (e.g. ele `"+t.id()+"` for property `"+u.name+"` with data field `"+u.field+"`); try a `["+u.field+"]` selector to limit scope to elements with `"+u.field+"` defined")};switch(u.mapped){case l.mapData:case l.mapLayoutData:case l.mapScratch:var n,m=u.mapped===l.mapLayoutData,y=u.mapped===l.mapScratch,x=u.field.split(".");n=y||m?p.scratch:p.data;for(var b=0;b<x.length&&n;b++){var w=x[b];n=n[w]}var _;if(_=i.number(n)?(n-u.fieldMin)/(u.fieldMax-u.fieldMin):0,0>_?_=0:_>1&&(_=1),c.color){var M=u.valueMin[0],k=u.valueMax[0],E=u.valueMin[1],S=u.valueMax[1],N=u.valueMin[2],T=u.valueMax[2],C=null==u.valueMin[3]?1:u.valueMin[3],D=null==u.valueMax[3]?1:u.valueMax[3],P=[Math.round(M+(k-M)*_),Math.round(E+(S-E)*_),Math.round(N+(T-N)*_),Math.round(C+(D-C)*_)];a={bypass:u.bypass,name:u.name,value:P,strValue:"rgb("+P[0]+", "+P[1]+", "+P[2]+")"}}else{if(!c.number)return!1;var A=u.valueMin+(u.valueMax-u.valueMin)*_;a=this.parse(u.name,A,u.bypass,!0)}a||(a=this.parse(u.name,h.strValue,u.bypass,!0)),a||v(),a.mapping=u,u=a;break;case l.data:case l.layoutData:case l.scratch:var n,m=u.mapped===l.layoutData,y=u.mapped===l.scratch,x=u.field.split(".");if(n=y||m?p.scratch:p.data)for(var b=0;b<x.length;b++){var w=x[b];n=n[w]}if(a=this.parse(u.name,n,u.bypass,!0),!a){var z=h?h.strValue:"";a=this.parse(u.name,z,u.bypass,!0)}a||v(),a.mapping=u,u=a;break;case l.fn:var L=u.value,I=L(t);a=this.parse(u.name,I,u.bypass,!0),a.mapping=u,u=a;break;case void 0:break;default:return!1}return f?(d?u.bypassed=h.bypassed:u.bypassed=h,s[u.name]=u):d?h.bypassed=u:s[u.name]=u,!0},a.update=function(){var t=this._private.cy,e=t.elements();e.updateStyle()},a.updateMappers=function(t){for(var e=this,n=0;n<t.length;n++){for(var r=t[n],i=r._private.style,a=0;a<e.properties.length;a++){var o=e.properties[a],u=i[o.name];if(u&&u.mapping){var s=u.mapping;this.applyParsedProperty(r,s)}}this.updateStyleHints(r)}},a.updateTransitions=function(t,e,n){var r=this,a=t._private,o=a.style,u=o["transition-property"].value,s=o["transition-duration"].pfValue,l=o["transition-delay"].pfValue,c={};if(u.length>0&&s>0){for(var f=!1,h=0;h<u.length;h++){var d=u[h],p=o[d],g=e[d];if(g){var v,m=g.prev,y=m,x=null!=g.next?g.next:p,b=!1,w=1e-6;y&&(i.number(y.pfValue)&&i.number(x.pfValue)?(b=x.pfValue-y.pfValue,v=y.pfValue+w*b):i.number(y.value)&&i.number(x.value)?(b=x.value-y.value,v=y.value+w*b):i.array(y.value)&&i.array(x.value)&&(b=y.value[0]!==x.value[0]||y.value[1]!==x.value[1]||y.value[2]!==x.value[2],v=y.strValue),b&&(c[d]=x.strValue,this.applyBypass(t,d,v),f=!0))}}if(!f)return;a.transitioning=!0,t.stop(),l>0&&t.delay(l),t.animate({css:c},{duration:s,easing:o["transition-timing-function"].value,queue:!1,complete:function(){n||r.removeBypasses(t,u),a.transitioning=!1}})}else a.transitioning&&(t.stop(),this.removeBypasses(t,u),a.transitioning=!1)},e.exports=a},{"../is":77,"../util":94}],83:[function(t,e,n){"use strict";var r=t("../is"),i=t("../util"),a={};a.applyBypass=function(t,e,n,a){var o=this,u=[],s=!0;if("*"===e||"**"===e){if(void 0!==n)for(var l=0;l<o.properties.length;l++){var c=o.properties[l],e=c.name,f=this.parse(e,n,!0);f&&u.push(f)}}else if(r.string(e)){var f=this.parse(e,n,!0);f&&u.push(f)}else{if(!r.plainObject(e))return!1;var h=e;a=n;for(var l=0;l<o.properties.length;l++){var c=o.properties[l],e=c.name,n=h[e];if(void 0===n&&(n=h[i.dash2camel(e)]),void 0!==n){var f=this.parse(e,n,!0);f&&u.push(f)}}}if(0===u.length)return!1;for(var d=!1,l=0;l<t.length;l++){for(var p,g=t[l],v=g._private.style,m={},y=0;y<u.length;y++){var c=u[y];if(a){var x=v[c.name];p=m[c.name]={prev:x}}d=this.applyParsedProperty(g,c)||d,a&&(p.next=v[c.name])}d&&this.updateStyleHints(g),a&&this.updateTransitions(g,m,s)}return d},a.overrideBypass=function(t,e,n){e=i.camel2dash(e);for(var r=0;r<t.length;r++){var a=t[r],o=a._private.style[e],u=this.properties[e].type,s=u.color,l=u.mutiple;o.bypass?(o.value=n,null!=o.pfValue&&(o.pfValue=n),s?o.strValue="rgb("+n.join(",")+")":l?o.strValue=n.join(" "):o.strValue=""+n):this.applyBypass(a,e,n)}},a.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)},a.removeBypasses=function(t,e,n){for(var r=!0,i=0;i<t.length;i++){for(var a=t[i],o={},u=a._private.style,s=0;s<e.length;s++){var l=e[s],c=this.properties[l],f="",h=this.parse(l,f,!0),d=u[c.name],p=o[c.name]={prev:d};this.applyParsedProperty(a,h),p.next=u[c.name]}this.updateStyleHints(a),n&&this.updateTransitions(a,o,r)}},e.exports=a},{"../is":77,"../util":94}],84:[function(t,e,n){"use strict";var r=t("../window"),i={};i.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return null!=t?parseFloat(t):1},i.containerCss=function(t){var e=this._private.cy,n=e.container();return r&&n&&r.getComputedStyle?r.getComputedStyle(n).getPropertyValue(t):void 0},e.exports=i},{"../window":100}],85:[function(t,e,n){"use strict";var r=t("../util"),i=t("../is"),a={};a.getRenderedStyle=function(t){return this.getRawStyle(t,!0)},a.getRawStyle=function(t,e){var n=this,t=t[0];if(t){for(var i={},a=0;a<n.properties.length;a++){var o=n.properties[a],u=n.getStylePropertyValue(t,o.name,e);u&&(i[o.name]=u,i[r.dash2camel(o.name)]=u)}return i}},a.getStylePropertyValue=function(t,e,n){var r=this,t=t[0];if(t){var i=t._private.style,a=r.properties[e],o=a.type,u=i[a.name],s=t.cy().zoom();if(u){var l=u.units?o.implicitUnits||"px":null,c=l?[].concat(u.pfValue).map(function(t){return t*(n?s:1)+l}).join(" "):u.strValue;return c}}},a.getValueStyle=function(t){var e,n=this,a={},o=i.element(t);if(e=o?t._private.style:t)for(var u=0;u<n.properties.length;u++){var s=n.properties[u],l=e[s.name]||e[r.dash2camel(s.name)];void 0!==l&&(l=i.plainObject(l)?this.parse(s.name,l.strValue):this.parse(s.name,l)),l&&(a[s.name]=l,a[r.dash2camel(s.name)]=l)}return a},a.getPropsList=function(t){var e=this,n=[],i=t,a=e.properties;if(i)for(var o in i){var u=i[o],s=a[o]||a[r.camel2dash(o)],l=this.parse(s.name,u);n.push(l)}return n},e.exports=a},{"../is":77,"../util":94}],86:[function(t,e,n){"use strict";var r=t("../is"),i=t("../util"),a=t("../selector"),o=function(t){return this instanceof o?r.core(t)?(this._private={cy:t,coreStyle:{},newStyle:!0},this.length=0,void this.addDefaultStylesheet()):void i.error("A style must have a core reference"):new o(t)},u=o.prototype;u.instanceString=function(){return"style"},u.clear=function(){for(var t=0;t<this.length;t++)this[t]=void 0;return this.length=0,this._private.newStyle=!0,this},u.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},u.core=function(){return this._private.coreStyle},u.selector=function(t){var e="core"===t?null:new a(t),n=this.length++;return this[n]={selector:e,properties:[],mappedProperties:[],index:n},this},u.css=function(){var t=this,e=arguments;switch(e.length){case 1:for(var n=e[0],r=0;r<t.properties.length;r++){var a=t.properties[r],o=n[a.name];void 0===o&&(o=n[i.dash2camel(a.name)]),void 0!==o&&this.cssRule(a.name,o)}break;case 2:this.cssRule(e[0],e[1])}return this},u.style=u.css,u.cssRule=function(t,e){var n=this.parse(t,e);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n);var i=!this[r].selector;i&&(this._private.coreStyle[n.name]=n)}return this},o.fromJson=function(t,e){var n=new o(t);return n.fromJson(e),n},o.fromString=function(t,e){return new o(t).fromString(e)},[t("./apply"),t("./bypass"),t("./container"),t("./get-for-ele"),t("./json"),t("./string-sheet"),t("./properties"),t("./parse")].forEach(function(t){i.extend(u,t)}),o.types=u.types,o.properties=u.properties,e.exports=o},{"../is":77,"../selector":81,"../util":94,"./apply":82,"./bypass":83,"./container":84,"./get-for-ele":85,"./json":87,"./parse":88,"./properties":89,"./string-sheet":90}],87:[function(t,e,n){"use strict";var r={};r.applyFromJson=function(t){for(var e=this,n=0;n<t.length;n++){var r=t[n],i=r.selector,a=r.style||r.css;e.selector(i);for(var o in a){var u=a[o];e.css(o,u)}}return e},r.fromJson=function(t){var e=this;return e.resetToDefault(),e.applyFromJson(t),e},r.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var n=this[e],r=n.selector,i=n.properties,a={},o=0;o<i.length;o++){var u=i[o];a[u.name]=u.strValue}t.push({selector:r?r.toString():"core",style:a})}return t},e.exports=r},{}],88:[function(t,e,n){"use strict";var r=t("../util"),i=t("../is"),a={};a.parse=function(t,e,n,i){var a,u=[t,e,n,i].join("$"),s=this.propCache=this.propCache||{},l=o.bind(this);return(a=s[u])||(a=s[u]=l(t,e,n,i)),a=r.copy(a),a&&(a.value=r.copy(a.value)),a};var o=function(t,e,n,a){var o=this;t=r.camel2dash(t);var u=o.properties[t],s=e,l=o.types;if(!u)return null;if(void 0===e||null===e)return null;u.alias&&(u=u.pointsTo,t=u.name);var c=i.string(e);c&&(e=e.trim());var f=u.type;if(!f)return null;if(n&&(""===e||null===e))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(i.fn(e))return{name:t,value:e,strValue:"fn",mapped:l.fn,bypass:n};var h,d,p,g,v,m;if(!c||a);else{if((h=new RegExp(l.data.regex).exec(e))||(p=new RegExp(l.layoutData.regex).exec(e))||(v=new RegExp(l.scratch.regex).exec(e))){if(n)return!1;var y;return y=h?l.data:p?l.layoutData:l.scratch,h=h||p||v,{name:t,value:h,strValue:""+e,mapped:y,field:h[1],bypass:n}}if((d=new RegExp(l.mapData.regex).exec(e))||(g=new RegExp(l.mapLayoutData.regex).exec(e))||(m=new RegExp(l.mapScratch.regex).exec(e))){if(n)return!1;if(f.multiple)return!1;var y;if(y=d?l.mapData:g?l.mapLayoutData:l.mapScratch,d=d||g||m,!f.color&&!f.number)return!1;var x=this.parse(t,d[4]);if(!x||x.mapped)return!1;var b=this.parse(t,d[5]);if(!b||b.mapped)return!1;if(x.value===b.value)return!1;if(f.color){var w=x.value,_=b.value,M=!(w[0]!==_[0]||w[1]!==_[1]||w[2]!==_[2]||w[3]!==_[3]&&(null!=w[3]&&1!==w[3]||null!=_[3]&&1!==_[3]));if(M)return!1}return{name:t,value:d,strValue:""+e,mapped:y,field:d[1],fieldMin:parseFloat(d[2]),fieldMax:parseFloat(d[3]),valueMin:x.value,valueMax:b.value,bypass:n}}}if(f.multiple&&"multiple"!==a){var k;if(k=c?e.split(/\s+/):i.array(e)?e:[e],f.evenMultiple&&k.length%2!==0)return null;var E=k.map(function(e){var r=o.parse(t,e,n,"multiple");return null!=r.pfValue?r.pfValue:r.value});return{name:t,value:E,pfValue:E,strValue:E.join(" "),bypass:n,units:f.number&&!f.unitless?f.implicitUnits||"px":void 0}}var S=function(){for(var r=0;r<f.enums.length;r++){var i=f.enums[r];if(i===e)return{name:t,value:e,strValue:""+e,bypass:n}}return null};if(f.number){var N,T="px";if(f.units&&(N=f.units),f.implicitUnits&&(T=f.implicitUnits),!f.unitless)if(c){var C="px|em"+(f.allowPercent?"|\\%":"");N&&(C=N);var D=e.match("^("+r.regex.number+")("+C+")?$");D&&(e=D[1],N=D[2]||T)}else(!N||f.implicitUnits)&&(N=T);if(e=parseFloat(e),isNaN(e)&&void 0===f.enums)return null;if(isNaN(e)&&void 0!==f.enums)return e=s,S();if(f.integer&&!i.integer(e))return null;if(void 0!==f.min&&e<f.min||void 0!==f.max&&e>f.max)return null;var P={name:t,value:e,strValue:""+e+(N?N:""),units:N,bypass:n};return f.unitless||"px"!==N&&"em"!==N?P.pfValue=e:P.pfValue="px"!==N&&N?this.getEmSizeInPixels()*e:e,("ms"===N||"s"===N)&&(P.pfValue="ms"===N?e:1e3*e),("deg"===N||"rad"===N)&&(P.pfValue="rad"===N?e:e*Math.PI/180),P}if(f.propList){var A=[],z=""+e;if("none"===z);else{for(var L=z.split(","),I=0;I<L.length;I++){var O=L[I].trim();o.properties[O]&&A.push(O)}if(0===A.length)return null}return{name:t,value:A,strValue:0===A.length?"none":A.join(", "),bypass:n}}if(f.color){var R=r.color2tuple(e);return R?{name:t,value:R,strValue:""+e,bypass:n,roundValue:!0}:null}if(f.regex||f.regexes){if(f.enums){var j=S();if(j)return j}for(var B=f.regexes?f.regexes:[f.regex],I=0;I<B.length;I++){var q=new RegExp(B[I]),F=q.exec(e);if(F)return{name:t,value:F,strValue:""+e,bypass:n}}return null}return f.string?{name:t,value:e,strValue:""+e,bypass:n}:f.enums?S():null};e.exports=a},{"../is":77,"../util":94}],89:[function(t,e,n){"use strict";var r=t("../util"),i={};!function(){var t=r.regex.number,e=r.regex.rgbaNoBackRefs,n=r.regex.hslaNoBackRefs,a=r.regex.hex3,o=r.regex.hex6,u=function(t){return"^"+t+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function(r){var i=t+"|\\w+|"+e+"|"+n+"|"+a+"|"+o;return"^"+r+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+i+")\\s*\\,\\s*("+i+")\\)$"};i.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["auto","label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizes:{number:!0,multiple:!0},bgSize:{number:!0,min:0,allowPercent:!0},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"]},bgPos:{number:!0,allowPercent:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},bgFit:{enums:["none","contain","cover"]},bgClip:{enums:["none","node"]},color:{color:!0},bool:{enums:["yes","no"]},lineStyle:{enums:["solid","dotted","dashed"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap"]},textBackgroundShape:{enums:["rectangle","roundrectangle"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon","star","diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-backcurve","half-triangle-overshot","vee","square","circle","diamond","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},text:{string:!0},data:{mapping:!0,regex:u("data")},layoutData:{mapping:!0,regex:u("layoutData")},scratch:{mapping:!0,regex:u("scratch")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},mapScratch:{mapping:!0,regex:s("mapScratch")},fn:{mapping:!0,fn:!0},url:{regex:"^url\\s*\\(\\s*([^\\s]+)\\s*\\s*\\)|none|(.+)$"},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]}};var l=i.types,c=i.properties=[{name:"text-valign",type:l.valign},{name:"text-halign",type:l.halign},{name:"color",type:l.color},{name:"label",type:l.text},{name:"text-outline-color",type:l.color},{name:"text-outline-width",type:l.size},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size},{name:"text-border-style",type:l.borderStyle},{name:"text-background-shape",type:l.textBackgroundShape},{name:"text-transform",type:l.textTransform},{name:"text-wrap",type:l.textWrap},{name:"text-max-width",type:l.size},{name:"text-events",type:l.bool},{name:"font-family",type:l.fontFamily},{name:"font-style",type:l.fontStyle},{name:"font-weight",type:l.fontWeight},{name:"font-size",type:l.size},{name:"min-zoomed-font-size",type:l.size},{name:"edge-text-rotation",type:l.textRotation},{name:"events",type:l.bool},{name:"display",type:l.display},{name:"visibility",type:l.visibility},{name:"opacity",type:l.zeroOneNumber},{name:"z-index",type:l.nonNegativeInt},{name:"overlay-padding",type:l.size},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber},{name:"shadow-blur",type:l.size},{name:"shadow-color",type:l.color},{name:"shadow-opacity",type:l.zeroOneNumber},{name:"shadow-offset-x",type:l.bidirectionalSize},{name:"shadow-offset-y",type:l.bidirectionalSize},{name:"text-shadow-blur",type:l.size},{name:"text-shadow-color",type:l.color},{name:"text-shadow-opacity",type:l.zeroOneNumber},{name:"text-shadow-offset-x",type:l.bidirectionalSize},{name:"text-shadow-offset-y",type:l.bidirectionalSize},{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing},{name:"height",type:l.nodeSize},{name:"width",type:l.nodeSize},{name:"shape",type:l.nodeShape},{name:"shape-polygon-points",type:l.polygonPointList},{name:"background-color",type:l.color},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"padding-left",type:l.size},{name:"padding-right",type:l.size},{name:"padding-top",type:l.size},{name:"padding-bottom",type:l.size},{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size},{name:"border-style",type:l.borderStyle},{name:"background-image",type:l.url},{name:"background-image-opacity",type:l.zeroOneNumber},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"position",type:l.position},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels},{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"curve-style",type:l.curveStyle},{name:"haystack-radius",type:l.zeroOneNumber},{name:"control-point-step-size",type:l.size},{name:"control-point-distances",type:l.bidirectionalSizes},{name:"control-point-weights",type:l.numbers},{name:"segment-distances",type:l.bidirectionalSizes},{name:"segment-weights",type:l.numbers},{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],f=i.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"}];i.pieBackgroundN=16,c.push({name:"pie-size",type:l.bgSize});for(var h=1;h<=i.pieBackgroundN;h++)c.push({name:"pie-"+h+"-background-color",type:l.color}),c.push({name:"pie-"+h+"-background-size",type:l.percent
}),c.push({name:"pie-"+h+"-background-opacity",type:l.zeroOneNumber});var d=i.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill}].forEach(function(t){d.forEach(function(e){var n=e+"-"+t.name,r=t.type;c.push({name:n,type:r})})},{}),i.propertyNames=c.map(function(t){return t.name});for(var h=0;h<c.length;h++){var p=c[h];c[p.name]=p}for(var h=0;h<f.length;h++){var g=f[h],v=c[g.pointsTo],m={name:g.name,alias:!0,pointsTo:v};c.push(m),c[g.name]=m}}(),i.addDefaultStylesheet=function(){this.selector("node, edge").css(r.extend({events:"yes","text-events":"no","text-valign":"top","text-halign":"center",color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","text-background-shape":"rectangle","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"edge-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-index":0,label:"","overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"shadow-opacity":0,"shadow-color":"#000","shadow-blur":10,"shadow-offset-x":0,"shadow-offset-y":0,"text-shadow-opacity":0,"text-shadow-color":"#000","text-shadow-blur":5,"text-shadow-offset-x":0,"text-shadow-offset-y":0,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#888","background-opacity":1,"background-image":"none","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","padding-top":0,"padding-bottom":0,"padding-left":0,"padding-right":0,position:"origin","compound-sizing-wrt-labels":"include"},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(t,e){for(var n=1;n<=i.pieBackgroundN;n++){var r=e.name.replace("{{i}}",n),a=e.value;t[r]=a}return t},{}),{"line-style":"solid","line-color":"#ddd","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"curve-style":"bezier","haystack-radius":.8},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#ddd"},{name:"arrow-fill",value:"filled"}].reduce(function(t,e){return i.arrowPrefixes.forEach(function(n){var r=n+"-"+e.name,i=e.value;t[r]=i}),t},{}))).selector("$node > node").css({width:"auto",height:"auto",shape:"rectangle","padding-top":10,"padding-right":10,"padding-left":10,"padding-bottom":10}).selector("edge").css({width:1}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125}),this.defaultLength=this.length},e.exports=i},{"../util":94}],90:[function(t,e,n){"use strict";var r=t("../util"),i=t("../selector"),a={};a.applyFromString=function(t){function e(){c=c.length>a.length?c.substr(a.length):""}function n(){o=o.length>u.length?o.substr(u.length):""}var a,o,u,s=this,l=this,c=""+t;for(c=c.replace(/[\/][*](\s|.)+?[*][\/]/g,"");;){var f=c.match(/^\s*$/);if(f)break;var h=c.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!h){r.error("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+c);break}a=h[0];var d=h[1];if("core"!==d){var p=new i(d);if(p._private.invalid){r.error("Skipping parsing of block: Invalid selector found in string stylesheet: "+d),e();continue}}var g=h[2],v=!1;o=g;for(var m=[];;){var f=o.match(/^\s*$/);if(f)break;var y=o.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!y){r.error("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+g),v=!0;break}u=y[0];var x=y[1],b=y[2],w=s.properties[x];if(w){var _=l.parse(x,b);_?(m.push({name:x,val:b}),n()):(r.error("Skipping property: Invalid property definition in: "+u),n())}else r.error("Skipping property: Invalid property name in: "+u),n()}if(v){e();break}l.selector(d);for(var M=0;M<m.length;M++){var w=m[M];l.css(w.name,w.val)}e()}return l},a.fromString=function(t){var e=this;return e.resetToDefault(),e.applyFromString(t),e},e.exports=a},{"../selector":81,"../util":94}],91:[function(t,e,n){"use strict";var r=t("./is"),i=t("./util"),a=t("./style"),o=function(){return this instanceof o?void(this.length=0):new o},u=o.prototype;u.instanceString=function(){return"stylesheet"},u.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this},u.css=function(t,e){var n=this.length-1;if(r.string(t))this[n].properties.push({name:t,value:e});else if(r.plainObject(t))for(var o=t,u=0;u<a.properties.length;u++){var s=a.properties[u],l=o[s.name];if(void 0===l&&(l=o[i.dash2camel(s.name)]),void 0!==l){var t=s.name,e=l;this[n].properties.push({name:t,value:e})}}return this},u.style=u.css,u.generateStyle=function(t){for(var e=new a(t),n=0;n<this.length;n++){var r=this[n],i=r.selector,o=r.properties;e.selector(i);for(var u=0;u<o.length;u++){var s=o[u];e.css(s.name,s.value)}}return e},e.exports=o},{"./is":77,"./style":86,"./util":94}],92:[function(_dereq_,module,exports){"use strict";var window=_dereq_("./window"),util=_dereq_("./util"),Promise=_dereq_("./promise"),Event=_dereq_("./event"),define=_dereq_("./define"),is=_dereq_("./is"),Thread=function(t){if(!(this instanceof Thread))return new Thread(t);var e=this._private={requires:[],files:[],queue:null,pass:[],disabled:!1};is.plainObject(t)&&null!=t.disabled&&(e.disabled=!!t.disabled)},thdfn=Thread.prototype,stringifyFieldVal=function(t){var e=is.fn(t)?t.toString():"JSON.parse('"+JSON.stringify(t)+"')";return e},fnAsRequire=function(t){var e,n;is.object(t)&&t.fn?(e=fnAs(t.fn,t.name),n=t.name,t=t.fn):is.fn(t)?(e=t.toString(),n=t.name):is.string(t)?e=t:is.object(t)&&(e=t.proto?"":t.name+" = {};",n=t.name,t=t.obj),e+="\n";var r=function(t,n){if(t.prototype){var r=!1;for(var i in t.prototype){r=!0;break}r&&(e+=fnAsRequire({name:n,obj:t,proto:!0},t))}};if(t.prototype&&null!=n)for(var i in t.prototype){var a="",o=t.prototype[i],u=stringifyFieldVal(o),s=n+".prototype."+i;a+=s+" = "+u+";\n",a&&(e+=a),r(o,s)}if(!is.string(t))for(var i in t){var l="";if(t.hasOwnProperty(i)){var o=t[i],u=stringifyFieldVal(o),s=n+'["'+i+'"]';l+=s+" = "+u+";\n"}l&&(e+=l),r(o,s)}return e},isPathStr=function(t){return is.string(t)&&t.match(/\.js$/)};util.extend(thdfn,{instanceString:function(){return"thread"},require:function(t,e){var n=this._private.requires;if(isPathStr(t))return this._private.files.push(t),this;if(e)t=is.fn(t)?{name:e,fn:t}:{name:e,obj:t};else if(is.fn(t)){if(!t.name)throw'The function name could not be automatically determined.  Use thread.require( someFunction, "someFunction" )';t={name:t.name,fn:t}}return n.push(t),this},pass:function(t){return this._private.pass.push(t),this},run:function(fn,pass){var self=this,_p=this._private;if(pass=pass||_p.pass.shift(),_p.stopped)throw"Attempted to run a stopped thread!  Start a new thread or do not stop the existing thread and reuse it.";if(_p.running)return _p.queue=_p.queue.then(function(){return self.run(fn,pass)});var useWW=null!=window&&!_p.disabled,useNode=!window&&"undefined"!=typeof module&&!_p.disabled;self.trigger("run");var runP=new Promise(function(resolve,reject){_p.running=!0;var threadTechAlreadyExists=_p.ran,fnImplStr=is.string(fn)?fn:fn.toString(),fnStr="\n"+_p.requires.map(function(t){return fnAsRequire(t)}).concat(_p.files.map(function(t){if(useWW){var e=function(t){return t.match(/^\.\//)||t.match(/^\.\./)?window.location.origin+window.location.pathname+t:t.match(/^\//)?window.location.origin+"/"+t:t};return'importScripts("'+e(t)+'");'}if(useNode)return'eval( require("fs").readFileSync("'+t+'", { encoding: "utf8" }) );';throw"External file `"+t+"` can not be required without any threading technology."})).concat(["( function(){","var ret = ("+fnImplStr+")("+JSON.stringify(pass)+");","if( ret !== undefined ){ resolve(ret); }","} )()\n"]).join("\n");if(_p.requires=[],_p.files=[],useWW){var fnBlob,fnUrl;if(!threadTechAlreadyExists){var fnPre=fnStr+"";fnStr=["function _ref_(o){ return eval(o); };","function broadcast(m){ return message(m); };","function message(m){ postMessage(m); };","function listen(fn){",'  self.addEventListener("message", function(m){ ','    if( typeof m === "object" && (m.data.$$eval || m.data === "$$start") ){',"    } else { ","      fn( m.data );","    }","  });","};",'self.addEventListener("message", function(m){  if( m.data.$$eval ){ eval( m.data.$$eval ); }  });',"function resolve(v){ postMessage({ $$resolve: v }); };","function reject(v){ postMessage({ $$reject: v }); };"].join("\n"),fnStr+=fnPre,fnBlob=new Blob([fnStr],{type:"application/javascript"}),fnUrl=window.URL.createObjectURL(fnBlob)}var ww=_p.webworker=_p.webworker||new Worker(fnUrl);threadTechAlreadyExists&&ww.postMessage({$$eval:fnStr});var cb;ww.addEventListener("message",cb=function(t){var e=is.object(t)&&is.object(t.data);e&&"$$resolve"in t.data?(ww.removeEventListener("message",cb),resolve(t.data.$$resolve)):e&&"$$reject"in t.data?(ww.removeEventListener("message",cb),reject(t.data.$$reject)):self.trigger(new Event(t,{type:"message",message:t.data}))},!1),threadTechAlreadyExists||ww.postMessage("$$start")}else if(useNode){_p.child||(_p.child=_dereq_("child_process").fork(_dereq_("path").join(__dirname,"thread-node-fork")));var child=_p.child,cb;child.on("message",cb=function(t){is.object(t)&&"$$resolve"in t?(child.removeListener("message",cb),resolve(t.$$resolve)):is.object(t)&&"$$reject"in t?(child.removeListener("message",cb),reject(t.$$reject)):self.trigger(new Event({},{type:"message",message:t}))}),child.send({$$eval:fnStr})}else{var promiseResolve=resolve,promiseReject=reject,timer=_p.timer=_p.timer||{listeners:[],exec:function(){fnStr=["function _ref_(o){ return eval(o); };","function broadcast(m){ return message(m); };",'function message(m){ self.trigger( new Event({}, { type: "message", message: m }) ); };',"function listen(fn){ timer.listeners.push( fn ); };","function resolve(v){ promiseResolve(v); };","function reject(v){ promiseReject(v); };"].join("\n")+fnStr,eval(fnStr)},message:function(t){for(var e=timer.listeners,n=0;n<e.length;n++){var r=e[n];r(t)}}};timer.exec()}}).then(function(t){return _p.running=!1,_p.ran=!0,self.trigger("ran"),t});return null==_p.queue&&(_p.queue=runP),runP},message:function(t){var e=this._private;return e.webworker&&e.webworker.postMessage(t),e.child&&e.child.send(t),e.timer&&e.timer.message(t),this},stop:function(){var t=this._private;return t.webworker&&t.webworker.terminate(),t.child&&t.child.kill(),t.timer,t.stopped=!0,this.trigger("stop")},stopped:function(){return this._private.stopped}});var fnAs=function(t,e){var n=t.toString();return n=n.replace(/function\s*?\S*?\s*?\(/,"function "+e+"(")},defineFnal=function(t){return t=t||{},function(e,n){var r=fnAs(e,"_$_$_"+t.name);return this.require(r),this.run(["function( data ){","  var origResolve = resolve;","  var res = [];","  ","  resolve = function( val ){","    res.push( val );","  };","  ","  var ret = data."+t.name+"( _$_$_"+t.name+(arguments.length>1?", "+JSON.stringify(n):"")+" );","  ","  resolve = origResolve;","  resolve( res.length > 0 ? res : ret );","}"].join("\n"))}};util.extend(thdfn,{reduce:defineFnal({name:"reduce"}),reduceRight:defineFnal({name:"reduceRight"}),map:defineFnal({name:"map"})});var fn=thdfn;fn.promise=fn.run,fn.terminate=fn.halt=fn.stop,fn.include=fn.require,util.extend(thdfn,{on:define.on(),one:define.on({unbindSelfOnTrigger:!0}),off:define.off(),trigger:define.trigger()}),define.eventAliasesOn(thdfn),module.exports=Thread},{"./define":41,"./event":42,"./is":77,"./promise":80,"./util":94,"./window":100,child_process:void 0,path:void 0}],93:[function(t,e,n){"use strict";var r=t("../is");e.exports={hex2tuple:function(t){if((4===t.length||7===t.length)&&"#"===t[0]){var e,n,r,i=4===t.length,a=16;return i?(e=parseInt(t[1]+t[1],a),n=parseInt(t[2]+t[2],a),r=parseInt(t[3]+t[3],a)):(e=parseInt(t[1]+t[2],a),n=parseInt(t[3]+t[4],a),r=parseInt(t[5]+t[6],a)),[e,n,r]}},hsl2tuple:function(t){function e(t,e,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?t+6*(e-t)*n:.5>n?e:2/3>n?t+(e-t)*(2/3-n)*6:t}var n,r,i,a,o,u,s,l,c=new RegExp("^"+this.regex.hsla+"$").exec(t);if(c){if(r=parseInt(c[1]),0>r?r=(360- -1*r%360)%360:r>360&&(r%=360),r/=360,i=parseFloat(c[2]),0>i||i>100)return;if(i/=100,a=parseFloat(c[3]),0>a||a>100)return;if(a/=100,o=c[4],void 0!==o&&(o=parseFloat(o),0>o||o>1))return;if(0===i)u=s=l=Math.round(255*a);else{var f=.5>a?a*(1+i):a+i-a*i,h=2*a-f;u=Math.round(255*e(h,f,r+1/3)),s=Math.round(255*e(h,f,r)),l=Math.round(255*e(h,f,r-1/3))}n=[u,s,l,o]}return n},rgb2tuple:function(t){var e,n=new RegExp("^"+this.regex.rgba+"$").exec(t);if(n){e=[];for(var r=[],i=1;3>=i;i++){var a=n[i];if("%"===a[a.length-1]&&(r[i]=!0),a=parseFloat(a),r[i]&&(a=a/100*255),0>a||a>255)return;e.push(Math.floor(a))}var o=r[1]||r[2]||r[3],u=r[1]&&r[2]&&r[3];if(o&&!u)return;var s=n[4];if(void 0!==s){if(s=parseFloat(s),0>s||s>1)return;e.push(s)}}return e},colorname2tuple:function(t){return this.colors[t.toLowerCase()]},color2tuple:function(t){return(r.array(t)?t:null)||this.colorname2tuple(t)||this.hex2tuple(t)||this.rgb2tuple(t)||this.hsl2tuple(t)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}},{"../is":77}],94:[function(t,e,n){"use strict";var r=t("../is"),i=t("../math"),a={falsify:function(){return!1},zeroify:function(){return 0},noop:function(){},error:function(t){console.error?(console.error.apply(console,arguments),console.trace&&console.trace()):(console.log.apply(console,arguments),console.trace&&console.trace())},clone:function(t){return this.extend({},t)},copy:function(t){return null==t?t:r.array(t)?t.slice():r.plainObject(t)?this.clone(t):t}};a.makeBoundingBox=i.makeBoundingBox.bind(i),a._staticEmptyObject={},a.staticEmptyObject=function(){return a._staticEmptyObject},a.extend=null!=Object.assign?Object.assign:function(t){for(var e=arguments,n=1;n<e.length;n++){var r=e[n];for(var i in r)t[i]=r[i]}return t},[t("./colors"),t("./maps"),{memoize:t("./memoize")},t("./regex"),t("./strings"),t("./timing")].forEach(function(t){a.extend(a,t)}),e.exports=a},{"../is":77,"../math":79,"./colors":93,"./maps":95,"./memoize":96,"./regex":97,"./strings":98,"./timing":99}],95:[function(t,e,n){"use strict";var r=t("../is");e.exports={mapEmpty:function(t){var e=!0;if(null!=t)for(var n in t){e=!1;break}return e},pushMap:function(t){var e=this.getMap(t);null==e?this.setMap(this.extend({},t,{value:[t.value]})):e.push(t.value)},setMap:function(t){for(var e,n=t.map,i=t.keys,a=i.length,o=0;a>o;o++){var e=i[o];r.plainObject(e)&&this.error("Tried to set map with object key"),o<i.length-1?(null==n[e]&&(n[e]={}),n=n[e]):n[e]=t.value}},getMap:function(t){for(var e=t.map,n=t.keys,i=n.length,a=0;i>a;a++){var o=n[a];if(r.plainObject(o)&&this.error("Tried to get map with object key"),e=e[o],null==e)return e}return e},deleteMap:function(t){for(var e=t.map,n=t.keys,i=n.length,a=t.keepChildren,o=0;i>o;o++){var u=n[o];r.plainObject(u)&&this.error("Tried to delete map with object key");var s=o===t.keys.length-1;if(s)if(a)for(var l in e)a[l]||(e[l]=void 0);else e[u]=void 0;else e=e[u]}}}},{"../is":77}],96:[function(t,e,n){"use strict";e.exports=function(t,e){var n=this,r={};return e||(e=function(){if(1===arguments.length)return arguments[0];for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);return t.join("$")}),function(){var i,a=arguments,o=e.apply(n,a);return(i=r[o])||(i=r[o]=t.apply(n,a)),i}}},{}],97:[function(t,e,n){"use strict";var r="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",i="rgb[a]?\\(("+r+"[%]?)\\s*,\\s*("+r+"[%]?)\\s*,\\s*("+r+"[%]?)(?:\\s*,\\s*("+r+"))?\\)",a="rgb[a]?\\((?:"+r+"[%]?)\\s*,\\s*(?:"+r+"[%]?)\\s*,\\s*(?:"+r+"[%]?)(?:\\s*,\\s*(?:"+r+"))?\\)",o="hsl[a]?\\(("+r+")\\s*,\\s*("+r+"[%])\\s*,\\s*("+r+"[%])(?:\\s*,\\s*("+r+"))?\\)",u="hsl[a]?\\((?:"+r+")\\s*,\\s*(?:"+r+"[%])\\s*,\\s*(?:"+r+"[%])(?:\\s*,\\s*(?:"+r+"))?\\)",s="\\#[0-9a-fA-F]{3}",l="\\#[0-9a-fA-F]{6}";e.exports={regex:{number:r,rgba:i,rgbaNoBackRefs:a,hsla:o,hslaNoBackRefs:u,hex3:s,hex6:l}}},{}],98:[function(t,e,n){"use strict";var r=t("./memoize"),i=t("../is");e.exports={camel2dash:r(function(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}),dash2camel:r(function(t){return t.replace(/(-\w)/g,function(t){return t[1].toUpperCase()})}),capitalize:function(t){return i.emptyString(t)?t:t.charAt(0).toUpperCase()+t.substring(1)}}},{"../is":77,"./memoize":96}],99:[function(t,e,n){"use strict";var r=t("../window"),i=t("../is"),a=r?r.performance:null,o={},u=r?r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame:null;u=u||function(t){t&&setTimeout(function(){t(s())},1e3/60)},o.requestAnimationFrame=function(t){u(t)};var s=a&&a.now?function(){return a.now()}:function(){return Date.now()};o.performanceNow=s,o.throttle=function(t,e,n){var r=!0,a=!0;return n===!1?r=!1:i.plainObject(n)&&(r="leading"in n?n.leading:r,a="trailing"in n?n.trailing:a),n=n||{},n.leading=r,n.maxWait=e,n.trailing=a,o.debounce(t,e,n)},o.now=function(){return Date.now()},o.debounce=function(t,e,n){var r,a,o,u,s,l,c,f=this,h=0,d=!1,p=!0;if(i.fn(t)){if(e=Math.max(0,e)||0,n===!0){var g=!0;p=!1}else i.plainObject(n)&&(g=n.leading,d="maxWait"in n&&(Math.max(e,n.maxWait)||0),p="trailing"in n?n.trailing:p);var v=function(){var n=e-(f.now()-u);if(0>=n){a&&clearTimeout(a);var i=c;a=l=c=void 0,i&&(h=f.now(),o=t.apply(s,r),l||a||(r=s=null))}else l=setTimeout(v,n)},m=function(){l&&clearTimeout(l),a=l=c=void 0,(p||d!==e)&&(h=f.now(),o=t.apply(s,r),l||a||(r=s=null))};return function(){if(r=arguments,u=f.now(),s=this,c=p&&(l||!g),d===!1)var n=g&&!l;else{a||g||(h=u);var i=d-(u-h),y=0>=i;y?(a&&(a=clearTimeout(a)),h=u,o=t.apply(s,r)):a||(a=setTimeout(m,i))}return y&&l?l=clearTimeout(l):l||e===d||(l=setTimeout(v,e)),n&&(y=!0,o=t.apply(s,r)),!y||l||a||(r=s=null),o}}},e.exports=o},{"../is":77,"../window":100}],100:[function(t,e,n){e.exports="undefined"==typeof window?null:window},{}]},{},[76])(76)})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},"/node_modules/cytoscape/dist")},{}],6:[function(t,e,n){!function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function n(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function r(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}function i(t){return null===t?NaN:+t}function a(t){return!isNaN(t)}function o(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}}function u(t){return t.length}function s(t){for(var e=1;t*e%1;)e*=10;return e}function l(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function c(){this._=Object.create(null)}function f(t){return(t+="")===_o||t[0]===Mo?Mo+t:t}function h(t){return(t+="")[0]===Mo?t.slice(1):t}function d(t){return f(t)in this._}function p(t){return(t=f(t))in this._&&delete this._[t]}function g(){var t=[];for(var e in this._)t.push(h(e));return t}function v(){var t=0;for(var e in this._)++t;return t}function m(){for(var t in this._)return!1;return!0}function y(){this._=Object.create(null)}function x(t){return t}function b(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function w(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=ko.length;r>n;++n){var i=ko[n]+e;if(i in t)return i}}function _(){}function M(){}function k(t){function e(){for(var e,r=n,i=-1,a=r.length;++i<a;)(e=r[i].on)&&e.apply(this,arguments);return t}var n=[],r=new c;return e.on=function(e,i){var a,o=r.get(e);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,a=n.indexOf(o)).concat(n.slice(a+1)),r.remove(e)),i&&n.push(r.set(e,{on:i})),t)},e}function E(){so.event.preventDefault()}function S(){for(var t,e=so.event;t=e.sourceEvent;)e=t;return e}function N(t){for(var e=new M,n=0,r=arguments.length;++n<r;)e[arguments[n]]=k(e);return e.of=function(n,r){return function(i){try{var a=i.sourceEvent=so.event;i.target=t,so.event=i,e[i.type].apply(n,r)}finally{so.event=a}}},e}function T(t){return So(t,Do),t}function C(t){return"function"==typeof t?t:function(){return No(t,this)}}function D(t){return"function"==typeof t?t:function(){return To(t,this)}}function P(t,e){function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,e)}function a(){this.setAttributeNS(t.space,t.local,e)}function o(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function u(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=so.ns.qualify(t),null==e?t.local?r:n:"function"==typeof e?t.local?u:o:t.local?a:i}function A(t){return t.trim().replace(/\s+/g," ")}function z(t){return new RegExp("(?:^|\\s+)"+so.requote(t)+"(?:\\s+|$)","g")}function L(t){return(t+"").trim().split(/^|\s+/)}function I(t,e){function n(){for(var n=-1;++n<i;)t[n](this,e)}function r(){for(var n=-1,r=e.apply(this,arguments);++n<i;)t[n](this,r)}t=L(t).map(O);var i=t.length;return"function"==typeof e?r:n}function O(t){var e=z(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",A(i+" "+t))):n.setAttribute("class",A(i.replace(e," ")))}}function R(t,e,n){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,e,n)}function a(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}return null==e?r:"function"==typeof e?a:i}function j(t,e){function n(){delete this[t]}function r(){this[t]=e}function i(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?i:r}function B(t){function e(){var e=this.ownerDocument,n=this.namespaceURI;return n===Po&&e.documentElement.namespaceURI===Po?e.createElement(t):e.createElementNS(n,t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=so.ns.qualify(t)).local?n:e}function q(){var t=this.parentNode;t&&t.removeChild(this)}function F(t){return{__data__:t}}function V(t){return function(){return Co(this,t)}}function Y(t){return arguments.length||(t=r),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function X(t,e){for(var n=0,r=t.length;r>n;n++)for(var i,a=t[n],o=0,u=a.length;u>o;o++)(i=a[o])&&e(i,o,n);return t}function $(t){return So(t,zo),t}function U(t){var e,n;return function(r,i,a){var o,u=t[a].update,s=u.length;for(a!=n&&(n=a,e=0),i>=e&&(e=i+1);!(o=u[e])&&++e<s;);return o}}function H(t,e,n){function r(){var e=this[o];e&&(this.removeEventListener(t,e,e.$),delete this[o])}function i(){var i=s(e,co(arguments));r.call(this),this.addEventListener(t,this[o]=i,i.$=n),i._=e}function a(){var e,n=new RegExp("^__on([^.]+)"+so.requote(t)+"$");for(var r in this)if(e=r.match(n)){var i=this[r];this.removeEventListener(e[1],i,i.$),delete this[r]}}var o="__on"+t,u=t.indexOf("."),s=W;u>0&&(t=t.slice(0,u));var l=Lo.get(t);return l&&(t=l,s=Z),u?e?i:r:e?_:a}function W(t,e){return function(n){var r=so.event;so.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{so.event=r}}}function Z(t,e){var n=W(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}function G(e){var r=".dragsuppress-"+ ++Oo,i="click"+r,a=so.select(n(e)).on("touchmove"+r,E).on("dragstart"+r,E).on("selectstart"+r,E);if(null==Io&&(Io="onselectstart"in e?!1:w(e.style,"userSelect")),Io){var o=t(e).style,u=o[Io];o[Io]="none"}return function(t){if(a.on(r,null),Io&&(o[Io]=u),t){var e=function(){a.on(i,null)};a.on(i,function(){E(),e()},!0),setTimeout(e,0)}}}function K(t,e){e.changedTouches&&(e=e.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();if(0>Ro){var a=n(t);if(a.scrollX||a.scrollY){r=so.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=r[0][0].getScreenCTM();Ro=!(o.f||o.e),r.remove()}}return Ro?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var u=t.getBoundingClientRect();return[e.clientX-u.left-t.clientLeft,e.clientY-u.top-t.clientTop]}function J(){return so.event.changedTouches[0].identifier}function Q(t){return t>0?1:0>t?-1:0}function tt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function et(t){return t>1?0:-1>t?qo:Math.acos(t)}function nt(t){return t>1?Yo:-1>t?-Yo:Math.asin(t)}function rt(t){return((t=Math.exp(t))-1/t)/2}function it(t){return((t=Math.exp(t))+1/t)/2}function at(t){return((t=Math.exp(2*t))-1)/(t+1)}function ot(t){return(t=Math.sin(t/2))*t}function ut(){}function st(t,e,n){return this instanceof st?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof st?new st(t.h,t.s,t.l):_t(""+t,Mt,st):new st(t,e,n)}function lt(t,e,n){function r(t){return t>360?t-=360:0>t&&(t+=360),60>t?a+(o-a)*t/60:180>t?o:240>t?a+(o-a)*(240-t)/60:a}function i(t){return Math.round(255*r(t))}var a,o;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+e):n+e-n*e,a=2*n-o,new yt(i(t+120),i(t),i(t-120))}function ct(t,e,n){return this instanceof ct?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof ct?new ct(t.h,t.c,t.l):t instanceof ht?pt(t.l,t.a,t.b):pt((t=kt((t=so.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new ct(t,e,n)}function ft(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new ht(n,Math.cos(t*=Xo)*e,Math.sin(t)*e)}function ht(t,e,n){return this instanceof ht?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof ht?new ht(t.l,t.a,t.b):t instanceof ct?ft(t.h,t.c,t.l):kt((t=yt(t)).r,t.g,t.b):new ht(t,e,n)}function dt(t,e,n){var r=(t+16)/116,i=r+e/500,a=r-n/200;return i=gt(i)*eu,r=gt(r)*nu,a=gt(a)*ru,new yt(mt(3.2404542*i-1.5371385*r-.4985314*a),mt(-.969266*i+1.8760108*r+.041556*a),mt(.0556434*i-.2040259*r+1.0572252*a))}function pt(t,e,n){return t>0?new ct(Math.atan2(n,e)*$o,Math.sqrt(e*e+n*n),t):new ct(NaN,NaN,t)}function gt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function vt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function mt(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function yt(t,e,n){return this instanceof yt?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof yt?new yt(t.r,t.g,t.b):_t(""+t,yt,lt):new yt(t,e,n)}function xt(t){return new yt(t>>16,t>>8&255,255&t)}function bt(t){return xt(t)+""}function wt(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function _t(t,e,n){var r,i,a,o=0,u=0,s=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(St(i[0]),St(i[1]),St(i[2]))}return(a=ou.get(t))?e(a.r,a.g,a.b):(null==t||"#"!==t.charAt(0)||isNaN(a=parseInt(t.slice(1),16))||(4===t.length?(o=(3840&a)>>4,o=o>>4|o,u=240&a,u=u>>4|u,s=15&a,s=s<<4|s):7===t.length&&(o=(16711680&a)>>16,u=(65280&a)>>8,s=255&a)),e(o,u,s))}function Mt(t,e,n){var r,i,a=Math.min(t/=255,e/=255,n/=255),o=Math.max(t,e,n),u=o-a,s=(o+a)/2;return u?(i=.5>s?u/(o+a):u/(2-o-a),r=t==o?(e-n)/u+(n>e?6:0):e==o?(n-t)/u+2:(t-e)/u+4,r*=60):(r=NaN,i=s>0&&1>s?0:r),new st(r,i,s)}function kt(t,e,n){t=Et(t),e=Et(e),n=Et(n);var r=vt((.4124564*t+.3575761*e+.1804375*n)/eu),i=vt((.2126729*t+.7151522*e+.072175*n)/nu),a=vt((.0193339*t+.119192*e+.9503041*n)/ru);
return ht(116*i-16,500*(r-i),200*(i-a))}function Et(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function St(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function Nt(t){return"function"==typeof t?t:function(){return t}}function Tt(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Ct(e,n,t,r)}}function Ct(t,e,n,r){function i(){var t,e=s.status;if(!e&&Pt(s)||e>=200&&300>e||304===e){try{t=n.call(a,s)}catch(r){return void o.error.call(a,r)}o.load.call(a,t)}else o.error.call(a,s)}var a={},o=so.dispatch("beforesend","progress","load","error"),u={},s=new XMLHttpRequest,l=null;return!this.XDomainRequest||"withCredentials"in s||!/^(http(s)?:)?\/\//.test(t)||(s=new XDomainRequest),"onload"in s?s.onload=s.onerror=i:s.onreadystatechange=function(){s.readyState>3&&i()},s.onprogress=function(t){var e=so.event;so.event=t;try{o.progress.call(a,s)}finally{so.event=e}},a.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?u[t]:(null==e?delete u[t]:u[t]=e+"",a)},a.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",a):e},a.responseType=function(t){return arguments.length?(l=t,a):l},a.response=function(t){return n=t,a},["get","post"].forEach(function(t){a[t]=function(){return a.send.apply(a,[t].concat(co(arguments)))}}),a.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),s.open(n,t,!0),null==e||"accept"in u||(u.accept=e+",*/*"),s.setRequestHeader)for(var c in u)s.setRequestHeader(c,u[c]);return null!=e&&s.overrideMimeType&&s.overrideMimeType(e),null!=l&&(s.responseType=l),null!=i&&a.on("error",i).on("load",function(t){i(null,t)}),o.beforesend.call(a,s),s.send(null==r?null:r),a},a.abort=function(){return s.abort(),a},so.rebind(a,o,"on"),null==r?a:a.get(Dt(r))}function Dt(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function Pt(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function At(t,e,n){var r=arguments.length;2>r&&(e=0),3>r&&(n=Date.now());var i=n+e,a={c:t,t:i,n:null};return su?su.n=a:uu=a,su=a,lu||(cu=clearTimeout(cu),lu=1,fu(zt)),a}function zt(){var t=Lt(),e=It()-t;e>24?(isFinite(e)&&(clearTimeout(cu),cu=setTimeout(zt,e)),lu=0):(lu=1,fu(zt))}function Lt(){for(var t=Date.now(),e=uu;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function It(){for(var t,e=uu,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:uu=e.n;return su=t,n}function Ot(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Rt(t,e){var n=Math.pow(10,3*wo(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function jt(t){var e=t.decimal,n=t.thousands,r=t.grouping,i=t.currency,a=r&&n?function(t,e){for(var i=t.length,a=[],o=0,u=r[0],s=0;i>0&&u>0&&(s+u+1>e&&(u=Math.max(1,e-s)),a.push(t.substring(i-=u,i+u)),!((s+=u+1)>e));)u=r[o=(o+1)%r.length];return a.reverse().join(n)}:x;return function(t){var n=du.exec(t),r=n[1]||" ",o=n[2]||">",u=n[3]||"-",s=n[4]||"",l=n[5],c=+n[6],f=n[7],h=n[8],d=n[9],p=1,g="",v="",m=!1,y=!0;switch(h&&(h=+h.substring(1)),(l||"0"===r&&"="===o)&&(l=r="0",o="="),d){case"n":f=!0,d="g";break;case"%":p=100,v="%",d="f";break;case"p":p=100,v="%",d="r";break;case"b":case"o":case"x":case"X":"#"===s&&(g="0"+d.toLowerCase());case"c":y=!1;case"d":m=!0,h=0;break;case"s":p=-1,d="r"}"$"===s&&(g=i[0],v=i[1]),"r"!=d||h||(d="g"),null!=h&&("g"==d?h=Math.max(1,Math.min(21,h)):("e"==d||"f"==d)&&(h=Math.max(0,Math.min(20,h)))),d=pu.get(d)||Bt;var x=l&&f;return function(t){var n=v;if(m&&t%1)return"";var i=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===u?"":u;if(0>p){var s=so.formatPrefix(t,h);t=s.scale(t),n=s.symbol+v}else t*=p;t=d(t,h);var b,w,_=t.lastIndexOf(".");if(0>_){var M=y?t.lastIndexOf("e"):-1;0>M?(b=t,w=""):(b=t.substring(0,M),w=t.substring(M))}else b=t.substring(0,_),w=e+t.substring(_+1);!l&&f&&(b=a(b,1/0));var k=g.length+b.length+w.length+(x?0:i.length),E=c>k?new Array(k=c-k+1).join(r):"";return x&&(b=a(E+b,E.length?c-w.length:1/0)),i+=g,t=b+w,("<"===o?i+t+E:">"===o?E+i+t:"^"===o?E.substring(0,k>>=1)+i+t+E.substring(k):i+(x?t:E+t))+n}}}function Bt(t){return t+""}function qt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ft(t,e,n){function r(e){var n=t(e),r=a(n,1);return r-e>e-n?n:r}function i(n){return e(n=t(new vu(n-1)),1),n}function a(t,n){return e(t=new vu(+t),n),t}function o(t,r,a){var o=i(t),u=[];if(a>1)for(;r>o;)n(o)%a||u.push(new Date(+o)),e(o,1);else for(;r>o;)u.push(new Date(+o)),e(o,1);return u}function u(t,e,n){try{vu=qt;var r=new qt;return r._=t,o(r,e,n)}finally{vu=Date}}t.floor=t,t.round=r,t.ceil=i,t.offset=a,t.range=o;var s=t.utc=Vt(t);return s.floor=s,s.round=Vt(r),s.ceil=Vt(i),s.offset=Vt(a),s.range=u,t}function Vt(t){return function(e,n){try{vu=qt;var r=new qt;return r._=e,t(r,n)._}finally{vu=Date}}}function Yt(t){function e(t){function e(e){for(var n,i,a,o=[],u=-1,s=0;++u<r;)37===t.charCodeAt(u)&&(o.push(t.slice(s,u)),null!=(i=yu[n=t.charAt(++u)])&&(n=t.charAt(++u)),(a=T[n])&&(n=a(e,null==i?"e"===n?" ":"0":i)),o.push(n),s=u+1);return o.push(t.slice(s,u)),o.join("")}var r=t.length;return e.parse=function(e){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,t,e,0);if(i!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var a=null!=r.Z&&vu!==qt,o=new(a?qt:vu);return"j"in r?o.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),a?o._:o},e.toString=function(){return t},e}function n(t,e,n,r){for(var i,a,o,u=0,s=e.length,l=n.length;s>u;){if(r>=l)return-1;if(i=e.charCodeAt(u++),37===i){if(o=e.charAt(u++),a=C[o in yu?e.charAt(u++):o],!a||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(t,e,n){_.lastIndex=0;var r=_.exec(e.slice(n));return r?(t.w=M.get(r[0].toLowerCase()),n+r[0].length):-1}function i(t,e,n){b.lastIndex=0;var r=b.exec(e.slice(n));return r?(t.w=w.get(r[0].toLowerCase()),n+r[0].length):-1}function a(t,e,n){S.lastIndex=0;var r=S.exec(e.slice(n));return r?(t.m=N.get(r[0].toLowerCase()),n+r[0].length):-1}function o(t,e,n){k.lastIndex=0;var r=k.exec(e.slice(n));return r?(t.m=E.get(r[0].toLowerCase()),n+r[0].length):-1}function u(t,e,r){return n(t,T.c.toString(),e,r)}function s(t,e,r){return n(t,T.x.toString(),e,r)}function l(t,e,r){return n(t,T.X.toString(),e,r)}function c(t,e,n){var r=x.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)}var f=t.dateTime,h=t.date,d=t.time,p=t.periods,g=t.days,v=t.shortDays,m=t.months,y=t.shortMonths;e.utc=function(t){function n(t){try{vu=qt;var e=new vu;return e._=t,r(e)}finally{vu=Date}}var r=e(t);return n.parse=function(t){try{vu=qt;var e=r.parse(t);return e&&e._}finally{vu=Date}},n.toString=r.toString,n},e.multi=e.utc.multi=le;var x=so.map(),b=$t(g),w=Ut(g),_=$t(v),M=Ut(v),k=$t(m),E=Ut(m),S=$t(y),N=Ut(y);p.forEach(function(t,e){x.set(t.toLowerCase(),e)});var T={a:function(t){return v[t.getDay()]},A:function(t){return g[t.getDay()]},b:function(t){return y[t.getMonth()]},B:function(t){return m[t.getMonth()]},c:e(f),d:function(t,e){return Xt(t.getDate(),e,2)},e:function(t,e){return Xt(t.getDate(),e,2)},H:function(t,e){return Xt(t.getHours(),e,2)},I:function(t,e){return Xt(t.getHours()%12||12,e,2)},j:function(t,e){return Xt(1+gu.dayOfYear(t),e,3)},L:function(t,e){return Xt(t.getMilliseconds(),e,3)},m:function(t,e){return Xt(t.getMonth()+1,e,2)},M:function(t,e){return Xt(t.getMinutes(),e,2)},p:function(t){return p[+(t.getHours()>=12)]},S:function(t,e){return Xt(t.getSeconds(),e,2)},U:function(t,e){return Xt(gu.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Xt(gu.mondayOfYear(t),e,2)},x:e(h),X:e(d),y:function(t,e){return Xt(t.getFullYear()%100,e,2)},Y:function(t,e){return Xt(t.getFullYear()%1e4,e,4)},Z:ue,"%":function(){return"%"}},C={a:r,A:i,b:a,B:o,c:u,d:ee,e:ee,H:re,I:re,j:ne,L:oe,m:te,M:ie,p:c,S:ae,U:Wt,w:Ht,W:Zt,x:s,X:l,y:Kt,Y:Gt,Z:Jt,"%":se};return e}function Xt(t,e,n){var r=0>t?"-":"",i=(r?-t:t)+"",a=i.length;return r+(n>a?new Array(n-a+1).join(e)+i:i)}function $t(t){return new RegExp("^(?:"+t.map(so.requote).join("|")+")","i")}function Ut(t){for(var e=new c,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Ht(t,e,n){xu.lastIndex=0;var r=xu.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Wt(t,e,n){xu.lastIndex=0;var r=xu.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function Zt(t,e,n){xu.lastIndex=0;var r=xu.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function Gt(t,e,n){xu.lastIndex=0;var r=xu.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Kt(t,e,n){xu.lastIndex=0;var r=xu.exec(e.slice(n,n+2));return r?(t.y=Qt(+r[0]),n+r[0].length):-1}function Jt(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Qt(t){return t+(t>68?1900:2e3)}function te(t,e,n){xu.lastIndex=0;var r=xu.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function ee(t,e,n){xu.lastIndex=0;var r=xu.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ne(t,e,n){xu.lastIndex=0;var r=xu.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function re(t,e,n){xu.lastIndex=0;var r=xu.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function ie(t,e,n){xu.lastIndex=0;var r=xu.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function ae(t,e,n){xu.lastIndex=0;var r=xu.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function oe(t,e,n){xu.lastIndex=0;var r=xu.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ue(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=wo(e)/60|0,i=wo(e)%60;return n+Xt(r,"0",2)+Xt(i,"0",2)}function se(t,e,n){bu.lastIndex=0;var r=bu.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function le(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}function ce(){}function fe(t,e,n){var r=n.s=t+e,i=r-t,a=r-i;n.t=t-a+(e-i)}function he(t,e){t&&ku.hasOwnProperty(t.type)&&ku[t.type](t,e)}function de(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function pe(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)de(t[n],e,1);e.polygonEnd()}function ge(){function t(t,e){t*=Xo,e=e*Xo/2+qo/4;var n=t-r,o=n>=0?1:-1,u=o*n,s=Math.cos(e),l=Math.sin(e),c=a*l,f=i*s+c*Math.cos(u),h=c*o*Math.sin(u);Su.add(Math.atan2(h,f)),r=t,i=s,a=l}var e,n,r,i,a;Nu.point=function(o,u){Nu.point=t,r=(e=o)*Xo,i=Math.cos(u=(n=u)*Xo/2+qo/4),a=Math.sin(u)},Nu.lineEnd=function(){t(e,n)}}function ve(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function me(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ye(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function xe(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function be(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function we(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function _e(t){return[Math.atan2(t[1],t[0]),nt(t[2])]}function Me(t,e){return wo(t[0]-e[0])<jo&&wo(t[1]-e[1])<jo}function ke(t,e){t*=Xo;var n=Math.cos(e*=Xo);Ee(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Ee(t,e,n){++Tu,Du+=(t-Du)/Tu,Pu+=(e-Pu)/Tu,Au+=(n-Au)/Tu}function Se(){function t(t,i){t*=Xo;var a=Math.cos(i*=Xo),o=a*Math.cos(t),u=a*Math.sin(t),s=Math.sin(i),l=Math.atan2(Math.sqrt((l=n*s-r*u)*l+(l=r*o-e*s)*l+(l=e*u-n*o)*l),e*o+n*u+r*s);Cu+=l,zu+=l*(e+(e=o)),Lu+=l*(n+(n=u)),Iu+=l*(r+(r=s)),Ee(e,n,r)}var e,n,r;Bu.point=function(i,a){i*=Xo;var o=Math.cos(a*=Xo);e=o*Math.cos(i),n=o*Math.sin(i),r=Math.sin(a),Bu.point=t,Ee(e,n,r)}}function Ne(){Bu.point=ke}function Te(){function t(t,e){t*=Xo;var n=Math.cos(e*=Xo),o=n*Math.cos(t),u=n*Math.sin(t),s=Math.sin(e),l=i*s-a*u,c=a*o-r*s,f=r*u-i*o,h=Math.sqrt(l*l+c*c+f*f),d=r*o+i*u+a*s,p=h&&-et(d)/h,g=Math.atan2(h,d);Ou+=p*l,Ru+=p*c,ju+=p*f,Cu+=g,zu+=g*(r+(r=o)),Lu+=g*(i+(i=u)),Iu+=g*(a+(a=s)),Ee(r,i,a)}var e,n,r,i,a;Bu.point=function(o,u){e=o,n=u,Bu.point=t,o*=Xo;var s=Math.cos(u*=Xo);r=s*Math.cos(o),i=s*Math.sin(o),a=Math.sin(u),Ee(r,i,a)},Bu.lineEnd=function(){t(e,n),Bu.lineEnd=Ne,Bu.point=ke}}function Ce(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n}function De(){return!0}function Pe(t,e,n,r,i){var a=[],o=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(Me(n,r)){i.lineStart();for(var u=0;e>u;++u)i.point((n=t[u])[0],n[1]);return void i.lineEnd()}var s=new ze(n,t,null,!0),l=new ze(n,null,s,!1);s.o=l,a.push(s),o.push(l),s=new ze(r,t,null,!1),l=new ze(r,null,s,!0),s.o=l,a.push(s),o.push(l)}}),o.sort(e),Ae(a),Ae(o),a.length){for(var u=0,s=n,l=o.length;l>u;++u)o[u].e=s=!s;for(var c,f,h=a[0];;){for(var d=h,p=!0;d.v;)if((d=d.n)===h)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(var u=0,l=c.length;l>u;++u)i.point((f=c[u])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(p){c=d.p.z;for(var u=c.length-1;u>=0;--u)i.point((f=c[u])[0],f[1])}else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,p=!p}while(!d.v);i.lineEnd()}}}function Ae(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function ze(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Le(t,e,n,r){return function(i,a){function o(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&a.point(e,n)}function u(t,e){var n=i(t,e);v.point(n[0],n[1])}function s(){y.point=u,v.lineStart()}function l(){y.point=o,v.lineEnd()}function c(t,e){g.push([t,e]);var n=i(t,e);b.point(n[0],n[1])}function f(){b.lineStart(),g=[]}function h(){c(g[0][0],g[0][1]),b.lineEnd();var t,e=b.clean(),n=x.buffer(),r=n.length;if(g.pop(),p.push(g),g=null,r)if(1&e){t=n[0];var i,r=t.length-1,o=-1;if(r>0){for(w||(a.polygonStart(),w=!0),a.lineStart();++o<r;)a.point((i=t[o])[0],i[1]);a.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),d.push(n.filter(Ie))}var d,p,g,v=e(a),m=i.invert(r[0],r[1]),y={point:o,lineStart:s,lineEnd:l,polygonStart:function(){y.point=c,y.lineStart=f,y.lineEnd=h,d=[],p=[]},polygonEnd:function(){y.point=o,y.lineStart=s,y.lineEnd=l,d=so.merge(d);var t=Fe(m,p);d.length?(w||(a.polygonStart(),w=!0),Pe(d,Re,t,n,a)):t&&(w||(a.polygonStart(),w=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),w&&(a.polygonEnd(),w=!1),d=p=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}},x=Oe(),b=e(x),w=!1;return y}}function Ie(t){return t.length>1}function Oe(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:_,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Re(t,e){return((t=t.x)[0]<0?t[1]-Yo-jo:Yo-t[1])-((e=e.x)[0]<0?e[1]-Yo-jo:Yo-e[1])}function je(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var u=a>0?qo:-qo,s=wo(a-n);wo(s-qo)<jo?(t.point(n,r=(r+o)/2>0?Yo:-Yo),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(a,r),e=0):i!==u&&s>=qo&&(wo(n-i)<jo&&(n-=i*jo),wo(a-u)<jo&&(a-=u*jo),r=Be(n,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),e=0),t.point(n=a,r=o),i=u},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function Be(t,e,n,r){var i,a,o=Math.sin(t-n);return wo(o)>jo?Math.atan((Math.sin(e)*(a=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*a*o)):(e+r)/2}function qe(t,e,n,r){var i;if(null==t)i=n*Yo,r.point(-qo,i),r.point(0,i),r.point(qo,i),r.point(qo,0),r.point(qo,-i),r.point(0,-i),r.point(-qo,-i),r.point(-qo,0),r.point(-qo,i);else if(wo(t[0]-e[0])>jo){var a=t[0]<e[0]?qo:-qo;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}function Fe(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],a=0,o=0;Su.reset();for(var u=0,s=e.length;s>u;++u){var l=e[u],c=l.length;if(c)for(var f=l[0],h=f[0],d=f[1]/2+qo/4,p=Math.sin(d),g=Math.cos(d),v=1;;){v===c&&(v=0),t=l[v];var m=t[0],y=t[1]/2+qo/4,x=Math.sin(y),b=Math.cos(y),w=m-h,_=w>=0?1:-1,M=_*w,k=M>qo,E=p*x;if(Su.add(Math.atan2(E*_*Math.sin(M),g*b+E*Math.cos(M))),a+=k?w+_*Fo:w,k^h>=n^m>=n){var S=ye(ve(f),ve(t));we(S);var N=ye(i,S);we(N);var T=(k^w>=0?-1:1)*nt(N[2]);(r>T||r===T&&(S[0]||S[1]))&&(o+=k^w>=0?1:-1)}if(!v++)break;h=m,p=x,g=b,f=t}}return(-jo>a||jo>a&&0>Su)^1&o}function Ve(t){function e(t,e){return Math.cos(t)*Math.cos(e)>a}function n(t){var n,a,s,l,c;return{lineStart:function(){l=s=!1,c=1},point:function(f,h){var d,p=[f,h],g=e(f,h),v=o?g?0:i(f,h):g?i(f+(0>f?qo:-qo),h):0;if(!n&&(l=s=g)&&t.lineStart(),g!==s&&(d=r(n,p),(Me(n,d)||Me(p,d))&&(p[0]+=jo,p[1]+=jo,g=e(p[0],p[1]))),g!==s)c=0,g?(t.lineStart(),d=r(p,n),t.point(d[0],d[1])):(d=r(n,p),t.point(d[0],d[1]),t.lineEnd()),n=d;else if(u&&n&&o^g){var m;v&a||!(m=r(p,n,!0))||(c=0,o?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||n&&Me(n,p)||t.point(p[0],p[1]),n=p,s=g,a=v},lineEnd:function(){s&&t.lineEnd(),n=null},clean:function(){return c|(l&&s)<<1}}}function r(t,e,n){var r=ve(t),i=ve(e),o=[1,0,0],u=ye(r,i),s=me(u,u),l=u[0],c=s-l*l;if(!c)return!n&&t;var f=a*s/c,h=-a*l/c,d=ye(o,u),p=be(o,f),g=be(u,h);xe(p,g);var v=d,m=me(p,v),y=me(v,v),x=m*m-y*(me(p,p)-1);if(!(0>x)){var b=Math.sqrt(x),w=be(v,(-m-b)/y);if(xe(w,p),w=_e(w),!n)return w;var _,M=t[0],k=e[0],E=t[1],S=e[1];M>k&&(_=M,M=k,k=_);var N=k-M,T=wo(N-qo)<jo,C=T||jo>N;if(!T&&E>S&&(_=E,E=S,S=_),C?T?E+S>0^w[1]<(wo(w[0]-M)<jo?E:S):E<=w[1]&&w[1]<=S:N>qo^(M<=w[0]&&w[0]<=k)){var D=be(v,(-m+b)/y);return xe(D,p),[w,_e(D)]}}}function i(e,n){var r=o?t:qo-t,i=0;return-r>e?i|=1:e>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var a=Math.cos(t),o=a>0,u=wo(a)>jo,s=vn(t,6*Xo);return Le(e,n,s,o?[0,-t]:[-qo,t-qo])}function Ye(t,e,n,r){return function(i){var a,o=i.a,u=i.b,s=o.x,l=o.y,c=u.x,f=u.y,h=0,d=1,p=c-s,g=f-l;if(a=t-s,p||!(a>0)){if(a/=p,0>p){if(h>a)return;d>a&&(d=a)}else if(p>0){if(a>d)return;a>h&&(h=a)}if(a=n-s,p||!(0>a)){if(a/=p,0>p){if(a>d)return;a>h&&(h=a)}else if(p>0){if(h>a)return;d>a&&(d=a)}if(a=e-l,g||!(a>0)){if(a/=g,0>g){if(h>a)return;d>a&&(d=a)}else if(g>0){if(a>d)return;a>h&&(h=a)}if(a=r-l,g||!(0>a)){if(a/=g,0>g){if(a>d)return;a>h&&(h=a)}else if(g>0){if(h>a)return;d>a&&(d=a)}return h>0&&(i.a={x:s+h*p,y:l+h*g}),1>d&&(i.b={x:s+d*p,y:l+d*g}),i}}}}}}function Xe(t,e,n,r){function i(r,i){return wo(r[0]-t)<jo?i>0?0:3:wo(r[0]-n)<jo?i>0?2:1:wo(r[1]-e)<jo?i>0?1:0:i>0?3:2}function a(t,e){return o(t.x,e.x)}function o(t,e){var n=i(t,1),r=i(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(u){function s(t){for(var e=0,n=v.length,r=t[1],i=0;n>i;++i)for(var a,o=1,u=v[i],s=u.length,l=u[0];s>o;++o)a=u[o],l[1]<=r?a[1]>r&&tt(l,a,t)>0&&++e:a[1]<=r&&tt(l,a,t)<0&&--e,l=a;return 0!==e}function l(a,u,s,l){var c=0,f=0;if(null==a||(c=i(a,s))!==(f=i(u,s))||o(a,u)<0^s>0){do l.point(0===c||3===c?t:n,c>1?r:e);while((c=(c+s+4)%4)!==f)}else l.point(u[0],u[1])}function c(i,a){return i>=t&&n>=i&&a>=e&&r>=a}function f(t,e){c(t,e)&&u.point(t,e)}function h(){C.point=p,v&&v.push(m=[]),k=!0,M=!1,w=_=NaN}function d(){g&&(p(y,x),b&&M&&N.rejoin(),g.push(N.buffer())),C.point=f,M&&u.lineEnd()}function p(t,e){t=Math.max(-Fu,Math.min(Fu,t)),e=Math.max(-Fu,Math.min(Fu,e));var n=c(t,e);if(v&&m.push([t,e]),k)y=t,x=e,b=n,k=!1,n&&(u.lineStart(),u.point(t,e));else if(n&&M)u.point(t,e);else{var r={a:{x:w,y:_},b:{x:t,y:e}};T(r)?(M||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),n||u.lineEnd(),E=!1):n&&(u.lineStart(),u.point(t,e),E=!1)}w=t,_=e,M=n}var g,v,m,y,x,b,w,_,M,k,E,S=u,N=Oe(),T=Ye(t,e,n,r),C={point:f,lineStart:h,lineEnd:d,polygonStart:function(){u=N,g=[],v=[],E=!0},polygonEnd:function(){u=S,g=so.merge(g);var e=s([t,r]),n=E&&e,i=g.length;(n||i)&&(u.polygonStart(),n&&(u.lineStart(),l(null,null,1,u),u.lineEnd()),i&&Pe(g,a,e,l,u),u.polygonEnd()),g=v=m=null}};return C}}function $e(t){var e=0,n=qo/3,r=sn(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*qo/180,n=t[1]*qo/180):[e/qo*180,n/qo*180]},i}function Ue(t,e){function n(t,e){var n=Math.sqrt(a-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),o-n*Math.cos(t)]}var r=Math.sin(t),i=(r+Math.sin(e))/2,a=1+r*(2*i-r),o=Math.sqrt(a)/i;return n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/i,nt((a-(t*t+n*n)*i*i)/(2*i))]},n}function He(){function t(t,e){Yu+=i*t-r*e,r=t,i=e}var e,n,r,i;Wu.point=function(a,o){Wu.point=t,e=r=a,n=i=o},Wu.lineEnd=function(){t(e,n)}}function We(t,e){Xu>t&&(Xu=t),t>Uu&&(Uu=t),$u>e&&($u=e),e>Hu&&(Hu=e)}function Ze(){function t(t,e){o.push("M",t,",",e,a)}function e(t,e){o.push("M",t,",",e),u.point=n}function n(t,e){o.push("L",t,",",e)}function r(){u.point=t}function i(){o.push("Z")}var a=Ge(4.5),o=[],u={point:t,lineStart:function(){u.point=e},lineEnd:r,polygonStart:function(){u.lineEnd=i},polygonEnd:function(){u.lineEnd=r,u.point=t},pointRadius:function(t){return a=Ge(t),u},result:function(){if(o.length){var t=o.join("");return o=[],t}}};return u}function Ge(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Ke(t,e){Du+=t,Pu+=e,++Au}function Je(){function t(t,r){var i=t-e,a=r-n,o=Math.sqrt(i*i+a*a);zu+=o*(e+t)/2,Lu+=o*(n+r)/2,Iu+=o,Ke(e=t,n=r)}var e,n;Gu.point=function(r,i){Gu.point=t,Ke(e=r,n=i)}}function Qe(){Gu.point=Ke}function tn(){function t(t,e){var n=t-r,a=e-i,o=Math.sqrt(n*n+a*a);zu+=o*(r+t)/2,Lu+=o*(i+e)/2,Iu+=o,o=i*t-r*e,Ou+=o*(r+t),Ru+=o*(i+e),ju+=3*o,Ke(r=t,i=e)}var e,n,r,i;Gu.point=function(a,o){Gu.point=t,Ke(e=r=a,n=i=o)},Gu.lineEnd=function(){t(e,n)}}function en(t){function e(e,n){t.moveTo(e+o,n),t.arc(e,n,o,0,Fo)}function n(e,n){t.moveTo(e,n),u.point=r}function r(e,n){t.lineTo(e,n)}function i(){u.point=e}function a(){t.closePath()}var o=4.5,u={point:e,lineStart:function(){u.point=n},lineEnd:i,polygonStart:function(){u.lineEnd=a},polygonEnd:function(){u.lineEnd=i,u.point=e},pointRadius:function(t){return o=t,u},result:_};return u}function nn(t){function e(t){return(u?r:n)(t)}function n(e){return on(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})}function r(e){function n(n,r){n=t(n,r),e.point(n[0],n[1])}function r(){x=NaN,k.point=a,e.lineStart()}function a(n,r){var a=ve([n,r]),o=t(n,r);i(x,b,y,w,_,M,x=o[0],b=o[1],y=n,w=a[0],_=a[1],M=a[2],u,e),e.point(x,b)}function o(){k.point=n,e.lineEnd()}function s(){r(),k.point=l,k.lineEnd=c}function l(t,e){a(f=t,h=e),d=x,p=b,g=w,v=_,m=M,k.point=a}function c(){i(x,b,y,w,_,M,d,p,f,g,v,m,u,e),k.lineEnd=o,o()}var f,h,d,p,g,v,m,y,x,b,w,_,M,k={point:n,lineStart:r,lineEnd:o,polygonStart:function(){e.polygonStart(),k.lineStart=s},polygonEnd:function(){e.polygonEnd(),k.lineStart=r}};return k}function i(e,n,r,u,s,l,c,f,h,d,p,g,v,m){var y=c-e,x=f-n,b=y*y+x*x;if(b>4*a&&v--){var w=u+d,_=s+p,M=l+g,k=Math.sqrt(w*w+_*_+M*M),E=Math.asin(M/=k),S=wo(wo(M)-1)<jo||wo(r-h)<jo?(r+h)/2:Math.atan2(_,w),N=t(S,E),T=N[0],C=N[1],D=T-e,P=C-n,A=x*D-y*P;(A*A/b>a||wo((y*D+x*P)/b-.5)>.3||o>u*d+s*p+l*g)&&(i(e,n,r,u,s,l,T,C,S,w/=k,_/=k,M,v,m),m.point(T,C),i(T,C,S,w,_,M,c,f,h,d,p,g,v,m))}}var a=.5,o=Math.cos(30*Xo),u=16;return e.precision=function(t){return arguments.length?(u=(a=t*t)>0&&16,e):Math.sqrt(a)},e}function rn(t){var e=nn(function(e,n){return t([e*$o,n*$o])});return function(t){return ln(e(t))}}function an(t){this.stream=t}function on(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function un(t){return sn(function(){return t})()}function sn(t){function e(t){return t=u(t[0]*Xo,t[1]*Xo),[t[0]*h+s,l-t[1]*h]}function n(t){return t=u.invert((t[0]-s)/h,(l-t[1])/h),t&&[t[0]*$o,t[1]*$o]}function r(){u=Ce(o=hn(m,y,b),a);var t=a(g,v);return s=d-t[0]*h,l=p+t[1]*h,i()}function i(){return c&&(c.valid=!1,c=null),e}var a,o,u,s,l,c,f=nn(function(t,e){return t=a(t,e),[t[0]*h+s,l-t[1]*h]}),h=150,d=480,p=250,g=0,v=0,m=0,y=0,b=0,w=qu,_=x,M=null,k=null;return e.stream=function(t){return c&&(c.valid=!1),c=ln(w(o,f(_(t)))),c.valid=!0,c},e.clipAngle=function(t){return arguments.length?(w=null==t?(M=t,qu):Ve((M=+t)*Xo),i()):M},e.clipExtent=function(t){return arguments.length?(k=t,_=t?Xe(t[0][0],t[0][1],t[1][0],t[1][1]):x,i()):k},e.scale=function(t){return arguments.length?(h=+t,r()):h},e.translate=function(t){return arguments.length?(d=+t[0],p=+t[1],r()):[d,p]},e.center=function(t){return arguments.length?(g=t[0]%360*Xo,v=t[1]%360*Xo,r()):[g*$o,v*$o]},e.rotate=function(t){return arguments.length?(m=t[0]%360*Xo,y=t[1]%360*Xo,b=t.length>2?t[2]%360*Xo:0,r()):[m*$o,y*$o,b*$o]},so.rebind(e,f,"precision"),function(){return a=t.apply(this,arguments),e.invert=a.invert&&n,r()}}function ln(t){return on(t,function(e,n){t.point(e*Xo,n*Xo)})}function cn(t,e){return[t,e]}function fn(t,e){return[t>qo?t-Fo:-qo>t?t+Fo:t,e]}function hn(t,e,n){return t?e||n?Ce(pn(t),gn(e,n)):pn(t):e||n?gn(e,n):fn}function dn(t){return function(e,n){return e+=t,[e>qo?e-Fo:-qo>e?e+Fo:e,n]}}function pn(t){var e=dn(t);return e.invert=dn(-t),e}function gn(t,e){function n(t,e){var n=Math.cos(e),u=Math.cos(t)*n,s=Math.sin(t)*n,l=Math.sin(e),c=l*r+u*i;return[Math.atan2(s*a-c*o,u*r-l*i),nt(c*a+s*o)]}var r=Math.cos(t),i=Math.sin(t),a=Math.cos(e),o=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),u=Math.cos(t)*n,s=Math.sin(t)*n,l=Math.sin(e),c=l*a-s*o;return[Math.atan2(s*a+l*o,u*r+c*i),nt(c*r-u*i)]},n}function vn(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,a,o,u){var s=o*e;null!=i?(i=mn(n,i),a=mn(n,a),(o>0?a>i:i>a)&&(i+=o*Fo)):(i=t+o*Fo,a=t-.5*s);for(var l,c=i;o>0?c>a:a>c;c-=s)u.point((l=_e([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}function mn(t,e){var n=ve(e);n[0]-=t,we(n);var r=et(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-jo)%(2*Math.PI)}function yn(t,e,n){var r=so.range(t,e-jo,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function xn(t,e,n){var r=so.range(t,e-jo,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function bn(t){return t.source}function wn(t){return t.target}function _n(t,e,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(r),u=Math.sin(r),s=i*Math.cos(t),l=i*Math.sin(t),c=o*Math.cos(n),f=o*Math.sin(n),h=2*Math.asin(Math.sqrt(ot(r-e)+i*o*ot(n-t))),d=1/Math.sin(h),p=h?function(t){var e=Math.sin(t*=h)*d,n=Math.sin(h-t)*d,r=n*s+e*c,i=n*l+e*f,o=n*a+e*u;return[Math.atan2(i,r)*$o,Math.atan2(o,Math.sqrt(r*r+i*i))*$o]}:function(){return[t*$o,e*$o]};return p.distance=h,p}function Mn(){function t(t,i){var a=Math.sin(i*=Xo),o=Math.cos(i),u=wo((t*=Xo)-e),s=Math.cos(u);Ku+=Math.atan2(Math.sqrt((u=o*Math.sin(u))*u+(u=r*a-n*o*s)*u),n*a+r*o*s),e=t,n=a,r=o}var e,n,r;Ju.point=function(i,a){e=i*Xo,n=Math.sin(a*=Xo),r=Math.cos(a),Ju.point=t},Ju.lineEnd=function(){Ju.point=Ju.lineEnd=_}}function kn(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),a=t(r*i);return[a*i*Math.sin(e),a*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),a=Math.sin(i),o=Math.cos(i);return[Math.atan2(t*a,r*o),Math.asin(r&&n*a/r)]},n}function En(t,e){function n(t,e){o>0?-Yo+jo>e&&(e=-Yo+jo):e>Yo-jo&&(e=Yo-jo);var n=o/Math.pow(i(e),a);return[n*Math.sin(a*t),o-n*Math.cos(a*t)]}var r=Math.cos(t),i=function(t){return Math.tan(qo/4+t/2)},a=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(i(e)/i(t)),o=r*Math.pow(i(t),a)/a;return a?(n.invert=function(t,e){var n=o-e,r=Q(a)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/a,2*Math.atan(Math.pow(o/r,1/a))-Yo]},n):Nn}function Sn(t,e){function n(t,e){var n=a-e;return[n*Math.sin(i*t),a-n*Math.cos(i*t)]}var r=Math.cos(t),i=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),a=r/i+t;return wo(i)<jo?cn:(n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/i,a-Q(i)*Math.sqrt(t*t+n*n)]},n)}function Nn(t,e){return[t,Math.log(Math.tan(qo/4+e/2))]}function Tn(t){var e,n=un(t),r=n.scale,i=n.translate,a=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var o=a.apply(n,arguments);if(o===n){if(e=null==t){var u=qo*r(),s=i();a([[s[0]-u,s[1]-u],[s[0]+u,s[1]+u]])}}else e&&(o=null);return o},n.clipExtent(null)}function Cn(t,e){return[Math.log(Math.tan(qo/4+e/2)),-t]}function Dn(t){return t[0]}function Pn(t){return t[1]}function An(t){for(var e=t.length,n=[0,1],r=2,i=2;e>i;i++){for(;r>1&&tt(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function zn(t,e){return t[0]-e[0]||t[1]-e[1]}function Ln(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function In(t,e,n,r){var i=t[0],a=n[0],o=e[0]-i,u=r[0]-a,s=t[1],l=n[1],c=e[1]-s,f=r[1]-l,h=(u*(s-l)-f*(i-a))/(f*o-u*c);return[i+h*o,s+h*c]}function On(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function Rn(){ir(this),this.edge=this.site=this.circle=null}function jn(t){var e=cs.pop()||new Rn;return e.site=t,e}function Bn(t){Zn(t),us.remove(t),cs.push(t),ir(t)}function qn(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},a=t.P,o=t.N,u=[t];Bn(t);for(var s=a;s.circle&&wo(n-s.circle.x)<jo&&wo(r-s.circle.cy)<jo;)a=s.P,u.unshift(s),Bn(s),s=a;u.unshift(s),Zn(s);for(var l=o;l.circle&&wo(n-l.circle.x)<jo&&wo(r-l.circle.cy)<jo;)o=l.N,u.push(l),Bn(l),l=o;u.push(l),Zn(l);var c,f=u.length;for(c=1;f>c;++c)l=u[c],s=u[c-1],er(l.edge,s.site,l.site,i);s=u[0],l=u[f-1],l.edge=Qn(s.site,l.site,null,i),Wn(s),Wn(l)}function Fn(t){for(var e,n,r,i,a=t.x,o=t.y,u=us._;u;)if(r=Vn(u,o)-a,r>jo)u=u.L;else{if(i=a-Yn(u,o),!(i>jo)){r>-jo?(e=u.P,n=u):i>-jo?(e=u,n=u.N):e=n=u;break}if(!u.R){e=u;break}u=u.R}var s=jn(t);if(us.insert(e,s),e||n){if(e===n)return Zn(e),n=jn(e.site),us.insert(s,n),s.edge=n.edge=Qn(e.site,s.site),Wn(e),void Wn(n);if(!n)return void(s.edge=Qn(e.site,s.site));Zn(e),Zn(n);var l=e.site,c=l.x,f=l.y,h=t.x-c,d=t.y-f,p=n.site,g=p.x-c,v=p.y-f,m=2*(h*v-d*g),y=h*h+d*d,x=g*g+v*v,b={x:(v*y-d*x)/m+c,y:(h*x-g*y)/m+f};er(n.edge,l,p,b),s.edge=Qn(l,t,null,b),n.edge=Qn(t,p,null,b),Wn(e),Wn(n)}}function Vn(t,e){var n=t.site,r=n.x,i=n.y,a=i-e;if(!a)return r;var o=t.P;if(!o)return-(1/0);n=o.site;var u=n.x,s=n.y,l=s-e;if(!l)return u;var c=u-r,f=1/a-1/l,h=c/l;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*l)-s+l/2+i-a/2)))/f+r:(r+u)/2}function Yn(t,e){var n=t.N;if(n)return Vn(n,e);var r=t.site;return r.y===e?r.x:1/0}function Xn(t){this.site=t,this.edges=[]}function $n(t){for(var e,n,r,i,a,o,u,s,l,c,f=t[0][0],h=t[1][0],d=t[0][1],p=t[1][1],g=os,v=g.length;v--;)if(a=g[v],a&&a.prepare())for(u=a.edges,s=u.length,o=0;s>o;)c=u[o].end(),r=c.x,i=c.y,l=u[++o%s].start(),e=l.x,n=l.y,(wo(r-e)>jo||wo(i-n)>jo)&&(u.splice(o,0,new nr(tr(a.site,c,wo(r-f)<jo&&p-i>jo?{x:f,y:wo(e-f)<jo?n:p}:wo(i-p)<jo&&h-r>jo?{x:wo(n-p)<jo?e:h,y:p}:wo(r-h)<jo&&i-d>jo?{x:h,y:wo(e-h)<jo?n:d}:wo(i-d)<jo&&r-f>jo?{x:wo(n-d)<jo?e:f,y:d}:null),a.site,null)),++s)}function Un(t,e){return e.angle-t.angle}function Hn(){ir(this),this.x=this.y=this.arc=this.site=this.cy=null}function Wn(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,a=n.site;if(r!==a){var o=i.x,u=i.y,s=r.x-o,l=r.y-u,c=a.x-o,f=a.y-u,h=2*(s*f-l*c);if(!(h>=-Bo)){var d=s*s+l*l,p=c*c+f*f,g=(f*d-l*p)/h,v=(s*p-c*d)/h,f=v+u,m=fs.pop()||new Hn;m.arc=t,m.site=i,m.x=g+o,m.y=f+Math.sqrt(g*g+v*v),m.cy=f,t.circle=m;for(var y=null,x=ls._;x;)if(m.y<x.y||m.y===x.y&&m.x<=x.x){if(!x.L){y=x.P;break}x=x.L}else{if(!x.R){y=x;break}x=x.R}ls.insert(y,m),y||(ss=m)}}}}function Zn(t){var e=t.circle;e&&(e.P||(ss=e.N),ls.remove(e),fs.push(e),ir(e),t.circle=null)}function Gn(t){for(var e,n=as,r=Ye(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)e=n[i],(!Kn(e,t)||!r(e)||wo(e.a.x-e.b.x)<jo&&wo(e.a.y-e.b.y)<jo)&&(e.a=e.b=null,n.splice(i,1))}function Kn(t,e){var n=t.b;if(n)return!0;var r,i,a=t.a,o=e[0][0],u=e[1][0],s=e[0][1],l=e[1][1],c=t.l,f=t.r,h=c.x,d=c.y,p=f.x,g=f.y,v=(h+p)/2,m=(d+g)/2;if(g===d){if(o>v||v>=u)return;if(h>p){if(a){if(a.y>=l)return}else a={x:v,y:s};n={x:v,y:l}}else{if(a){if(a.y<s)return}else a={x:v,y:l};n={x:v,y:s}}}else if(r=(h-p)/(g-d),i=m-r*v,
-1>r||r>1)if(h>p){if(a){if(a.y>=l)return}else a={x:(s-i)/r,y:s};n={x:(l-i)/r,y:l}}else{if(a){if(a.y<s)return}else a={x:(l-i)/r,y:l};n={x:(s-i)/r,y:s}}else if(g>d){if(a){if(a.x>=u)return}else a={x:o,y:r*o+i};n={x:u,y:r*u+i}}else{if(a){if(a.x<o)return}else a={x:u,y:r*u+i};n={x:o,y:r*o+i}}return t.a=a,t.b=n,!0}function Jn(t,e){this.l=t,this.r=e,this.a=this.b=null}function Qn(t,e,n,r){var i=new Jn(t,e);return as.push(i),n&&er(i,t,e,n),r&&er(i,e,t,r),os[t.i].edges.push(new nr(i,t,e)),os[e.i].edges.push(new nr(i,e,t)),i}function tr(t,e,n){var r=new Jn(t,null);return r.a=e,r.b=n,as.push(r),r}function er(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function nr(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function rr(){this._=null}function ir(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ar(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function or(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ur(t){for(;t.L;)t=t.L;return t}function sr(t,e){var n,r,i,a=t.sort(lr).pop();for(as=[],os=new Array(t.length),us=new rr,ls=new rr;;)if(i=ss,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))(a.x!==n||a.y!==r)&&(os[a.i]=new Xn(a),Fn(a),n=a.x,r=a.y),a=t.pop();else{if(!i)break;qn(i.arc)}e&&(Gn(e),$n(e));var o={cells:os,edges:as};return us=ls=as=os=null,o}function lr(t,e){return e.y-t.y||e.x-t.x}function cr(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function fr(t){return t.x}function hr(t){return t.y}function dr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function pr(t,e,n,r,i,a){if(!t(e,n,r,i,a)){var o=.5*(n+i),u=.5*(r+a),s=e.nodes;s[0]&&pr(t,s[0],n,r,o,u),s[1]&&pr(t,s[1],o,r,i,u),s[2]&&pr(t,s[2],n,u,o,a),s[3]&&pr(t,s[3],o,u,i,a)}}function gr(t,e,n,r,i,a,o){var u,s=1/0;return function l(t,c,f,h,d){if(!(c>a||f>o||r>h||i>d)){if(p=t.point){var p,g=e-t.x,v=n-t.y,m=g*g+v*v;if(s>m){var y=Math.sqrt(s=m);r=e-y,i=n-y,a=e+y,o=n+y,u=p}}for(var x=t.nodes,b=.5*(c+h),w=.5*(f+d),_=e>=b,M=n>=w,k=M<<1|_,E=k+4;E>k;++k)if(t=x[3&k])switch(3&k){case 0:l(t,c,f,b,w);break;case 1:l(t,b,f,h,w);break;case 2:l(t,c,w,b,d);break;case 3:l(t,b,w,h,d)}}}(t,r,i,a,o),u}function vr(t,e){t=so.rgb(t),e=so.rgb(e);var n=t.r,r=t.g,i=t.b,a=e.r-n,o=e.g-r,u=e.b-i;return function(t){return"#"+wt(Math.round(n+a*t))+wt(Math.round(r+o*t))+wt(Math.round(i+u*t))}}function mr(t,e){var n,r={},i={};for(n in t)n in e?r[n]=br(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function yr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function xr(t,e){var n,r,i,a=ds.lastIndex=ps.lastIndex=0,o=-1,u=[],s=[];for(t+="",e+="";(n=ds.exec(t))&&(r=ps.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),u[o]?u[o]+=i:u[++o]=i),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,s.push({i:o,x:yr(n,r)})),a=ps.lastIndex;return a<e.length&&(i=e.slice(a),u[o]?u[o]+=i:u[++o]=i),u.length<2?s[0]?(e=s[0].x,function(t){return e(t)+""}):function(){return e}:(e=s.length,function(t){for(var n,r=0;e>r;++r)u[(n=s[r]).i]=n.x(t);return u.join("")})}function br(t,e){for(var n,r=so.interpolators.length;--r>=0&&!(n=so.interpolators[r](t,e)););return n}function wr(t,e){var n,r=[],i=[],a=t.length,o=e.length,u=Math.min(t.length,e.length);for(n=0;u>n;++n)r.push(br(t[n],e[n]));for(;a>n;++n)i[n]=t[n];for(;o>n;++n)i[n]=e[n];return function(t){for(n=0;u>n;++n)i[n]=r[n](t);return i}}function _r(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function Mr(t){return function(e){return 1-t(1-e)}}function kr(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function Er(t){return t*t}function Sr(t){return t*t*t}function Nr(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function Tr(t){return function(e){return Math.pow(e,t)}}function Cr(t){return 1-Math.cos(t*Yo)}function Dr(t){return Math.pow(2,10*(t-1))}function Pr(t){return 1-Math.sqrt(1-t*t)}function Ar(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Fo*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Fo/e)}}function zr(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Lr(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Ir(t,e){t=so.hcl(t),e=so.hcl(e);var n=t.h,r=t.c,i=t.l,a=e.h-n,o=e.c-r,u=e.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?e.c:r),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:-180>a&&(a+=360),function(t){return ft(n+a*t,r+o*t,i+u*t)+""}}function Or(t,e){t=so.hsl(t),e=so.hsl(e);var n=t.h,r=t.s,i=t.l,a=e.h-n,o=e.s-r,u=e.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?e.s:r),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:-180>a&&(a+=360),function(t){return lt(n+a*t,r+o*t,i+u*t)+""}}function Rr(t,e){t=so.lab(t),e=so.lab(e);var n=t.l,r=t.a,i=t.b,a=e.l-n,o=e.a-r,u=e.b-i;return function(t){return dt(n+a*t,r+o*t,i+u*t)+""}}function jr(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Br(t){var e=[t.a,t.b],n=[t.c,t.d],r=Fr(e),i=qr(e,n),a=Fr(Vr(n,e,-i))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*$o,this.translate=[t.e,t.f],this.scale=[r,a],this.skew=a?Math.atan2(i,a)*$o:0}function qr(t,e){return t[0]*e[0]+t[1]*e[1]}function Fr(t){var e=Math.sqrt(qr(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Vr(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Yr(t){return t.length?t.pop()+",":""}function Xr(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:yr(t[0],e[0])},{i:i-2,x:yr(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}function $r(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(Yr(n)+"rotate(",null,")")-2,x:yr(t,e)})):e&&n.push(Yr(n)+"rotate("+e+")")}function Ur(t,e,n,r){t!==e?r.push({i:n.push(Yr(n)+"skewX(",null,")")-2,x:yr(t,e)}):e&&n.push(Yr(n)+"skewX("+e+")")}function Hr(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push(Yr(n)+"scale(",null,",",null,")");r.push({i:i-4,x:yr(t[0],e[0])},{i:i-2,x:yr(t[1],e[1])})}else(1!==e[0]||1!==e[1])&&n.push(Yr(n)+"scale("+e+")")}function Wr(t,e){var n=[],r=[];return t=so.transform(t),e=so.transform(e),Xr(t.translate,e.translate,n,r),$r(t.rotate,e.rotate,n,r),Ur(t.skew,e.skew,n,r),Hr(t.scale,e.scale,n,r),t=e=null,function(t){for(var e,i=-1,a=r.length;++i<a;)n[(e=r[i]).i]=e.x(t);return n.join("")}}function Zr(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function Gr(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function Kr(t){for(var e=t.source,n=t.target,r=Qr(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var a=i.length;n!==r;)i.splice(a,0,n),n=n.parent;return i}function Jr(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Qr(t,e){if(t===e)return t;for(var n=Jr(t),r=Jr(e),i=n.pop(),a=r.pop(),o=null;i===a;)o=i,i=n.pop(),a=r.pop();return o}function ti(t){t.fixed|=2}function ei(t){t.fixed&=-7}function ni(t){t.fixed|=4,t.px=t.x,t.py=t.y}function ri(t){t.fixed&=-5}function ii(t,e,n){var r=0,i=0;if(t.charge=0,!t.leaf)for(var a,o=t.nodes,u=o.length,s=-1;++s<u;)a=o[s],null!=a&&(ii(a,e,n),t.charge+=a.charge,r+=a.charge*a.cx,i+=a.charge*a.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var l=e*n[t.point.index];t.charge+=t.pointCharge=l,r+=l*t.point.x,i+=l*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}function ai(t,e){return so.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=fi,t}function oi(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function ui(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(a=t.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)n.push(a[o]);for(;null!=(t=r.pop());)e(t)}function si(t){return t.children}function li(t){return t.value}function ci(t,e){return e.value-t.value}function fi(t){return so.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function hi(t){return t.x}function di(t){return t.y}function pi(t,e,n){t.y0=e,t.y=n}function gi(t){return so.range(t.length)}function vi(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function mi(t){for(var e,n=1,r=0,i=t[0][1],a=t.length;a>n;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function yi(t){return t.reduce(xi,0)}function xi(t,e){return t+e[1]}function bi(t,e){return wi(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function wi(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,a=[];++n<=e;)a[n]=i*n+r;return a}function _i(t){return[so.min(t),so.max(t)]}function Mi(t,e){return t.value-e.value}function ki(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Ei(t,e){t._pack_next=e,e._pack_prev=t}function Si(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function Ni(t){function e(t){c=Math.min(t.x-t.r,c),f=Math.max(t.x+t.r,f),h=Math.min(t.y-t.r,h),d=Math.max(t.y+t.r,d)}if((n=t.children)&&(l=n.length)){var n,r,i,a,o,u,s,l,c=1/0,f=-(1/0),h=1/0,d=-(1/0);if(n.forEach(Ti),r=n[0],r.x=-r.r,r.y=0,e(r),l>1&&(i=n[1],i.x=i.r,i.y=0,e(i),l>2))for(a=n[2],Pi(r,i,a),e(a),ki(r,a),r._pack_prev=a,ki(a,i),i=r._pack_next,o=3;l>o;o++){Pi(r,i,a=n[o]);var p=0,g=1,v=1;for(u=i._pack_next;u!==i;u=u._pack_next,g++)if(Si(u,a)){p=1;break}if(1==p)for(s=r._pack_prev;s!==u._pack_prev&&!Si(s,a);s=s._pack_prev,v++);p?(v>g||g==v&&i.r<r.r?Ei(r,i=u):Ei(r=s,i),o--):(ki(r,a),i=a,e(a))}var m=(c+f)/2,y=(h+d)/2,x=0;for(o=0;l>o;o++)a=n[o],a.x-=m,a.y-=y,x=Math.max(x,a.r+Math.sqrt(a.x*a.x+a.y*a.y));t.r=x,n.forEach(Ci)}}function Ti(t){t._pack_next=t._pack_prev=t}function Ci(t){delete t._pack_next,delete t._pack_prev}function Di(t,e,n,r){var i=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,i)for(var a=-1,o=i.length;++a<o;)Di(i[a],e,n,r)}function Pi(t,e,n){var r=t.r+n.r,i=e.x-t.x,a=e.y-t.y;if(r&&(i||a)){var o=e.r+n.r,u=i*i+a*a;o*=o,r*=r;var s=.5+(r-o)/(2*u),l=Math.sqrt(Math.max(0,2*o*(r+u)-(r-=u)*r-o*o))/(2*u);n.x=t.x+s*i+l*a,n.y=t.y+s*a-l*i}else n.x=t.x+r,n.y=t.y}function Ai(t,e){return t.parent==e.parent?1:2}function zi(t){var e=t.children;return e.length?e[0]:t.t}function Li(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function Ii(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Oi(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)e=i[a],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function Ri(t,e,n){return t.a.parent===e.parent?t.a:n}function ji(t){return 1+so.max(t,function(t){return t.y})}function Bi(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function qi(t){var e=t.children;return e&&e.length?qi(e[0]):t}function Fi(t){var e,n=t.children;return n&&(e=n.length)?Fi(n[e-1]):t}function Vi(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Yi(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];return 0>i&&(n+=i/2,i=0),0>a&&(r+=a/2,a=0),{x:n,y:r,dx:i,dy:a}}function Xi(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function $i(t){return t.rangeExtent?t.rangeExtent():Xi(t.range())}function Ui(t,e,n,r){var i=n(t[0],t[1]),a=r(e[0],e[1]);return function(t){return a(i(t))}}function Hi(t,e){var n,r=0,i=t.length-1,a=t[r],o=t[i];return a>o&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t}function Wi(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Es}function Zi(t,e,n,r){var i=[],a=[],o=0,u=Math.min(t.length,e.length)-1;for(t[u]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<=u;)i.push(n(t[o-1],t[o])),a.push(r(e[o-1],e[o]));return function(e){var n=so.bisect(t,e,1,u)-1;return a[n](i[n](e))}}function Gi(t,e,n,r){function i(){var i=Math.min(t.length,e.length)>2?Zi:Ui,s=r?Gr:Zr;return o=i(t,e,s,n),u=i(e,t,s,br),a}function a(t){return o(t)}var o,u;return a.invert=function(t){return u(t)},a.domain=function(e){return arguments.length?(t=e.map(Number),i()):t},a.range=function(t){return arguments.length?(e=t,i()):e},a.rangeRound=function(t){return a.range(t).interpolate(jr)},a.clamp=function(t){return arguments.length?(r=t,i()):r},a.interpolate=function(t){return arguments.length?(n=t,i()):n},a.ticks=function(e){return ta(t,e)},a.tickFormat=function(e,n){return ea(t,e,n)},a.nice=function(e){return Ji(t,e),i()},a.copy=function(){return Gi(t,e,n,r)},i()}function Ki(t,e){return so.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Ji(t,e){return Hi(t,Wi(Qi(t,e)[2])),Hi(t,Wi(Qi(t,e)[2])),t}function Qi(t,e){null==e&&(e=10);var n=Xi(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),a=e/r*i;return.15>=a?i*=10:.35>=a?i*=5:.75>=a&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function ta(t,e){return so.range.apply(so,Qi(t,e))}function ea(t,e,n){var r=Qi(t,e);if(n){var i=du.exec(n);if(i.shift(),"s"===i[8]){var a=so.formatPrefix(Math.max(wo(r[0]),wo(r[1])));return i[7]||(i[7]="."+na(a.scale(r[2]))),i[8]="f",n=so.format(i.join("")),function(t){return n(a.scale(t))+a.symbol}}i[7]||(i[7]="."+ra(i[8],r)),n=i.join("")}else n=",."+na(r[2])+"f";return so.format(n)}function na(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function ra(t,e){var n=na(e[2]);return t in Ss?Math.abs(n-na(Math.max(wo(e[0]),wo(e[1]))))+ +("e"!==t):n-2*("%"===t)}function ia(t,e,n,r){function i(t){return(n?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function a(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function o(e){return t(i(e))}return o.invert=function(e){return a(t.invert(e))},o.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((r=e.map(Number)).map(i)),o):r},o.base=function(n){return arguments.length?(e=+n,t.domain(r.map(i)),o):e},o.nice=function(){var e=Hi(r.map(i),n?Math:Ts);return t.domain(e),r=e.map(a),o},o.ticks=function(){var t=Xi(r),o=[],u=t[0],s=t[1],l=Math.floor(i(u)),c=Math.ceil(i(s)),f=e%1?2:e;if(isFinite(c-l)){if(n){for(;c>l;l++)for(var h=1;f>h;h++)o.push(a(l)*h);o.push(a(l))}else for(o.push(a(l));l++<c;)for(var h=f-1;h>0;h--)o.push(a(l)*h);for(l=0;o[l]<u;l++);for(c=o.length;o[c-1]>s;c--);o=o.slice(l,c)}return o},o.tickFormat=function(t,n){if(!arguments.length)return Ns;arguments.length<2?n=Ns:"function"!=typeof n&&(n=so.format(n));var r=Math.max(1,e*t/o.ticks().length);return function(t){var o=t/a(Math.round(i(t)));return e-.5>o*e&&(o*=e),r>=o?n(t):""}},o.copy=function(){return ia(t.copy(),e,n,r)},Ki(o,t)}function aa(t,e,n){function r(e){return t(i(e))}var i=oa(e),a=oa(1/e);return r.invert=function(e){return a(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(i)),r):n},r.ticks=function(t){return ta(n,t)},r.tickFormat=function(t,e){return ea(n,t,e)},r.nice=function(t){return r.domain(Ji(n,t))},r.exponent=function(o){return arguments.length?(i=oa(e=o),a=oa(1/e),t.domain(n.map(i)),r):e},r.copy=function(){return aa(t.copy(),e,n)},Ki(r,t)}function oa(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function ua(t,e){function n(n){return a[((i.get(n)||("range"===e.t?i.set(n,t.push(n)):NaN))-1)%a.length]}function r(e,n){return so.range(t.length).map(function(t){return e+n*t})}var i,a,o;return n.domain=function(r){if(!arguments.length)return t;t=[],i=new c;for(var a,o=-1,u=r.length;++o<u;)i.has(a=r[o])||i.set(a,t.push(a));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(a=t,o=0,e={t:"range",a:arguments},n):a},n.rangePoints=function(i,u){arguments.length<2&&(u=0);var s=i[0],l=i[1],c=t.length<2?(s=(s+l)/2,0):(l-s)/(t.length-1+u);return a=r(s+c*u/2,c),o=0,e={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,u){arguments.length<2&&(u=0);var s=i[0],l=i[1],c=t.length<2?(s=l=Math.round((s+l)/2),0):(l-s)/(t.length-1+u)|0;return a=r(s+Math.round(c*u/2+(l-s-(t.length-1+u)*c)/2),c),o=0,e={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,u,s){arguments.length<2&&(u=0),arguments.length<3&&(s=u);var l=i[1]<i[0],c=i[l-0],f=i[1-l],h=(f-c)/(t.length-u+2*s);return a=r(c+h*s,h),l&&a.reverse(),o=h*(1-u),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,u,s){arguments.length<2&&(u=0),arguments.length<3&&(s=u);var l=i[1]<i[0],c=i[l-0],f=i[1-l],h=Math.floor((f-c)/(t.length-u+2*s));return a=r(c+Math.round((f-c-(t.length-u)*h)/2),h),l&&a.reverse(),o=Math.round(h*(1-u)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return o},n.rangeExtent=function(){return Xi(e.a[0])},n.copy=function(){return ua(t,e)},n.domain(t)}function sa(t,e){function n(){var n=0,r=e.length;for(u=[];++n<r;)u[n-1]=so.quantile(t,n/r);return o}function o(t){return isNaN(t=+t)?void 0:e[so.bisect(u,t)]}var u;return o.domain=function(e){return arguments.length?(t=e.map(i).filter(a).sort(r),n()):t},o.range=function(t){return arguments.length?(e=t,n()):e},o.quantiles=function(){return u},o.invertExtent=function(n){return n=e.indexOf(n),0>n?[NaN,NaN]:[n>0?u[n-1]:t[0],n<u.length?u[n]:t[t.length-1]]},o.copy=function(){return sa(t,e)},n()}function la(t,e,n){function r(e){return n[Math.max(0,Math.min(o,Math.floor(a*(e-t))))]}function i(){return a=n.length/(e-t),o=n.length-1,r}var a,o;return r.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],i()):[t,e]},r.range=function(t){return arguments.length?(n=t,i()):n},r.invertExtent=function(e){return e=n.indexOf(e),e=0>e?NaN:e/a+t,[e,e+1/a]},r.copy=function(){return la(t,e,n)},i()}function ca(t,e){function n(n){return n>=n?e[so.bisect(t,n)]:void 0}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return ca(t,e)},n}function fa(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return ta(t,e)},e.tickFormat=function(e,n){return ea(t,e,n)},e.copy=function(){return fa(t)},e}function ha(){return 0}function da(t){return t.innerRadius}function pa(t){return t.outerRadius}function ga(t){return t.startAngle}function va(t){return t.endAngle}function ma(t){return t&&t.padAngle}function ya(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function xa(t,e,n,r,i){var a=t[0]-e[0],o=t[1]-e[1],u=(i?r:-r)/Math.sqrt(a*a+o*o),s=u*o,l=-u*a,c=t[0]+s,f=t[1]+l,h=e[0]+s,d=e[1]+l,p=(c+h)/2,g=(f+d)/2,v=h-c,m=d-f,y=v*v+m*m,x=n-r,b=c*d-h*f,w=(0>m?-1:1)*Math.sqrt(Math.max(0,x*x*y-b*b)),_=(b*m-v*w)/y,M=(-b*v-m*w)/y,k=(b*m+v*w)/y,E=(-b*v+m*w)/y,S=_-p,N=M-g,T=k-p,C=E-g;return S*S+N*N>T*T+C*C&&(_=k,M=E),[[_-s,M-l],[_*n/x,M*n/x]]}function ba(t){function e(e){function o(){l.push("M",a(t(c),u))}for(var s,l=[],c=[],f=-1,h=e.length,d=Nt(n),p=Nt(r);++f<h;)i.call(this,s=e[f],f)?c.push([+d.call(this,s,f),+p.call(this,s,f)]):c.length&&(o(),c=[]);return c.length&&o(),l.length?l.join(""):null}var n=Dn,r=Pn,i=De,a=wa,o=a.key,u=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e.defined=function(t){return arguments.length?(i=t,e):i},e.interpolate=function(t){return arguments.length?(o="function"==typeof t?a=t:(a=Ls.get(t)||wa).key,e):o},e.tension=function(t){return arguments.length?(u=t,e):u},e}function wa(t){return t.length>1?t.join("L"):t+"Z"}function _a(t){return t.join("L")+"Z"}function Ma(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function ka(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function Ea(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function Sa(t,e){return t.length<4?wa(t):t[1]+Ca(t.slice(1,-1),Da(t,e))}function Na(t,e){return t.length<3?_a(t):t[0]+Ca((t.push(t[0]),t),Da([t[t.length-2]].concat(t,[t[1]]),e))}function Ta(t,e){return t.length<3?wa(t):t[0]+Ca(t,Da(t,e))}function Ca(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return wa(t);var n=t.length!=e.length,r="",i=t[0],a=t[1],o=e[0],u=o,s=1;if(n&&(r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=t[1],s=2),e.length>1){u=e[1],a=t[s],s++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-u[0])+","+(a[1]-u[1])+","+a[0]+","+a[1];for(var l=2;l<e.length;l++,s++)a=t[s],u=e[l],r+="S"+(a[0]-u[0])+","+(a[1]-u[1])+","+a[0]+","+a[1]}if(n){var c=t[s];r+="Q"+(a[0]+2*u[0]/3)+","+(a[1]+2*u[1]/3)+","+c[0]+","+c[1]}return r}function Da(t,e){for(var n,r=[],i=(1-e)/2,a=t[0],o=t[1],u=1,s=t.length;++u<s;)n=a,a=o,o=t[u],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function Pa(t){if(t.length<3)return wa(t);var e=1,n=t.length,r=t[0],i=r[0],a=r[1],o=[i,i,i,(r=t[1])[0]],u=[a,a,a,r[1]],s=[i,",",a,"L",Ia(Rs,o),",",Ia(Rs,u)];for(t.push(t[n-1]);++e<=n;)r=t[e],o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),Oa(s,o,u);return t.pop(),s.push("L",r),s.join("")}function Aa(t){if(t.length<4)return wa(t);for(var e,n=[],r=-1,i=t.length,a=[0],o=[0];++r<3;)e=t[r],a.push(e[0]),o.push(e[1]);for(n.push(Ia(Rs,a)+","+Ia(Rs,o)),--r;++r<i;)e=t[r],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),Oa(n,a,o);return n.join("")}function za(t){for(var e,n,r=-1,i=t.length,a=i+4,o=[],u=[];++r<4;)n=t[r%i],o.push(n[0]),u.push(n[1]);for(e=[Ia(Rs,o),",",Ia(Rs,u)],--r;++r<a;)n=t[r%i],o.shift(),o.push(n[0]),u.shift(),u.push(n[1]),Oa(e,o,u);return e.join("")}function La(t,e){var n=t.length-1;if(n)for(var r,i,a=t[0][0],o=t[0][1],u=t[n][0]-a,s=t[n][1]-o,l=-1;++l<=n;)r=t[l],i=l/n,r[0]=e*r[0]+(1-e)*(a+i*u),r[1]=e*r[1]+(1-e)*(o+i*s);return Pa(t)}function Ia(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Oa(t,e,n){t.push("C",Ia(Is,e),",",Ia(Is,n),",",Ia(Os,e),",",Ia(Os,n),",",Ia(Rs,e),",",Ia(Rs,n))}function Ra(t,e){return(e[1]-t[1])/(e[0]-t[0])}function ja(t){for(var e=0,n=t.length-1,r=[],i=t[0],a=t[1],o=r[0]=Ra(i,a);++e<n;)r[e]=(o+(o=Ra(i=a,a=t[e+1])))/2;return r[e]=o,r}function Ba(t){for(var e,n,r,i,a=[],o=ja(t),u=-1,s=t.length-1;++u<s;)e=Ra(t[u],t[u+1]),wo(e)<jo?o[u]=o[u+1]=0:(n=o[u]/e,r=o[u+1]/e,i=n*n+r*r,i>9&&(i=3*e/Math.sqrt(i),o[u]=i*n,o[u+1]=i*r));for(u=-1;++u<=s;)i=(t[Math.min(s,u+1)][0]-t[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),a.push([i||0,o[u]*i||0]);return a}function qa(t){return t.length<3?wa(t):t[0]+Ca(t,Ba(t))}function Fa(t){for(var e,n,r,i=-1,a=t.length;++i<a;)e=t[i],n=e[0],r=e[1]-Yo,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function Va(t){function e(e){function s(){g.push("M",u(t(m),f),c,l(t(v.reverse()),f),"Z")}for(var h,d,p,g=[],v=[],m=[],y=-1,x=e.length,b=Nt(n),w=Nt(i),_=n===r?function(){return d}:Nt(r),M=i===a?function(){return p}:Nt(a);++y<x;)o.call(this,h=e[y],y)?(v.push([d=+b.call(this,h,y),p=+w.call(this,h,y)]),m.push([+_.call(this,h,y),+M.call(this,h,y)])):v.length&&(s(),v=[],m=[]);return v.length&&s(),g.length?g.join(""):null}var n=Dn,r=Dn,i=0,a=Pn,o=De,u=wa,s=u.key,l=u,c="L",f=.7;return e.x=function(t){return arguments.length?(n=r=t,e):r},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(i=a=t,e):a},e.y0=function(t){return arguments.length?(i=t,e):i},e.y1=function(t){return arguments.length?(a=t,e):a},e.defined=function(t){return arguments.length?(o=t,e):o},e.interpolate=function(t){return arguments.length?(s="function"==typeof t?u=t:(u=Ls.get(t)||wa).key,l=u.reverse||u,c=u.closed?"M":"L",e):s},e.tension=function(t){return arguments.length?(f=t,e):f},e}function Ya(t){return t.radius}function Xa(t){return[t.x,t.y]}function $a(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-Yo;return[n*Math.cos(r),n*Math.sin(r)]}}function Ua(){return 64}function Ha(){return"circle"}function Wa(t){var e=Math.sqrt(t/qo);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Za(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Ga(t,e,n){return So(t,Xs),t.namespace=e,t.id=n,t}function Ka(t,e,n,r){var i=t.id,a=t.namespace;return X(t,"function"==typeof n?function(t,o,u){t[a][i].tween.set(e,r(n.call(t,t.__data__,o,u)))}:(n=r(n),function(t){t[a][i].tween.set(e,n)}))}function Ja(t){return null==t&&(t=""),function(){this.textContent=t}}function Qa(t){return null==t?"__transition__":"__transition_"+t+"__"}function to(t,e,n,r,i){function a(t){var e=g.delay;return l.t=e+s,t>=e?o(t-e):void(l.c=o)}function o(n){var i=p.active,a=p[i];a&&(a.timer.c=null,a.timer.t=NaN,--p.count,delete p[i],a.event&&a.event.interrupt.call(t,t.__data__,a.index));for(var o in p)if(r>+o){var c=p[o];c.timer.c=null,c.timer.t=NaN,--p.count,delete p[o]}l.c=u,At(function(){return l.c&&u(n||1)&&(l.c=null,l.t=NaN),1},0,s),p.active=r,g.event&&g.event.start.call(t,t.__data__,e),d=[],g.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&d.push(r)}),h=g.ease,f=g.duration}function u(i){for(var a=i/f,o=h(a),u=d.length;u>0;)d[--u].call(t,o);return a>=1?(g.event&&g.event.end.call(t,t.__data__,e),--p.count?delete p[r]:delete t[n],1):void 0}var s,l,f,h,d,p=t[n]||(t[n]={active:0,count:0}),g=p[r];g||(s=i.time,l=At(a,0,s),g=p[r]={tween:new c,time:s,timer:l,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++p.count)}function eo(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function no(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}function ro(t){return t.toISOString()}function io(t,e,n){function r(e){return t(e)}function i(t,n){var r=t[1]-t[0],i=r/n,a=so.bisect(Qs,i);return a==Qs.length?[e.year,Qi(t.map(function(t){return t/31536e6}),n)[2]]:a?e[i/Qs[a-1]<Qs[a]/i?a-1:a]:[nl,Qi(t,n)[2]]}return r.invert=function(e){return ao(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(ao)},r.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,ao(+n+1),e).length}var a=r.domain(),o=Xi(a),u=null==t?i(o,10):"number"==typeof t&&i(o,t);return u&&(t=u[0],e=u[1]),r.domain(Hi(a,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=ao(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=ao(+e+1);return e}}:t))},r.ticks=function(t,e){var n=Xi(r.domain()),a=null==t?i(n,10):"number"==typeof t?i(n,t):!t.range&&[{range:t},e];return a&&(t=a[0],e=a[1]),t.range(n[0],ao(+n[1]+1),1>e?1:e)},r.tickFormat=function(){return n},r.copy=function(){return io(t.copy(),e,n)},Ki(r,t)}function ao(t){return new Date(t)}function oo(t){return JSON.parse(t.responseText)}function uo(t){var e=fo.createRange();return e.selectNode(fo.body),e.createContextualFragment(t.responseText)}var so={version:"3.5.16"},lo=[].slice,co=function(t){return lo.call(t)},fo=this.document;if(fo)try{co(fo.documentElement.childNodes)[0].nodeType}catch(ho){co=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),fo)try{fo.createElement("DIV").style.setProperty("opacity",0,"")}catch(po){var go=this.Element.prototype,vo=go.setAttribute,mo=go.setAttributeNS,yo=this.CSSStyleDeclaration.prototype,xo=yo.setProperty;go.setAttribute=function(t,e){vo.call(this,t,e+"")},go.setAttributeNS=function(t,e,n){mo.call(this,t,e,n+"")},yo.setProperty=function(t,e,n){xo.call(this,t,e+"",n)}}so.ascending=r,so.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:NaN},so.min=function(t,e){var n,r,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<a;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},so.max=function(t,e){var n,r,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<a;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},so.extent=function(t,e){var n,r,i,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=t[a])&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=t[a])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++a<o;)if(null!=(r=e.call(t,t[a],a))&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=e.call(t,t[a],a))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},so.sum=function(t,e){var n,r=0,i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)a(n=+t[o])&&(r+=n);else for(;++o<i;)a(n=+e.call(t,t[o],o))&&(r+=n);return r},so.mean=function(t,e){var n,r=0,o=t.length,u=-1,s=o;if(1===arguments.length)for(;++u<o;)a(n=i(t[u]))?r+=n:--s;else for(;++u<o;)a(n=i(e.call(t,t[u],u)))?r+=n:--s;return s?r/s:void 0},so.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],a=n-r;return a?i+a*(t[r]-i):i},so.median=function(t,e){var n,o=[],u=t.length,s=-1;if(1===arguments.length)for(;++s<u;)a(n=i(t[s]))&&o.push(n);else for(;++s<u;)a(n=i(e.call(t,t[s],s)))&&o.push(n);return o.length?so.quantile(o.sort(r),.5):void 0},so.variance=function(t,e){var n,r,o=t.length,u=0,s=0,l=-1,c=0;if(1===arguments.length)for(;++l<o;)a(n=i(t[l]))&&(r=n-u,u+=r/++c,s+=r*(n-u));else for(;++l<o;)a(n=i(e.call(t,t[l],l)))&&(r=n-u,u+=r/++c,s+=r*(n-u));return c>1?s/(c-1):void 0},so.deviation=function(){var t=so.variance.apply(this,arguments);return t?Math.sqrt(t):t};var bo=o(r);so.bisectLeft=bo.left,so.bisect=so.bisectRight=bo.right,so.bisector=function(t){return o(1===t.length?function(e,n){return r(t(e),n)}:t)},so.shuffle=function(t,e,n){(a=arguments.length)<3&&(n=t.length,2>a&&(e=0));for(var r,i,a=n-e;a;)i=Math.random()*a--|0,r=t[a+e],t[a+e]=t[i+e],t[i+e]=r;return t},so.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},so.pairs=function(t){for(var e,n=0,r=t.length-1,i=t[0],a=new Array(0>r?0:r);r>n;)a[n]=[e=i,i=t[++n]];return a},so.transpose=function(t){if(!(i=t.length))return[];for(var e=-1,n=so.min(t,u),r=new Array(n);++e<n;)for(var i,a=-1,o=r[e]=new Array(i);++a<i;)o[a]=t[a][e];return r},so.zip=function(){return so.transpose(arguments)},so.keys=function(t){var e=[];for(var n in t)e.push(n);return e},so.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},so.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},so.merge=function(t){for(var e,n,r,i=t.length,a=-1,o=0;++a<i;)o+=t[a].length;for(n=new Array(o);--i>=0;)for(r=t[i],e=r.length;--e>=0;)n[--o]=r[e];return n};var wo=Math.abs;so.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var r,i=[],a=s(wo(n)),o=-1;if(t*=a,e*=a,n*=a,0>n)for(;(r=t+n*++o)>e;)i.push(r/a);else for(;(r=t+n*++o)<e;)i.push(r/a);return i},so.map=function(t,e){var n=new c;if(t instanceof c)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,i=-1,a=t.length;if(1===arguments.length)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e.call(t,r=t[i],i),r)}else for(var o in t)n.set(o,t[o]);return n};var _o="__proto__",Mo="\x00";l(c,{has:d,get:function(t){return this._[f(t)]},set:function(t,e){return this._[f(t)]=e},remove:p,keys:g,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:h(e),value:this._[e]});return t},size:v,empty:m,forEach:function(t){for(var e in this._)t.call(this,h(e),this._[e])}}),so.nest=function(){function t(e,o,u){if(u>=a.length)return r?r.call(i,o):n?o.sort(n):o;for(var s,l,f,h,d=-1,p=o.length,g=a[u++],v=new c;++d<p;)(h=v.get(s=g(l=o[d])))?h.push(l):v.set(s,[l]);return e?(l=e(),f=function(n,r){l.set(n,t(e,r,u))}):(l={},f=function(n,r){l[n]=t(e,r,u)}),v.forEach(f),l}function e(t,n){if(n>=a.length)return t;var r=[],i=o[n++];return t.forEach(function(t,i){r.push({key:t,values:e(i,n)})}),i?r.sort(function(t,e){return i(t.key,e.key)}):r}var n,r,i={},a=[],o=[];return i.map=function(e,n){return t(n,e,0)},i.entries=function(n){return e(t(so.map,n,0),0)},i.key=function(t){return a.push(t),i},i.sortKeys=function(t){return o[a.length-1]=t,i},i.sortValues=function(t){return n=t,i},i.rollup=function(t){return r=t,i},i},so.set=function(t){var e=new y;if(t)for(var n=0,r=t.length;r>n;++n)e.add(t[n]);
return e},l(y,{has:d,add:function(t){return this._[f(t+="")]=!0,t},remove:p,values:g,size:v,empty:m,forEach:function(t){for(var e in this._)t.call(this,h(e))}}),so.behavior={},so.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=b(t,e,e[n]);return t};var ko=["webkit","ms","moz","Moz","o","O"];so.dispatch=function(){for(var t=new M,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=k(t);return t},M.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},so.event=null,so.requote=function(t){return t.replace(Eo,"\\$&")};var Eo=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,So={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},No=function(t,e){return e.querySelector(t)},To=function(t,e){return e.querySelectorAll(t)},Co=function(t,e){var n=t.matches||t[w(t,"matchesSelector")];return(Co=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(No=function(t,e){return Sizzle(t,e)[0]||null},To=Sizzle,Co=Sizzle.matchesSelector),so.selection=function(){return so.select(fo.documentElement)};var Do=so.selection.prototype=[];Do.select=function(t){var e,n,r,i,a=[];t=C(t);for(var o=-1,u=this.length;++o<u;){a.push(e=[]),e.parentNode=(r=this[o]).parentNode;for(var s=-1,l=r.length;++s<l;)(i=r[s])?(e.push(n=t.call(i,i.__data__,s,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return T(a)},Do.selectAll=function(t){var e,n,r=[];t=D(t);for(var i=-1,a=this.length;++i<a;)for(var o=this[i],u=-1,s=o.length;++u<s;)(n=o[u])&&(r.push(e=co(t.call(n,n.__data__,u,i))),e.parentNode=n);return T(r)};var Po="http://www.w3.org/1999/xhtml",Ao={svg:"http://www.w3.org/2000/svg",xhtml:Po,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};so.ns={prefix:Ao,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Ao.hasOwnProperty(n)?{space:Ao[n],local:t}:t}},Do.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=so.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(P(e,t[e]));return this}return this.each(P(t,e))},Do.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=L(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!z(t[i]).test(e))return!1;return!0}for(e in t)this.each(I(e,t[e]));return this}return this.each(I(t,e))},Do.style=function(t,e,r){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e="");for(r in t)this.each(R(r,t[r],e));return this}if(2>i){var a=this.node();return n(a).getComputedStyle(a,null).getPropertyValue(t)}r=""}return this.each(R(t,e,r))},Do.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(j(e,t[e]));return this}return this.each(j(t,e))},Do.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Do.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Do.append=function(t){return t=B(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Do.insert=function(t,e){return t=B(t),e=C(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},Do.remove=function(){return this.each(q)},Do.data=function(t,e){function n(t,n){var r,i,a,o=t.length,f=n.length,h=Math.min(o,f),d=new Array(f),p=new Array(f),g=new Array(o);if(e){var v,m=new c,y=new Array(o);for(r=-1;++r<o;)(i=t[r])&&(m.has(v=e.call(i,i.__data__,r))?g[r]=i:m.set(v,i),y[r]=v);for(r=-1;++r<f;)(i=m.get(v=e.call(n,a=n[r],r)))?i!==!0&&(d[r]=i,i.__data__=a):p[r]=F(a),m.set(v,!0);for(r=-1;++r<o;)r in y&&m.get(y[r])!==!0&&(g[r]=t[r])}else{for(r=-1;++r<h;)i=t[r],a=n[r],i?(i.__data__=a,d[r]=i):p[r]=F(a);for(;f>r;++r)p[r]=F(n[r]);for(;o>r;++r)g[r]=t[r]}p.update=d,p.parentNode=d.parentNode=g.parentNode=t.parentNode,u.push(p),s.push(d),l.push(g)}var r,i,a=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(r=this[0]).length);++a<o;)(i=r[a])&&(t[a]=i.__data__);return t}var u=$([]),s=T([]),l=T([]);if("function"==typeof t)for(;++a<o;)n(r=this[a],t.call(r,r.parentNode.__data__,a));else for(;++a<o;)n(r=this[a],t);return s.enter=function(){return u},s.exit=function(){return l},s},Do.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Do.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=V(t));for(var a=0,o=this.length;o>a;a++){i.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var u=0,s=n.length;s>u;u++)(r=n[u])&&t.call(r,r.__data__,u,a)&&e.push(r)}return T(i)},Do.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,a=r[i];--i>=0;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},Do.sort=function(t){t=Y.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Do.each=function(t){return X(this,function(e,n,r){t.call(e,e.__data__,n,r)})},Do.call=function(t){var e=co(arguments);return t.apply(e[0]=this,e),this},Do.empty=function(){return!this.node()},Do.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],r=0,i=n.length;i>r;r++){var a=n[r];if(a)return a}return null},Do.size=function(){var t=0;return X(this,function(){++t}),t};var zo=[];so.selection.enter=$,so.selection.enter.prototype=zo,zo.append=Do.append,zo.empty=Do.empty,zo.node=Do.node,zo.call=Do.call,zo.size=Do.size,zo.select=function(t){for(var e,n,r,i,a,o=[],u=-1,s=this.length;++u<s;){r=(i=this[u]).update,o.push(e=[]),e.parentNode=i.parentNode;for(var l=-1,c=i.length;++l<c;)(a=i[l])?(e.push(r[l]=n=t.call(i.parentNode,a.__data__,l,u)),n.__data__=a.__data__):e.push(null)}return T(o)},zo.insert=function(t,e){return arguments.length<2&&(e=U(this)),Do.insert.call(this,t,e)},so.select=function(e){var n;return"string"==typeof e?(n=[No(e,fo)],n.parentNode=fo.documentElement):(n=[e],n.parentNode=t(e)),T([n])},so.selectAll=function(t){var e;return"string"==typeof t?(e=co(To(t,fo)),e.parentNode=fo.documentElement):(e=co(t),e.parentNode=null),T([e])},Do.on=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e=!1);for(n in t)this.each(H(n,t[n],e));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(H(t,e,n))};var Lo=so.map({mouseenter:"mouseover",mouseleave:"mouseout"});fo&&Lo.forEach(function(t){"on"+t in fo&&Lo.remove(t)});var Io,Oo=0;so.mouse=function(t){return K(t,S())};var Ro=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;so.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=S().changedTouches),e)for(var r,i=0,a=e.length;a>i;++i)if((r=e[i]).identifier===n)return K(t,r)},so.behavior.drag=function(){function t(){this.on("mousedown.drag",a).on("touchstart.drag",o)}function e(t,e,n,a,o){return function(){function u(){var t,n,r=e(h,g);r&&(t=r[0]-x[0],n=r[1]-x[1],p|=t|n,x=r,d({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:t,dy:n}))}function s(){e(h,g)&&(m.on(a+v,null).on(o+v,null),y(p),d({type:"dragend"}))}var l,c=this,f=so.event.target.correspondingElement||so.event.target,h=c.parentNode,d=r.of(c,arguments),p=0,g=t(),v=".drag"+(null==g?"":"-"+g),m=so.select(n(f)).on(a+v,u).on(o+v,s),y=G(f),x=e(h,g);i?(l=i.apply(c,arguments),l=[l.x-x[0],l.y-x[1]]):l=[0,0],d({type:"dragstart"})}}var r=N(t,"drag","dragstart","dragend"),i=null,a=e(_,so.mouse,n,"mousemove","mouseup"),o=e(J,so.touch,x,"touchmove","touchend");return t.origin=function(e){return arguments.length?(i=e,t):i},so.rebind(t,r,"on")},so.touches=function(t,e){return arguments.length<2&&(e=S().touches),e?co(e).map(function(e){var n=K(t,e);return n.identifier=e.identifier,n}):[]};var jo=1e-6,Bo=jo*jo,qo=Math.PI,Fo=2*qo,Vo=Fo-jo,Yo=qo/2,Xo=qo/180,$o=180/qo,Uo=Math.SQRT2,Ho=2,Wo=4;so.interpolateZoom=function(t,e){var n,r,i=t[0],a=t[1],o=t[2],u=e[0],s=e[1],l=e[2],c=u-i,f=s-a,h=c*c+f*f;if(Bo>h)r=Math.log(l/o)/Uo,n=function(t){return[i+t*c,a+t*f,o*Math.exp(Uo*t*r)]};else{var d=Math.sqrt(h),p=(l*l-o*o+Wo*h)/(2*o*Ho*d),g=(l*l-o*o-Wo*h)/(2*l*Ho*d),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(g*g+1)-g);r=(m-v)/Uo,n=function(t){var e=t*r,n=it(v),u=o/(Ho*d)*(n*at(Uo*e+v)-rt(v));return[i+u*c,a+u*f,o*n/it(Uo*e+v)]}}return n.duration=1e3*r,n},so.behavior.zoom=function(){function t(t){t.on(P,f).on(Go+".zoom",d).on("dblclick.zoom",p).on(L,h)}function e(t){return[(t[0]-k.x)/k.k,(t[1]-k.y)/k.k]}function r(t){return[t[0]*k.k+k.x,t[1]*k.k+k.y]}function i(t){k.k=Math.max(T[0],Math.min(T[1],t))}function a(t,e){e=r(e),k.x+=t[0]-e[0],k.y+=t[1]-e[1]}function o(e,n,r,o){e.__chart__={x:k.x,y:k.y,k:k.k},i(Math.pow(2,o)),a(v=n,r),e=so.select(e),C>0&&(e=e.transition().duration(C)),e.call(t.event)}function u(){w&&w.domain(b.range().map(function(t){return(t-k.x)/k.k}).map(b.invert)),M&&M.domain(_.range().map(function(t){return(t-k.y)/k.k}).map(_.invert))}function s(t){D++||t({type:"zoomstart"})}function l(t){u(),t({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function c(t){--D||(t({type:"zoomend"}),v=null)}function f(){function t(){u=1,a(so.mouse(i),h),l(o)}function r(){f.on(A,null).on(z,null),d(u),c(o)}var i=this,o=I.of(i,arguments),u=0,f=so.select(n(i)).on(A,t).on(z,r),h=e(so.mouse(i)),d=G(i);Ys.call(i),s(o)}function h(){function t(){var t=so.touches(p);return d=k.k,t.forEach(function(t){t.identifier in v&&(v[t.identifier]=e(t))}),t}function n(){var e=so.event.target;so.select(e).on(b,r).on(w,u),_.push(e);for(var n=so.event.changedTouches,i=0,a=n.length;a>i;++i)v[n[i].identifier]=null;var s=t(),l=Date.now();if(1===s.length){if(500>l-x){var c=s[0];o(p,c,v[c.identifier],Math.floor(Math.log(k.k)/Math.LN2)+1),E()}x=l}else if(s.length>1){var c=s[0],f=s[1],h=c[0]-f[0],d=c[1]-f[1];m=h*h+d*d}}function r(){var t,e,n,r,o=so.touches(p);Ys.call(p);for(var u=0,s=o.length;s>u;++u,r=null)if(n=o[u],r=v[n.identifier]){if(e)break;t=n,e=r}if(r){var c=(c=n[0]-t[0])*c+(c=n[1]-t[1])*c,f=m&&Math.sqrt(c/m);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+r[0])/2,(e[1]+r[1])/2],i(f*d)}x=null,a(t,e),l(g)}function u(){if(so.event.touches.length){for(var e=so.event.changedTouches,n=0,r=e.length;r>n;++n)delete v[e[n].identifier];for(var i in v)return void t()}so.selectAll(_).on(y,null),M.on(P,f).on(L,h),S(),c(g)}var d,p=this,g=I.of(p,arguments),v={},m=0,y=".zoom-"+so.event.changedTouches[0].identifier,b="touchmove"+y,w="touchend"+y,_=[],M=so.select(p),S=G(p);n(),s(g),M.on(P,null).on(L,n)}function d(){var t=I.of(this,arguments);y?clearTimeout(y):(Ys.call(this),g=e(v=m||so.mouse(this)),s(t)),y=setTimeout(function(){y=null,c(t)},50),E(),i(Math.pow(2,.002*Zo())*k.k),a(v,g),l(t)}function p(){var t=so.mouse(this),n=Math.log(k.k)/Math.LN2;o(this,t,e(t),so.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var g,v,m,y,x,b,w,_,M,k={x:0,y:0,k:1},S=[960,500],T=Ko,C=250,D=0,P="mousedown.zoom",A="mousemove.zoom",z="mouseup.zoom",L="touchstart.zoom",I=N(t,"zoomstart","zoom","zoomend");return Go||(Go="onwheel"in fo?(Zo=function(){return-so.event.deltaY*(so.event.deltaMode?120:1)},"wheel"):"onmousewheel"in fo?(Zo=function(){return so.event.wheelDelta},"mousewheel"):(Zo=function(){return-so.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=I.of(this,arguments),e=k;Fs?so.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},s(t)}).tween("zoom:zoom",function(){var n=S[0],r=S[1],i=v?v[0]:n/2,a=v?v[1]:r/2,o=so.interpolateZoom([(i-k.x)/k.k,(a-k.y)/k.k,n/k.k],[(i-e.x)/e.k,(a-e.y)/e.k,n/e.k]);return function(e){var r=o(e),u=n/r[2];this.__chart__=k={x:i-r[0]*u,y:a-r[1]*u,k:u},l(t)}}).each("interrupt.zoom",function(){c(t)}).each("end.zoom",function(){c(t)}):(this.__chart__=k,s(t),l(t),c(t))})},t.translate=function(e){return arguments.length?(k={x:+e[0],y:+e[1],k:k.k},u(),t):[k.x,k.y]},t.scale=function(e){return arguments.length?(k={x:k.x,y:k.y,k:null},i(+e),u(),t):k.k},t.scaleExtent=function(e){return arguments.length?(T=null==e?Ko:[+e[0],+e[1]],t):T},t.center=function(e){return arguments.length?(m=e&&[+e[0],+e[1]],t):m},t.size=function(e){return arguments.length?(S=e&&[+e[0],+e[1]],t):S},t.duration=function(e){return arguments.length?(C=+e,t):C},t.x=function(e){return arguments.length?(w=e,b=e.copy(),k={x:0,y:0,k:1},t):w},t.y=function(e){return arguments.length?(M=e,_=e.copy(),k={x:0,y:0,k:1},t):M},so.rebind(t,I,"on")};var Zo,Go,Ko=[0,1/0];so.color=ut,ut.prototype.toString=function(){return this.rgb()+""},so.hsl=st;var Jo=st.prototype=new ut;Jo.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new st(this.h,this.s,this.l/t)},Jo.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new st(this.h,this.s,t*this.l)},Jo.rgb=function(){return lt(this.h,this.s,this.l)},so.hcl=ct;var Qo=ct.prototype=new ut;Qo.brighter=function(t){return new ct(this.h,this.c,Math.min(100,this.l+tu*(arguments.length?t:1)))},Qo.darker=function(t){return new ct(this.h,this.c,Math.max(0,this.l-tu*(arguments.length?t:1)))},Qo.rgb=function(){return ft(this.h,this.c,this.l).rgb()},so.lab=ht;var tu=18,eu=.95047,nu=1,ru=1.08883,iu=ht.prototype=new ut;iu.brighter=function(t){return new ht(Math.min(100,this.l+tu*(arguments.length?t:1)),this.a,this.b)},iu.darker=function(t){return new ht(Math.max(0,this.l-tu*(arguments.length?t:1)),this.a,this.b)},iu.rgb=function(){return dt(this.l,this.a,this.b)},so.rgb=yt;var au=yt.prototype=new ut;au.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&i>e&&(e=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new yt(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new yt(i,i,i)},au.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new yt(t*this.r,t*this.g,t*this.b)},au.hsl=function(){return Mt(this.r,this.g,this.b)},au.toString=function(){return"#"+wt(this.r)+wt(this.g)+wt(this.b)};var ou=so.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ou.forEach(function(t,e){ou.set(t,xt(e))}),so.functor=Nt,so.xhr=Tt(x),so.dsv=function(t,e){function n(t,n,a){arguments.length<3&&(a=n,n=null);var o=Ct(t,e,null==n?r:i(n),a);return o.row=function(t){return arguments.length?o.response(null==(n=t)?r:i(t)):n},o}function r(t){return n.parse(t.responseText)}function i(t){return function(e){return n.parse(e.responseText,t)}}function a(e){return e.map(o).join(t)}function o(t){return u.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var u=new RegExp('["'+t+"\n]"),s=t.charCodeAt(0);return n.parse=function(t,e){var r;return n.parseRows(t,function(t,n){if(r)return r(t,n-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=e?function(t,n){return e(i(t),n)}:i})},n.parseRows=function(t,e){function n(){if(c>=l)return o;if(i)return i=!1,a;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<l;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}c=n+2;var r=t.charCodeAt(n+1);return 13===r?(i=!0,10===t.charCodeAt(n+2)&&++c):10===r&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;l>c;){var r=t.charCodeAt(c++),u=1;if(10===r)i=!0;else if(13===r)i=!0,10===t.charCodeAt(c)&&(++c,++u);else if(r!==s)continue;return t.slice(e,c-u)}return t.slice(e)}for(var r,i,a={},o={},u=[],l=t.length,c=0,f=0;(r=n())!==o;){for(var h=[];r!==a&&r!==o;)h.push(r),r=n();e&&null==(h=e(h,f++))||u.push(h)}return u},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var r=new y,i=[];return e.forEach(function(t){for(var e in t)r.has(e)||i.push(r.add(e))}),[i.map(o).join(t)].concat(e.map(function(e){return i.map(function(t){return o(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(a).join("\n")},n},so.csv=so.dsv(",","text/csv"),so.tsv=so.dsv("	","text/tab-separated-values");var uu,su,lu,cu,fu=this[w(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};so.timer=function(){At.apply(this,arguments)},so.timer.flush=function(){Lt(),It()},so.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var hu=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Rt);so.formatPrefix=function(t,e){var n=0;return(t=+t)&&(0>t&&(t*=-1),e&&(t=so.round(t,Ot(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),hu[8+n/3]};var du=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,pu=so.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=so.round(t,Ot(t,e))).toFixed(Math.max(0,Math.min(20,Ot(t*(1+1e-15),e))))}}),gu=so.time={},vu=Date;qt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){mu.setUTCDate.apply(this._,arguments)},setDay:function(){mu.setUTCDay.apply(this._,arguments)},setFullYear:function(){mu.setUTCFullYear.apply(this._,arguments)},setHours:function(){mu.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){mu.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){mu.setUTCMinutes.apply(this._,arguments)},setMonth:function(){mu.setUTCMonth.apply(this._,arguments)},setSeconds:function(){mu.setUTCSeconds.apply(this._,arguments)},setTime:function(){mu.setTime.apply(this._,arguments)}};var mu=Date.prototype;gu.year=Ft(function(t){return t=gu.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),gu.years=gu.year.range,gu.years.utc=gu.year.utc.range,gu.day=Ft(function(t){var e=new vu(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),gu.days=gu.day.range,gu.days.utc=gu.day.utc.range,gu.dayOfYear=function(t){var e=gu.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=gu[t]=Ft(function(t){return(t=gu.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=gu.year(t).getDay();return Math.floor((gu.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});gu[t+"s"]=n.range,gu[t+"s"].utc=n.utc.range,gu[t+"OfYear"]=function(t){var n=gu.year(t).getDay();return Math.floor((gu.dayOfYear(t)+(n+e)%7)/7)}}),gu.week=gu.sunday,gu.weeks=gu.sunday.range,gu.weeks.utc=gu.sunday.utc.range,gu.weekOfYear=gu.sundayOfYear;var yu={"-":"",_:" ",0:"0"},xu=/^\s*\d+/,bu=/^%/;so.locale=function(t){return{numberFormat:jt(t),timeFormat:Yt(t)}};var wu=so.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});so.format=wu.numberFormat,so.geo={},ce.prototype={s:0,t:0,add:function(t){fe(t,this.t,_u),fe(_u.s,this.s,this),this.s?this.t+=_u.t:this.s=_u.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var _u=new ce;so.geo.stream=function(t,e){t&&Mu.hasOwnProperty(t.type)?Mu[t.type](t,e):he(t,e)};var Mu={Feature:function(t,e){he(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)he(n[r].geometry,e)}},ku={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){de(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)de(n[r],e,0)},Polygon:function(t,e){pe(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)pe(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)he(n[r],e)}};so.geo.area=function(t){return Eu=0,so.geo.stream(t,Nu),Eu};var Eu,Su=new ce,Nu={sphere:function(){Eu+=4*qo},point:_,lineStart:_,lineEnd:_,polygonStart:function(){Su.reset(),Nu.lineStart=ge},polygonEnd:function(){var t=2*Su;Eu+=0>t?4*qo+t:t,Nu.lineStart=Nu.lineEnd=Nu.point=_}};so.geo.bounds=function(){function t(t,e){x.push(b=[c=t,h=t]),f>e&&(f=e),e>d&&(d=e)}function e(e,n){var r=ve([e*Xo,n*Xo]);if(m){var i=ye(m,r),a=[i[1],-i[0],0],o=ye(a,i);we(o),o=_e(o);var s=e-p,l=s>0?1:-1,g=o[0]*$o*l,v=wo(s)>180;if(v^(g>l*p&&l*e>g)){var y=o[1]*$o;y>d&&(d=y)}else if(g=(g+360)%360-180,v^(g>l*p&&l*e>g)){var y=-o[1]*$o;f>y&&(f=y)}else f>n&&(f=n),n>d&&(d=n);v?p>e?u(c,e)>u(c,h)&&(h=e):u(e,h)>u(c,h)&&(c=e):h>=c?(c>e&&(c=e),e>h&&(h=e)):e>p?u(c,e)>u(c,h)&&(h=e):u(e,h)>u(c,h)&&(c=e)}else t(e,n);m=r,p=e}function n(){w.point=e}function r(){b[0]=c,b[1]=h,w.point=t,m=null}function i(t,n){if(m){var r=t-p;y+=wo(r)>180?r+(r>0?360:-360):r}else g=t,v=n;Nu.point(t,n),e(t,n)}function a(){Nu.lineStart()}function o(){i(g,v),Nu.lineEnd(),wo(y)>jo&&(c=-(h=180)),b[0]=c,b[1]=h,m=null}function u(t,e){return(e-=t)<0?e+360:e}function s(t,e){return t[0]-e[0]}function l(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,f,h,d,p,g,v,m,y,x,b,w={point:t,lineStart:n,lineEnd:r,polygonStart:function(){w.point=i,w.lineStart=a,w.lineEnd=o,y=0,Nu.polygonStart()},polygonEnd:function(){Nu.polygonEnd(),w.point=t,w.lineStart=n,w.lineEnd=r,0>Su?(c=-(h=180),f=-(d=90)):y>jo?d=90:-jo>y&&(f=-90),b[0]=c,b[1]=h}};return function(t){d=h=-(c=f=1/0),x=[],so.geo.stream(t,w);var e=x.length;if(e){x.sort(s);for(var n,r=1,i=x[0],a=[i];e>r;++r)n=x[r],l(n[0],i)||l(n[1],i)?(u(i[0],n[1])>u(i[0],i[1])&&(i[1]=n[1]),u(n[0],i[1])>u(i[0],i[1])&&(i[0]=n[0])):a.push(i=n);for(var o,n,p=-(1/0),e=a.length-1,r=0,i=a[e];e>=r;i=n,++r)n=a[r],(o=u(i[1],n[0]))>p&&(p=o,c=n[0],h=i[1])}return x=b=null,c===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,f],[h,d]]}}(),so.geo.centroid=function(t){Tu=Cu=Du=Pu=Au=zu=Lu=Iu=Ou=Ru=ju=0,so.geo.stream(t,Bu);var e=Ou,n=Ru,r=ju,i=e*e+n*n+r*r;return Bo>i&&(e=zu,n=Lu,r=Iu,jo>Cu&&(e=Du,n=Pu,r=Au),i=e*e+n*n+r*r,Bo>i)?[NaN,NaN]:[Math.atan2(n,e)*$o,nt(r/Math.sqrt(i))*$o]};var Tu,Cu,Du,Pu,Au,zu,Lu,Iu,Ou,Ru,ju,Bu={sphere:_,point:ke,lineStart:Se,lineEnd:Ne,polygonStart:function(){Bu.lineStart=Te},polygonEnd:function(){Bu.lineStart=Se}},qu=Le(De,je,qe,[-qo,-qo/2]),Fu=1e9;so.geo.clipExtent=function(){var t,e,n,r,i,a,o={stream:function(t){return i&&(i.valid=!1),i=a(t),i.valid=!0,i},extent:function(u){return arguments.length?(a=Xe(t=+u[0][0],e=+u[0][1],n=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),o):[[t,e],[n,r]]}};return o.extent([[0,0],[960,500]])},(so.geo.conicEqualArea=function(){return $e(Ue)}).raw=Ue,so.geo.albers=function(){return so.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},so.geo.albersUsa=function(){function t(t){var a=t[0],o=t[1];return e=null,n(a,o),e||(r(a,o),e)||i(a,o),e}var e,n,r,i,a=so.geo.albers(),o=so.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=so.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&.234>i&&r>=-.425&&-.214>r?o:i>=.166&&.234>i&&r>=-.214&&-.115>r?u:a).invert(t)},t.stream=function(t){var e=a.stream(t),n=o.stream(t),r=u.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},t.precision=function(e){return arguments.length?(a.precision(e),o.precision(e),u.precision(e),t):a.precision()},t.scale=function(e){return arguments.length?(a.scale(e),o.scale(.35*e),u.scale(e),t.translate(a.translate())):a.scale()},t.translate=function(e){if(!arguments.length)return a.translate();var l=a.scale(),c=+e[0],f=+e[1];return n=a.translate(e).clipExtent([[c-.455*l,f-.238*l],[c+.455*l,f+.238*l]]).stream(s).point,r=o.translate([c-.307*l,f+.201*l]).clipExtent([[c-.425*l+jo,f+.12*l+jo],[c-.214*l-jo,f+.234*l-jo]]).stream(s).point,i=u.translate([c-.205*l,f+.212*l]).clipExtent([[c-.214*l+jo,f+.166*l+jo],[c-.115*l-jo,f+.234*l-jo]]).stream(s).point,t},t.scale(1070)};var Vu,Yu,Xu,$u,Uu,Hu,Wu={point:_,lineStart:_,lineEnd:_,polygonStart:function(){Yu=0,Wu.lineStart=He},polygonEnd:function(){Wu.lineStart=Wu.lineEnd=Wu.point=_,Vu+=wo(Yu/2)}},Zu={point:We,lineStart:_,lineEnd:_,polygonStart:_,polygonEnd:_},Gu={point:Ke,lineStart:Je,lineEnd:Qe,polygonStart:function(){Gu.lineStart=tn},polygonEnd:function(){Gu.point=Ke,Gu.lineStart=Je,Gu.lineEnd=Qe}};so.geo.path=function(){function t(t){return t&&("function"==typeof u&&a.pointRadius(+u.apply(this,arguments)),o&&o.valid||(o=i(a)),so.geo.stream(t,o)),a.result()}function e(){return o=null,t}var n,r,i,a,o,u=4.5;return t.area=function(t){return Vu=0,so.geo.stream(t,i(Wu)),Vu},t.centroid=function(t){return Du=Pu=Au=zu=Lu=Iu=Ou=Ru=ju=0,so.geo.stream(t,i(Gu)),ju?[Ou/ju,Ru/ju]:Iu?[zu/Iu,Lu/Iu]:Au?[Du/Au,Pu/Au]:[NaN,NaN]},t.bounds=function(t){return Uu=Hu=-(Xu=$u=1/0),so.geo.stream(t,i(Zu)),[[Xu,$u],[Uu,Hu]]},t.projection=function(t){return arguments.length?(i=(n=t)?t.stream||rn(t):x,e()):n},t.context=function(t){return arguments.length?(a=null==(r=t)?new Ze:new en(t),"function"!=typeof u&&a.pointRadius(u),e()):r},t.pointRadius=function(e){return arguments.length?(u="function"==typeof e?e:(a.pointRadius(+e),+e),t):u},t.projection(so.geo.albersUsa()).context(null)},so.geo.transform=function(t){return{stream:function(e){var n=new an(e);for(var r in t)n[r]=t[r];return n}}},an.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},so.geo.projection=un,so.geo.projectionMutator=sn,(so.geo.equirectangular=function(){return un(cn)}).raw=cn.invert=cn,so.geo.rotation=function(t){function e(e){return e=t(e[0]*Xo,e[1]*Xo),e[0]*=$o,e[1]*=$o,e}return t=hn(t[0]%360*Xo,t[1]*Xo,t.length>2?t[2]*Xo:0),e.invert=function(e){return e=t.invert(e[0]*Xo,e[1]*Xo),e[0]*=$o,e[1]*=$o,e},e},fn.invert=cn,so.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,e=hn(-t[0]*Xo,-t[1]*Xo,0).invert,i=[];return n(null,null,1,{point:function(t,n){i.push(t=e(t,n)),t[0]*=$o,t[1]*=$o}}),{type:"Polygon",coordinates:[i]}}var e,n,r=[0,0],i=6;return t.origin=function(e){return arguments.length?(r=e,t):r},t.angle=function(r){return arguments.length?(n=vn((e=+r)*Xo,i*Xo),t):e},t.precision=function(r){return arguments.length?(n=vn(e*Xo,(i=+r)*Xo),t):i},t.angle(90)},so.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Xo,i=t[1]*Xo,a=e[1]*Xo,o=Math.sin(r),u=Math.cos(r),s=Math.sin(i),l=Math.cos(i),c=Math.sin(a),f=Math.cos(a);return Math.atan2(Math.sqrt((n=f*o)*n+(n=l*c-s*f*u)*n),s*c+l*f*u)},so.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return so.range(Math.ceil(a/v)*v,i,v).map(h).concat(so.range(Math.ceil(l/m)*m,s,m).map(d)).concat(so.range(Math.ceil(r/p)*p,n,p).filter(function(t){return wo(t%v)>jo}).map(c)).concat(so.range(Math.ceil(u/g)*g,o,g).filter(function(t){return wo(t%m)>jo}).map(f))}var n,r,i,a,o,u,s,l,c,f,h,d,p=10,g=p,v=90,m=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[h(a).concat(d(s).slice(1),h(i).reverse().slice(1),d(l).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(a=+e[0][0],i=+e[1][0],l=+e[0][1],s=+e[1][1],a>i&&(e=a,a=i,i=e),l>s&&(e=l,l=s,s=e),t.precision(y)):[[a,l],[i,s]]},t.minorExtent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],u=+e[0][1],o=+e[1][1],r>n&&(e=r,r=n,n=e),u>o&&(e=u,u=o,o=e),t.precision(y)):[[r,u],[n,o]];
},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(v=+e[0],m=+e[1],t):[v,m]},t.minorStep=function(e){return arguments.length?(p=+e[0],g=+e[1],t):[p,g]},t.precision=function(e){return arguments.length?(y=+e,c=yn(u,o,90),f=xn(r,n,y),h=yn(l,s,90),d=xn(a,i,y),t):y},t.majorExtent([[-180,-90+jo],[180,90-jo]]).minorExtent([[-180,-80-jo],[180,80+jo]])},so.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||i.apply(this,arguments)]}}var e,n,r=bn,i=wn;return t.distance=function(){return so.geo.distance(e||r.apply(this,arguments),n||i.apply(this,arguments))},t.source=function(n){return arguments.length?(r=n,e="function"==typeof n?null:n,t):r},t.target=function(e){return arguments.length?(i=e,n="function"==typeof e?null:e,t):i},t.precision=function(){return arguments.length?t:0},t},so.geo.interpolate=function(t,e){return _n(t[0]*Xo,t[1]*Xo,e[0]*Xo,e[1]*Xo)},so.geo.length=function(t){return Ku=0,so.geo.stream(t,Ju),Ku};var Ku,Ju={sphere:_,point:_,lineStart:Mn,lineEnd:_,polygonStart:_,polygonEnd:_},Qu=kn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(so.geo.azimuthalEqualArea=function(){return un(Qu)}).raw=Qu;var ts=kn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},x);(so.geo.azimuthalEquidistant=function(){return un(ts)}).raw=ts,(so.geo.conicConformal=function(){return $e(En)}).raw=En,(so.geo.conicEquidistant=function(){return $e(Sn)}).raw=Sn;var es=kn(function(t){return 1/t},Math.atan);(so.geo.gnomonic=function(){return un(es)}).raw=es,Nn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Yo]},(so.geo.mercator=function(){return Tn(Nn)}).raw=Nn;var ns=kn(function(){return 1},Math.asin);(so.geo.orthographic=function(){return un(ns)}).raw=ns;var rs=kn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(so.geo.stereographic=function(){return un(rs)}).raw=rs,Cn.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Yo]},(so.geo.transverseMercator=function(){var t=Tn(Cn),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90])}).raw=Cn,so.geom={},so.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,i=Nt(n),a=Nt(r),o=t.length,u=[],s=[];for(e=0;o>e;e++)u.push([+i.call(this,t[e],e),+a.call(this,t[e],e),e]);for(u.sort(zn),e=0;o>e;e++)s.push([u[e][0],-u[e][1]]);var l=An(u),c=An(s),f=c[0]===l[0],h=c[c.length-1]===l[l.length-1],d=[];for(e=l.length-1;e>=0;--e)d.push(t[u[l[e]][2]]);for(e=+f;e<c.length-h;++e)d.push(t[u[c[e]][2]]);return d}var n=Dn,r=Pn;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e)},so.geom.polygon=function(t){return So(t,is),t};var is=so.geom.polygon.prototype=[];is.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)t=r,r=this[e],i+=t[1]*r[0]-t[0]*r[1];return.5*i},is.centroid=function(t){var e,n,r=-1,i=this.length,a=0,o=0,u=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)e=u,u=this[r],n=e[0]*u[1]-u[0]*e[1],a+=(e[0]+u[0])*n,o+=(e[1]+u[1])*n;return[a*t,o*t]},is.clip=function(t){for(var e,n,r,i,a,o,u=On(t),s=-1,l=this.length-On(this),c=this[l-1];++s<l;){for(e=t.slice(),t.length=0,i=this[s],a=e[(r=e.length-u)-1],n=-1;++n<r;)o=e[n],Ln(o,c,i)?(Ln(a,c,i)||t.push(In(a,o,c,i)),t.push(o)):Ln(a,c,i)&&t.push(In(a,o,c,i)),a=o;u&&t.push(t[0]),c=i}return t};var as,os,us,ss,ls,cs=[],fs=[];Xn.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(Un),e.length},nr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},rr.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=ur(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(ar(this,n),t=n,n=t.U),n.C=!1,r.C=!0,or(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(or(this,n),t=n,n=t.U),n.C=!1,r.C=!0,ar(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,a=t.L,o=t.R;if(n=a?o?ur(o):a:o,i?i.L===t?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=o,o.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(e=i.R,e.C&&(e.C=!1,i.C=!0,ar(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,or(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,ar(this,i),t=this._;break}}else if(e=i.L,e.C&&(e.C=!1,i.C=!0,or(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ar(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,or(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},so.geom.voronoi=function(t){function e(t){var e=new Array(t.length),r=u[0][0],i=u[0][1],a=u[1][0],o=u[1][1];return sr(n(t),u).cells.forEach(function(n,u){var s=n.edges,l=n.site,c=e[u]=s.length?s.map(function(t){var e=t.start();return[e.x,e.y]}):l.x>=r&&l.x<=a&&l.y>=i&&l.y<=o?[[r,o],[a,o],[a,i],[r,i]]:[];c.point=t[u]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(a(t,e)/jo)*jo,y:Math.round(o(t,e)/jo)*jo,i:e}})}var r=Dn,i=Pn,a=r,o=i,u=hs;return t?e(t):(e.links=function(t){return sr(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return sr(n(t)).cells.forEach(function(n,r){for(var i,a,o=n.site,u=n.edges.sort(Un),s=-1,l=u.length,c=u[l-1].edge,f=c.l===o?c.r:c.l;++s<l;)i=c,a=f,c=u[s].edge,f=c.l===o?c.r:c.l,r<a.i&&r<f.i&&cr(o,a,f)<0&&e.push([t[r],t[a.i],t[f.i]])}),e},e.x=function(t){return arguments.length?(a=Nt(r=t),e):r},e.y=function(t){return arguments.length?(o=Nt(i=t),e):i},e.clipExtent=function(t){return arguments.length?(u=null==t?hs:t,e):u===hs?null:u},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):u===hs?null:u&&u[1]},e)};var hs=[[-1e6,-1e6],[1e6,1e6]];so.geom.delaunay=function(t){return so.geom.voronoi().triangles(t)},so.geom.quadtree=function(t,e,n,r,i){function a(t){function a(t,e,n,r,i,a,o,u){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var s=t.x,c=t.y;if(null!=s)if(wo(s-n)+wo(c-r)<.01)l(t,e,n,r,i,a,o,u);else{var f=t.point;t.x=t.y=t.point=null,l(t,f,s,c,i,a,o,u),l(t,e,n,r,i,a,o,u)}else t.x=n,t.y=r,t.point=e}else l(t,e,n,r,i,a,o,u)}function l(t,e,n,r,i,o,u,s){var l=.5*(i+u),c=.5*(o+s),f=n>=l,h=r>=c,d=h<<1|f;t.leaf=!1,t=t.nodes[d]||(t.nodes[d]=dr()),f?i=l:u=l,h?o=c:s=c,a(t,e,n,r,i,o,u,s)}var c,f,h,d,p,g,v,m,y,x=Nt(u),b=Nt(s);if(null!=e)g=e,v=n,m=r,y=i;else if(m=y=-(g=v=1/0),f=[],h=[],p=t.length,o)for(d=0;p>d;++d)c=t[d],c.x<g&&(g=c.x),c.y<v&&(v=c.y),c.x>m&&(m=c.x),c.y>y&&(y=c.y),f.push(c.x),h.push(c.y);else for(d=0;p>d;++d){var w=+x(c=t[d],d),_=+b(c,d);g>w&&(g=w),v>_&&(v=_),w>m&&(m=w),_>y&&(y=_),f.push(w),h.push(_)}var M=m-g,k=y-v;M>k?y=v+M:m=g+k;var E=dr();if(E.add=function(t){a(E,t,+x(t,++d),+b(t,d),g,v,m,y)},E.visit=function(t){pr(t,E,g,v,m,y)},E.find=function(t){return gr(E,t[0],t[1],g,v,m,y)},d=-1,null==e){for(;++d<p;)a(E,t[d],f[d],h[d],g,v,m,y);--d}else t.forEach(E.add);return f=h=t=c=null,E}var o,u=Dn,s=Pn;return(o=arguments.length)?(u=fr,s=hr,3===o&&(i=n,r=e,n=e=0),a(t)):(a.x=function(t){return arguments.length?(u=t,a):u},a.y=function(t){return arguments.length?(s=t,a):s},a.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),a):null==e?null:[[e,n],[r,i]]},a.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),a):null==e?null:[r-e,i-n]},a)},so.interpolateRgb=vr,so.interpolateObject=mr,so.interpolateNumber=yr,so.interpolateString=xr;var ds=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ps=new RegExp(ds.source,"g");so.interpolate=br,so.interpolators=[function(t,e){var n=typeof e;return("string"===n?ou.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?vr:xr:e instanceof ut?vr:Array.isArray(e)?wr:"object"===n&&isNaN(e)?mr:yr)(t,e)}],so.interpolateArray=wr;var gs=function(){return x},vs=so.map({linear:gs,poly:Tr,quad:function(){return Er},cubic:function(){return Sr},sin:function(){return Cr},exp:function(){return Dr},circle:function(){return Pr},elastic:Ar,back:zr,bounce:function(){return Lr}}),ms=so.map({"in":x,out:Mr,"in-out":kr,"out-in":function(t){return kr(Mr(t))}});so.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,r=e>=0?t.slice(e+1):"in";return n=vs.get(n)||gs,r=ms.get(r)||x,_r(r(n.apply(null,lo.call(arguments,1))))},so.interpolateHcl=Ir,so.interpolateHsl=Or,so.interpolateLab=Rr,so.interpolateRound=jr,so.transform=function(t){var e=fo.createElementNS(so.ns.prefix.svg,"g");return(so.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Br(n?n.matrix:ys)})(t)},Br.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ys={a:1,b:0,c:0,d:1,e:0,f:0};so.interpolateTransform=Wr,so.layout={},so.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(Kr(t[n]));return e}},so.layout.chord=function(){function t(){var t,l,f,h,d,p={},g=[],v=so.range(a),m=[];for(n=[],r=[],t=0,h=-1;++h<a;){for(l=0,d=-1;++d<a;)l+=i[h][d];g.push(l),m.push(so.range(a)),t+=l}for(o&&v.sort(function(t,e){return o(g[t],g[e])}),u&&m.forEach(function(t,e){t.sort(function(t,n){return u(i[e][t],i[e][n])})}),t=(Fo-c*a)/t,l=0,h=-1;++h<a;){for(f=l,d=-1;++d<a;){var y=v[h],x=m[y][d],b=i[y][x],w=l,_=l+=b*t;p[y+"-"+x]={index:y,subindex:x,startAngle:w,endAngle:_,value:b}}r[y]={index:y,startAngle:f,endAngle:l,value:g[y]},l+=c}for(h=-1;++h<a;)for(d=h-1;++d<a;){var M=p[h+"-"+d],k=p[d+"-"+h];(M.value||k.value)&&n.push(M.value<k.value?{source:k,target:M}:{source:M,target:k})}s&&e()}function e(){n.sort(function(t,e){return s((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,r,i,a,o,u,s,l={},c=0;return l.matrix=function(t){return arguments.length?(a=(i=t)&&i.length,n=r=null,l):i},l.padding=function(t){return arguments.length?(c=t,n=r=null,l):c},l.sortGroups=function(t){return arguments.length?(o=t,n=r=null,l):o},l.sortSubgroups=function(t){return arguments.length?(u=t,n=null,l):u},l.sortChords=function(t){return arguments.length?(s=t,n&&e(),l):s},l.chords=function(){return n||t(),n},l.groups=function(){return r||t(),r},l},so.layout.force=function(){function t(t){return function(e,n,r,i){if(e.point!==t){var a=e.cx-t.x,o=e.cy-t.y,u=i-n,s=a*a+o*o;if(s>u*u/m){if(g>s){var l=e.charge/s;t.px-=a*l,t.py-=o*l}return!0}if(e.point&&s&&g>s){var l=e.pointCharge/s;t.px-=a*l,t.py-=o*l}}return!e.charge}}function e(t){t.px=so.event.x,t.py=so.event.y,s.resume()}var n,r,i,a,o,u,s={},l=so.dispatch("start","tick","end"),c=[1,1],f=.9,h=xs,d=bs,p=-30,g=ws,v=.1,m=.64,y=[],b=[];return s.tick=function(){if((i*=.99)<.005)return n=null,l.end({type:"end",alpha:i=0}),!0;var e,r,s,h,d,g,m,x,w,_=y.length,M=b.length;for(r=0;M>r;++r)s=b[r],h=s.source,d=s.target,x=d.x-h.x,w=d.y-h.y,(g=x*x+w*w)&&(g=i*o[r]*((g=Math.sqrt(g))-a[r])/g,x*=g,w*=g,d.x-=x*(m=h.weight+d.weight?h.weight/(h.weight+d.weight):.5),d.y-=w*m,h.x+=x*(m=1-m),h.y+=w*m);if((m=i*v)&&(x=c[0]/2,w=c[1]/2,r=-1,m))for(;++r<_;)s=y[r],s.x+=(x-s.x)*m,s.y+=(w-s.y)*m;if(p)for(ii(e=so.geom.quadtree(y),i,u),r=-1;++r<_;)(s=y[r]).fixed||e.visit(t(s));for(r=-1;++r<_;)s=y[r],s.fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*f,s.y-=(s.py-(s.py=s.y))*f);l.tick({type:"tick",alpha:i})},s.nodes=function(t){return arguments.length?(y=t,s):y},s.links=function(t){return arguments.length?(b=t,s):b},s.size=function(t){return arguments.length?(c=t,s):c},s.linkDistance=function(t){return arguments.length?(h="function"==typeof t?t:+t,s):h},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(d="function"==typeof t?t:+t,s):d},s.friction=function(t){return arguments.length?(f=+t,s):f},s.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,s):p},s.chargeDistance=function(t){return arguments.length?(g=t*t,s):Math.sqrt(g)},s.gravity=function(t){return arguments.length?(v=+t,s):v},s.theta=function(t){return arguments.length?(m=t*t,s):Math.sqrt(m)},s.alpha=function(t){return arguments.length?(t=+t,i?t>0?i=t:(n.c=null,n.t=NaN,n=null,l.end({type:"end",alpha:i=0})):t>0&&(l.start({type:"start",alpha:i=t}),n=At(s.tick)),s):i},s.start=function(){function t(t,r){if(!n){for(n=new Array(i),s=0;i>s;++s)n[s]=[];for(s=0;l>s;++s){var a=b[s];n[a.source.index].push(a.target),n[a.target.index].push(a.source)}}for(var o,u=n[e],s=-1,c=u.length;++s<c;)if(!isNaN(o=u[s][t]))return o;return Math.random()*r}var e,n,r,i=y.length,l=b.length,f=c[0],g=c[1];for(e=0;i>e;++e)(r=y[e]).index=e,r.weight=0;for(e=0;l>e;++e)r=b[e],"number"==typeof r.source&&(r.source=y[r.source]),"number"==typeof r.target&&(r.target=y[r.target]),++r.source.weight,++r.target.weight;for(e=0;i>e;++e)r=y[e],isNaN(r.x)&&(r.x=t("x",f)),isNaN(r.y)&&(r.y=t("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(a=[],"function"==typeof h)for(e=0;l>e;++e)a[e]=+h.call(this,b[e],e);else for(e=0;l>e;++e)a[e]=h;if(o=[],"function"==typeof d)for(e=0;l>e;++e)o[e]=+d.call(this,b[e],e);else for(e=0;l>e;++e)o[e]=d;if(u=[],"function"==typeof p)for(e=0;i>e;++e)u[e]=+p.call(this,y[e],e);else for(e=0;i>e;++e)u[e]=p;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return r||(r=so.behavior.drag().origin(x).on("dragstart.force",ti).on("drag.force",e).on("dragend.force",ei)),arguments.length?void this.on("mouseover.force",ni).on("mouseout.force",ri).call(r):r},so.rebind(s,l,"on")};var xs=20,bs=1,ws=1/0;so.layout.hierarchy=function(){function t(i){var a,o=[i],u=[];for(i.depth=0;null!=(a=o.pop());)if(u.push(a),(l=n.call(t,a,a.depth))&&(s=l.length)){for(var s,l,c;--s>=0;)o.push(c=l[s]),c.parent=a,c.depth=a.depth+1;r&&(a.value=0),a.children=l}else r&&(a.value=+r.call(t,a,a.depth)||0),delete a.children;return ui(i,function(t){var n,i;e&&(n=t.children)&&n.sort(e),r&&(i=t.parent)&&(i.value+=t.value)}),u}var e=ci,n=si,r=li;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(r=e,t):r},t.revalue=function(e){return r&&(oi(e,function(t){t.children&&(t.value=0)}),ui(e,function(e){var n;e.children||(e.value=+r.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},so.layout.partition=function(){function t(e,n,r,i){var a=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,a&&(o=a.length)){var o,u,s,l=-1;for(r=e.value?r/e.value:0;++l<o;)t(u=a[l],n,s=u.value*r,i),n+=s}}function e(t){var n=t.children,r=0;if(n&&(i=n.length))for(var i,a=-1;++a<i;)r=Math.max(r,e(n[a]));return 1+r}function n(n,a){var o=r.call(this,n,a);return t(o[0],0,i[0],i[1]/e(o[0])),o}var r=so.layout.hierarchy(),i=[1,1];return n.size=function(t){return arguments.length?(i=t,n):i},ai(n,r)},so.layout.pie=function(){function t(o){var u,s=o.length,l=o.map(function(n,r){return+e.call(t,n,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof i?i.apply(this,arguments):i)-c,h=Math.min(Math.abs(f)/s,+("function"==typeof a?a.apply(this,arguments):a)),d=h*(0>f?-1:1),p=so.sum(l),g=p?(f-s*d)/p:0,v=so.range(s),m=[];return null!=n&&v.sort(n===_s?function(t,e){return l[e]-l[t]}:function(t,e){return n(o[t],o[e])}),v.forEach(function(t){m[t]={data:o[t],value:u=l[t],startAngle:c,endAngle:c+=u*g+d,padAngle:h}}),m}var e=Number,n=_s,r=0,i=Fo,a=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(r=e,t):r},t.endAngle=function(e){return arguments.length?(i=e,t):i},t.padAngle=function(e){return arguments.length?(a=e,t):a},t};var _s={};so.layout.stack=function(){function t(u,s){if(!(h=u.length))return u;var l=u.map(function(n,r){return e.call(t,n,r)}),c=l.map(function(e){return e.map(function(e,n){return[a.call(t,e,n),o.call(t,e,n)]})}),f=n.call(t,c,s);l=so.permute(l,f),c=so.permute(c,f);var h,d,p,g,v=r.call(t,c,s),m=l[0].length;for(p=0;m>p;++p)for(i.call(t,l[0][p],g=v[p],c[0][p][1]),d=1;h>d;++d)i.call(t,l[d][p],g+=c[d-1][p][1],c[d][p][1]);return u}var e=x,n=gi,r=vi,i=pi,a=hi,o=di;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:Ms.get(e)||gi,t):n},t.offset=function(e){return arguments.length?(r="function"==typeof e?e:ks.get(e)||vi,t):r},t.x=function(e){return arguments.length?(a=e,t):a},t.y=function(e){return arguments.length?(o=e,t):o},t.out=function(e){return arguments.length?(i=e,t):i},t};var Ms=so.map({"inside-out":function(t){var e,n,r=t.length,i=t.map(mi),a=t.map(yi),o=so.range(r).sort(function(t,e){return i[t]-i[e]}),u=0,s=0,l=[],c=[];for(e=0;r>e;++e)n=o[e],s>u?(u+=a[n],l.push(n)):(s+=a[n],c.push(n));return c.reverse().concat(l)},reverse:function(t){return so.range(t.length).reverse()},"default":gi}),ks=so.map({silhouette:function(t){var e,n,r,i=t.length,a=t[0].length,o=[],u=0,s=[];for(n=0;a>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];r>u&&(u=r),o.push(r)}for(n=0;a>n;++n)s[n]=(u-o[n])/2;return s},wiggle:function(t){var e,n,r,i,a,o,u,s,l,c=t.length,f=t[0],h=f.length,d=[];for(d[0]=s=l=0,n=1;h>n;++n){for(e=0,i=0;c>e;++e)i+=t[e][n][1];for(e=0,a=0,u=f[n][0]-f[n-1][0];c>e;++e){for(r=0,o=(t[e][n][1]-t[e][n-1][1])/(2*u);e>r;++r)o+=(t[r][n][1]-t[r][n-1][1])/u;a+=o*t[e][n][1]}d[n]=s-=i?a/i*u:0,l>s&&(l=s)}for(n=0;h>n;++n)d[n]-=l;return d},expand:function(t){var e,n,r,i=t.length,a=t[0].length,o=1/i,u=[];for(n=0;a>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];if(r)for(e=0;i>e;e++)t[e][n][1]/=r;else for(e=0;i>e;e++)t[e][n][1]=o}for(n=0;a>n;++n)u[n]=0;return u},zero:vi});so.layout.histogram=function(){function t(t,a){for(var o,u,s=[],l=t.map(n,this),c=r.call(this,l,a),f=i.call(this,c,l,a),a=-1,h=l.length,d=f.length-1,p=e?1:1/h;++a<d;)o=s[a]=[],o.dx=f[a+1]-(o.x=f[a]),o.y=0;if(d>0)for(a=-1;++a<h;)u=l[a],u>=c[0]&&u<=c[1]&&(o=s[so.bisect(f,u,1,d)-1],o.y+=p,o.push(t[a]));return s}var e=!0,n=Number,r=_i,i=bi;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(r=Nt(e),t):r},t.bins=function(e){return arguments.length?(i="number"==typeof e?function(t){return wi(t,e)}:Nt(e),t):i},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},so.layout.pack=function(){function t(t,a){var o=n.call(this,t,a),u=o[0],s=i[0],l=i[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(u.x=u.y=0,ui(u,function(t){t.r=+c(t.value)}),ui(u,Ni),r){var f=r*(e?1:Math.max(2*u.r/s,2*u.r/l))/2;ui(u,function(t){t.r+=f}),ui(u,Ni),ui(u,function(t){t.r-=f})}return Di(u,s/2,l/2,e?1:1/Math.max(2*u.r/s,2*u.r/l)),o}var e,n=so.layout.hierarchy().sort(Mi),r=0,i=[1,1];return t.size=function(e){return arguments.length?(i=e,t):i},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(r=+e,t):r},ai(t,n)},so.layout.tree=function(){function t(t,i){var c=o.call(this,t,i),f=c[0],h=e(f);if(ui(h,n),h.parent.m=-h.z,oi(h,r),l)oi(f,a);else{var d=f,p=f,g=f;oi(f,function(t){t.x<d.x&&(d=t),t.x>p.x&&(p=t),t.depth>g.depth&&(g=t)});var v=u(d,p)/2-d.x,m=s[0]/(p.x+u(p,d)/2+v),y=s[1]/(g.depth||1);oi(f,function(t){t.x=(t.x+v)*m,t.y=t.depth*y})}return c}function e(t){for(var e,n={A:null,children:[t]},r=[n];null!=(e=r.pop());)for(var i,a=e.children,o=0,u=a.length;u>o;++o)r.push((a[o]=i={_:a[o],parent:e,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}function n(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e.length){Oi(t);var a=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+u(t._,r._),t.m=t.z-a):t.z=a}else r&&(t.z=r.z+u(t._,r._));t.parent.A=i(t,r,t.parent.A||n[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function i(t,e,n){if(e){for(var r,i=t,a=t,o=e,s=i.parent.children[0],l=i.m,c=a.m,f=o.m,h=s.m;o=Li(o),i=zi(i),o&&i;)s=zi(s),a=Li(a),a.a=t,r=o.z+f-i.z-l+u(o._,i._),r>0&&(Ii(Ri(o,t,n),t,r),l+=r,c+=r),f+=o.m,l+=i.m,h+=s.m,c+=a.m;o&&!Li(a)&&(a.t=o,a.m+=f-c),i&&!zi(s)&&(s.t=i,s.m+=l-h,n=t)}return n}function a(t){t.x*=s[0],t.y=t.depth*s[1]}var o=so.layout.hierarchy().sort(null).value(null),u=Ai,s=[1,1],l=null;return t.separation=function(e){return arguments.length?(u=e,t):u},t.size=function(e){return arguments.length?(l=null==(s=e)?a:null,t):l?null:s},t.nodeSize=function(e){return arguments.length?(l=null==(s=e)?null:a,t):l?s:null},ai(t,o)},so.layout.cluster=function(){function t(t,a){var o,u=e.call(this,t,a),s=u[0],l=0;ui(s,function(t){var e=t.children;e&&e.length?(t.x=Bi(e),t.y=ji(e)):(t.x=o?l+=n(t,o):0,t.y=0,o=t)});var c=qi(s),f=Fi(s),h=c.x-n(c,f)/2,d=f.x+n(f,c)/2;return ui(s,i?function(t){t.x=(t.x-s.x)*r[0],t.y=(s.y-t.y)*r[1]}:function(t){t.x=(t.x-h)/(d-h)*r[0],t.y=(1-(s.y?t.y/s.y:1))*r[1]}),u}var e=so.layout.hierarchy().sort(null).value(null),n=Ai,r=[1,1],i=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=null==(r=e),t):i?null:r},t.nodeSize=function(e){return arguments.length?(i=null!=(r=e),t):i?r:null},ai(t,e)},so.layout.treemap=function(){function t(t,e){for(var n,r,i=-1,a=t.length;++i<a;)r=(n=t[i]).value*(0>e?0:e),n.area=isNaN(r)||0>=r?0:r}function e(n){var a=n.children;if(a&&a.length){var o,u,s,l=f(n),c=[],h=a.slice(),p=1/0,g="slice"===d?l.dx:"dice"===d?l.dy:"slice-dice"===d?1&n.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(t(h,l.dx*l.dy/n.value),c.area=0;(s=h.length)>0;)c.push(o=h[s-1]),c.area+=o.area,"squarify"!==d||(u=r(c,g))<=p?(h.pop(),p=u):(c.area-=c.pop().area,i(c,g,l,!1),g=Math.min(l.dx,l.dy),c.length=c.area=0,p=1/0);c.length&&(i(c,g,l,!0),c.length=c.area=0),a.forEach(e)}}function n(e){var r=e.children;if(r&&r.length){var a,o=f(e),u=r.slice(),s=[];for(t(u,o.dx*o.dy/e.value),s.area=0;a=u.pop();)s.push(a),s.area+=a.area,null!=a.z&&(i(s,a.z?o.dx:o.dy,o,!u.length),s.length=s.area=0);r.forEach(n)}}function r(t,e){for(var n,r=t.area,i=0,a=1/0,o=-1,u=t.length;++o<u;)(n=t[o].area)&&(a>n&&(a=n),n>i&&(i=n));return r*=r,e*=e,r?Math.max(e*i*p/r,r/(e*a*p)):1/0}function i(t,e,n,r){var i,a=-1,o=t.length,u=n.x,l=n.y,c=e?s(t.area/e):0;if(e==n.dx){for((r||c>n.dy)&&(c=n.dy);++a<o;)i=t[a],i.x=u,i.y=l,i.dy=c,u+=i.dx=Math.min(n.x+n.dx-u,c?s(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-u,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++a<o;)i=t[a],i.x=u,i.y=l,i.dx=c,l+=i.dy=Math.min(n.y+n.dy-l,c?s(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-l,n.x+=c,n.dx-=c}}function a(r){var i=o||u(r),a=i[0];return a.x=a.y=0,a.value?(a.dx=l[0],a.dy=l[1]):a.dx=a.dy=0,o&&u.revalue(a),t([a],a.dx*a.dy/a.value),(o?n:e)(a),h&&(o=i),i}var o,u=so.layout.hierarchy(),s=Math.round,l=[1,1],c=null,f=Vi,h=!1,d="squarify",p=.5*(1+Math.sqrt(5));return a.size=function(t){return arguments.length?(l=t,a):l},a.padding=function(t){function e(e){var n=t.call(a,e,e.depth);return null==n?Vi(e):Yi(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Yi(e,t)}if(!arguments.length)return c;var r;return f=null==(c=t)?Vi:"function"==(r=typeof t)?e:"number"===r?(t=[t,t,t,t],n):n,a},a.round=function(t){return arguments.length?(s=t?Math.round:Number,a):s!=Number},a.sticky=function(t){return arguments.length?(h=t,o=null,a):h},a.ratio=function(t){return arguments.length?(p=t,a):p},a.mode=function(t){return arguments.length?(d=t+"",a):d},ai(a,u)},so.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=so.random.normal.apply(so,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=so.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e}}},so.scale={};var Es={floor:x,ceil:x};so.scale.linear=function(){return Gi([0,1],[0,1],br,!1)};var Ss={s:1,g:1,p:1,r:1,e:1};so.scale.log=function(){return ia(so.scale.linear().domain([0,1]),10,!0,[1,10])};var Ns=so.format(".0e"),Ts={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};so.scale.pow=function(){return aa(so.scale.linear(),1,[0,1])},so.scale.sqrt=function(){return so.scale.pow().exponent(.5)},so.scale.ordinal=function(){return ua([],{t:"range",a:[[]]})},so.scale.category10=function(){return so.scale.ordinal().range(Cs)},so.scale.category20=function(){return so.scale.ordinal().range(Ds)},so.scale.category20b=function(){return so.scale.ordinal().range(Ps)},so.scale.category20c=function(){return so.scale.ordinal().range(As)};var Cs=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(bt),Ds=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(bt),Ps=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(bt),As=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(bt);so.scale.quantile=function(){return sa([],[])},so.scale.quantize=function(){return la(0,1,[0,1])},so.scale.threshold=function(){return ca([.5],[0,1])},so.scale.identity=function(){return fa([0,1])},so.svg={},so.svg.arc=function(){function t(){var t=Math.max(0,+n.apply(this,arguments)),l=Math.max(0,+r.apply(this,arguments)),c=o.apply(this,arguments)-Yo,f=u.apply(this,arguments)-Yo,h=Math.abs(f-c),d=c>f?0:1;if(t>l&&(p=l,l=t,t=p),h>=Vo)return e(l,d)+(t?e(t,1-d):"")+"Z";var p,g,v,m,y,x,b,w,_,M,k,E,S=0,N=0,T=[];if((m=(+s.apply(this,arguments)||0)/2)&&(v=a===zs?Math.sqrt(t*t+l*l):+a.apply(this,arguments),d||(N*=-1),l&&(N=nt(v/l*Math.sin(m))),t&&(S=nt(v/t*Math.sin(m)))),l){y=l*Math.cos(c+N),x=l*Math.sin(c+N),b=l*Math.cos(f-N),w=l*Math.sin(f-N);var C=Math.abs(f-c-2*N)<=qo?0:1;if(N&&ya(y,x,b,w)===d^C){var D=(c+f)/2;y=l*Math.cos(D),x=l*Math.sin(D),b=w=null}}else y=x=0;if(t){_=t*Math.cos(f-S),M=t*Math.sin(f-S),k=t*Math.cos(c+S),E=t*Math.sin(c+S);var P=Math.abs(c-f+2*S)<=qo?0:1;if(S&&ya(_,M,k,E)===1-d^P){var A=(c+f)/2;_=t*Math.cos(A),M=t*Math.sin(A),k=E=null}}else _=M=0;if(h>jo&&(p=Math.min(Math.abs(l-t)/2,+i.apply(this,arguments)))>.001){g=l>t^d?0:1;var z=p,L=p;if(qo>h){var I=null==k?[_,M]:null==b?[y,x]:In([y,x],[k,E],[b,w],[_,M]),O=y-I[0],R=x-I[1],j=b-I[0],B=w-I[1],q=1/Math.sin(Math.acos((O*j+R*B)/(Math.sqrt(O*O+R*R)*Math.sqrt(j*j+B*B)))/2),F=Math.sqrt(I[0]*I[0]+I[1]*I[1]);L=Math.min(p,(t-F)/(q-1)),z=Math.min(p,(l-F)/(q+1))}if(null!=b){var V=xa(null==k?[_,M]:[k,E],[y,x],l,z,d),Y=xa([b,w],[_,M],l,z,d);p===z?T.push("M",V[0],"A",z,",",z," 0 0,",g," ",V[1],"A",l,",",l," 0 ",1-d^ya(V[1][0],V[1][1],Y[1][0],Y[1][1]),",",d," ",Y[1],"A",z,",",z," 0 0,",g," ",Y[0]):T.push("M",V[0],"A",z,",",z," 0 1,",g," ",Y[0])}else T.push("M",y,",",x);if(null!=k){var X=xa([y,x],[k,E],t,-L,d),$=xa([_,M],null==b?[y,x]:[b,w],t,-L,d);p===L?T.push("L",$[0],"A",L,",",L," 0 0,",g," ",$[1],"A",t,",",t," 0 ",d^ya($[1][0],$[1][1],X[1][0],X[1][1]),",",1-d," ",X[1],"A",L,",",L," 0 0,",g," ",X[0]):T.push("L",$[0],"A",L,",",L," 0 0,",g," ",X[0])}else T.push("L",_,",",M)}else T.push("M",y,",",x),null!=b&&T.push("A",l,",",l," 0 ",C,",",d," ",b,",",w),T.push("L",_,",",M),null!=k&&T.push("A",t,",",t," 0 ",P,",",1-d," ",k,",",E);return T.push("Z"),T.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var n=da,r=pa,i=ha,a=zs,o=ga,u=va,s=ma;return t.innerRadius=function(e){return arguments.length?(n=Nt(e),t):n},t.outerRadius=function(e){return arguments.length?(r=Nt(e),t):r},t.cornerRadius=function(e){return arguments.length?(i=Nt(e),t):i},t.padRadius=function(e){return arguments.length?(a=e==zs?zs:Nt(e),t):a},t.startAngle=function(e){return arguments.length?(o=Nt(e),t):o},t.endAngle=function(e){return arguments.length?(u=Nt(e),t):u},t.padAngle=function(e){return arguments.length?(s=Nt(e),t):s},t.centroid=function(){var t=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,e=(+o.apply(this,arguments)+ +u.apply(this,arguments))/2-Yo;return[Math.cos(e)*t,Math.sin(e)*t]},t};var zs="auto";so.svg.line=function(){return ba(x)};var Ls=so.map({linear:wa,"linear-closed":_a,step:Ma,"step-before":ka,"step-after":Ea,basis:Pa,"basis-open":Aa,"basis-closed":za,bundle:La,cardinal:Ta,"cardinal-open":Sa,"cardinal-closed":Na,monotone:qa});Ls.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Is=[0,2/3,1/3,0],Os=[0,1/3,2/3,0],Rs=[0,1/6,2/3,1/6];so.svg.line.radial=function(){var t=ba(Fa);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},ka.reverse=Ea,Ea.reverse=ka,so.svg.area=function(){return Va(x)},so.svg.area.radial=function(){var t=Va(Fa);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},so.svg.chord=function(){function t(t,u){var s=e(this,a,t,u),l=e(this,o,t,u);return"M"+s.p0+r(s.r,s.p1,s.a1-s.a0)+(n(s,l)?i(s.r,s.p1,s.r,s.p0):i(s.r,s.p1,l.r,l.p0)+r(l.r,l.p1,l.a1-l.a0)+i(l.r,l.p1,s.r,s.p0))+"Z"}function e(t,e,n,r){var i=e.call(t,n,r),a=u.call(t,i,r),o=s.call(t,i,r)-Yo,c=l.call(t,i,r)-Yo;return{r:a,a0:o,a1:c,p0:[a*Math.cos(o),a*Math.sin(o)],p1:[a*Math.cos(c),a*Math.sin(c)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function r(t,e,n){return"A"+t+","+t+" 0 "+ +(n>qo)+",1 "+e}function i(t,e,n,r){return"Q 0,0 "+r}var a=bn,o=wn,u=Ya,s=ga,l=va;return t.radius=function(e){return arguments.length?(u=Nt(e),t):u},t.source=function(e){return arguments.length?(a=Nt(e),t):a},t.target=function(e){return arguments.length?(o=Nt(e),t):o},t.startAngle=function(e){return arguments.length?(s=Nt(e),t):s},t.endAngle=function(e){return arguments.length?(l=Nt(e),t):l},t},so.svg.diagonal=function(){function t(t,i){var a=e.call(this,t,i),o=n.call(this,t,i),u=(a.y+o.y)/2,s=[a,{x:a.x,y:u},{x:o.x,y:u},o];return s=s.map(r),"M"+s[0]+"C"+s[1]+" "+s[2]+" "+s[3]}var e=bn,n=wn,r=Xa;return t.source=function(n){return arguments.length?(e=Nt(n),t):e},t.target=function(e){return arguments.length?(n=Nt(e),t):n},t.projection=function(e){return arguments.length?(r=e,t):r},t},so.svg.diagonal.radial=function(){var t=so.svg.diagonal(),e=Xa,n=t.projection;return t.projection=function(t){return arguments.length?n($a(e=t)):e},t},so.svg.symbol=function(){function t(t,r){return(js.get(e.call(this,t,r))||Wa)(n.call(this,t,r))}var e=Ha,n=Ua;return t.type=function(n){return arguments.length?(e=Nt(n),t):e},t.size=function(e){return arguments.length?(n=Nt(e),t):n},t};var js=so.map({circle:Wa,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*qs)),n=e*qs;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Bs),n=e*Bs/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Bs),n=e*Bs/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});so.svg.symbolTypes=js.keys();var Bs=Math.sqrt(3),qs=Math.tan(30*Xo);Do.transition=function(t){for(var e,n,r=Fs||++$s,i=Qa(t),a=[],o=Vs||{time:Date.now(),ease:Nr,delay:0,duration:250},u=-1,s=this.length;++u<s;){a.push(e=[]);for(var l=this[u],c=-1,f=l.length;++c<f;)(n=l[c])&&to(n,c,i,r,o),e.push(n)}return Ga(a,i,r)},Do.interrupt=function(t){return this.each(null==t?Ys:Za(Qa(t)));
};var Fs,Vs,Ys=Za(Qa()),Xs=[],$s=0;Xs.call=Do.call,Xs.empty=Do.empty,Xs.node=Do.node,Xs.size=Do.size,so.transition=function(t,e){return t&&t.transition?Fs?t.transition(e):t:so.selection().transition(t)},so.transition.prototype=Xs,Xs.select=function(t){var e,n,r,i=this.id,a=this.namespace,o=[];t=C(t);for(var u=-1,s=this.length;++u<s;){o.push(e=[]);for(var l=this[u],c=-1,f=l.length;++c<f;)(r=l[c])&&(n=t.call(r,r.__data__,c,u))?("__data__"in r&&(n.__data__=r.__data__),to(n,c,a,i,r[a][i]),e.push(n)):e.push(null)}return Ga(o,a,i)},Xs.selectAll=function(t){var e,n,r,i,a,o=this.id,u=this.namespace,s=[];t=D(t);for(var l=-1,c=this.length;++l<c;)for(var f=this[l],h=-1,d=f.length;++h<d;)if(r=f[h]){a=r[u][o],n=t.call(r,r.__data__,h,l),s.push(e=[]);for(var p=-1,g=n.length;++p<g;)(i=n[p])&&to(i,p,u,o,a),e.push(i)}return Ga(s,u,o)},Xs.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=V(t));for(var a=0,o=this.length;o>a;a++){i.push(e=[]);for(var n=this[a],u=0,s=n.length;s>u;u++)(r=n[u])&&t.call(r,r.__data__,u,a)&&e.push(r)}return Ga(i,this.namespace,this.id)},Xs.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):X(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},Xs.attr=function(t,e){function n(){this.removeAttribute(u)}function r(){this.removeAttributeNS(u.space,u.local)}function i(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(u);return n!==t&&(e=o(n,t),function(t){this.setAttribute(u,e(t))})})}function a(t){return null==t?r:(t+="",function(){var e,n=this.getAttributeNS(u.space,u.local);return n!==t&&(e=o(n,t),function(t){this.setAttributeNS(u.space,u.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var o="transform"==t?Wr:br,u=so.ns.qualify(t);return Ka(this,"attr."+t,e,u.local?a:i)},Xs.attrTween=function(t,e){function n(t,n){var r=e.call(this,t,n,this.getAttribute(i));return r&&function(t){this.setAttribute(i,r(t))}}function r(t,n){var r=e.call(this,t,n,this.getAttributeNS(i.space,i.local));return r&&function(t){this.setAttributeNS(i.space,i.local,r(t))}}var i=so.ns.qualify(t);return this.tween("attr."+t,i.local?r:n)},Xs.style=function(t,e,r){function i(){this.style.removeProperty(t)}function a(e){return null==e?i:(e+="",function(){var i,a=n(this).getComputedStyle(this,null).getPropertyValue(t);return a!==e&&(i=br(a,e),function(e){this.style.setProperty(t,i(e),r)})})}var o=arguments.length;if(3>o){if("string"!=typeof t){2>o&&(e="");for(r in t)this.style(r,t[r],e);return this}r=""}return Ka(this,"style."+t,e,a)},Xs.styleTween=function(t,e,r){function i(i,a){var o=e.call(this,i,a,n(this).getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),r)}}return arguments.length<3&&(r=""),this.tween("style."+t,i)},Xs.text=function(t){return Ka(this,"text",t,Ja)},Xs.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Xs.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=so.ease.apply(so,arguments)),X(this,function(r){r[n][e].ease=t}))},Xs.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:X(this,"function"==typeof t?function(r,i,a){r[n][e].delay=+t.call(r,r.__data__,i,a)}:(t=+t,function(r){r[n][e].delay=t}))},Xs.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:X(this,"function"==typeof t?function(r,i,a){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,a))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},Xs.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Vs,a=Fs;try{Fs=n,X(this,function(e,i,a){Vs=e[r][n],t.call(e,e.__data__,i,a)})}finally{Vs=i,Fs=a}}else X(this,function(i){var a=i[r][n];(a.event||(a.event=so.dispatch("start","end","interrupt"))).on(t,e)});return this},Xs.transition=function(){for(var t,e,n,r,i=this.id,a=++$s,o=this.namespace,u=[],s=0,l=this.length;l>s;s++){u.push(t=[]);for(var e=this[s],c=0,f=e.length;f>c;c++)(n=e[c])&&(r=n[o][i],to(n,c,o,a,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),t.push(n)}return Ga(u,o,a)},so.svg.axis=function(){function t(t){t.each(function(){var t,l=so.select(this),c=this.__chart__||n,f=this.__chart__=n.copy(),h=null==s?f.ticks?f.ticks.apply(f,u):f.domain():s,d=null==e?f.tickFormat?f.tickFormat.apply(f,u):x:e,p=l.selectAll(".tick").data(h,f),g=p.enter().insert("g",".domain").attr("class","tick").style("opacity",jo),v=so.transition(p.exit()).style("opacity",jo).remove(),m=so.transition(p.order()).style("opacity",1),y=Math.max(i,0)+o,b=$i(f),w=l.selectAll(".domain").data([0]),_=(w.enter().append("path").attr("class","domain"),so.transition(w));g.append("line"),g.append("text");var M,k,E,S,N=g.select("line"),T=m.select("line"),C=p.select("text").text(d),D=g.select("text"),P=m.select("text"),A="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(t=eo,M="x",E="y",k="x2",S="y2",C.attr("dy",0>A?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+b[0]+","+A*a+"V0H"+b[1]+"V"+A*a)):(t=no,M="y",E="x",k="y2",S="x2",C.attr("dy",".32em").style("text-anchor",0>A?"end":"start"),_.attr("d","M"+A*a+","+b[0]+"H0V"+b[1]+"H"+A*a)),N.attr(S,A*i),D.attr(E,A*y),T.attr(k,0).attr(S,A*i),P.attr(M,0).attr(E,A*y),f.rangeBand){var z=f,L=z.rangeBand()/2;c=f=function(t){return z(t)+L}}else c.rangeBand?c=f:v.call(t,f,c);g.call(t,c,f),m.call(t,f,f)})}var e,n=so.scale.linear(),r=Us,i=6,a=6,o=3,u=[10],s=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(r=e in Hs?e+"":Us,t):r},t.ticks=function(){return arguments.length?(u=co(arguments),t):u},t.tickValues=function(e){return arguments.length?(s=e,t):s},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(i=+e,a=+arguments[n-1],t):i},t.innerTickSize=function(e){return arguments.length?(i=+e,t):i},t.outerTickSize=function(e){return arguments.length?(a=+e,t):a},t.tickPadding=function(e){return arguments.length?(o=+e,t):o},t.tickSubdivide=function(){return arguments.length&&t},t};var Us="bottom",Hs={top:1,right:1,bottom:1,left:1};so.svg.brush=function(){function t(n){n.each(function(){var n=so.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",a).on("touchstart.brush",a),o=n.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),n.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=n.selectAll(".resize").data(g,x);u.exit().remove(),u.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Ws[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",t.empty()?"none":null);var s,f=so.transition(n),h=so.transition(o);l&&(s=$i(l),h.attr("x",s[0]).attr("width",s[1]-s[0]),r(f)),c&&(s=$i(c),h.attr("y",s[0]).attr("height",s[1]-s[0]),i(f)),e(f)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+f[+/e$/.test(t)]+","+h[+/^s/.test(t)]+")"})}function r(t){t.select(".extent").attr("x",f[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function i(t){t.select(".extent").attr("y",h[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function a(){function a(){32==so.event.keyCode&&(C||(x=null,P[0]-=f[1],P[1]-=h[1],C=2),E())}function g(){32==so.event.keyCode&&2==C&&(P[0]+=f[1],P[1]+=h[1],C=0,E())}function v(){var t=so.mouse(w),n=!1;b&&(t[0]+=b[0],t[1]+=b[1]),C||(so.event.altKey?(x||(x=[(f[0]+f[1])/2,(h[0]+h[1])/2]),P[0]=f[+(t[0]<x[0])],P[1]=h[+(t[1]<x[1])]):x=null),N&&m(t,l,0)&&(r(k),n=!0),T&&m(t,c,1)&&(i(k),n=!0),n&&(e(k),M({type:"brush",mode:C?"move":"resize"}))}function m(t,e,n){var r,i,a=$i(e),s=a[0],l=a[1],c=P[n],g=n?h:f,v=g[1]-g[0];return C&&(s-=c,l-=v+c),r=(n?p:d)?Math.max(s,Math.min(l,t[n])):t[n],C?i=(r+=c)+v:(x&&(c=Math.max(s,Math.min(l,2*x[n]-r))),r>c?(i=r,r=c):i=c),g[0]!=r||g[1]!=i?(n?u=null:o=null,g[0]=r,g[1]=i,!0):void 0}function y(){v(),k.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),so.select("body").style("cursor",null),A.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),D(),M({type:"brushend"})}var x,b,w=this,_=so.select(so.event.target),M=s.of(w,arguments),k=so.select(w),S=_.datum(),N=!/^(n|s)$/.test(S)&&l,T=!/^(e|w)$/.test(S)&&c,C=_.classed("extent"),D=G(w),P=so.mouse(w),A=so.select(n(w)).on("keydown.brush",a).on("keyup.brush",g);if(so.event.changedTouches?A.on("touchmove.brush",v).on("touchend.brush",y):A.on("mousemove.brush",v).on("mouseup.brush",y),k.interrupt().selectAll("*").interrupt(),C)P[0]=f[0]-P[0],P[1]=h[0]-P[1];else if(S){var z=+/w$/.test(S),L=+/^n/.test(S);b=[f[1-z]-P[0],h[1-L]-P[1]],P[0]=f[z],P[1]=h[L]}else so.event.altKey&&(x=P.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null),so.select("body").style("cursor",_.style("cursor")),M({type:"brushstart"}),v()}var o,u,s=N(t,"brushstart","brush","brushend"),l=null,c=null,f=[0,0],h=[0,0],d=!0,p=!0,g=Zs[0];return t.event=function(t){t.each(function(){var t=s.of(this,arguments),e={x:f,y:h,i:o,j:u},n=this.__chart__||e;this.__chart__=e,Fs?so.select(this).transition().each("start.brush",function(){o=n.i,u=n.j,f=n.x,h=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=wr(f,e.x),r=wr(h,e.y);return o=u=null,function(i){f=e.x=n(i),h=e.y=r(i),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=e.i,u=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(l=e,g=Zs[!l<<1|!c],t):l},t.y=function(e){return arguments.length?(c=e,g=Zs[!l<<1|!c],t):c},t.clamp=function(e){return arguments.length?(l&&c?(d=!!e[0],p=!!e[1]):l?d=!!e:c&&(p=!!e),t):l&&c?[d,p]:l?d:c?p:null},t.extent=function(e){var n,r,i,a,s;return arguments.length?(l&&(n=e[0],r=e[1],c&&(n=n[0],r=r[0]),o=[n,r],l.invert&&(n=l(n),r=l(r)),n>r&&(s=n,n=r,r=s),(n!=f[0]||r!=f[1])&&(f=[n,r])),c&&(i=e[0],a=e[1],l&&(i=i[1],a=a[1]),u=[i,a],c.invert&&(i=c(i),a=c(a)),i>a&&(s=i,i=a,a=s),(i!=h[0]||a!=h[1])&&(h=[i,a])),t):(l&&(o?(n=o[0],r=o[1]):(n=f[0],r=f[1],l.invert&&(n=l.invert(n),r=l.invert(r)),n>r&&(s=n,n=r,r=s))),c&&(u?(i=u[0],a=u[1]):(i=h[0],a=h[1],c.invert&&(i=c.invert(i),a=c.invert(a)),i>a&&(s=i,i=a,a=s))),l&&c?[[n,i],[r,a]]:l?[n,r]:c&&[i,a])},t.clear=function(){return t.empty()||(f=[0,0],h=[0,0],o=u=null),t},t.empty=function(){return!!l&&f[0]==f[1]||!!c&&h[0]==h[1]},so.rebind(t,s,"on")};var Ws={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Zs=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Gs=gu.format=wu.timeFormat,Ks=Gs.utc,Js=Ks("%Y-%m-%dT%H:%M:%S.%LZ");Gs.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ro:Js,ro.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},ro.toString=Js.toString,gu.second=Ft(function(t){return new vu(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),gu.seconds=gu.second.range,gu.seconds.utc=gu.second.utc.range,gu.minute=Ft(function(t){return new vu(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),gu.minutes=gu.minute.range,gu.minutes.utc=gu.minute.utc.range,gu.hour=Ft(function(t){var e=t.getTimezoneOffset()/60;return new vu(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),gu.hours=gu.hour.range,gu.hours.utc=gu.hour.utc.range,gu.month=Ft(function(t){return t=gu.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),gu.months=gu.month.range,gu.months.utc=gu.month.utc.range;var Qs=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],tl=[[gu.second,1],[gu.second,5],[gu.second,15],[gu.second,30],[gu.minute,1],[gu.minute,5],[gu.minute,15],[gu.minute,30],[gu.hour,1],[gu.hour,3],[gu.hour,6],[gu.hour,12],[gu.day,1],[gu.day,2],[gu.week,1],[gu.month,1],[gu.month,3],[gu.year,1]],el=Gs.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",De]]),nl={range:function(t,e,n){return so.range(Math.ceil(t/n)*n,+e,n).map(ao)},floor:x,ceil:x};tl.year=gu.year,gu.scale=function(){return io(so.scale.linear(),tl,el)};var rl=tl.map(function(t){return[t[0].utc,t[1]]}),il=Ks.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",De]]);rl.year=gu.year.utc,gu.scale.utc=function(){return io(so.scale.linear(),rl,il)},so.text=Tt(function(t){return t.responseText}),so.json=function(t,e){return Ct(t,"application/json",oo,e)},so.html=function(t,e){return Ct(t,"text/html",uo,e)},so.xml=Tt(function(t){return t.responseXML}),"function"==typeof define&&define.amd?(this.d3=so,define(so)):"object"==typeof e&&e.exports?e.exports=so:this.d3=so}()},{}],7:[function(t,e,n){e.exports={graphlib:t("./lib/graphlib"),layout:t("./lib/layout"),debug:t("./lib/debug"),util:{time:t("./lib/util").time,notime:t("./lib/util").notime},version:t("./lib/version")}},{"./lib/debug":12,"./lib/graphlib":13,"./lib/layout":15,"./lib/util":35,"./lib/version":36}],8:[function(t,e,n){"use strict";function r(t){function e(t){return function(e){return t.edge(e).weight}}var n="greedy"===t.graph().acyclicer?u(t,e(t)):i(t);o.each(n,function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,o.uniqueId("rev"))})}function i(t){function e(a){o.has(i,a)||(i[a]=!0,r[a]=!0,o.each(t.outEdges(a),function(t){o.has(r,t.w)?n.push(t):e(t.w)}),delete r[a])}var n=[],r={},i={};return o.each(t.nodes(),e),n}function a(t){o.each(t.edges(),function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}})}var o=t("./lodash"),u=t("./greedy-fas");e.exports={run:r,undo:a}},{"./greedy-fas":14,"./lodash":16}],9:[function(t,e,n){function r(t){function e(n){var r=t.children(n),o=t.node(n);if(r.length&&a.each(r,e),a.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var u=o.minRank,s=o.maxRank+1;s>u;++u)i(t,"borderLeft","_bl",n,o,u),i(t,"borderRight","_br",n,o,u)}}a.each(t.children(),e)}function i(t,e,n,r,i,a){var u={width:0,height:0,rank:a,borderType:e},s=i[e][a-1],l=o.addDummyNode(t,"border",u,n);i[e][a]=l,t.setParent(l,r),s&&t.setEdge(s,l,{weight:1})}var a=t("./lodash"),o=t("./util");e.exports=r},{"./lodash":16,"./util":35}],10:[function(t,e,n){"use strict";function r(t){var e=t.graph().rankdir.toLowerCase();("lr"===e||"rl"===e)&&a(t)}function i(t){var e=t.graph().rankdir.toLowerCase();("bt"===e||"rl"===e)&&u(t),("lr"===e||"rl"===e)&&(l(t),a(t))}function a(t){f.each(t.nodes(),function(e){o(t.node(e))}),f.each(t.edges(),function(e){o(t.edge(e))})}function o(t){var e=t.width;t.width=t.height,t.height=e}function u(t){f.each(t.nodes(),function(e){s(t.node(e))}),f.each(t.edges(),function(e){var n=t.edge(e);f.each(n.points,s),f.has(n,"y")&&s(n)})}function s(t){t.y=-t.y}function l(t){f.each(t.nodes(),function(e){c(t.node(e))}),f.each(t.edges(),function(e){var n=t.edge(e);f.each(n.points,c),f.has(n,"x")&&c(n)})}function c(t){var e=t.x;t.x=t.y,t.y=e}var f=t("./lodash");e.exports={adjust:r,undo:i}},{"./lodash":16}],11:[function(t,e,n){function r(){var t={};t._next=t._prev=t,this._sentinel=t}function i(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function a(t,e){return"_next"!==t&&"_prev"!==t?e:void 0}e.exports=r,r.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;return e!==t?(i(e),e):void 0},r.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&i(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},r.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,a)),n=n._prev;return"["+t.join(", ")+"]"}},{}],12:[function(t,e,n){function r(t){var e=a.buildLayerMatrix(t),n=new o({compound:!0,multigraph:!0}).setGraph({});return i.each(t.nodes(),function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)}),i.each(t.edges(),function(t){n.setEdge(t.v,t.w,{},t.name)}),i.each(e,function(t,e){var r="layer"+e;n.setNode(r,{rank:"same"}),i.reduce(t,function(t,e){return n.setEdge(t,e,{style:"invis"}),e})}),n}var i=t("./lodash"),a=t("./util"),o=t("./graphlib").Graph;e.exports={debugOrdering:r}},{"./graphlib":13,"./lodash":16,"./util":35}],13:[function(t,e,n){var r;if("function"==typeof t)try{r=t("graphlib")}catch(i){}r||(r=window.graphlib),e.exports=r},{graphlib:38}],14:[function(t,e,n){function r(t,e){if(t.nodeCount()<=1)return[];var n=o(t,e||f),r=i(n.graph,n.buckets,n.zeroIdx);return s.flatten(s.map(r,function(e){return t.outEdges(e.v,e.w)}),!0)}function i(t,e,n){for(var r,i=[],o=e[e.length-1],u=e[0];t.nodeCount();){for(;r=u.dequeue();)a(t,e,n,r);for(;r=o.dequeue();)a(t,e,n,r);if(t.nodeCount())for(var s=e.length-2;s>0;--s)if(r=e[s].dequeue()){i=i.concat(a(t,e,n,r,!0));break}}return i}function a(t,e,n,r,i){var a=i?[]:void 0;return s.each(t.inEdges(r.v),function(r){var o=t.edge(r),s=t.node(r.v);i&&a.push({v:r.v,w:r.w}),s.out-=o,u(e,n,s)}),s.each(t.outEdges(r.v),function(r){var i=t.edge(r),a=r.w,o=t.node(a);o["in"]-=i,u(e,n,o)}),t.removeNode(r.v),a}function o(t,e){var n=new l,r=0,i=0;s.each(t.nodes(),function(t){n.setNode(t,{v:t,"in":0,out:0})}),s.each(t.edges(),function(t){var a=n.edge(t.v,t.w)||0,o=e(t),u=a+o;n.setEdge(t.v,t.w,u),i=Math.max(i,n.node(t.v).out+=o),r=Math.max(r,n.node(t.w)["in"]+=o)});var a=s.range(i+r+3).map(function(){return new c}),o=r+1;return s.each(n.nodes(),function(t){u(a,o,n.node(t))}),{graph:n,buckets:a,zeroIdx:o}}function u(t,e,n){n.out?n["in"]?t[n.out-n["in"]+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}var s=t("./lodash"),l=t("./graphlib").Graph,c=t("./data/list");e.exports=r;var f=s.constant(1)},{"./data/list":11,"./graphlib":13,"./lodash":16}],15:[function(t,e,n){"use strict";function r(t,e){var n=e&&e.debugTiming?z.time:z.notime;n("layout",function(){var e=n("  buildLayoutGraph",function(){return o(t)});n("  runLayout",function(){i(e,n)}),n("  updateInputGraph",function(){a(t,e)})})}function i(t,e){e("    makeSpaceForEdgeLabels",function(){u(t)}),e("    removeSelfEdges",function(){v(t)}),e("    acyclic",function(){_.run(t)}),e("    nestingGraph.run",function(){T.run(t)}),e("    rank",function(){k(z.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){s(t)}),e("    removeEmptyRanks",function(){N(t)}),e("    nestingGraph.cleanup",function(){T.cleanup(t)}),e("    normalizeRanks",function(){E(t)}),e("    assignRankMinMax",function(){l(t)}),e("    removeEdgeLabelProxies",function(){c(t)}),e("    normalize.run",function(){M.run(t)}),e("    parentDummyChains",function(){S(t)}),e("    addBorderSegments",function(){C(t)}),e("    order",function(){P(t)}),e("    insertSelfEdges",function(){m(t)}),e("    adjustCoordinateSystem",function(){D.adjust(t)}),e("    position",function(){A(t)}),e("    positionSelfEdges",function(){y(t)}),e("    removeBorderNodes",function(){g(t)}),e("    normalize.undo",function(){M.undo(t)}),e("    fixupEdgeLabelCoords",function(){d(t)}),e("    undoCoordinateSystem",function(){D.undo(t)}),e("    translateGraph",function(){f(t)}),e("    assignNodeIntersects",function(){h(t)}),e("    reversePoints",function(){p(t)}),e("    acyclic.undo",function(){_.undo(t)})}function a(t,e){w.each(t.nodes(),function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))}),w.each(t.edges(),function(n){var r=t.edge(n),i=e.edge(n);r.points=i.points,w.has(i,"x")&&(r.x=i.x,r.y=i.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}function o(t){var e=new L({multigraph:!0,compound:!0}),n=b(t.graph());return e.setGraph(w.merge({},O,x(n,I),w.pick(n,R))),w.each(t.nodes(),function(n){var r=b(t.node(n));e.setNode(n,w.defaults(x(r,j),B)),e.setParent(n,t.parent(n))}),w.each(t.edges(),function(n){var r=b(t.edge(n));e.setEdge(n,w.merge({},F,x(r,q),w.pick(r,V)))}),e}function u(t){var e=t.graph();e.ranksep/=2,w.each(t.edges(),function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function s(t){w.each(t.edges(),function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i=t.node(e.w),a={rank:(i.rank-r.rank)/2+r.rank,e:e};z.addDummyNode(t,"edge-proxy",a,"_ep")}})}function l(t){var e=0;w.each(t.nodes(),function(n){var r=t.node(n);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,e=w.max(e,r.maxRank))}),t.graph().maxRank=e}function c(t){w.each(t.nodes(),function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}function f(t){function e(t){var e=t.x,o=t.y,u=t.width,s=t.height;n=Math.min(n,e-u/2),r=Math.max(r,e+u/2),i=Math.min(i,o-s/2),a=Math.max(a,o+s/2)}var n=Number.POSITIVE_INFINITY,r=0,i=Number.POSITIVE_INFINITY,a=0,o=t.graph(),u=o.marginx||0,s=o.marginy||0;w.each(t.nodes(),function(n){e(t.node(n))}),w.each(t.edges(),function(n){var r=t.edge(n);w.has(r,"x")&&e(r)}),n-=u,i-=s,w.each(t.nodes(),function(e){var r=t.node(e);r.x-=n,r.y-=i}),w.each(t.edges(),function(e){var r=t.edge(e);w.each(r.points,function(t){t.x-=n,t.y-=i}),w.has(r,"x")&&(r.x-=n),w.has(r,"y")&&(r.y-=i)}),o.width=r-n+u,o.height=a-i+s}function h(t){w.each(t.edges(),function(e){var n,r,i=t.edge(e),a=t.node(e.v),o=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=o,r=a),i.points.unshift(z.intersectRect(a,n)),i.points.push(z.intersectRect(o,r))})}function d(t){w.each(t.edges(),function(e){var n=t.edge(e);if(w.has(n,"x"))switch(("l"===n.labelpos||"r"===n.labelpos)&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}function p(t){w.each(t.edges(),function(e){var n=t.edge(e);n.reversed&&n.points.reverse()})}function g(t){w.each(t.nodes(),function(e){if(t.children(e).length){var n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),a=t.node(w.last(n.borderLeft)),o=t.node(w.last(n.borderRight));n.width=Math.abs(o.x-a.x),n.height=Math.abs(i.y-r.y),n.x=a.x+n.width/2,n.y=r.y+n.height/2}}),w.each(t.nodes(),function(e){"border"===t.node(e).dummy&&t.removeNode(e)})}function v(t){w.each(t.edges(),function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}})}function m(t){var e=z.buildLayerMatrix(t);w.each(e,function(e){var n=0;w.each(e,function(e,r){var i=t.node(e);i.order=r+n,w.each(i.selfEdges,function(e){z.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:r+ ++n,e:e.e,label:e.label},"_se")}),delete i.selfEdges})})}function y(t){w.each(t.nodes(),function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,a=r.y,o=n.x-i,u=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*o/3,y:a-u},{x:i+5*o/6,y:a-u},{x:i+o,y:a},{x:i+5*o/6,y:a+u},{x:i+2*o/3,y:a+u}],n.label.x=n.x,n.label.y=n.y}})}function x(t,e){return w.mapValues(w.pick(t,e),Number)}function b(t){var e={};return w.each(t,function(t,n){e[n.toLowerCase()]=t}),e}var w=t("./lodash"),_=t("./acyclic"),M=t("./normalize"),k=t("./rank"),E=t("./util").normalizeRanks,S=t("./parent-dummy-chains"),N=t("./util").removeEmptyRanks,T=t("./nesting-graph"),C=t("./add-border-segments"),D=t("./coordinate-system"),P=t("./order"),A=t("./position"),z=t("./util"),L=t("./graphlib").Graph;e.exports=r;var I=["nodesep","edgesep","ranksep","marginx","marginy"],O={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},R=["acyclicer","ranker","rankdir","align"],j=["width","height"],B={width:0,height:0},q=["minlen","weight","width","height","labeloffset"],F={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},V=["labelpos"]},{"./acyclic":8,"./add-border-segments":9,"./coordinate-system":10,"./graphlib":13,"./lodash":16,"./nesting-graph":17,"./normalize":18,"./order":23,"./parent-dummy-chains":28,"./position":30,"./rank":32,"./util":35}],16:[function(t,e,n){var r;if("function"==typeof t)try{r=t("lodash")}catch(i){}r||(r=window._),e.exports=r},{lodash:58}],17:[function(t,e,n){function r(t){var e=l.addDummyNode(t,"root",{},"_root"),n=a(t),r=s.max(n)-1,u=2*r+1;t.graph().nestingRoot=e,s.each(t.edges(),function(e){t.edge(e).minlen*=u});var c=o(t)+1;s.each(t.children(),function(a){i(t,e,u,c,r,n,a)}),t.graph().nodeRankFactor=u}function i(t,e,n,r,a,o,u){var c=t.children(u);if(!c.length)return void(u!==e&&t.setEdge(e,u,{weight:0,minlen:n}));var f=l.addBorderNode(t,"_bt"),h=l.addBorderNode(t,"_bb"),d=t.node(u);t.setParent(f,u),d.borderTop=f,t.setParent(h,u),d.borderBottom=h,s.each(c,function(s){i(t,e,n,r,a,o,s);var l=t.node(s),c=l.borderTop?l.borderTop:s,d=l.borderBottom?l.borderBottom:s,p=l.borderTop?r:2*r,g=c!==d?1:a-o[u]+1;t.setEdge(f,c,{weight:p,minlen:g,nestingEdge:!0}),t.setEdge(d,h,{weight:p,minlen:g,nestingEdge:!0})}),t.parent(u)||t.setEdge(e,f,{weight:0,minlen:a+o[u]})}function a(t){function e(r,i){var a=t.children(r);a&&a.length&&s.each(a,function(t){e(t,i+1)}),n[r]=i}var n={};return s.each(t.children(),function(t){e(t,1)}),n}function o(t){return s.reduce(t.edges(),function(e,n){return e+t.edge(n).weight},0)}function u(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,s.each(t.edges(),function(e){var n=t.edge(e);n.nestingEdge&&t.removeEdge(e)})}var s=t("./lodash"),l=t("./util");e.exports={run:r,cleanup:u}},{"./lodash":16,"./util":35}],18:[function(t,e,n){"use strict";function r(t){t.graph().dummyChains=[],o.each(t.edges(),function(e){i(t,e)})}function i(t,e){var n=e.v,r=t.node(n).rank,i=e.w,a=t.node(i).rank,o=e.name,s=t.edge(e),l=s.labelRank;if(a!==r+1){t.removeEdge(e);var c,f,h;for(h=0,++r;a>r;++h,++r)s.points=[],f={width:0,height:0,edgeLabel:s,edgeObj:e,rank:r},c=u.addDummyNode(t,"edge",f,"_d"),r===l&&(f.width=s.width,f.height=s.height,f.dummy="edge-label",f.labelpos=s.labelpos),t.setEdge(n,c,{weight:s.weight},o),0===h&&t.graph().dummyChains.push(c),n=c;t.setEdge(n,i,{weight:s.weight},o)}}function a(t){o.each(t.graph().dummyChains,function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)})}var o=t("./lodash"),u=t("./util");e.exports={run:r,undo:a}},{"./lodash":16,"./util":35}],19:[function(t,e,n){function r(t,e,n){var r,a={};i.each(n,function(n){for(var i,o,u=t.parent(n);u;){if(i=t.parent(u),i?(o=a[i],a[i]=u):(o=r,r=u),o&&o!==u)return void e.setEdge(o,u);u=i}})}var i=t("../lodash");e.exports=r},{"../lodash":16}],20:[function(t,e,n){function r(t,e){return i.map(e,function(e){var n=t.inEdges(e);if(n.length){var r=i.reduce(n,function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}},{sum:0,weight:0});return{v:e,barycenter:r.sum/r.weight,weight:r.weight}}return{v:e}})}var i=t("../lodash");e.exports=r},{"../lodash":16}],21:[function(t,e,n){function r(t,e,n){var r=i(t),u=new o({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(e){return t.node(e)});return a.each(t.nodes(),function(i){var o=t.node(i),s=t.parent(i);(o.rank===e||o.minRank<=e&&e<=o.maxRank)&&(u.setNode(i),u.setParent(i,s||r),a.each(t[n](i),function(e){var n=e.v===i?e.w:e.v,r=u.edge(n,i),o=a.isUndefined(r)?0:r.weight;u.setEdge(n,i,{weight:t.edge(e).weight+o})}),a.has(o,"minRank")&&u.setNode(i,{borderLeft:o.borderLeft[e],borderRight:o.borderRight[e]}))}),u}function i(t){for(var e;t.hasNode(e=a.uniqueId("_root")););return e}var a=t("../lodash"),o=t("../graphlib").Graph;e.exports=r},{"../graphlib":13,"../lodash":16}],22:[function(t,e,n){"use strict";function r(t,e){for(var n=0,r=1;r<e.length;++r)n+=i(t,e[r-1],e[r]);return n}function i(t,e,n){for(var r=a.zipObject(n,a.map(n,function(t,e){return e})),i=a.flatten(a.map(e,function(e){return a.chain(t.outEdges(e)).map(function(e){return{pos:r[e.w],weight:t.edge(e).weight}}).sortBy("pos").value()}),!0),o=1;o<n.length;)o<<=1;var u=2*o-1;o-=1;var s=a.map(new Array(u),function(){return 0}),l=0;return a.each(i.forEach(function(t){var e=t.pos+o;s[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=s[e+1]),e=e-1>>1,s[e]+=t.weight;l+=t.weight*n})),l}var a=t("../lodash");e.exports=r},{"../lodash":16}],23:[function(t,e,n){"use strict";function r(t){var e=p.maxRank(t),n=i(t,u.range(1,e+1),"inEdges"),r=i(t,u.range(e-1,-1,-1),"outEdges"),c=s(t);o(t,c);for(var f,h=Number.POSITIVE_INFINITY,d=0,g=0;4>g;++d,++g){a(d%2?n:r,d%4>=2),c=p.buildLayerMatrix(t);var v=l(t,c);h>v&&(g=0,f=u.cloneDeep(c),h=v)}o(t,f)}function i(t,e,n){return u.map(e,function(e){return f(t,e,n)})}function a(t,e){var n=new d;u.each(t,function(t){var r=t.graph().root,i=c(t,r,n,e);u.each(i.vs,function(e,n){t.node(e).order=n}),h(t,n,i.vs)})}function o(t,e){u.each(e,function(e){u.each(e,function(e,n){t.node(e).order=n})})}var u=t("../lodash"),s=t("./init-order"),l=t("./cross-count"),c=t("./sort-subgraph"),f=t("./build-layer-graph"),h=t("./add-subgraph-constraints"),d=t("../graphlib").Graph,p=t("../util");e.exports=r},{"../graphlib":13,"../lodash":16,"../util":35,"./add-subgraph-constraints":19,"./build-layer-graph":21,"./cross-count":22,"./init-order":24,"./sort-subgraph":26}],24:[function(t,e,n){"use strict";function r(t){function e(r){if(!i.has(n,r)){n[r]=!0;var a=t.node(r);o[a.rank].push(r),i.each(t.successors(r),e)}}var n={},r=i.filter(t.nodes(),function(e){return!t.children(e).length}),a=i.max(i.map(r,function(e){return t.node(e).rank})),o=i.map(i.range(a+1),function(){return[]}),u=i.sortBy(r,function(e){return t.node(e).rank});return i.each(u,e),o}var i=t("../lodash");e.exports=r},{"../lodash":16}],25:[function(t,e,n){"use strict";function r(t,e){var n={};o.each(t,function(t,e){var r=n[t.v]={indegree:0,"in":[],out:[],vs:[t.v],i:e};o.isUndefined(t.barycenter)||(r.barycenter=t.barycenter,r.weight=t.weight)}),o.each(e.edges(),function(t){var e=n[t.v],r=n[t.w];o.isUndefined(e)||o.isUndefined(r)||(r.indegree++,e.out.push(n[t.w]))});var r=o.filter(n,function(t){return!t.indegree});return i(r)}function i(t){function e(t){return function(e){e.merged||(o.isUndefined(e.barycenter)||o.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&a(t,e)}}function n(e){return function(n){n["in"].push(e),0===--n.indegree&&t.push(n)}}for(var r=[];t.length;){var i=t.pop();r.push(i),o.each(i["in"].reverse(),e(i)),o.each(i.out,n(i))}return o.chain(r).filter(function(t){return!t.merged}).map(function(t){return o.pick(t,["vs","i","barycenter","weight"])}).value()}function a(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}var o=t("../lodash");e.exports=r},{"../lodash":16
}],26:[function(t,e,n){function r(t,e,n,c){var f=t.children(e),h=t.node(e),d=h?h.borderLeft:void 0,p=h?h.borderRight:void 0,g={};d&&(f=o.filter(f,function(t){return t!==d&&t!==p}));var v=u(t,f);o.each(v,function(e){if(t.children(e.v).length){var i=r(t,e.v,n,c);g[e.v]=i,o.has(i,"barycenter")&&a(e,i)}});var m=s(v,n);i(m,g);var y=l(m,c);if(d&&(y.vs=o.flatten([d,y.vs,p],!0),t.predecessors(d).length)){var x=t.node(t.predecessors(d)[0]),b=t.node(t.predecessors(p)[0]);o.has(y,"barycenter")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+x.order+b.order)/(y.weight+2),y.weight+=2}return y}function i(t,e){o.each(t,function(t){t.vs=o.flatten(t.vs.map(function(t){return e[t]?e[t].vs:t}),!0)})}function a(t,e){o.isUndefined(t.barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight)}var o=t("../lodash"),u=t("./barycenter"),s=t("./resolve-conflicts"),l=t("./sort");e.exports=r},{"../lodash":16,"./barycenter":20,"./resolve-conflicts":25,"./sort":27}],27:[function(t,e,n){function r(t,e){var n=u.partition(t,function(t){return o.has(t,"barycenter")}),r=n.lhs,s=o.sortBy(n.rhs,function(t){return-t.i}),l=[],c=0,f=0,h=0;r.sort(a(!!e)),h=i(l,s,h),o.each(r,function(t){h+=t.vs.length,l.push(t.vs),c+=t.barycenter*t.weight,f+=t.weight,h=i(l,s,h)});var d={vs:o.flatten(l,!0)};return f&&(d.barycenter=c/f,d.weight=f),d}function i(t,e,n){for(var r;e.length&&(r=o.last(e)).i<=n;)e.pop(),t.push(r.vs),n++;return n}function a(t){return function(e,n){return e.barycenter<n.barycenter?-1:e.barycenter>n.barycenter?1:t?n.i-e.i:e.i-n.i}}var o=t("../lodash"),u=t("../util");e.exports=r},{"../lodash":16,"../util":35}],28:[function(t,e,n){function r(t){var e=a(t);o.each(t.graph().dummyChains,function(n){for(var r=t.node(n),a=r.edgeObj,o=i(t,e,a.v,a.w),u=o.path,s=o.lca,l=0,c=u[l],f=!0;n!==a.w;){if(r=t.node(n),f){for(;(c=u[l])!==s&&t.node(c).maxRank<r.rank;)l++;c===s&&(f=!1)}if(!f){for(;l<u.length-1&&t.node(c=u[l+1]).minRank<=r.rank;)l++;c=u[l]}t.setParent(n,c),n=t.successors(n)[0]}})}function i(t,e,n,r){var i,a,o=[],u=[],s=Math.min(e[n].low,e[r].low),l=Math.max(e[n].lim,e[r].lim);i=n;do i=t.parent(i),o.push(i);while(i&&(e[i].low>s||l>e[i].lim));for(a=i,i=r;(i=t.parent(i))!==a;)u.push(i);return{path:o.concat(u.reverse()),lca:a}}function a(t){function e(i){var a=r;o.each(t.children(i),e),n[i]={low:a,lim:r++}}var n={},r=0;return o.each(t.children(),e),n}var o=t("./lodash");e.exports=r},{"./lodash":16}],29:[function(t,e,n){"use strict";function r(t,e){function n(e,n){var i=0,u=0,s=e.length,l=m.last(n);return m.each(n,function(e,c){var f=a(t,e),h=f?t.node(f).order:s;(f||e===l)&&(m.each(n.slice(u,c+1),function(e){m.each(t.predecessors(e),function(n){var a=t.node(n),u=a.order;!(i>u||u>h)||a.dummy&&t.node(e).dummy||o(r,n,e)})}),u=c+1,i=h)}),n}var r={};return m.reduce(e,n),r}function i(t,e){function n(e,n,r,a,u){var s;m.each(m.range(n,r),function(n){s=e[n],t.node(s).dummy&&m.each(t.predecessors(s),function(e){var n=t.node(e);n.dummy&&(n.order<a||n.order>u)&&o(i,e,s)})})}function r(e,r){var i,a=-1,o=0;return m.each(r,function(u,s){if("border"===t.node(u).dummy){var l=t.predecessors(u);l.length&&(i=t.node(l[0]).order,n(r,o,s,a,i),o=s,a=i)}n(r,o,r.length,i,e.length)}),r}var i={};return m.reduce(e,r),i}function a(t,e){return t.node(e).dummy?m.find(t.predecessors(e),function(e){return t.node(e).dummy}):void 0}function o(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function u(t,e,n){if(e>n){var r=e;e=n,n=r}return m.has(t[e],n)}function s(t,e,n,r){var i={},a={},o={};return m.each(e,function(t){m.each(t,function(t,e){i[t]=t,a[t]=t,o[t]=e})}),m.each(e,function(t){var e=-1;m.each(t,function(t){var s=r(t);if(s.length){s=m.sortBy(s,function(t){return o[t]});for(var l=(s.length-1)/2,c=Math.floor(l),f=Math.ceil(l);f>=c;++c){var h=s[c];a[t]===t&&e<o[h]&&!u(n,t,h)&&(a[h]=t,a[t]=i[t]=i[h],e=o[h])}}})}),{root:i,align:a}}function l(t,e,n,r,i){function a(t){m.has(l,t)||(l[t]=!0,u[t]=m.reduce(s.inEdges(t),function(t,e){return a(e.v),Math.max(t,u[e.v]+s.edge(e))},0))}function o(e){if(2!==l[e]){l[e]++;var n=t.node(e),r=m.reduce(s.outEdges(e),function(t,e){return o(e.w),Math.min(t,u[e.w]-s.edge(e))},Number.POSITIVE_INFINITY);r!==Number.POSITIVE_INFINITY&&n.borderType!==f&&(u[e]=Math.max(u[e],r))}}var u={},s=c(t,e,n,i),l={};m.each(s.nodes(),a);var f=i?"borderLeft":"borderRight";return m.each(s.nodes(),o),m.each(r,function(t){u[t]=u[n[t]]}),u}function c(t,e,n,r){var i=new y,a=t.graph(),o=g(a.nodesep,a.edgesep,r);return m.each(e,function(e){var r;m.each(e,function(e){var a=n[e];if(i.setNode(a),r){var u=n[r],s=i.edge(u,a);i.setEdge(u,a,Math.max(o(t,e,r),s||0))}r=e})}),i}function f(t,e){return m.min(e,function(e){var n=m.min(e,function(e,n){return e-v(t,n)/2}),r=m.max(e,function(e,n){return e+v(t,n)/2});return r-n})}function h(t,e){var n=m.min(e),r=m.max(e);m.each(["u","d"],function(i){m.each(["l","r"],function(a){var o,u=i+a,s=t[u];s!==e&&(o="l"===a?n-m.min(s):r-m.max(s),o&&(t[u]=m.mapValues(s,function(t){return t+o})))})})}function d(t,e){return m.mapValues(t.ul,function(n,r){if(e)return t[e.toLowerCase()][r];var i=m.sortBy(m.pluck(t,r));return(i[1]+i[2])/2})}function p(t){var e,n=x.buildLayerMatrix(t),a=m.merge(r(t,n),i(t,n)),o={};m.each(["u","d"],function(r){e="u"===r?n:m.values(n).reverse(),m.each(["l","r"],function(n){"r"===n&&(e=m.map(e,function(t){return m.values(t).reverse()}));var i=m.bind("u"===r?t.predecessors:t.successors,t),u=s(t,e,a,i),c=l(t,e,u.root,u.align,"r"===n);"r"===n&&(c=m.mapValues(c,function(t){return-t})),o[r+n]=c})});var u=f(t,o);return h(o,u),d(o,t.graph().align)}function g(t,e,n){return function(r,i,a){var o,u=r.node(i),s=r.node(a),l=0;if(l+=u.width/2,m.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":o=-u.width/2;break;case"r":o=u.width/2}if(o&&(l+=n?o:-o),o=0,l+=(u.dummy?e:t)/2,l+=(s.dummy?e:t)/2,l+=s.width/2,m.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":o=s.width/2;break;case"r":o=-s.width/2}return o&&(l+=n?o:-o),o=0,l}}function v(t,e){return t.node(e).width}var m=t("../lodash"),y=t("../graphlib").Graph,x=t("../util");e.exports={positionX:p,findType1Conflicts:r,findType2Conflicts:i,addConflict:o,hasConflict:u,verticalAlignment:s,horizontalCompaction:l,alignCoordinates:h,findSmallestWidthAlignment:f,balance:d}},{"../graphlib":13,"../lodash":16,"../util":35}],30:[function(t,e,n){"use strict";function r(t){t=o.asNonCompoundGraph(t),i(t),a.each(u(t),function(e,n){t.node(n).x=e})}function i(t){var e=o.buildLayerMatrix(t),n=t.graph().ranksep,r=0;a.each(e,function(e){var i=a.max(a.map(e,function(e){return t.node(e).height}));a.each(e,function(e){t.node(e).y=r+i/2}),r+=i+n})}var a=t("../lodash"),o=t("../util"),u=t("./bk").positionX;e.exports=r},{"../lodash":16,"../util":35,"./bk":29}],31:[function(t,e,n){"use strict";function r(t){var e=new s({directed:!1}),n=t.nodes()[0],r=t.nodeCount();e.setNode(n,{});for(var u,c;i(e,t)<r;)u=a(e,t),c=e.hasNode(u.v)?l(t,u):-l(t,u),o(e,t,c);return e}function i(t,e){function n(r){u.each(e.nodeEdges(r),function(i){var a=i.v,o=r===a?i.w:a;t.hasNode(o)||l(e,i)||(t.setNode(o,{}),t.setEdge(r,o,{}),n(o))})}return u.each(t.nodes(),n),t.nodeCount()}function a(t,e){return u.min(e.edges(),function(n){return t.hasNode(n.v)!==t.hasNode(n.w)?l(e,n):void 0})}function o(t,e,n){u.each(t.nodes(),function(t){e.node(t).rank+=n})}var u=t("../lodash"),s=t("../graphlib").Graph,l=t("./util").slack;e.exports=r},{"../graphlib":13,"../lodash":16,"./util":34}],32:[function(t,e,n){"use strict";function r(t){switch(t.graph().ranker){case"network-simplex":a(t);break;case"tight-tree":i(t);break;case"longest-path":c(t);break;default:a(t)}}function i(t){u(t),s(t)}function a(t){l(t)}var o=t("./util"),u=o.longestPath,s=t("./feasible-tree"),l=t("./network-simplex");e.exports=r;var c=u},{"./feasible-tree":31,"./network-simplex":33,"./util":34}],33:[function(t,e,n){"use strict";function r(t){t=w(t),y(t);var e=v(t);u(e),i(e,t);for(var n,r;n=l(e);)r=c(e,t,n),f(e,t,n,r)}function i(t,e){var n=b(t,t.nodes());n=n.slice(0,n.length-1),g.each(n,function(n){a(t,e,n)})}function a(t,e,n){var r=t.node(n),i=r.parent;t.edge(n,i).cutvalue=o(t,e,n)}function o(t,e,n){var r=t.node(n),i=r.parent,a=!0,o=e.edge(n,i),u=0;return o||(a=!1,o=e.edge(i,n)),u=o.weight,g.each(e.nodeEdges(n),function(r){var o=r.v===n,s=o?r.w:r.v;if(s!==i){var l=o===a,c=e.edge(r).weight;if(u+=l?c:-c,d(t,n,s)){var f=t.edge(n,s).cutvalue;u+=l?-f:f}}}),u}function u(t,e){arguments.length<2&&(e=t.nodes()[0]),s(t,{},1,e)}function s(t,e,n,r,i){var a=n,o=t.node(r);return e[r]=!0,g.each(t.neighbors(r),function(i){g.has(e,i)||(n=s(t,e,n,i,r))}),o.low=a,o.lim=n++,i?o.parent=i:delete o.parent,n}function l(t){return g.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function c(t,e,n){var r=n.v,i=n.w;e.hasEdge(r,i)||(r=n.w,i=n.v);var a=t.node(r),o=t.node(i),u=a,s=!1;a.lim>o.lim&&(u=o,s=!0);var l=g.filter(e.edges(),function(e){return s===p(t,t.node(e.v),u)&&s!==p(t,t.node(e.w),u)});return g.min(l,function(t){return m(e,t)})}function f(t,e,n,r){var a=n.v,o=n.w;t.removeEdge(a,o),t.setEdge(r.v,r.w,{}),u(t),i(t,e),h(t,e)}function h(t,e){var n=g.find(t.nodes(),function(t){return!e.node(t).parent}),r=x(t,n);r=r.slice(1),g.each(r,function(n){var r=t.node(n).parent,i=e.edge(n,r),a=!1;i||(i=e.edge(r,n),a=!0),e.node(n).rank=e.node(r).rank+(a?i.minlen:-i.minlen)})}function d(t,e,n){return t.hasEdge(e,n)}function p(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}var g=t("../lodash"),v=t("./feasible-tree"),m=t("./util").slack,y=t("./util").longestPath,x=t("../graphlib").alg.preorder,b=t("../graphlib").alg.postorder,w=t("../util").simplify;e.exports=r,r.initLowLimValues=u,r.initCutValues=i,r.calcCutValue=o,r.leaveEdge=l,r.enterEdge=c,r.exchangeEdges=f},{"../graphlib":13,"../lodash":16,"../util":35,"./feasible-tree":31,"./util":34}],34:[function(t,e,n){"use strict";function r(t){function e(r){var i=t.node(r);if(a.has(n,r))return i.rank;n[r]=!0;var o=a.min(a.map(t.outEdges(r),function(n){return e(n.w)-t.edge(n).minlen}));return o===Number.POSITIVE_INFINITY&&(o=0),i.rank=o}var n={};a.each(t.sources(),e)}function i(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}var a=t("../lodash");e.exports={longestPath:r,slack:i}},{"../lodash":16}],35:[function(t,e,n){"use strict";function r(t,e,n,r){var i;do i=m.uniqueId(r);while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function i(t){var e=(new y).setGraph(t.graph());return m.each(t.nodes(),function(n){e.setNode(n,t.node(n))}),m.each(t.edges(),function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e}function a(t){var e=new y({multigraph:t.isMultigraph()}).setGraph(t.graph());return m.each(t.nodes(),function(n){t.children(n).length||e.setNode(n,t.node(n))}),m.each(t.edges(),function(n){e.setEdge(n,t.edge(n))}),e}function o(t){var e=m.map(t.nodes(),function(e){var n={};return m.each(t.outEdges(e),function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight}),n});return m.zipObject(t.nodes(),e)}function u(t){var e=m.map(t.nodes(),function(e){var n={};return m.each(t.inEdges(e),function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight}),n});return m.zipObject(t.nodes(),e)}function s(t,e){var n=t.x,r=t.y,i=e.x-n,a=e.y-r,o=t.width/2,u=t.height/2;if(!i&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var s,l;return Math.abs(a)*o>Math.abs(i)*u?(0>a&&(u=-u),s=u*i/a,l=u):(0>i&&(o=-o),s=o,l=o*a/i),{x:n+s,y:r+l}}function l(t){var e=m.map(m.range(d(t)+1),function(){return[]});return m.each(t.nodes(),function(n){var r=t.node(n),i=r.rank;m.isUndefined(i)||(e[i][r.order]=n)}),e}function c(t){var e=m.min(m.map(t.nodes(),function(e){return t.node(e).rank}));m.each(t.nodes(),function(n){var r=t.node(n);m.has(r,"rank")&&(r.rank-=e)})}function f(t){var e=m.min(m.map(t.nodes(),function(e){return t.node(e).rank})),n=[];m.each(t.nodes(),function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)});var r=0,i=t.graph().nodeRankFactor;m.each(n,function(e,n){m.isUndefined(e)&&n%i!==0?--r:r&&m.each(e,function(e){t.node(e).rank+=r})})}function h(t,e,n,i){var a={width:0,height:0};return arguments.length>=4&&(a.rank=n,a.order=i),r(t,"border",a,e)}function d(t){return m.max(m.map(t.nodes(),function(e){var n=t.node(e).rank;return m.isUndefined(n)?void 0:n}))}function p(t,e){var n={lhs:[],rhs:[]};return m.each(t,function(t){e(t)?n.lhs.push(t):n.rhs.push(t)}),n}function g(t,e){var n=m.now();try{return e()}finally{console.log(t+" time: "+(m.now()-n)+"ms")}}function v(t,e){return e()}var m=t("./lodash"),y=t("./graphlib").Graph;e.exports={addDummyNode:r,simplify:i,asNonCompoundGraph:a,successorWeights:o,predecessorWeights:u,intersectRect:s,buildLayerMatrix:l,normalizeRanks:c,removeEmptyRanks:f,addBorderNode:h,maxRank:d,partition:p,time:g,notime:v}},{"./graphlib":13,"./lodash":16}],36:[function(t,e,n){e.exports="0.7.4"},{}],37:[function(t,e,n){!function(t,n){"undefined"!=typeof e?e.exports=n():"function"==typeof define&&"object"==typeof define.amd?define(n):this[t]=n()}("domready",function(){var t,e=[],n=document,r=n.documentElement.doScroll,i="DOMContentLoaded",a=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return a||n.addEventListener(i,t=function(){for(n.removeEventListener(i,t),a=1;t=e.shift();)t()}),function(t){a?setTimeout(t,0):e.push(t)}})},{}],38:[function(t,e,n){var r=t("./lib");e.exports={Graph:r.Graph,json:t("./lib/json"),alg:t("./lib/alg"),version:r.version}},{"./lib":54,"./lib/alg":45,"./lib/json":55}],39:[function(t,e,n){function r(t){function e(a){i.has(r,a)||(r[a]=!0,n.push(a),i.each(t.successors(a),e),i.each(t.predecessors(a),e))}var n,r={},a=[];return i.each(t.nodes(),function(t){n=[],e(t),n.length&&a.push(n)}),a}var i=t("../lodash");e.exports=r},{"../lodash":56}],40:[function(t,e,n){function r(t,e,n){a.isArray(e)||(e=[e]);var r=[],o={};return a.each(e,function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);i(t,e,"post"===n,o,r)}),r}function i(t,e,n,r,o){a.has(r,e)||(r[e]=!0,n||o.push(e),a.each(t.neighbors(e),function(e){i(t,e,n,r,o)}),n&&o.push(e))}var a=t("../lodash");e.exports=r},{"../lodash":56}],41:[function(t,e,n){function r(t,e,n){return a.transform(t.nodes(),function(r,a){r[a]=i(t,a,e,n)},{})}var i=t("./dijkstra"),a=t("../lodash");e.exports=r},{"../lodash":56,"./dijkstra":42}],42:[function(t,e,n){function r(t,e,n,r){return i(t,String(e),n||u,r||function(e){return t.outEdges(e)})}function i(t,e,n,r){var i,a,u={},s=new o,l=function(t){var e=t.v!==i?t.v:t.w,r=u[e],o=n(t),l=a.distance+o;if(0>o)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+o);l<r.distance&&(r.distance=l,r.predecessor=i,s.decrease(e,l))};for(t.nodes().forEach(function(t){var n=t===e?0:Number.POSITIVE_INFINITY;u[t]={distance:n},s.add(t,n)});s.size()>0&&(i=s.removeMin(),a=u[i],a.distance!==Number.POSITIVE_INFINITY);)r(i).forEach(l);return u}var a=t("../lodash"),o=t("../data/priority-queue");e.exports=r;var u=a.constant(1)},{"../data/priority-queue":52,"../lodash":56}],43:[function(t,e,n){function r(t){return i.filter(a(t),function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])})}var i=t("../lodash"),a=t("./tarjan");e.exports=r},{"../lodash":56,"./tarjan":50}],44:[function(t,e,n){function r(t,e,n){return i(t,e||o,n||function(e){return t.outEdges(e)})}function i(t,e,n){var r={},i=t.nodes();return i.forEach(function(t){r[t]={},r[t][t]={distance:0},i.forEach(function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})}),n(t).forEach(function(n){var i=n.v===t?n.w:n.v,a=e(n);r[t][i]={distance:a,predecessor:t}})}),i.forEach(function(t){var e=r[t];i.forEach(function(n){var a=r[n];i.forEach(function(n){var r=a[t],i=e[n],o=a[n],u=r.distance+i.distance;u<o.distance&&(o.distance=u,o.predecessor=i.predecessor)})})}),r}var a=t("../lodash");e.exports=r;var o=a.constant(1)},{"../lodash":56}],45:[function(t,e,n){e.exports={components:t("./components"),dijkstra:t("./dijkstra"),dijkstraAll:t("./dijkstra-all"),findCycles:t("./find-cycles"),floydWarshall:t("./floyd-warshall"),isAcyclic:t("./is-acyclic"),postorder:t("./postorder"),preorder:t("./preorder"),prim:t("./prim"),tarjan:t("./tarjan"),topsort:t("./topsort")}},{"./components":39,"./dijkstra":42,"./dijkstra-all":41,"./find-cycles":43,"./floyd-warshall":44,"./is-acyclic":46,"./postorder":47,"./preorder":48,"./prim":49,"./tarjan":50,"./topsort":51}],46:[function(t,e,n){function r(t){try{i(t)}catch(e){if(e instanceof i.CycleException)return!1;throw e}return!0}var i=t("./topsort");e.exports=r},{"./topsort":51}],47:[function(t,e,n){function r(t,e){return i(t,e,"post")}var i=t("./dfs");e.exports=r},{"./dfs":40}],48:[function(t,e,n){function r(t,e){return i(t,e,"pre")}var i=t("./dfs");e.exports=r},{"./dfs":40}],49:[function(t,e,n){function r(t,e){function n(t){var n=t.v===r?t.w:t.v,i=l.priority(n);if(void 0!==i){var a=e(t);i>a&&(s[n]=r,l.decrease(n,a))}}var r,u=new a,s={},l=new o;if(0===t.nodeCount())return u;i.each(t.nodes(),function(t){l.add(t,Number.POSITIVE_INFINITY),u.setNode(t)}),l.decrease(t.nodes()[0],0);for(var c=!1;l.size()>0;){if(r=l.removeMin(),i.has(s,r))u.setEdge(r,s[r]);else{if(c)throw new Error("Input graph is not connected: "+t);c=!0}t.nodeEdges(r).forEach(n)}return u}var i=t("../lodash"),a=t("../graph"),o=t("../data/priority-queue");e.exports=r},{"../data/priority-queue":52,"../graph":53,"../lodash":56}],50:[function(t,e,n){function r(t){function e(u){var s=a[u]={onStack:!0,lowlink:n,index:n++};if(r.push(u),t.successors(u).forEach(function(t){i.has(a,t)?a[t].onStack&&(s.lowlink=Math.min(s.lowlink,a[t].index)):(e(t),s.lowlink=Math.min(s.lowlink,a[t].lowlink))}),s.lowlink===s.index){var l,c=[];do l=r.pop(),a[l].onStack=!1,c.push(l);while(u!==l);o.push(c)}}var n=0,r=[],a={},o=[];return t.nodes().forEach(function(t){i.has(a,t)||e(t)}),o}var i=t("../lodash");e.exports=r},{"../lodash":56}],51:[function(t,e,n){function r(t){function e(u){if(a.has(r,u))throw new i;a.has(n,u)||(r[u]=!0,n[u]=!0,a.each(t.predecessors(u),e),delete r[u],o.push(u))}var n={},r={},o=[];if(a.each(t.sinks(),e),a.size(n)!==t.nodeCount())throw new i;return o}function i(){}var a=t("../lodash");e.exports=r,r.CycleException=i},{"../lodash":56}],52:[function(t,e,n){function r(){this._arr=[],this._keyIndices={}}var i=t("../lodash");e.exports=r,r.prototype.size=function(){return this._arr.length},r.prototype.keys=function(){return this._arr.map(function(t){return t.key})},r.prototype.has=function(t){return i.has(this._keyIndices,t)},r.prototype.priority=function(t){var e=this._keyIndices[t];return void 0!==e?this._arr[e].priority:void 0},r.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},r.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!i.has(n,t)){var r=this._arr,a=r.length;return n[t]=a,r.push({key:t,priority:e}),this._decrease(a),!0}return!1},r.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},r.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},r.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},r.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&(e=t>>1,!(n[e].priority<r));)this._swap(t,e),t=e},r.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],a=n[e];n[t]=a,n[e]=i,r[a.key]=t,r[i.key]=e}},{"../lodash":56}],53:[function(t,e,n){"use strict";function r(t){this._isDirected=l.has(t,"directed")?t.directed:!0,this._isMultigraph=l.has(t,"multigraph")?t.multigraph:!1,this._isCompound=l.has(t,"compound")?t.compound:!1,this._label=void 0,this._defaultNodeLabelFn=l.constant(void 0),this._defaultEdgeLabelFn=l.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[f]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function i(t,e){t[e]?t[e]++:t[e]=1}function a(t,e){--t[e]||delete t[e]}function o(t,e,n,r){var i=""+e,a=""+n;if(!t&&i>a){var o=i;i=a,a=o}return i+h+a+h+(l.isUndefined(r)?c:r)}function u(t,e,n,r){var i=""+e,a=""+n;if(!t&&i>a){var o=i;i=a,a=o}var u={v:i,w:a};return r&&(u.name=r),u}function s(t,e){return o(t,e.v,e.w,e.name)}var l=t("./lodash");e.exports=r;var c="\x00",f="\x00",h="";r.prototype._nodeCount=0,r.prototype._edgeCount=0,r.prototype.isDirected=function(){return this._isDirected},r.prototype.isMultigraph=function(){return this._isMultigraph},r.prototype.isCompound=function(){return this._isCompound},r.prototype.setGraph=function(t){return this._label=t,this},r.prototype.graph=function(){return this._label},r.prototype.setDefaultNodeLabel=function(t){return l.isFunction(t)||(t=l.constant(t)),this._defaultNodeLabelFn=t,this},r.prototype.nodeCount=function(){return this._nodeCount},r.prototype.nodes=function(){return l.keys(this._nodes)},r.prototype.sources=function(){return l.filter(this.nodes(),function(t){return l.isEmpty(this._in[t])},this)},r.prototype.sinks=function(){return l.filter(this.nodes(),function(t){return l.isEmpty(this._out[t])},this)},r.prototype.setNodes=function(t,e){var n=arguments;return l.each(t,function(t){n.length>1?this.setNode(t,e):this.setNode(t)},this),this},r.prototype.setNode=function(t,e){return l.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=f,this._children[t]={},this._children[f][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},r.prototype.node=function(t){return this._nodes[t]},r.prototype.hasNode=function(t){return l.has(this._nodes,t)},r.prototype.removeNode=function(t){var e=this;if(l.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],l.each(this.children(t),function(t){this.setParent(t)},this),delete this._children[t]),l.each(l.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],l.each(l.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},r.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(l.isUndefined(e))e=f;else{e+="";for(var n=e;!l.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},r.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},r.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==f)return e}},r.prototype.children=function(t){if(l.isUndefined(t)&&(t=f),this._isCompound){var e=this._children[t];if(e)return l.keys(e)}else{if(t===f)return this.nodes();if(this.hasNode(t))return[]}},r.prototype.predecessors=function(t){var e=this._preds[t];return e?l.keys(e):void 0},r.prototype.successors=function(t){var e=this._sucs[t];return e?l.keys(e):void 0},r.prototype.neighbors=function(t){var e=this.predecessors(t);return e?l.union(e,this.successors(t)):void 0},r.prototype.filterNodes=function(t){function e(t){var a=r.parent(t);return void 0===a||n.hasNode(a)?(i[t]=a,a):a in i?i[a]:e(a)}var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph()),l.each(this._nodes,function(e,r){t(r)&&n.setNode(r,e)},this),l.each(this._edgeObjs,function(t){n.hasNode(t.v)&&n.hasNode(t.w)&&n.setEdge(t,this.edge(t))},this);var r=this,i={};return this._isCompound&&l.each(n.nodes(),function(t){n.setParent(t,e(t))}),n},r.prototype.setDefaultEdgeLabel=function(t){return l.isFunction(t)||(t=l.constant(t)),this._defaultEdgeLabelFn=t,this},r.prototype.edgeCount=function(){return this._edgeCount},r.prototype.edges=function(){return l.values(this._edgeObjs)},r.prototype.setPath=function(t,e){var n=this,r=arguments;return l.reduce(t,function(t,i){return r.length>1?n.setEdge(t,i,e):n.setEdge(t,i),i}),this},r.prototype.setEdge=function(){var t,e,n,r,a=!1,s=arguments[0];"object"==typeof s&&null!==s&&"v"in s?(t=s.v,e=s.w,n=s.name,2===arguments.length&&(r=arguments[1],a=!0)):(t=s,e=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],a=!0)),t=""+t,e=""+e,l.isUndefined(n)||(n=""+n);var c=o(this._isDirected,t,e,n);if(l.has(this._edgeLabels,c))return a&&(this._edgeLabels[c]=r),this;if(!l.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[c]=a?r:this._defaultEdgeLabelFn(t,e,n);var f=u(this._isDirected,t,e,n);return t=f.v,e=f.w,Object.freeze(f),this._edgeObjs[c]=f,i(this._preds[e],t),i(this._sucs[t],e),this._in[e][c]=f,this._out[t][c]=f,this._edgeCount++,this},r.prototype.edge=function(t,e,n){var r=1===arguments.length?s(this._isDirected,arguments[0]):o(this._isDirected,t,e,n);return this._edgeLabels[r]},r.prototype.hasEdge=function(t,e,n){var r=1===arguments.length?s(this._isDirected,arguments[0]):o(this._isDirected,t,e,n);return l.has(this._edgeLabels,r)},r.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?s(this._isDirected,arguments[0]):o(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],a(this._preds[e],t),a(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},r.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var r=l.values(n);return e?l.filter(r,function(t){return t.v===e}):r}},r.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var r=l.values(n);return e?l.filter(r,function(t){return t.w===e}):r}},r.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);return n?n.concat(this.outEdges(t,e)):void 0}},{"./lodash":56}],54:[function(t,e,n){e.exports={Graph:t("./graph"),version:t("./version")}},{"./graph":53,"./version":57}],55:[function(t,e,n){function r(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:i(t),edges:a(t)};return u.isUndefined(t.graph())||(e.value=u.clone(t.graph())),e}function i(t){return u.map(t.nodes(),function(e){var n=t.node(e),r=t.parent(e),i={v:e};return u.isUndefined(n)||(i.value=n),u.isUndefined(r)||(i.parent=r),i})}function a(t){return u.map(t.edges(),function(e){var n=t.edge(e),r={v:e.v,w:e.w};return u.isUndefined(e.name)||(r.name=e.name),u.isUndefined(n)||(r.value=n),r})}function o(t){var e=new s(t.options).setGraph(t.value);return u.each(t.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),u.each(t.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}var u=t("./lodash"),s=t("./graph");e.exports={write:r,read:o}},{"./graph":53,"./lodash":56}],56:[function(t,e,n){e.exports=t(16)},{lodash:58}],57:[function(t,e,n){e.exports="1.0.7"},{}],58:[function(t,e,n){(function(t){(function(){function r(t,e){if(t!==e){var n=null===t,r=t===E,i=t===t,a=null===e,o=e===E,u=e===e;if(t>e&&!a||!i||n&&!o&&u||r&&u)return 1;if(e>t&&!n||!u||a&&!r&&i||o&&i)return-1}return 0}function i(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}function a(t,e,n){if(e!==e)return v(t,n);for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function o(t){return"function"==typeof t||!1}function u(t){return null==t?"":t+""}function s(t,e){for(var n=-1,r=t.length;++n<r&&e.indexOf(t.charAt(n))>-1;);return n}function l(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}function c(t,e){return r(t.criteria,e.criteria)||t.index-e.index}function f(t,e,n){for(var i=-1,a=t.criteria,o=e.criteria,u=a.length,s=n.length;++i<u;){var l=r(a[i],o[i]);if(l){if(i>=s)return l;var c=n[i];return l*("asc"===c||c===!0?1:-1)}}return t.index-e.index}function h(t){return Xt[t]}function d(t){return $t[t]}function p(t,e,n){return e?t=Wt[t]:n&&(t=Zt[t]),"\\"+t}function g(t){return"\\"+Zt[t]}function v(t,e,n){for(var r=t.length,i=e+(n?0:-1);n?i--:++i<r;){var a=t[i];if(a!==a)return i}return-1}function m(t){return!!t&&"object"==typeof t}function y(t){return 160>=t&&t>=9&&13>=t||32==t||160==t||5760==t||6158==t||t>=8192&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function x(t,e){for(var n=-1,r=t.length,i=-1,a=[];++n<r;)t[n]===e&&(t[n]=X,a[++i]=n);return a}function b(t,e){for(var n,r=-1,i=t.length,a=-1,o=[];++r<i;){var u=t[r],s=e?e(u,r,t):u;r&&n===s||(n=s,o[++a]=u)}return o}function w(t){for(var e=-1,n=t.length;++e<n&&y(t.charCodeAt(e)););return e}function _(t){for(var e=t.length;e--&&y(t.charCodeAt(e)););return e}function M(t){return Ut[t]}function k(t){function e(t){if(m(t)&&!Cu(t)&&!(t instanceof K)){if(t instanceof y)return t;if(to.call(t,"__chain__")&&to.call(t,"__wrapped__"))return dr(t)}return new y(t)}function n(){}function y(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function K(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=To,this.__views__=[]}function et(){var t=new K(this.__wrapped__);return t.__actions__=te(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=te(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=te(this.__views__),t}function rt(){if(this.__filtered__){var t=new K(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Xt(){var t=this.__wrapped__.value(),e=this.__dir__,n=Cu(t),r=0>e,i=n?t.length:0,a=Un(0,i,this.__views__),o=a.start,u=a.end,s=u-o,l=r?u:o-1,c=this.__iteratees__,f=c.length,h=0,d=Mo(s,this.__takeCount__);if(!n||q>i||i==s&&d==s)return nn(r&&n?t.reverse():t,this.__actions__);var p=[];t:for(;s--&&d>h;){l+=e;for(var g=-1,v=t[l];++g<f;){var m=c[g],y=m.iteratee,x=m.type,b=y(v);if(x==V)v=b;else if(!b){if(x==F)continue t;break t}}p[h++]=v}return p}function $t(){this.__data__={}}function Ut(t){return this.has(t)&&delete this.__data__[t]}function Ht(t){return"__proto__"==t?E:this.__data__[t]}function Wt(t){return"__proto__"!=t&&to.call(this.__data__,t)}function Zt(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Gt(t){var e=t?t.length:0;for(this.data={hash:mo(null),set:new co};e--;)this.push(t[e])}function Kt(t,e){var n=t.data,r="string"==typeof e||Li(e)?n.set.has(e):n.hash[e];return r?0:-1}function Jt(t){var e=this.data;"string"==typeof t||Li(t)?e.set.add(t):e.hash[t]=!0}function Qt(t,e){for(var n=-1,r=t.length,i=-1,a=e.length,o=qa(r+a);++n<r;)o[n]=t[n];for(;++i<a;)o[n++]=e[i];return o}function te(t,e){var n=-1,r=t.length;for(e||(e=qa(r));++n<r;)e[n]=t[n];return e}function ee(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function ie(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function ae(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function oe(t,e,n,r){for(var i=-1,a=t.length,o=r,u=o;++i<a;){var s=t[i],l=+e(s);n(l,o)&&(o=l,u=s)}return u}function ue(t,e){for(var n=-1,r=t.length,i=-1,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[++i]=o)}return a}function se(t,e){for(var n=-1,r=t.length,i=qa(r);++n<r;)i[n]=e(t[n],n,t);return i}function le(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function ce(t,e,n,r){var i=-1,a=t.length;for(r&&a&&(n=t[++i]);++i<a;)n=e(n,t[i],i,t);return n}function fe(t,e,n,r){var i=t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function he(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function de(t,e){for(var n=t.length,r=0;n--;)r+=+e(t[n])||0;return r}function pe(t,e){return t===E?e:t;
}function ge(t,e,n,r){return t!==E&&to.call(r,n)?t:e}function ve(t,e,n){for(var r=-1,i=qu(e),a=i.length;++r<a;){var o=i[r],u=t[o],s=n(u,e[o],o,t,e);(s===s?s===u:u!==u)&&(u!==E||o in t)||(t[o]=s)}return t}function me(t,e){return null==e?t:xe(e,qu(e),t)}function ye(t,e){for(var n=-1,r=null==t,i=!r&&Kn(t),a=i?t.length:0,o=e.length,u=qa(o);++n<o;){var s=e[n];i?u[n]=Jn(s,a)?t[s]:E:u[n]=r?E:t[s]}return u}function xe(t,e,n){n||(n={});for(var r=-1,i=e.length;++r<i;){var a=e[r];n[a]=t[a]}return n}function be(t,e,n){var r=typeof t;return"function"==r?e===E?t:on(t,e,n):null==t?Na:"object"==r?Be(t):e===E?za(t):qe(t,e)}function we(t,e,n,r,i,a,o){var u;if(n&&(u=i?n(t,r,i):n(t)),u!==E)return u;if(!Li(t))return t;var s=Cu(t);if(s){if(u=Hn(t),!e)return te(t,u)}else{var l=no.call(t),c=l==G;if(l!=Q&&l!=$&&(!c||i))return Yt[l]?Zn(t,l,e):i?t:{};if(u=Wn(c?{}:t),!e)return me(u,t)}a||(a=[]),o||(o=[]);for(var f=a.length;f--;)if(a[f]==t)return o[f];return a.push(t),o.push(u),(s?ee:Pe)(t,function(r,i){u[i]=we(r,e,n,i,t,a,o)}),u}function _e(t,e,n){if("function"!=typeof t)throw new Za(Y);return fo(function(){t.apply(E,n)},e)}function Me(t,e){var n=t?t.length:0,r=[];if(!n)return r;var i=-1,o=Yn(),u=o==a,s=u&&e.length>=q?gn(e):null,l=e.length;s&&(o=Kt,u=!1,e=s);t:for(;++i<n;){var c=t[i];if(u&&c===c){for(var f=l;f--;)if(e[f]===c)continue t;r.push(c)}else o(e,c,0)<0&&r.push(c)}return r}function ke(t,e){var n=!0;return Oo(t,function(t,r,i){return n=!!e(t,r,i)}),n}function Ee(t,e,n,r){var i=r,a=i;return Oo(t,function(t,o,u){var s=+e(t,o,u);(n(s,i)||s===r&&s===a)&&(i=s,a=t)}),a}function Se(t,e,n,r){var i=t.length;for(n=null==n?0:+n||0,0>n&&(n=-n>i?0:i+n),r=r===E||r>i?i:+r||0,0>r&&(r+=i),i=n>r?0:r>>>0,n>>>=0;i>n;)t[n++]=e;return t}function Ne(t,e){var n=[];return Oo(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Te(t,e,n,r){var i;return n(t,function(t,n,a){return e(t,n,a)?(i=r?n:t,!1):void 0}),i}function Ce(t,e,n,r){r||(r=[]);for(var i=-1,a=t.length;++i<a;){var o=t[i];m(o)&&Kn(o)&&(n||Cu(o)||Ei(o))?e?Ce(o,e,n,r):le(r,o):n||(r[r.length]=o)}return r}function De(t,e){return jo(t,e,ta)}function Pe(t,e){return jo(t,e,qu)}function Ae(t,e){return Bo(t,e,qu)}function ze(t,e){for(var n=-1,r=e.length,i=-1,a=[];++n<r;){var o=e[n];zi(t[o])&&(a[++i]=o)}return a}function Le(t,e,n){if(null!=t){n!==E&&n in fr(t)&&(e=[n]);for(var r=0,i=e.length;null!=t&&i>r;)t=t[e[r++]];return r&&r==i?t:E}}function Ie(t,e,n,r,i,a){return t===e?!0:null==t||null==e||!Li(t)&&!m(e)?t!==t&&e!==e:Oe(t,e,Ie,n,r,i,a)}function Oe(t,e,n,r,i,a,o){var u=Cu(t),s=Cu(e),l=U,c=U;u||(l=no.call(t),l==$?l=Q:l!=Q&&(u=Yi(t))),s||(c=no.call(e),c==$?c=Q:c!=Q&&(s=Yi(e)));var f=l==Q,h=c==Q,d=l==c;if(d&&!u&&!f)return Bn(t,e,l);if(!i){var p=f&&to.call(t,"__wrapped__"),g=h&&to.call(e,"__wrapped__");if(p||g)return n(p?t.value():t,g?e.value():e,r,i,a,o)}if(!d)return!1;a||(a=[]),o||(o=[]);for(var v=a.length;v--;)if(a[v]==t)return o[v]==e;a.push(t),o.push(e);var m=(u?jn:qn)(t,e,n,r,i,a,o);return a.pop(),o.pop(),m}function Re(t,e,n){var r=e.length,i=r,a=!n;if(null==t)return!i;for(t=fr(t);r--;){var o=e[r];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++r<i;){o=e[r];var u=o[0],s=t[u],l=o[1];if(a&&o[2]){if(s===E&&!(u in t))return!1}else{var c=n?n(s,l,u):E;if(!(c===E?Ie(l,s,n,!0):c))return!1}}return!0}function je(t,e){var n=-1,r=Kn(t)?qa(t.length):[];return Oo(t,function(t,i,a){r[++n]=e(t,i,a)}),r}function Be(t){var e=Xn(t);if(1==e.length&&e[0][2]){var n=e[0][0],r=e[0][1];return function(t){return null==t?!1:t[n]===r&&(r!==E||n in fr(t))}}return function(t){return Re(t,e)}}function qe(t,e){var n=Cu(t),r=tr(t)&&rr(e),i=t+"";return t=hr(t),function(a){if(null==a)return!1;var o=i;if(a=fr(a),(n||!r)&&!(o in a)){if(a=1==t.length?a:Le(a,We(t,0,-1)),null==a)return!1;o=Sr(t),a=fr(a)}return a[o]===e?e!==E||o in a:Ie(e,a[o],E,!0)}}function Fe(t,e,n,r,i){if(!Li(t))return t;var a=Kn(e)&&(Cu(e)||Yi(e)),o=a?E:qu(e);return ee(o||e,function(u,s){if(o&&(s=u,u=e[s]),m(u))r||(r=[]),i||(i=[]),Ve(t,e,s,Fe,n,r,i);else{var l=t[s],c=n?n(l,u,s,t,e):E,f=c===E;f&&(c=u),c===E&&(!a||s in t)||!f&&(c===c?c===l:l!==l)||(t[s]=c)}}),t}function Ve(t,e,n,r,i,a,o){for(var u=a.length,s=e[n];u--;)if(a[u]==s)return void(t[n]=o[u]);var l=t[n],c=i?i(l,s,n,t,e):E,f=c===E;f&&(c=s,Kn(s)&&(Cu(s)||Yi(s))?c=Cu(l)?l:Kn(l)?te(l):[]:qi(s)||Ei(s)?c=Ei(l)?Wi(l):qi(l)?l:{}:f=!1),a.push(s),o.push(c),f?t[n]=r(c,s,i,a,o):(c===c?c!==l:l===l)&&(t[n]=c)}function Ye(t){return function(e){return null==e?E:e[t]}}function Xe(t){var e=t+"";return t=hr(t),function(n){return Le(n,t,e)}}function $e(t,e){for(var n=t?e.length:0;n--;){var r=e[n];if(r!=i&&Jn(r)){var i=r;ho.call(t,r,1)}}return t}function Ue(t,e){return t+yo(So()*(e-t+1))}function He(t,e,n,r,i){return i(t,function(t,i,a){n=r?(r=!1,t):e(n,t,i,a)}),n}function We(t,e,n){var r=-1,i=t.length;e=null==e?0:+e||0,0>e&&(e=-e>i?0:i+e),n=n===E||n>i?i:+n||0,0>n&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=qa(i);++r<i;)a[r]=t[r+e];return a}function Ze(t,e){var n;return Oo(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function Ge(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Ke(t,e,n){var r=Fn(),i=-1;e=se(e,function(t){return r(t)});var a=je(t,function(t){var n=se(e,function(e){return e(t)});return{criteria:n,index:++i,value:t}});return Ge(a,function(t,e){return f(t,e,n)})}function Je(t,e){var n=0;return Oo(t,function(t,r,i){n+=+e(t,r,i)||0}),n}function Qe(t,e){var n=-1,r=Yn(),i=t.length,o=r==a,u=o&&i>=q,s=u?gn():null,l=[];s?(r=Kt,o=!1):(u=!1,s=e?[]:l);t:for(;++n<i;){var c=t[n],f=e?e(c,n,t):c;if(o&&c===c){for(var h=s.length;h--;)if(s[h]===f)continue t;e&&s.push(f),l.push(c)}else r(s,f,0)<0&&((e||u)&&s.push(f),l.push(c))}return l}function tn(t,e){for(var n=-1,r=e.length,i=qa(r);++n<r;)i[n]=t[e[n]];return i}function en(t,e,n,r){for(var i=t.length,a=r?i:-1;(r?a--:++a<i)&&e(t[a],a,t););return n?We(t,r?0:a,r?a+1:i):We(t,r?a+1:0,r?i:a)}function nn(t,e){var n=t;n instanceof K&&(n=n.value());for(var r=-1,i=e.length;++r<i;){var a=e[r];n=a.func.apply(a.thisArg,le([n],a.args))}return n}function rn(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e===e&&Po>=i){for(;i>r;){var a=r+i>>>1,o=t[a];(n?e>=o:e>o)&&null!==o?r=a+1:i=a}return i}return an(t,e,Na,n)}function an(t,e,n,r){e=n(e);for(var i=0,a=t?t.length:0,o=e!==e,u=null===e,s=e===E;a>i;){var l=yo((i+a)/2),c=n(t[l]),f=c!==E,h=c===c;if(o)var d=h||r;else d=u?h&&f&&(r||null!=c):s?h&&(r||f):null==c?!1:r?e>=c:e>c;d?i=l+1:a=l}return Mo(a,Do)}function on(t,e,n){if("function"!=typeof t)return Na;if(e===E)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,a){return t.call(e,n,r,i,a)};case 5:return function(n,r,i,a,o){return t.call(e,n,r,i,a,o)}}return function(){return t.apply(e,arguments)}}function un(t){var e=new ao(t.byteLength),n=new po(e);return n.set(new po(t)),e}function sn(t,e,n){for(var r=n.length,i=-1,a=_o(t.length-r,0),o=-1,u=e.length,s=qa(u+a);++o<u;)s[o]=e[o];for(;++i<r;)s[n[i]]=t[i];for(;a--;)s[o++]=t[i++];return s}function ln(t,e,n){for(var r=-1,i=n.length,a=-1,o=_o(t.length-i,0),u=-1,s=e.length,l=qa(o+s);++a<o;)l[a]=t[a];for(var c=a;++u<s;)l[c+u]=e[u];for(;++r<i;)l[c+n[r]]=t[a++];return l}function cn(t,e){return function(n,r,i){var a=e?e():{};if(r=Fn(r,i,3),Cu(n))for(var o=-1,u=n.length;++o<u;){var s=n[o];t(a,s,r(s,o,n),n)}else Oo(n,function(e,n,i){t(a,e,r(e,n,i),i)});return a}}function fn(t){return mi(function(e,n){var r=-1,i=null==e?0:n.length,a=i>2?n[i-2]:E,o=i>2?n[2]:E,u=i>1?n[i-1]:E;for("function"==typeof a?(a=on(a,u,5),i-=2):(a="function"==typeof u?u:E,i-=a?1:0),o&&Qn(n[0],n[1],o)&&(a=3>i?E:a,i=1);++r<i;){var s=n[r];s&&t(e,s,a)}return e})}function hn(t,e){return function(n,r){var i=n?Vo(n):0;if(!nr(i))return t(n,r);for(var a=e?i:-1,o=fr(n);(e?a--:++a<i)&&r(o[a],a,o)!==!1;);return n}}function dn(t){return function(e,n,r){for(var i=fr(e),a=r(e),o=a.length,u=t?o:-1;t?u--:++u<o;){var s=a[u];if(n(i[s],s,i)===!1)break}return e}}function pn(t,e){function n(){var i=this&&this!==ne&&this instanceof n?r:t;return i.apply(e,arguments)}var r=mn(t);return n}function gn(t){return mo&&co?new Gt(t):null}function vn(t){return function(e){for(var n=-1,r=ka(ca(e)),i=r.length,a="";++n<i;)a=t(a,r[n],n);return a}}function mn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Io(t.prototype),r=t.apply(n,e);return Li(r)?r:n}}function yn(t){function e(n,r,i){i&&Qn(n,r,i)&&(r=E);var a=Rn(n,t,E,E,E,E,E,r);return a.placeholder=e.placeholder,a}return e}function xn(t,e){return mi(function(n){var r=n[0];return null==r?r:(n.push(e),t.apply(E,n))})}function bn(t,e){return function(n,r,i){if(i&&Qn(n,r,i)&&(r=E),r=Fn(r,i,3),1==r.length){n=Cu(n)?n:cr(n);var a=oe(n,r,t,e);if(!n.length||a!==e)return a}return Ee(n,r,t,e)}}function wn(t,e){return function(n,r,a){if(r=Fn(r,a,3),Cu(n)){var o=i(n,r,e);return o>-1?n[o]:E}return Te(n,r,t)}}function _n(t){return function(e,n,r){return e&&e.length?(n=Fn(n,r,3),i(e,n,t)):-1}}function Mn(t){return function(e,n,r){return n=Fn(n,r,3),Te(e,n,t,!0)}}function kn(t){return function(){for(var e,n=arguments.length,r=t?n:-1,i=0,a=qa(n);t?r--:++r<n;){var o=a[i++]=arguments[r];if("function"!=typeof o)throw new Za(Y);!e&&y.prototype.thru&&"wrapper"==Vn(o)&&(e=new y([],!0))}for(r=e?-1:n;++r<n;){o=a[r];var u=Vn(o),s="wrapper"==u?Fo(o):E;e=s&&er(s[0])&&s[1]==(L|D|A|I)&&!s[4].length&&1==s[9]?e[Vn(s[0])].apply(e,s[3]):1==o.length&&er(o)?e[u]():e.thru(o)}return function(){var t=arguments,r=t[0];if(e&&1==t.length&&Cu(r)&&r.length>=q)return e.plant(r).value();for(var i=0,o=n?a[i].apply(this,t):r;++i<n;)o=a[i].call(this,o);return o}}}function En(t,e){return function(n,r,i){return"function"==typeof r&&i===E&&Cu(n)?t(n,r):e(n,on(r,i,3))}}function Sn(t){return function(e,n,r){return("function"!=typeof n||r!==E)&&(n=on(n,r,3)),t(e,n,ta)}}function Nn(t){return function(e,n,r){return("function"!=typeof n||r!==E)&&(n=on(n,r,3)),t(e,n)}}function Tn(t){return function(e,n,r){var i={};return n=Fn(n,r,3),Pe(e,function(e,r,a){var o=n(e,r,a);r=t?o:r,e=t?e:o,i[r]=e}),i}}function Cn(t){return function(e,n,r){return e=u(e),(t?e:"")+zn(e,n,r)+(t?"":e)}}function Dn(t){var e=mi(function(n,r){var i=x(r,e.placeholder);return Rn(n,t,E,r,i)});return e}function Pn(t,e){return function(n,r,i,a){var o=arguments.length<3;return"function"==typeof r&&a===E&&Cu(n)?t(n,r,i,o):He(n,Fn(r,a,4),i,o,e)}}function An(t,e,n,r,i,a,o,u,s,l){function c(){for(var y=arguments.length,b=y,w=qa(y);b--;)w[b]=arguments[b];if(r&&(w=sn(w,r,i)),a&&(w=ln(w,a,o)),p||v){var _=c.placeholder,M=x(w,_);if(y-=M.length,l>y){var k=u?te(u):E,S=_o(l-y,0),C=p?M:E,D=p?E:M,P=p?w:E,L=p?E:w;e|=p?A:z,e&=~(p?z:A),g||(e&=~(N|T));var I=[t,e,n,P,C,L,D,k,s,S],O=An.apply(E,I);return er(t)&&Yo(O,I),O.placeholder=_,O}}var R=h?n:this,j=d?R[t]:t;return u&&(w=sr(w,u)),f&&s<w.length&&(w.length=s),this&&this!==ne&&this instanceof c&&(j=m||mn(t)),j.apply(R,w)}var f=e&L,h=e&N,d=e&T,p=e&D,g=e&C,v=e&P,m=d?E:mn(t);return c}function zn(t,e,n){var r=t.length;if(e=+e,r>=e||!bo(e))return"";var i=e-r;return n=null==n?" ":n+"",va(n,vo(i/n.length)).slice(0,i)}function Ln(t,e,n,r){function i(){for(var e=-1,u=arguments.length,s=-1,l=r.length,c=qa(l+u);++s<l;)c[s]=r[s];for(;u--;)c[s++]=arguments[++e];var f=this&&this!==ne&&this instanceof i?o:t;return f.apply(a?n:this,c)}var a=e&N,o=mn(t);return i}function In(t){var e=Xa[t];return function(t,n){return n=n===E?0:+n||0,n?(n=so(10,n),e(t*n)/n):e(t)}}function On(t){return function(e,n,r,i){var a=Fn(r);return null==r&&a===be?rn(e,n,t):an(e,n,a(r,i,1),t)}}function Rn(t,e,n,r,i,a,o,u){var s=e&T;if(!s&&"function"!=typeof t)throw new Za(Y);var l=r?r.length:0;if(l||(e&=~(A|z),r=i=E),l-=i?i.length:0,e&z){var c=r,f=i;r=i=E}var h=s?E:Fo(t),d=[t,e,n,r,i,c,f,a,o,u];if(h&&(ir(d,h),e=d[1],u=d[9]),d[9]=null==u?s?0:t.length:_o(u-l,0)||0,e==N)var p=pn(d[0],d[2]);else p=e!=A&&e!=(N|A)||d[4].length?An.apply(E,d):Ln.apply(E,d);var g=h?qo:Yo;return g(p,d)}function jn(t,e,n,r,i,a,o){var u=-1,s=t.length,l=e.length;if(s!=l&&!(i&&l>s))return!1;for(;++u<s;){var c=t[u],f=e[u],h=r?r(i?f:c,i?c:f,u):E;if(h!==E){if(h)continue;return!1}if(i){if(!he(e,function(t){return c===t||n(c,t,r,i,a,o)}))return!1}else if(c!==f&&!n(c,f,r,i,a,o))return!1}return!0}function Bn(t,e,n){switch(n){case H:case W:return+t==+e;case Z:return t.name==e.name&&t.message==e.message;case J:return t!=+t?e!=+e:t==+e;case tt:case nt:return t==e+""}return!1}function qn(t,e,n,r,i,a,o){var u=qu(t),s=u.length,l=qu(e),c=l.length;if(s!=c&&!i)return!1;for(var f=s;f--;){var h=u[f];if(!(i?h in e:to.call(e,h)))return!1}for(var d=i;++f<s;){h=u[f];var p=t[h],g=e[h],v=r?r(i?g:p,i?p:g,h):E;if(!(v===E?n(p,g,r,i,a,o):v))return!1;d||(d="constructor"==h)}if(!d){var m=t.constructor,y=e.constructor;if(m!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y))return!1}return!0}function Fn(t,n,r){var i=e.callback||Ea;return i=i===Ea?be:i,r?i(t,n,r):i}function Vn(t){for(var e=t.name,n=Lo[e],r=n?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==t)return i.name}return e}function Yn(t,n,r){var i=e.indexOf||kr;return i=i===kr?a:i,t?i(t,n,r):i}function Xn(t){for(var e=ea(t),n=e.length;n--;)e[n][2]=rr(e[n][1]);return e}function $n(t,e){var n=null==t?E:t[e];return Ri(n)?n:E}function Un(t,e,n){for(var r=-1,i=n.length;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=Mo(e,t+o);break;case"takeRight":t=_o(t,e-o)}}return{start:t,end:e}}function Hn(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&to.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Wn(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Ua),new e}function Zn(t,e,n){var r=t.constructor;switch(e){case it:return un(t);case H:case W:return new r(+t);case at:case ot:case ut:case st:case lt:case ct:case ft:case ht:case dt:var i=t.buffer;return new r(n?un(i):i,t.byteOffset,t.length);case J:case nt:return new r(t);case tt:var a=new r(t.source,At.exec(t));a.lastIndex=t.lastIndex}return a}function Gn(t,e,n){null==t||tr(e,t)||(e=hr(e),t=1==e.length?t:Le(t,We(e,0,-1)),e=Sr(e));var r=null==t?t:t[e];return null==r?E:r.apply(t,n)}function Kn(t){return null!=t&&nr(Vo(t))}function Jn(t,e){return t="number"==typeof t||It.test(t)?+t:-1,e=null==e?Ao:e,t>-1&&t%1==0&&e>t}function Qn(t,e,n){if(!Li(n))return!1;var r=typeof e;if("number"==r?Kn(n)&&Jn(e,n.length):"string"==r&&e in n){var i=n[e];return t===t?t===i:i!==i}return!1}function tr(t,e){var n=typeof t;if("string"==n&&Et.test(t)||"number"==n)return!0;if(Cu(t))return!1;var r=!kt.test(t);return r||null!=e&&t in fr(e)}function er(t){var n=Vn(t);if(!(n in K.prototype))return!1;var r=e[n];if(t===r)return!0;var i=Fo(r);return!!i&&t===i[0]}function nr(t){return"number"==typeof t&&t>-1&&t%1==0&&Ao>=t}function rr(t){return t===t&&!Li(t)}function ir(t,e){var n=t[1],r=e[1],i=n|r,a=L>i,o=r==L&&n==D||r==L&&n==I&&t[7].length<=e[8]||r==(L|I)&&n==D;if(!a&&!o)return t;r&N&&(t[2]=e[2],i|=n&N?0:C);var u=e[3];if(u){var s=t[3];t[3]=s?sn(s,u,e[4]):te(u),t[4]=s?x(t[3],X):te(e[4])}return u=e[5],u&&(s=t[5],t[5]=s?ln(s,u,e[6]):te(u),t[6]=s?x(t[5],X):te(e[6])),u=e[7],u&&(t[7]=te(u)),r&L&&(t[8]=null==t[8]?e[8]:Mo(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function ar(t,e){return t===E?e:Du(t,e,ar)}function or(t,e){t=fr(t);for(var n=-1,r=e.length,i={};++n<r;){var a=e[n];a in t&&(i[a]=t[a])}return i}function ur(t,e){var n={};return De(t,function(t,r,i){e(t,r,i)&&(n[r]=t)}),n}function sr(t,e){for(var n=t.length,r=Mo(e.length,n),i=te(t);r--;){var a=e[r];t[r]=Jn(a,n)?i[a]:E}return t}function lr(t){for(var e=ta(t),n=e.length,r=n&&t.length,i=!!r&&nr(r)&&(Cu(t)||Ei(t)),a=-1,o=[];++a<n;){var u=e[a];(i&&Jn(u,r)||to.call(t,u))&&o.push(u)}return o}function cr(t){return null==t?[]:Kn(t)?Li(t)?t:Ua(t):aa(t)}function fr(t){return Li(t)?t:Ua(t)}function hr(t){if(Cu(t))return t;var e=[];return u(t).replace(St,function(t,n,r,i){e.push(r?i.replace(Dt,"$1"):n||t)}),e}function dr(t){return t instanceof K?t.clone():new y(t.__wrapped__,t.__chain__,te(t.__actions__))}function pr(t,e,n){e=(n?Qn(t,e,n):null==e)?1:_o(yo(e)||1,1);for(var r=0,i=t?t.length:0,a=-1,o=qa(vo(i/e));i>r;)o[++a]=We(t,r,r+=e);return o}function gr(t){for(var e=-1,n=t?t.length:0,r=-1,i=[];++e<n;){var a=t[e];a&&(i[++r]=a)}return i}function vr(t,e,n){var r=t?t.length:0;return r?((n?Qn(t,e,n):null==e)&&(e=1),We(t,0>e?0:e)):[]}function mr(t,e,n){var r=t?t.length:0;return r?((n?Qn(t,e,n):null==e)&&(e=1),e=r-(+e||0),We(t,0,0>e?0:e)):[]}function yr(t,e,n){return t&&t.length?en(t,Fn(e,n,3),!0,!0):[]}function xr(t,e,n){return t&&t.length?en(t,Fn(e,n,3),!0):[]}function br(t,e,n,r){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Qn(t,e,n)&&(n=0,r=i),Se(t,e,n,r)):[]}function wr(t){return t?t[0]:E}function _r(t,e,n){var r=t?t.length:0;return n&&Qn(t,e,n)&&(e=!1),r?Ce(t,e):[]}function Mr(t){var e=t?t.length:0;return e?Ce(t,!0):[]}function kr(t,e,n){var r=t?t.length:0;if(!r)return-1;if("number"==typeof n)n=0>n?_o(r+n,0):n;else if(n){var i=rn(t,e);return r>i&&(e===e?e===t[i]:t[i]!==t[i])?i:-1}return a(t,e,n||0)}function Er(t){return mr(t,1)}function Sr(t){var e=t?t.length:0;return e?t[e-1]:E}function Nr(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(0>n?_o(r+n,0):Mo(n||0,r-1))+1;else if(n){i=rn(t,e,!0)-1;var a=t[i];return(e===e?e===a:a!==a)?i:-1}if(e!==e)return v(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1}function Tr(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,r=Yn(),i=t.length;++n<i;)for(var a=0,o=t[n];(a=r(e,o,a))>-1;)ho.call(e,a,1);return e}function Cr(t,e,n){var r=[];if(!t||!t.length)return r;var i=-1,a=[],o=t.length;for(e=Fn(e,n,3);++i<o;){var u=t[i];e(u,i,t)&&(r.push(u),a.push(i))}return $e(t,a),r}function Dr(t){return vr(t,1)}function Pr(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Qn(t,e,n)&&(e=0,n=r),We(t,e,n)):[]}function Ar(t,e,n){var r=t?t.length:0;return r?((n?Qn(t,e,n):null==e)&&(e=1),We(t,0,0>e?0:e)):[]}function zr(t,e,n){var r=t?t.length:0;return r?((n?Qn(t,e,n):null==e)&&(e=1),e=r-(+e||0),We(t,0>e?0:e)):[]}function Lr(t,e,n){return t&&t.length?en(t,Fn(e,n,3),!1,!0):[]}function Ir(t,e,n){return t&&t.length?en(t,Fn(e,n,3)):[]}function Or(t,e,n,r){var i=t?t.length:0;if(!i)return[];null!=e&&"boolean"!=typeof e&&(r=n,n=Qn(t,e,r)?E:e,e=!1);var o=Fn();return(null!=n||o!==be)&&(n=o(n,r,3)),e&&Yn()==a?b(t,n):Qe(t,n)}function Rr(t){if(!t||!t.length)return[];var e=-1,n=0;t=ue(t,function(t){return Kn(t)?(n=_o(t.length,n),!0):void 0});for(var r=qa(n);++e<n;)r[e]=se(t,Ye(e));return r}function jr(t,e,n){var r=t?t.length:0;if(!r)return[];var i=Rr(t);return null==e?i:(e=on(e,n,4),se(i,function(t){return ce(t,e,E,!0)}))}function Br(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Kn(n))var r=r?le(Me(r,n),Me(n,r)):n}return r?Qe(r):[]}function qr(t,e){var n=-1,r=t?t.length:0,i={};for(!r||e||Cu(t[0])||(e=[]);++n<r;){var a=t[n];e?i[a]=e[n]:a&&(i[a[0]]=a[1])}return i}function Fr(t){var n=e(t);return n.__chain__=!0,n}function Vr(t,e,n){return e.call(n,t),t}function Yr(t,e,n){return e.call(n,t)}function Xr(){return Fr(this)}function $r(){return new y(this.value(),this.__chain__)}function Ur(t){for(var e,r=this;r instanceof n;){var i=dr(r);e?a.__wrapped__=i:e=i;var a=i;r=r.__wrapped__}return a.__wrapped__=t,e}function Hr(){var t=this.__wrapped__,e=function(t){return n&&n.__dir__<0?t:t.reverse()};if(t instanceof K){var n=t;return this.__actions__.length&&(n=new K(this)),n=n.reverse(),n.__actions__.push({func:Yr,args:[e],thisArg:E}),new y(n,this.__chain__)}return this.thru(e)}function Wr(){return this.value()+""}function Zr(){return nn(this.__wrapped__,this.__actions__)}function Gr(t,e,n){var r=Cu(t)?ae:ke;return n&&Qn(t,e,n)&&(e=E),("function"!=typeof e||n!==E)&&(e=Fn(e,n,3)),r(t,e)}function Kr(t,e,n){var r=Cu(t)?ue:Ne;return e=Fn(e,n,3),r(t,e)}function Jr(t,e){return iu(t,Be(e))}function Qr(t,e,n,r){var i=t?Vo(t):0;return nr(i)||(t=aa(t),i=t.length),n="number"!=typeof n||r&&Qn(e,n,r)?0:0>n?_o(i+n,0):n||0,"string"==typeof t||!Cu(t)&&Vi(t)?i>=n&&t.indexOf(e,n)>-1:!!i&&Yn(t,e,n)>-1}function ti(t,e,n){var r=Cu(t)?se:je;return e=Fn(e,n,3),r(t,e)}function ei(t,e){return ti(t,za(e))}function ni(t,e,n){var r=Cu(t)?ue:Ne;return e=Fn(e,n,3),r(t,function(t,n,r){return!e(t,n,r)})}function ri(t,e,n){if(n?Qn(t,e,n):null==e){t=cr(t);var r=t.length;return r>0?t[Ue(0,r-1)]:E}var i=-1,a=Hi(t),r=a.length,o=r-1;for(e=Mo(0>e?0:+e||0,r);++i<e;){var u=Ue(i,o),s=a[u];a[u]=a[i],a[i]=s}return a.length=e,a}function ii(t){return ri(t,To)}function ai(t){var e=t?Vo(t):0;return nr(e)?e:qu(t).length}function oi(t,e,n){var r=Cu(t)?he:Ze;return n&&Qn(t,e,n)&&(e=E),("function"!=typeof e||n!==E)&&(e=Fn(e,n,3)),r(t,e)}function ui(t,e,n){if(null==t)return[];n&&Qn(t,e,n)&&(e=E);var r=-1;e=Fn(e,n,3);var i=je(t,function(t,n,i){return{criteria:e(t,n,i),index:++r,value:t}});return Ge(i,c)}function si(t,e,n,r){return null==t?[]:(r&&Qn(e,n,r)&&(n=E),Cu(e)||(e=null==e?[]:[e]),Cu(n)||(n=null==n?[]:[n]),Ke(t,e,n))}function li(t,e){return Kr(t,Be(e))}function ci(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Za(Y);var n=t;t=e,e=n}return t=bo(t=+t)?t:0,function(){return--t<1?e.apply(this,arguments):void 0}}function fi(t,e,n){return n&&Qn(t,e,n)&&(e=E),e=t&&null==e?t.length:_o(+e||0,0),Rn(t,L,E,E,E,E,e)}function hi(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new Za(Y);var r=t;t=e,e=r}return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=E),n}}function di(t,e,n){function r(){d&&oo(d),l&&oo(l),g=0,l=d=p=E}function i(e,n){n&&oo(n),l=d=p=E,e&&(g=gu(),c=t.apply(h,s),d||l||(s=h=E))}function a(){var t=e-(gu()-f);0>=t||t>e?i(p,l):d=fo(a,t)}function o(){i(m,d)}function u(){if(s=arguments,f=gu(),h=this,p=m&&(d||!y),v===!1)var n=y&&!d;else{l||y||(g=f);var r=v-(f-g),i=0>=r||r>v;i?(l&&(l=oo(l)),g=f,c=t.apply(h,s)):l||(l=fo(o,r))}return i&&d?d=oo(d):d||e===v||(d=fo(a,e)),n&&(i=!0,c=t.apply(h,s)),!i||d||l||(s=h=E),c}var s,l,c,f,h,d,p,g=0,v=!1,m=!0;if("function"!=typeof t)throw new Za(Y);if(e=0>e?0:+e||0,n===!0){var y=!0;m=!1}else Li(n)&&(y=!!n.leading,v="maxWait"in n&&_o(+n.maxWait||0,e),m="trailing"in n?!!n.trailing:m);return u.cancel=r,u}function pi(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Za(Y);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o),o};return n.cache=new pi.Cache,n}function gi(t){if("function"!=typeof t)throw new Za(Y);return function(){return!t.apply(this,arguments)}}function vi(t){return hi(2,t)}function mi(t,e){if("function"!=typeof t)throw new Za(Y);return e=_o(e===E?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=_o(n.length-e,0),a=qa(i);++r<i;)a[r]=n[e+r];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,n[0],a);case 2:return t.call(this,n[0],n[1],a)}var o=qa(e+1);for(r=-1;++r<e;)o[r]=n[r];return o[e]=a,t.apply(this,o)}}function yi(t){if("function"!=typeof t)throw new Za(Y);return function(e){return t.apply(this,e)}}function xi(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Za(Y);return n===!1?r=!1:Li(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),di(t,e,{leading:r,maxWait:+e,trailing:i})}function bi(t,e){return e=null==e?Na:e,Rn(e,A,E,[t],[])}function wi(t,e,n,r){return e&&"boolean"!=typeof e&&Qn(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),"function"==typeof n?we(t,e,on(n,r,1)):we(t,e)}function _i(t,e,n){return"function"==typeof e?we(t,!0,on(e,n,1)):we(t,!0)}function Mi(t,e){return t>e}function ki(t,e){return t>=e}function Ei(t){return m(t)&&Kn(t)&&to.call(t,"callee")&&!lo.call(t,"callee")}function Si(t){return t===!0||t===!1||m(t)&&no.call(t)==H}function Ni(t){return m(t)&&no.call(t)==W}function Ti(t){return!!t&&1===t.nodeType&&m(t)&&!qi(t)}function Ci(t){return null==t?!0:Kn(t)&&(Cu(t)||Vi(t)||Ei(t)||m(t)&&zi(t.splice))?!t.length:!qu(t).length}function Di(t,e,n,r){n="function"==typeof n?on(n,r,3):E;var i=n?n(t,e):E;return i===E?Ie(t,e,n):!!i}function Pi(t){return m(t)&&"string"==typeof t.message&&no.call(t)==Z}function Ai(t){return"number"==typeof t&&bo(t)}function zi(t){return Li(t)&&no.call(t)==G}function Li(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Ii(t,e,n,r){return n="function"==typeof n?on(n,r,3):E,Re(t,Xn(e),n)}function Oi(t){return Bi(t)&&t!=+t}function Ri(t){return null==t?!1:zi(t)?io.test(Qa.call(t)):m(t)&&Lt.test(t)}function ji(t){return null===t}function Bi(t){return"number"==typeof t||m(t)&&no.call(t)==J}function qi(t){var e;if(!m(t)||no.call(t)!=Q||Ei(t)||!to.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var n;return De(t,function(t,e){n=e}),n===E||to.call(t,n)}function Fi(t){return Li(t)&&no.call(t)==tt}function Vi(t){return"string"==typeof t||m(t)&&no.call(t)==nt}function Yi(t){return m(t)&&nr(t.length)&&!!Vt[no.call(t)]}function Xi(t){return t===E}function $i(t,e){return e>t}function Ui(t,e){return e>=t}function Hi(t){var e=t?Vo(t):0;return nr(e)?e?te(t):[]:aa(t)}function Wi(t){return xe(t,ta(t))}function Zi(t,e,n){var r=Io(t);return n&&Qn(t,e,n)&&(e=E),e?me(r,e):r}function Gi(t){return ze(t,ta(t))}function Ki(t,e,n){var r=null==t?E:Le(t,hr(e),e+"");return r===E?n:r}function Ji(t,e){if(null==t)return!1;var n=to.call(t,e);if(!n&&!tr(e)){if(e=hr(e),t=1==e.length?t:Le(t,We(e,0,-1)),null==t)return!1;e=Sr(e),n=to.call(t,e)}return n||nr(t.length)&&Jn(e,t.length)&&(Cu(t)||Ei(t))}function Qi(t,e,n){n&&Qn(t,e,n)&&(e=E);for(var r=-1,i=qu(t),a=i.length,o={};++r<a;){var u=i[r],s=t[u];e?to.call(o,s)?o[s].push(u):o[s]=[u]:o[s]=u}return o}function ta(t){if(null==t)return[];Li(t)||(t=Ua(t));var e=t.length;e=e&&nr(e)&&(Cu(t)||Ei(t))&&e||0;for(var n=t.constructor,r=-1,i="function"==typeof n&&n.prototype===t,a=qa(e),o=e>0;++r<e;)a[r]=r+"";for(var u in t)o&&Jn(u,e)||"constructor"==u&&(i||!to.call(t,u))||a.push(u);return a}function ea(t){t=fr(t);for(var e=-1,n=qu(t),r=n.length,i=qa(r);++e<r;){var a=n[e];i[e]=[a,t[a]]}return i}function na(t,e,n){var r=null==t?E:t[e];return r===E&&(null==t||tr(e,t)||(e=hr(e),t=1==e.length?t:Le(t,We(e,0,-1)),r=null==t?E:t[Sr(e)]),r=r===E?n:r),zi(r)?r.call(t):r}function ra(t,e,n){if(null==t)return t;var r=e+"";e=null!=t[r]||tr(e,t)?[r]:hr(e);for(var i=-1,a=e.length,o=a-1,u=t;null!=u&&++i<a;){var s=e[i];Li(u)&&(i==o?u[s]=n:null==u[s]&&(u[s]=Jn(e[i+1])?[]:{})),u=u[s]}return t}function ia(t,e,n,r){var i=Cu(t)||Yi(t);if(e=Fn(e,r,4),null==n)if(i||Li(t)){var a=t.constructor;n=i?Cu(t)?new a:[]:Io(zi(a)?a.prototype:E)}else n={};return(i?ee:Pe)(t,function(t,r,i){return e(n,t,r,i)}),n}function aa(t){return tn(t,qu(t))}function oa(t){return tn(t,ta(t))}function ua(t,e,n){return e=+e||0,n===E?(n=e,e=0):n=+n||0,t>=Mo(e,n)&&t<_o(e,n)}function sa(t,e,n){n&&Qn(t,e,n)&&(e=n=E);var r=null==t,i=null==e;if(null==n&&(i&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,i=!0)),r&&i&&(e=1,i=!1),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var a=So();return Mo(t+a*(e-t+uo("1e-"+((a+"").length-1))),e)}return Ue(t,e)}function la(t){return t=u(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function ca(t){return t=u(t),t&&t.replace(Ot,h).replace(Ct,"")}function fa(t,e,n){t=u(t),e+="";var r=t.length;return n=n===E?r:Mo(0>n?0:+n||0,r),n-=e.length,n>=0&&t.indexOf(e,n)==n}function ha(t){return t=u(t),t&&bt.test(t)?t.replace(yt,d):t}function da(t){return t=u(t),t&&Tt.test(t)?t.replace(Nt,p):t||"(?:)"}function pa(t,e,n){t=u(t),e=+e;var r=t.length;if(r>=e||!bo(e))return t;var i=(e-r)/2,a=yo(i),o=vo(i);return n=zn("",o,n),n.slice(0,a)+t+n}function ga(t,e,n){return(n?Qn(t,e,n):null==e)?e=0:e&&(e=+e),t=xa(t),Eo(t,e||(zt.test(t)?16:10))}function va(t,e){var n="";if(t=u(t),e=+e,1>e||!t||!bo(e))return n;do e%2&&(n+=t),e=yo(e/2),t+=t;while(e);return n}function ma(t,e,n){return t=u(t),n=null==n?0:Mo(0>n?0:+n||0,t.length),t.lastIndexOf(e,n)==n}function ya(t,n,r){var i=e.templateSettings;r&&Qn(t,n,r)&&(n=r=E),t=u(t),n=ve(me({},r||n),i,ge);var a,o,s=ve(me({},n.imports),i.imports,ge),l=qu(s),c=tn(s,l),f=0,h=n.interpolate||Rt,d="__p += '",p=Ha((n.escape||Rt).source+"|"+h.source+"|"+(h===Mt?Pt:Rt).source+"|"+(n.evaluate||Rt).source+"|$","g"),v="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Ft+"]")+"\n";t.replace(p,function(e,n,r,i,u,s){return r||(r=i),d+=t.slice(f,s).replace(jt,g),n&&(a=!0,d+="' +\n__e("+n+") +\n'"),u&&(o=!0,d+="';\n"+u+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=s+e.length,e}),d+="';\n";var m=n.variable;m||(d="with (obj) {\n"+d+"\n}\n"),d=(o?d.replace(pt,""):d).replace(gt,"$1").replace(vt,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var y=Ku(function(){return Ya(l,v+"return "+d).apply(E,c)});if(y.source=d,Pi(y))throw y;return y}function xa(t,e,n){var r=t;return(t=u(t))?(n?Qn(r,e,n):null==e)?t.slice(w(t),_(t)+1):(e+="",t.slice(s(t,e),l(t,e)+1)):t}function ba(t,e,n){var r=t;return t=u(t),t?(n?Qn(r,e,n):null==e)?t.slice(w(t)):t.slice(s(t,e+"")):t}function wa(t,e,n){var r=t;return t=u(t),t?(n?Qn(r,e,n):null==e)?t.slice(0,_(t)+1):t.slice(0,l(t,e+"")+1):t}function _a(t,e,n){n&&Qn(t,e,n)&&(e=E);var r=O,i=R;if(null!=e)if(Li(e)){var a="separator"in e?e.separator:a;r="length"in e?+e.length||0:r,i="omission"in e?u(e.omission):i}else r=+e||0;if(t=u(t),r>=t.length)return t;var o=r-i.length;if(1>o)return i;var s=t.slice(0,o);if(null==a)return s+i;if(Fi(a)){if(t.slice(o).search(a)){var l,c,f=t.slice(0,o);for(a.global||(a=Ha(a.source,(At.exec(a)||"")+"g")),a.lastIndex=0;l=a.exec(f);)c=l.index;s=s.slice(0,null==c?o:c)}}else if(t.indexOf(a,o)!=o){var h=s.lastIndexOf(a);h>-1&&(s=s.slice(0,h))}return s+i}function Ma(t){return t=u(t),t&&xt.test(t)?t.replace(mt,M):t}function ka(t,e,n){return n&&Qn(t,e,n)&&(e=E),t=u(t),t.match(e||Bt)||[]}function Ea(t,e,n){return n&&Qn(t,e,n)&&(e=E),m(t)?Ta(t):be(t,e)}function Sa(t){return function(){return t}}function Na(t){return t}function Ta(t){return Be(we(t,!0))}function Ca(t,e){return qe(t,we(e,!0))}function Da(t,e,n){if(null==n){var r=Li(e),i=r?qu(e):E,a=i&&i.length?ze(e,i):E;(a?a.length:r)||(a=!1,n=e,e=t,t=this)}a||(a=ze(e,qu(e)));var o=!0,u=-1,s=zi(t),l=a.length;n===!1?o=!1:Li(n)&&"chain"in n&&(o=n.chain);for(;++u<l;){var c=a[u],f=e[c];t[c]=f,s&&(t.prototype[c]=function(e){return function(){var n=this.__chain__;if(o||n){var r=t(this.__wrapped__),i=r.__actions__=te(this.__actions__);return i.push({func:e,args:arguments,thisArg:t}),r.__chain__=n,r}return e.apply(t,le([this.value()],arguments))}}(f))}return t}function Pa(){return ne._=ro,this}function Aa(){}function za(t){return tr(t)?Ye(t):Xe(t)}function La(t){return function(e){return Le(t,hr(e),e+"")}}function Ia(t,e,n){n&&Qn(t,e,n)&&(e=n=E),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;for(var r=-1,i=_o(vo((e-t)/(n||1)),0),a=qa(i);++r<i;)a[r]=t,t+=n;return a}function Oa(t,e,n){if(t=yo(t),1>t||!bo(t))return[];var r=-1,i=qa(Mo(t,Co));for(e=on(e,n,1);++r<t;)Co>r?i[r]=e(r):e(r);return i}function Ra(t){var e=++eo;return u(t)+e}function ja(t,e){return(+t||0)+(+e||0)}function Ba(t,e,n){return n&&Qn(t,e,n)&&(e=E),e=Fn(e,n,3),1==e.length?de(Cu(t)?t:cr(t),e):Je(t,e)}t=t?re.defaults(ne.Object(),t,re.pick(ne,qt)):ne;var qa=t.Array,Fa=t.Date,Va=t.Error,Ya=t.Function,Xa=t.Math,$a=t.Number,Ua=t.Object,Ha=t.RegExp,Wa=t.String,Za=t.TypeError,Ga=qa.prototype,Ka=Ua.prototype,Ja=Wa.prototype,Qa=Ya.prototype.toString,to=Ka.hasOwnProperty,eo=0,no=Ka.toString,ro=ne._,io=Ha("^"+Qa.call(to).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ao=t.ArrayBuffer,oo=t.clearTimeout,uo=t.parseFloat,so=Xa.pow,lo=Ka.propertyIsEnumerable,co=$n(t,"Set"),fo=t.setTimeout,ho=Ga.splice,po=t.Uint8Array,go=$n(t,"WeakMap"),vo=Xa.ceil,mo=$n(Ua,"create"),yo=Xa.floor,xo=$n(qa,"isArray"),bo=t.isFinite,wo=$n(Ua,"keys"),_o=Xa.max,Mo=Xa.min,ko=$n(Fa,"now"),Eo=t.parseInt,So=Xa.random,No=$a.NEGATIVE_INFINITY,To=$a.POSITIVE_INFINITY,Co=4294967295,Do=Co-1,Po=Co>>>1,Ao=9007199254740991,zo=go&&new go,Lo={};
e.support={};e.templateSettings={escape:wt,evaluate:_t,interpolate:Mt,variable:"",imports:{_:e}};var Io=function(){function t(){}return function(e){if(Li(e)){t.prototype=e;var n=new t;t.prototype=E}return n||{}}}(),Oo=hn(Pe),Ro=hn(Ae,!0),jo=dn(),Bo=dn(!0),qo=zo?function(t,e){return zo.set(t,e),t}:Na,Fo=zo?function(t){return zo.get(t)}:Aa,Vo=Ye("length"),Yo=function(){var t=0,e=0;return function(n,r){var i=gu(),a=B-(i-e);if(e=i,a>0){if(++t>=j)return n}else t=0;return qo(n,r)}}(),Xo=mi(function(t,e){return m(t)&&Kn(t)?Me(t,Ce(e,!1,!0)):[]}),$o=_n(),Uo=_n(!0),Ho=mi(function(t){for(var e=t.length,n=e,r=qa(f),i=Yn(),o=i==a,u=[];n--;){var s=t[n]=Kn(s=t[n])?s:[];r[n]=o&&s.length>=120?gn(n&&s):null}var l=t[0],c=-1,f=l?l.length:0,h=r[0];t:for(;++c<f;)if(s=l[c],(h?Kt(h,s):i(u,s,0))<0){for(var n=e;--n;){var d=r[n];if((d?Kt(d,s):i(t[n],s,0))<0)continue t}h&&h.push(s),u.push(s)}return u}),Wo=mi(function(t,e){e=Ce(e);var n=ye(t,e);return $e(t,e.sort(r)),n}),Zo=On(),Go=On(!0),Ko=mi(function(t){return Qe(Ce(t,!1,!0))}),Jo=mi(function(t,e){return Kn(t)?Me(t,e):[]}),Qo=mi(Rr),tu=mi(function(t){var e=t.length,n=e>2?t[e-2]:E,r=e>1?t[e-1]:E;return e>2&&"function"==typeof n?e-=2:(n=e>1&&"function"==typeof r?(--e,r):E,r=E),t.length=e,jr(t,n,r)}),eu=mi(function(t){return t=Ce(t),this.thru(function(e){return Qt(Cu(e)?e:[fr(e)],t)})}),nu=mi(function(t,e){return ye(t,Ce(e))}),ru=cn(function(t,e,n){to.call(t,n)?++t[n]:t[n]=1}),iu=wn(Oo),au=wn(Ro,!0),ou=En(ee,Oo),uu=En(ie,Ro),su=cn(function(t,e,n){to.call(t,n)?t[n].push(e):t[n]=[e]}),lu=cn(function(t,e,n){t[n]=e}),cu=mi(function(t,e,n){var r=-1,i="function"==typeof e,a=tr(e),o=Kn(t)?qa(t.length):[];return Oo(t,function(t){var u=i?e:a&&null!=t?t[e]:E;o[++r]=u?u.apply(t,n):Gn(t,e,n)}),o}),fu=cn(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),hu=Pn(ce,Oo),du=Pn(fe,Ro),pu=mi(function(t,e){if(null==t)return[];var n=e[2];return n&&Qn(e[0],e[1],n)&&(e.length=1),Ke(t,Ce(e),[])}),gu=ko||function(){return(new Fa).getTime()},vu=mi(function(t,e,n){var r=N;if(n.length){var i=x(n,vu.placeholder);r|=A}return Rn(t,r,e,n,i)}),mu=mi(function(t,e){e=e.length?Ce(e):Gi(t);for(var n=-1,r=e.length;++n<r;){var i=e[n];t[i]=Rn(t[i],N,t)}return t}),yu=mi(function(t,e,n){var r=N|T;if(n.length){var i=x(n,yu.placeholder);r|=A}return Rn(e,r,t,n,i)}),xu=yn(D),bu=yn(P),wu=mi(function(t,e){return _e(t,1,e)}),_u=mi(function(t,e,n){return _e(t,e,n)}),Mu=kn(),ku=kn(!0),Eu=mi(function(t,e){if(e=Ce(e),"function"!=typeof t||!ae(e,o))throw new Za(Y);var n=e.length;return mi(function(r){for(var i=Mo(r.length,n);i--;)r[i]=e[i](r[i]);return t.apply(this,r)})}),Su=Dn(A),Nu=Dn(z),Tu=mi(function(t,e){return Rn(t,I,E,E,E,Ce(e))}),Cu=xo||function(t){return m(t)&&nr(t.length)&&no.call(t)==U},Du=fn(Fe),Pu=fn(function(t,e,n){return n?ve(t,e,n):me(t,e)}),Au=xn(Pu,pe),zu=xn(Du,ar),Lu=Mn(Pe),Iu=Mn(Ae),Ou=Sn(jo),Ru=Sn(Bo),ju=Nn(Pe),Bu=Nn(Ae),qu=wo?function(t){var e=null==t?E:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Kn(t)?lr(t):Li(t)?wo(t):[]}:lr,Fu=Tn(!0),Vu=Tn(),Yu=mi(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=se(Ce(e),Wa);return or(t,Me(ta(t),e))}var n=on(e[0],e[1],3);return ur(t,function(t,e,r){return!n(t,e,r)})}),Xu=mi(function(t,e){return null==t?{}:"function"==typeof e[0]?ur(t,on(e[0],e[1],3)):or(t,Ce(e))}),$u=vn(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)}),Uu=vn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Hu=Cn(),Wu=Cn(!0),Zu=vn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Gu=vn(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Ku=mi(function(t,e){try{return t.apply(E,e)}catch(n){return Pi(n)?n:new Va(n)}}),Ju=mi(function(t,e){return function(n){return Gn(n,t,e)}}),Qu=mi(function(t,e){return function(n){return Gn(t,n,e)}}),ts=In("ceil"),es=In("floor"),ns=bn(Mi,No),rs=bn($i,To),is=In("round");return e.prototype=n.prototype,y.prototype=Io(n.prototype),y.prototype.constructor=y,K.prototype=Io(n.prototype),K.prototype.constructor=K,$t.prototype["delete"]=Ut,$t.prototype.get=Ht,$t.prototype.has=Wt,$t.prototype.set=Zt,Gt.prototype.push=Jt,pi.Cache=$t,e.after=ci,e.ary=fi,e.assign=Pu,e.at=nu,e.before=hi,e.bind=vu,e.bindAll=mu,e.bindKey=yu,e.callback=Ea,e.chain=Fr,e.chunk=pr,e.compact=gr,e.constant=Sa,e.countBy=ru,e.create=Zi,e.curry=xu,e.curryRight=bu,e.debounce=di,e.defaults=Au,e.defaultsDeep=zu,e.defer=wu,e.delay=_u,e.difference=Xo,e.drop=vr,e.dropRight=mr,e.dropRightWhile=yr,e.dropWhile=xr,e.fill=br,e.filter=Kr,e.flatten=_r,e.flattenDeep=Mr,e.flow=Mu,e.flowRight=ku,e.forEach=ou,e.forEachRight=uu,e.forIn=Ou,e.forInRight=Ru,e.forOwn=ju,e.forOwnRight=Bu,e.functions=Gi,e.groupBy=su,e.indexBy=lu,e.initial=Er,e.intersection=Ho,e.invert=Qi,e.invoke=cu,e.keys=qu,e.keysIn=ta,e.map=ti,e.mapKeys=Fu,e.mapValues=Vu,e.matches=Ta,e.matchesProperty=Ca,e.memoize=pi,e.merge=Du,e.method=Ju,e.methodOf=Qu,e.mixin=Da,e.modArgs=Eu,e.negate=gi,e.omit=Yu,e.once=vi,e.pairs=ea,e.partial=Su,e.partialRight=Nu,e.partition=fu,e.pick=Xu,e.pluck=ei,e.property=za,e.propertyOf=La,e.pull=Tr,e.pullAt=Wo,e.range=Ia,e.rearg=Tu,e.reject=ni,e.remove=Cr,e.rest=Dr,e.restParam=mi,e.set=ra,e.shuffle=ii,e.slice=Pr,e.sortBy=ui,e.sortByAll=pu,e.sortByOrder=si,e.spread=yi,e.take=Ar,e.takeRight=zr,e.takeRightWhile=Lr,e.takeWhile=Ir,e.tap=Vr,e.throttle=xi,e.thru=Yr,e.times=Oa,e.toArray=Hi,e.toPlainObject=Wi,e.transform=ia,e.union=Ko,e.uniq=Or,e.unzip=Rr,e.unzipWith=jr,e.values=aa,e.valuesIn=oa,e.where=li,e.without=Jo,e.wrap=bi,e.xor=Br,e.zip=Qo,e.zipObject=qr,e.zipWith=tu,e.backflow=ku,e.collect=ti,e.compose=ku,e.each=ou,e.eachRight=uu,e.extend=Pu,e.iteratee=Ea,e.methods=Gi,e.object=qr,e.select=Kr,e.tail=Dr,e.unique=Or,Da(e,e),e.add=ja,e.attempt=Ku,e.camelCase=$u,e.capitalize=la,e.ceil=ts,e.clone=wi,e.cloneDeep=_i,e.deburr=ca,e.endsWith=fa,e.escape=ha,e.escapeRegExp=da,e.every=Gr,e.find=iu,e.findIndex=$o,e.findKey=Lu,e.findLast=au,e.findLastIndex=Uo,e.findLastKey=Iu,e.findWhere=Jr,e.first=wr,e.floor=es,e.get=Ki,e.gt=Mi,e.gte=ki,e.has=Ji,e.identity=Na,e.includes=Qr,e.indexOf=kr,e.inRange=ua,e.isArguments=Ei,e.isArray=Cu,e.isBoolean=Si,e.isDate=Ni,e.isElement=Ti,e.isEmpty=Ci,e.isEqual=Di,e.isError=Pi,e.isFinite=Ai,e.isFunction=zi,e.isMatch=Ii,e.isNaN=Oi,e.isNative=Ri,e.isNull=ji,e.isNumber=Bi,e.isObject=Li,e.isPlainObject=qi,e.isRegExp=Fi,e.isString=Vi,e.isTypedArray=Yi,e.isUndefined=Xi,e.kebabCase=Uu,e.last=Sr,e.lastIndexOf=Nr,e.lt=$i,e.lte=Ui,e.max=ns,e.min=rs,e.noConflict=Pa,e.noop=Aa,e.now=gu,e.pad=pa,e.padLeft=Hu,e.padRight=Wu,e.parseInt=ga,e.random=sa,e.reduce=hu,e.reduceRight=du,e.repeat=va,e.result=na,e.round=is,e.runInContext=k,e.size=ai,e.snakeCase=Zu,e.some=oi,e.sortedIndex=Zo,e.sortedLastIndex=Go,e.startCase=Gu,e.startsWith=ma,e.sum=Ba,e.template=ya,e.trim=xa,e.trimLeft=ba,e.trimRight=wa,e.trunc=_a,e.unescape=Ma,e.uniqueId=Ra,e.words=ka,e.all=Gr,e.any=oi,e.contains=Qr,e.eq=Di,e.detect=iu,e.foldl=hu,e.foldr=du,e.head=wr,e.include=Qr,e.inject=hu,Da(e,function(){var t={};return Pe(e,function(n,r){e.prototype[r]||(t[r]=n)}),t}(),!1),e.sample=ri,e.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return ri(e,t)}):ri(this.value())},e.VERSION=S,ee(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),ee(["drop","take"],function(t,e){K.prototype[t]=function(n){var r=this.__filtered__;if(r&&!e)return new K(this);n=null==n?1:_o(yo(n)||0,0);var i=this.clone();return r?i.__takeCount__=Mo(i.__takeCount__,n):i.__views__.push({size:n,type:t+(i.__dir__<0?"Right":"")}),i},K.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),ee(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n!=V;K.prototype[t]=function(t,e){var i=this.clone();return i.__iteratees__.push({iteratee:Fn(t,e,1),type:n}),i.__filtered__=i.__filtered__||r,i}}),ee(["first","last"],function(t,e){var n="take"+(e?"Right":"");K.prototype[t]=function(){return this[n](1).value()[0]}}),ee(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");K.prototype[t]=function(){return this.__filtered__?new K(this):this[n](1)}}),ee(["pluck","where"],function(t,e){var n=e?"filter":"map",r=e?Be:za;K.prototype[t]=function(t){return this[n](r(t))}}),K.prototype.compact=function(){return this.filter(Na)},K.prototype.reject=function(t,e){return t=Fn(t,e,1),this.filter(function(e){return!t(e)})},K.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return n.__filtered__&&(t>0||0>e)?new K(n):(0>t?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==E&&(e=+e||0,n=0>e?n.dropRight(-e):n.take(e-t)),n)},K.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},K.prototype.toArray=function(){return this.take(To)},Pe(K.prototype,function(t,n){var r=/^(?:filter|map|reject)|While$/.test(n),i=/^(?:first|last)$/.test(n),a=e[i?"take"+("last"==n?"Right":""):n];a&&(e.prototype[n]=function(){var e=i?[1]:arguments,n=this.__chain__,o=this.__wrapped__,u=!!this.__actions__.length,s=o instanceof K,l=e[0],c=s||Cu(o);c&&r&&"function"==typeof l&&1!=l.length&&(s=c=!1);var f=function(t){return i&&n?a(t,1)[0]:a.apply(E,le([t],e))},h={func:Yr,args:[f],thisArg:E},d=s&&!u;if(i&&!n)return d?(o=o.clone(),o.__actions__.push(h),t.call(o)):a.call(E,this.value())[0];if(!i&&c){o=d?o:new K(this);var p=t.apply(o,e);return p.__actions__.push(h),new y(p,n)}return this.thru(f)})}),ee(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var n=(/^(?:replace|split)$/.test(t)?Ja:Ga)[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return i&&!this.__chain__?n.apply(this.value(),t):this[r](function(e){return n.apply(e,t)})}}),Pe(K.prototype,function(t,n){var r=e[n];if(r){var i=r.name,a=Lo[i]||(Lo[i]=[]);a.push({name:n,func:r})}}),Lo[An(E,T).name]=[{name:"wrapper",func:E}],K.prototype.clone=et,K.prototype.reverse=rt,K.prototype.value=Xt,e.prototype.chain=Xr,e.prototype.commit=$r,e.prototype.concat=eu,e.prototype.plant=Ur,e.prototype.reverse=Hr,e.prototype.toString=Wr,e.prototype.run=e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=Zr,e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var E,S="3.10.1",N=1,T=2,C=4,D=8,P=16,A=32,z=64,L=128,I=256,O=30,R="...",j=150,B=16,q=200,F=1,V=2,Y="Expected a function",X="__lodash_placeholder__",$="[object Arguments]",U="[object Array]",H="[object Boolean]",W="[object Date]",Z="[object Error]",G="[object Function]",K="[object Map]",J="[object Number]",Q="[object Object]",tt="[object RegExp]",et="[object Set]",nt="[object String]",rt="[object WeakMap]",it="[object ArrayBuffer]",at="[object Float32Array]",ot="[object Float64Array]",ut="[object Int8Array]",st="[object Int16Array]",lt="[object Int32Array]",ct="[object Uint8Array]",ft="[object Uint8ClampedArray]",ht="[object Uint16Array]",dt="[object Uint32Array]",pt=/\b__p \+= '';/g,gt=/\b(__p \+=) '' \+/g,vt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mt=/&(?:amp|lt|gt|quot|#39|#96);/g,yt=/[&<>"'`]/g,xt=RegExp(mt.source),bt=RegExp(yt.source),wt=/<%-([\s\S]+?)%>/g,_t=/<%([\s\S]+?)%>/g,Mt=/<%=([\s\S]+?)%>/g,kt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Et=/^\w*$/,St=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Nt=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,Tt=RegExp(Nt.source),Ct=/[\u0300-\u036f\ufe20-\ufe23]/g,Dt=/\\(\\)?/g,Pt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,At=/\w*$/,zt=/^0[xX]/,Lt=/^\[object .+?Constructor\]$/,It=/^\d+$/,Ot=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Rt=/($^)/,jt=/['\n\r\u2028\u2029\\]/g,Bt=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),qt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Ft=-1,Vt={};Vt[at]=Vt[ot]=Vt[ut]=Vt[st]=Vt[lt]=Vt[ct]=Vt[ft]=Vt[ht]=Vt[dt]=!0,Vt[$]=Vt[U]=Vt[it]=Vt[H]=Vt[W]=Vt[Z]=Vt[G]=Vt[K]=Vt[J]=Vt[Q]=Vt[tt]=Vt[et]=Vt[nt]=Vt[rt]=!1;var Yt={};Yt[$]=Yt[U]=Yt[it]=Yt[H]=Yt[W]=Yt[at]=Yt[ot]=Yt[ut]=Yt[st]=Yt[lt]=Yt[J]=Yt[Q]=Yt[tt]=Yt[nt]=Yt[ct]=Yt[ft]=Yt[ht]=Yt[dt]=!0,Yt[Z]=Yt[G]=Yt[K]=Yt[et]=Yt[rt]=!1;var Xt={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},$t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ut={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Ht={"function":!0,object:!0},Wt={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Zt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Gt=Ht[typeof n]&&n&&!n.nodeType&&n,Kt=Ht[typeof e]&&e&&!e.nodeType&&e,Jt=Gt&&Kt&&"object"==typeof t&&t&&t.Object&&t,Qt=Ht[typeof self]&&self&&self.Object&&self,te=Ht[typeof window]&&window&&window.Object&&window,ee=Kt&&Kt.exports===Gt&&Gt,ne=Jt||te!==(this&&this.window)&&te||Qt||this,re=k();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ne._=re,define(function(){return re})):Gt&&Kt?ee?(Kt.exports=re)._=re:Gt._=re:ne._=re}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],59:[function(t,e,n){(function(){function t(t){function e(e,n,r,i,a,o){for(;a>=0&&o>a;a+=t){var u=i?i[a]:a;r=n(r,e[u],u,e)}return r}return function(n,r,i,a){r=w(r,a,4);var o=!T(n)&&b.keys(n),u=(o||n).length,s=t>0?0:u-1;return arguments.length<3&&(i=n[o?o[s]:s],s+=t),e(n,r,i,o,s,u)}}function r(t){return function(e,n,r){n=_(n,r);for(var i=N(e),a=t>0?0:i-1;a>=0&&i>a;a+=t)if(n(e[a],a,e))return a;return-1}}function i(t,e,n){return function(r,i,a){var o=0,u=N(r);if("number"==typeof a)t>0?o=a>=0?a:Math.max(a+u,o):u=a>=0?Math.min(a+1,u):a+u+1;else if(n&&a&&u)return a=n(r,i),r[a]===i?a:-1;if(i!==i)return a=e(h.call(r,o,u),b.isNaN),a>=0?a+o:-1;for(a=t>0?o:u-1;a>=0&&u>a;a+=t)if(r[a]===i)return a;return-1}}function a(t,e){var n=z.length,r=t.constructor,i=b.isFunction(r)&&r.prototype||l,a="constructor";for(b.has(t,a)&&!b.contains(e,a)&&e.push(a);n--;)a=z[n],a in t&&t[a]!==i[a]&&!b.contains(e,a)&&e.push(a)}var o=this,u=o._,s=Array.prototype,l=Object.prototype,c=Function.prototype,f=s.push,h=s.slice,d=l.toString,p=l.hasOwnProperty,g=Array.isArray,v=Object.keys,m=c.bind,y=Object.create,x=function(){},b=function(t){return t instanceof b?t:this instanceof b?void(this._wrapped=t):new b(t)};"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=b),n._=b):o._=b,b.VERSION="1.8.3";var w=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,a){return t.call(e,n,r,i,a)}}return function(){return t.apply(e,arguments)}},_=function(t,e,n){return null==t?b.identity:b.isFunction(t)?w(t,e,n):b.isObject(t)?b.matcher(t):b.property(t)};b.iteratee=function(t,e){return _(t,e,1/0)};var M=function(t,e){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var i=1;r>i;i++)for(var a=arguments[i],o=t(a),u=o.length,s=0;u>s;s++){var l=o[s];e&&void 0!==n[l]||(n[l]=a[l])}return n}},k=function(t){if(!b.isObject(t))return{};if(y)return y(t);x.prototype=t;var e=new x;return x.prototype=null,e},E=function(t){return function(e){return null==e?void 0:e[t]}},S=Math.pow(2,53)-1,N=E("length"),T=function(t){var e=N(t);return"number"==typeof e&&e>=0&&S>=e};b.each=b.forEach=function(t,e,n){e=w(e,n);var r,i;if(T(t))for(r=0,i=t.length;i>r;r++)e(t[r],r,t);else{var a=b.keys(t);for(r=0,i=a.length;i>r;r++)e(t[a[r]],a[r],t)}return t},b.map=b.collect=function(t,e,n){e=_(e,n);for(var r=!T(t)&&b.keys(t),i=(r||t).length,a=Array(i),o=0;i>o;o++){var u=r?r[o]:o;a[o]=e(t[u],u,t)}return a},b.reduce=b.foldl=b.inject=t(1),b.reduceRight=b.foldr=t(-1),b.find=b.detect=function(t,e,n){var r;return r=T(t)?b.findIndex(t,e,n):b.findKey(t,e,n),void 0!==r&&-1!==r?t[r]:void 0},b.filter=b.select=function(t,e,n){var r=[];return e=_(e,n),b.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},b.reject=function(t,e,n){return b.filter(t,b.negate(_(e)),n)},b.every=b.all=function(t,e,n){e=_(e,n);for(var r=!T(t)&&b.keys(t),i=(r||t).length,a=0;i>a;a++){var o=r?r[a]:a;if(!e(t[o],o,t))return!1}return!0},b.some=b.any=function(t,e,n){e=_(e,n);for(var r=!T(t)&&b.keys(t),i=(r||t).length,a=0;i>a;a++){var o=r?r[a]:a;if(e(t[o],o,t))return!0}return!1},b.contains=b.includes=b.include=function(t,e,n,r){return T(t)||(t=b.values(t)),("number"!=typeof n||r)&&(n=0),b.indexOf(t,e,n)>=0},b.invoke=function(t,e){var n=h.call(arguments,2),r=b.isFunction(e);return b.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},b.pluck=function(t,e){return b.map(t,b.property(e))},b.where=function(t,e){return b.filter(t,b.matcher(e))},b.findWhere=function(t,e){return b.find(t,b.matcher(e))},b.max=function(t,e,n){var r,i,a=-(1/0),o=-(1/0);if(null==e&&null!=t){t=T(t)?t:b.values(t);for(var u=0,s=t.length;s>u;u++)r=t[u],r>a&&(a=r)}else e=_(e,n),b.each(t,function(t,n,r){i=e(t,n,r),(i>o||i===-(1/0)&&a===-(1/0))&&(a=t,o=i)});return a},b.min=function(t,e,n){var r,i,a=1/0,o=1/0;if(null==e&&null!=t){t=T(t)?t:b.values(t);for(var u=0,s=t.length;s>u;u++)r=t[u],a>r&&(a=r)}else e=_(e,n),b.each(t,function(t,n,r){i=e(t,n,r),(o>i||i===1/0&&a===1/0)&&(a=t,o=i)});return a},b.shuffle=function(t){for(var e,n=T(t)?t:b.values(t),r=n.length,i=Array(r),a=0;r>a;a++)e=b.random(0,a),e!==a&&(i[a]=i[e]),i[e]=n[a];return i},b.sample=function(t,e,n){return null==e||n?(T(t)||(t=b.values(t)),t[b.random(t.length-1)]):b.shuffle(t).slice(0,Math.max(0,e))},b.sortBy=function(t,e,n){return e=_(e,n),b.pluck(b.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}),"value")};var C=function(t){return function(e,n,r){var i={};return n=_(n,r),b.each(e,function(r,a){var o=n(r,a,e);t(i,r,o)}),i}};b.groupBy=C(function(t,e,n){b.has(t,n)?t[n].push(e):t[n]=[e]}),b.indexBy=C(function(t,e,n){t[n]=e}),b.countBy=C(function(t,e,n){b.has(t,n)?t[n]++:t[n]=1}),b.toArray=function(t){return t?b.isArray(t)?h.call(t):T(t)?b.map(t,b.identity):b.values(t):[]},b.size=function(t){return null==t?0:T(t)?t.length:b.keys(t).length},b.partition=function(t,e,n){e=_(e,n);var r=[],i=[];return b.each(t,function(t,n,a){(e(t,n,a)?r:i).push(t)}),[r,i]},b.first=b.head=b.take=function(t,e,n){return null!=t?null==e||n?t[0]:b.initial(t,t.length-e):void 0},b.initial=function(t,e,n){return h.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},b.last=function(t,e,n){return null!=t?null==e||n?t[t.length-1]:b.rest(t,Math.max(0,t.length-e)):void 0},b.rest=b.tail=b.drop=function(t,e,n){return h.call(t,null==e||n?1:e)},b.compact=function(t){return b.filter(t,b.identity)};var D=function(t,e,n,r){for(var i=[],a=0,o=r||0,u=N(t);u>o;o++){var s=t[o];if(T(s)&&(b.isArray(s)||b.isArguments(s))){e||(s=D(s,e,n));var l=0,c=s.length;for(i.length+=c;c>l;)i[a++]=s[l++]}else n||(i[a++]=s)}return i};b.flatten=function(t,e){return D(t,e,!1)},b.without=function(t){return b.difference(t,h.call(arguments,1))},b.uniq=b.unique=function(t,e,n,r){b.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=_(n,r));for(var i=[],a=[],o=0,u=N(t);u>o;o++){var s=t[o],l=n?n(s,o,t):s;e?(o&&a===l||i.push(s),a=l):n?b.contains(a,l)||(a.push(l),i.push(s)):b.contains(i,s)||i.push(s)}return i},b.union=function(){return b.uniq(D(arguments,!0,!0))},b.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=N(t);i>r;r++){var a=t[r];if(!b.contains(e,a)){for(var o=1;n>o&&b.contains(arguments[o],a);o++);o===n&&e.push(a)}}return e},b.difference=function(t){var e=D(arguments,!0,!0,1);return b.filter(t,function(t){return!b.contains(e,t)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(t){for(var e=t&&b.max(t,N).length||0,n=Array(e),r=0;e>r;r++)n[r]=b.pluck(t,r);return n},b.object=function(t,e){for(var n={},r=0,i=N(t);i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},b.findIndex=r(1),b.findLastIndex=r(-1),b.sortedIndex=function(t,e,n,r){n=_(n,r,1);for(var i=n(e),a=0,o=N(t);o>a;){var u=Math.floor((a+o)/2);n(t[u])<i?a=u+1:o=u}return a},b.indexOf=i(1,b.findIndex,b.sortedIndex),b.lastIndexOf=i(-1,b.findLastIndex),b.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),a=0;r>a;a++,t+=n)i[a]=t;return i};var P=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var a=k(t.prototype),o=t.apply(a,i);return b.isObject(o)?o:a};b.bind=function(t,e){if(m&&t.bind===m)return m.apply(t,h.call(arguments,1));if(!b.isFunction(t))throw new TypeError("Bind must be called on a function");var n=h.call(arguments,2),r=function(){return P(t,r,e,this,n.concat(h.call(arguments)))};return r},b.partial=function(t){var e=h.call(arguments,1),n=function(){for(var r=0,i=e.length,a=Array(i),o=0;i>o;o++)a[o]=e[o]===b?arguments[r++]:e[o];for(;r<arguments.length;)a.push(arguments[r++]);return P(t,n,this,this,a)};return n},b.bindAll=function(t){var e,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(e=1;r>e;e++)n=arguments[e],t[n]=b.bind(t[n],t);return t},b.memoize=function(t,e){var n=function(r){var i=n.cache,a=""+(e?e.apply(this,arguments):r);return b.has(i,a)||(i[a]=t.apply(this,arguments)),i[a]};return n.cache={},n},b.delay=function(t,e){var n=h.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},b.defer=b.partial(b.delay,b,1),b.throttle=function(t,e,n){var r,i,a,o=null,u=0;n||(n={});var s=function(){u=n.leading===!1?0:b.now(),o=null,a=t.apply(r,i),o||(r=i=null)};return function(){var l=b.now();u||n.leading!==!1||(u=l);var c=e-(l-u);return r=this,i=arguments,0>=c||c>e?(o&&(clearTimeout(o),o=null),u=l,a=t.apply(r,i),o||(r=i=null)):o||n.trailing===!1||(o=setTimeout(s,c)),a}},b.debounce=function(t,e,n){var r,i,a,o,u,s=function(){var l=b.now()-o;e>l&&l>=0?r=setTimeout(s,e-l):(r=null,n||(u=t.apply(a,i),r||(a=i=null)))};return function(){a=this,i=arguments,o=b.now();var l=n&&!r;return r||(r=setTimeout(s,e)),l&&(u=t.apply(a,i),a=i=null),u}},b.wrap=function(t,e){return b.partial(e,t)},b.negate=function(t){return function(){return!t.apply(this,arguments)}},b.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},b.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},b.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=null),n}},b.once=b.partial(b.before,2);var A=!{toString:null}.propertyIsEnumerable("toString"),z=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(t){if(!b.isObject(t))return[];if(v)return v(t);var e=[];for(var n in t)b.has(t,n)&&e.push(n);return A&&a(t,e),e},b.allKeys=function(t){if(!b.isObject(t))return[];var e=[];for(var n in t)e.push(n);return A&&a(t,e),e},b.values=function(t){for(var e=b.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=t[e[i]];return r},b.mapObject=function(t,e,n){e=_(e,n);for(var r,i=b.keys(t),a=i.length,o={},u=0;a>u;u++)r=i[u],o[r]=e(t[r],r,t);return o},b.pairs=function(t){for(var e=b.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=[e[i],t[e[i]]];return r},b.invert=function(t){for(var e={},n=b.keys(t),r=0,i=n.length;i>r;r++)e[t[n[r]]]=n[r];return e},b.functions=b.methods=function(t){var e=[];for(var n in t)b.isFunction(t[n])&&e.push(n);return e.sort()},b.extend=M(b.allKeys),b.extendOwn=b.assign=M(b.keys),b.findKey=function(t,e,n){e=_(e,n);for(var r,i=b.keys(t),a=0,o=i.length;o>a;a++)if(r=i[a],e(t[r],r,t))return r},b.pick=function(t,e,n){var r,i,a={},o=t;if(null==o)return a;b.isFunction(e)?(i=b.allKeys(o),r=w(e,n)):(i=D(arguments,!1,!1,1),r=function(t,e,n){return e in n},o=Object(o));for(var u=0,s=i.length;s>u;u++){var l=i[u],c=o[l];r(c,l,o)&&(a[l]=c)}return a},b.omit=function(t,e,n){if(b.isFunction(e))e=b.negate(e);else{var r=b.map(D(arguments,!1,!1,1),String);e=function(t,e){return!b.contains(r,e)}}return b.pick(t,e,n)},b.defaults=M(b.allKeys,!0),b.create=function(t,e){var n=k(t);return e&&b.extendOwn(n,e),n},b.clone=function(t){return b.isObject(t)?b.isArray(t)?t.slice():b.extend({},t):t},b.tap=function(t,e){return e(t),t},b.isMatch=function(t,e){var n=b.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),a=0;r>a;a++){var o=n[a];if(e[o]!==i[o]||!(o in i))return!1}return!0};var L=function(t,e,n,r){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof b&&(t=t._wrapped),e instanceof b&&(e=e._wrapped);var i=d.call(t);if(i!==d.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var a="[object Array]"===i;if(!a){if("object"!=typeof t||"object"!=typeof e)return!1;var o=t.constructor,u=e.constructor;if(o!==u&&!(b.isFunction(o)&&o instanceof o&&b.isFunction(u)&&u instanceof u)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var s=n.length;s--;)if(n[s]===t)return r[s]===e;if(n.push(t),r.push(e),a){if(s=t.length,s!==e.length)return!1;for(;s--;)if(!L(t[s],e[s],n,r))return!1}else{var l,c=b.keys(t);if(s=c.length,b.keys(e).length!==s)return!1;for(;s--;)if(l=c[s],!b.has(e,l)||!L(t[l],e[l],n,r))return!1}return n.pop(),r.pop(),!0};b.isEqual=function(t,e){return L(t,e)},b.isEmpty=function(t){return null==t?!0:T(t)&&(b.isArray(t)||b.isString(t)||b.isArguments(t))?0===t.length:0===b.keys(t).length},b.isElement=function(t){return!(!t||1!==t.nodeType)},b.isArray=g||function(t){return"[object Array]"===d.call(t)},b.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){b["is"+t]=function(e){return d.call(e)==="[object "+t+"]"}}),b.isArguments(arguments)||(b.isArguments=function(t){return b.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(t){return"function"==typeof t||!1}),b.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},b.isNaN=function(t){return b.isNumber(t)&&t!==+t},b.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===d.call(t)},b.isNull=function(t){return null===t},b.isUndefined=function(t){return void 0===t},b.has=function(t,e){return null!=t&&p.call(t,e)},b.noConflict=function(){return o._=u,this},b.identity=function(t){return t},b.constant=function(t){return function(){return t}},b.noop=function(){},b.property=E,b.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},b.matcher=b.matches=function(t){return t=b.extendOwn({},t),function(e){return b.isMatch(e,t)}},b.times=function(t,e,n){var r=Array(Math.max(0,t));e=w(e,n,1);for(var i=0;t>i;i++)r[i]=e(i);return r},b.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},b.now=Date.now||function(){return(new Date).getTime()};var I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},O=b.invert(I),R=function(t){var e=function(e){return t[e]},n="(?:"+b.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};b.escape=R(I),b.unescape=R(O),b.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),b.isFunction(r)?r.call(t):r};var j=0;b.uniqueId=function(t){var e=++j+"";return t?t+e:e},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/(.)^/,q={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\u2028|\u2029/g,V=function(t){return"\\"+q[t]};b.template=function(t,e,n){!e&&n&&(e=n),e=b.defaults({},e,b.templateSettings);var r=RegExp([(e.escape||B).source,(e.interpolate||B).source,(e.evaluate||B).source].join("|")+"|$","g"),i=0,a="__p+='";t.replace(r,function(e,n,r,o,u){return a+=t.slice(i,u).replace(F,V),i=u+e.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),e}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var o=new Function(e.variable||"obj","_",a)}catch(u){throw u.source=a,u}var s=function(t){return o.call(this,t,b)},l=e.variable||"obj";return s.source="function("+l+"){\n"+a+"}",s},b.chain=function(t){var e=b(t);return e._chain=!0,e};var Y=function(t,e){return t._chain?b(e).chain():e};b.mixin=function(t){b.each(b.functions(t),function(e){var n=b[e]=t[e];b.prototype[e]=function(){var t=[this._wrapped];return f.apply(t,arguments),Y(this,n.apply(b,t))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=s[t];b.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],Y(this,n)}}),b.each(["concat","join","slice"],function(t){var e=s[t];b.prototype[t]=function(){return Y(this,e.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}).call(this)},{}]},{},[1]);